parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JiFC":[function(require,module,exports) {

},{}],"u7iP":[function(require,module,exports) {

},{"./..\\webfonts\\fa-regular-400.eot":[["fa-regular-400.026e27ac.eot","azGV"],"azGV"],"./..\\webfonts\\fa-regular-400.woff2":[["fa-regular-400.6efef91c.woff2","a5w2"],"a5w2"],"./..\\webfonts\\fa-regular-400.woff":[["fa-regular-400.4ac340ea.woff","U6wO"],"U6wO"],"./..\\webfonts\\fa-regular-400.ttf":[["fa-regular-400.e80b0dbc.ttf","cvKH"],"cvKH"],"./..\\webfonts\\fa-regular-400.svg":[["fa-regular-400.74a75de8.svg","tX9R"],"tX9R"]}],"DDda":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),t=e;exports.default=t;
},{}],"luEr":[function(require,module,exports) {
"use strict";function r(r,n,t){for(var u,o,i=t||e,f=0,a=r.length,s=!1;f<a;)(o=+i(r[u=f+(a-f>>1)],n))<0?f=u+1:(a=u,s=!o);return s?f:~f}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e){return r.indexOf(e)>=0}function t(r,e,n){var t=r.length;if(r[0]<=e)return 0;if(e<=r[t-1])return t-1;var u=void 0;if(n>0){for(u=1;u<t;++u)if(r[u]<e)return u-1}else if(n<0){for(u=1;u<t;++u)if(r[u]<=e)return u}else for(u=1;u<t;++u){if(r[u]==e)return u;if(r[u]<e)return r[u-1]-e<e-r[u]?u-1:u}return t-1}function u(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function o(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function i(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){for(var n,t=r.length>>>0,u=0;u<t;u++)if(e(n=r[u],u,r))return n;return null}function a(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function s(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function l(r,e){var n;return!r.every(function(t,u){return n=u,!e(t,u,r)})?n:-1}function v(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var o=u(r[n-1],e);return!(o>0||t&&0===o)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=r,exports.numberSafeCompareFunction=e,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=u,exports.extend=o,exports.remove=i,exports.find=f,exports.equals=a,exports.stableSort=s,exports.findIndex=l,exports.isSorted=v;
},{}],"RgA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=e,exports.FALSE=t,exports.VOID=n,exports.memoizeOne=o;var r=require("./array.js");function e(){return!0}function t(){return!1}function n(){}function o(e){var t,n,o,s=!1;return function(){var u=Array.prototype.slice.call(arguments);return s&&this===o&&(0,r.equals)(u,n)||(s=!0,o=this,n=u,t=e.apply(this,arguments)),t}}
},{"./array.js":"luEr"}],"KniQ":[function(require,module,exports) {
"use strict";function t(){return function(){throw new Error("Unimplemented abstract method.")}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abstract=t,exports.getUid=r,exports.VERSION=void 0;var e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}var o="6.4.3";exports.VERSION=o;
},{}],"ygGQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),r=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),e=function(e){function o(r){var o=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===t.VERSION?t.VERSION:"v"+t.VERSION.split("-")[0])+"/doc/errors/#"+r+" for details.";return(o=e.call(this,n)||this).code=r,o.name="AssertionError",o.message=n,o}return r(o,e),o}(Error),o=e;exports.default=o;
},{"./util.js":"KniQ"}],"fLG6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ygGQ"}],"P4eA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.reset=n,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=a,exports.rotate=i,exports.scale=c,exports.makeScale=p,exports.translate=f,exports.compose=x,exports.composeCssTransform=v,exports.invert=m,exports.makeInverse=l,exports.determinant=y,exports.toString=M;var r=require("./asserts.js"),t=new Array(6);function e(){return[1,0,0,1,0,0]}function n(r){return s(r,1,0,0,1,0,0)}function o(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],v=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*v+u,r[5]=n*x+s*v+a,r}function s(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function u(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function a(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function i(r,e){var n=Math.cos(e),u=Math.sin(e);return o(r,s(t,n,u,-u,n,0,0))}function c(r,e,n){return o(r,s(t,e,0,0,n,0,0))}function p(r,t,e){return s(r,t,0,0,e,0,0)}function f(r,e,n){return o(r,s(t,1,0,0,1,e,n))}function x(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function v(r,t,n,o,s,u,a){return M(x(e(),r,t,n,o,s,u,a))}function m(r){return l(r,r)}function l(t,e){var n=y(e);(0,r.assert)(0!==n,32);var o=e[0],s=e[1],u=e[2],a=e[3],i=e[4],c=e[5];return t[0]=a/n,t[1]=-s/n,t[2]=-u/n,t[3]=o/n,t[4]=(u*c-a*i)/n,t[5]=-(o*c-s*i)/n,t}function y(r){return r[0]*r[3]-r[1]*r[2]}function M(r){return"matrix("+r.join(", ")+")"}
},{"./asserts.js":"fLG6"}],"urGY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"bUAS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"QDir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=o,exports.buffer=a,exports.clone=i,exports.closestSquaredDistanceXY=s,exports.containsCoordinate=f,exports.containsExtent=p,exports.containsXY=c,exports.coordinateRelationship=x,exports.createEmpty=l,exports.createOrUpdate=d,exports.createOrUpdateEmpty=h,exports.createOrUpdateFromCoordinate=g,exports.createOrUpdateFromCoordinates=m,exports.createOrUpdateFromFlatCoordinates=M,exports.createOrUpdateFromRings=E,exports.equals=T,exports.approximatelyEquals=v,exports.extend=O,exports.extendCoordinate=C,exports.extendCoordinates=R,exports.extendFlatCoordinates=F,exports.extendRings=I,exports.extendXY=N,exports.forEachCorner=y,exports.getArea=B,exports.getBottomLeft=L,exports.getBottomRight=U,exports.getCenter=G,exports.getCorner=_,exports.getEnlargedArea=b,exports.getForViewAndSize=A,exports.getHeight=S,exports.getIntersectionArea=W,exports.getIntersection=q,exports.getMargin=H,exports.getSize=X,exports.getTopLeft=j,exports.getTopRight=V,exports.getWidth=P,exports.intersects=Y,exports.isEmpty=w,exports.returnOrUpdate=z,exports.scaleFromCenter=K,exports.intersectsSegment=D,exports.applyTransform=k,exports.wrapX=J;var t=n(require("./extent/Corner.js")),e=n(require("./extent/Relationship.js")),r=require("./asserts.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=l(),r=0,n=t.length;r<n;++r)C(e,t[r]);return e}function u(t,e,r){return d(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}function a(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function i(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function s(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function f(t,e){return c(t,e[0],e[1])}function p(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function c(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function x(t,r){var n=t[0],o=t[1],u=t[2],a=t[3],i=r[0],s=r[1],f=e.default.UNKNOWN;return i<n?f|=e.default.LEFT:i>u&&(f|=e.default.RIGHT),s<o?f|=e.default.BELOW:s>a&&(f|=e.default.ABOVE),f===e.default.UNKNOWN&&(f=e.default.INTERSECTING),f}function l(){return[1/0,1/0,-1/0,-1/0]}function d(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function h(t){return d(1/0,1/0,-1/0,-1/0,t)}function g(t,e){var r=t[0],n=t[1];return d(r,n,r,n,e)}function m(t,e){return R(h(e),t)}function M(t,e,r,n,o){return F(h(o),t,e,r,n)}function E(t,e){return I(h(e),t)}function T(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function v(t,e,r){return Math.abs(t[0]-e[0])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[3]-e[3])<r}function O(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function R(t,e){for(var r=0,n=e.length;r<n;++r)C(t,e[r]);return t}function F(t,e,r,n,o){for(;r<n;r+=o)N(t,e[r],e[r+1]);return t}function I(t,e){for(var r=0,n=e.length;r<n;++r)R(t,e[r]);return t}function N(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function y(t,e){var r;return(r=e(L(t)))?r:(r=e(U(t)))?r:(r=e(V(t)))?r:(r=e(j(t)))||!1}function B(t){var e=0;return w(t)||(e=P(t)*S(t)),e}function L(t){return[t[0],t[1]]}function U(t){return[t[2],t[1]]}function G(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function _(e,n){var o;return n===t.default.BOTTOM_LEFT?o=L(e):n===t.default.BOTTOM_RIGHT?o=U(e):n===t.default.TOP_LEFT?o=j(e):n===t.default.TOP_RIGHT?o=V(e):(0,r.assert)(!1,13),o}function b(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-n)}function A(t,e,r,n,o){var u=e*n[0]/2,a=e*n[1]/2,i=Math.cos(r),s=Math.sin(r),f=u*i,p=u*s,c=a*i,x=a*s,l=t[0],h=t[1],g=l-f+x,m=l-f-x,M=l+f-x,E=l+f+x,T=h-p-c,v=h-p+c,O=h+p+c,C=h+p-c;return d(Math.min(g,m,M,E),Math.min(T,v,O,C),Math.max(g,m,M,E),Math.max(T,v,O,C),o)}function S(t){return t[3]-t[1]}function W(t,e){return B(q(t,e))}function q(t,e,r){var n=r||l();return Y(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):h(n),n}function H(t){return P(t)+S(t)}function X(t){return[t[2]-t[0],t[3]-t[1]]}function j(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function P(t){return t[2]-t[0]}function Y(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function w(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function D(t,r,n){var o=!1,u=x(t,r),a=x(t,n);if(u===e.default.INTERSECTING||a===e.default.INTERSECTING)o=!0;else{var i=t[0],s=t[1],f=t[2],p=t[3],c=r[0],l=r[1],d=n[0],h=n[1],g=(h-l)/(d-c),m=void 0,M=void 0;a&e.default.ABOVE&&!(u&e.default.ABOVE)&&(o=(m=d-(h-p)/g)>=i&&m<=f),o||!(a&e.default.RIGHT)||u&e.default.RIGHT||(o=(M=h-(d-f)*g)>=s&&M<=p),o||!(a&e.default.BELOW)||u&e.default.BELOW||(o=(m=d-(h-s)/g)>=i&&m<=f),o||!(a&e.default.LEFT)||u&e.default.LEFT||(o=(M=h-(d-i)*g)>=s&&M<=p)}return o}function k(t,e,r,n){var o=[];if(n>1)for(var a=t[2]-t[0],i=t[3]-t[1],s=0;s<n;++s)o.push(t[0]+a*s/n,t[1],t[2],t[1]+i*s/n,t[2]-a*s/n,t[3],t[0],t[3]-i*s/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var f=[],p=[],c=(s=0,o.length);s<c;s+=2)f.push(o[s]),p.push(o[s+1]);return u(f,p,r)}function J(t,e){var r=e.getExtent(),n=G(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var o=P(r),u=Math.floor((n[0]-r[0])/o)*o;t[0]-=u,t[2]-=u}return t}
},{"./extent/Corner.js":"urGY","./extent/Relationship.js":"bUAS","./asserts.js":"fLG6"}],"B96G":[function(require,module,exports) {
"use strict";function r(r,t,e){return Math.min(Math.max(r,t),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=r,exports.squaredSegmentDistance=o,exports.squaredDistance=n,exports.solveLinearSystem=a,exports.toDegrees=s,exports.toRadians=u,exports.modulo=i,exports.lerp=c,exports.log2=exports.cosh=void 0;var t="cosh"in Math?Math.cosh:function(r){var t=Math.exp(r);return(t+1/t)/2};exports.cosh=t;var e="log2"in Math?Math.log2:function(r){return Math.log(r)*Math.LOG2E};function o(r,t,e,o,a,s){var u=a-e,i=s-o;if(0!==u||0!==i){var c=((r-e)*u+(t-o)*i)/(u*u+i*i);c>1?(e=a,o=s):c>0&&(e+=u*c,o+=i*c)}return n(r,t,e,o)}function n(r,t,e,o){var n=e-r,a=o-t;return n*n+a*a}function a(r){for(var t=r.length,e=0;e<t;e++){for(var o=e,n=Math.abs(r[e][e]),a=e+1;a<t;a++){var s=Math.abs(r[a][e]);s>n&&(n=s,o=a)}if(0===n)return null;var u=r[o];r[o]=r[e],r[e]=u;for(var i=e+1;i<t;i++)for(var c=-r[i][e]/r[e][e],f=e;f<t+1;f++)e==f?r[i][f]=0:r[i][f]+=c*r[e][f]}for(var h=new Array(t),v=t-1;v>=0;v--){h[v]=r[v][t]/r[v][v];for(var p=v-1;p>=0;p--)r[p][t]-=r[p][v]*h[v]}return h}function s(r){return 180*r/Math.PI}function u(r){return r*Math.PI/180}function i(r,t){var e=r%t;return e*t<0?e+t:e}function c(r,t,e){return r+e*(t-r)}exports.log2=e;
},{}],"eucy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asString=s,exports.asArray=i,exports.normalize=p,exports.toString=c,exports.isStringColor=l,exports.fromString=void 0;var r=require("./asserts.js"),e=require("./math.js"),t=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(r){return"string"==typeof r?r:c(r)}function a(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}var o=function(){var r={},e=0;return function(t){var n;if(r.hasOwnProperty(t))n=r[t];else{if(e>=1024){var s=0;for(var a in r)0==(3&s++)&&(delete r[a],--e)}n=u(t),r[t]=n,++e}return n}}();function i(r){return Array.isArray(r)?r:o(r)}function u(e){var s,o,i,u,c;if(n.exec(e)&&(e=a(e)),t.exec(e)){var l=e.length-1,f=void 0;f=l<=4?1:2;var d=4===l||8===l;s=parseInt(e.substr(1+0*f,f),16),o=parseInt(e.substr(1+1*f,f),16),i=parseInt(e.substr(1+2*f,f),16),u=d?parseInt(e.substr(1+3*f,f),16):255,1==f&&(s=(s<<4)+s,o=(o<<4)+o,i=(i<<4)+i,d&&(u=(u<<4)+u)),c=[s,o,i,u/255]}else 0==e.indexOf("rgba(")?p(c=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((c=e.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,e.clamp)(r[0]+.5|0,0,255),r[1]=(0,e.clamp)(r[1]+.5|0,0,255),r[2]=(0,e.clamp)(r[2]+.5|0,0,255),r[3]=(0,e.clamp)(r[3],0,1),r}function c(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var n=r[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+t+","+n+","+(void 0===r[3]?1:r[3])+")"}function l(r){return n.test(r)&&(r=a(r)),t.test(r)||0===r.indexOf("rgba(")||0===r.indexOf("rgb(")}exports.fromString=o;
},{"./asserts.js":"fLG6","./math.js":"B96G"}],"V0oB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js"),t=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,c){var r=i(e,t,c);return r in this.cache_?this.cache_[r]:null},e.prototype.set=function(e,t,c,r){var a=i(e,t,c);this.cache_[a]=r,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function i(t,i,c){return i+":"+t+":"+(c?(0,e.asString)(c):"null")}var c=t;exports.default=c;var r=new t;exports.shared=r;
},{"../color.js":"eucy"}],"fKNg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=o,exports.preventDefault=e,exports.default=void 0;var t=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function o(t){t.stopPropagation()}function e(t){t.preventDefault()}var p=t;exports.default=p;
},{}],"zehl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"mH6q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.isEmpty=n,exports.getValues=exports.assign=void 0;var e="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var s=arguments[n];if(null!=s)for(var u in s)s.hasOwnProperty(u)&&(t[u]=s[u])}return t};function r(e){for(var r in e)delete e[r]}exports.assign=e;var t="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function n(e){var r;for(r in e)return!1;return!r}exports.getValues=t;
},{}],"CR4Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../Disposable.js")),t=s(require("./Event.js")),n=require("../functions.js"),i=require("../obj.js");function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function s(t){var n=e.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return r(s,e),s.prototype.addEventListener=function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);-1===i.indexOf(t)&&i.push(t)}},s.prototype.dispatchEvent=function(e){var i="string"==typeof e?new t.default(e):e,s=i.type;i.target||(i.target=this.eventTarget_||this);var r,o=this.listeners_&&this.listeners_[s];if(o){var l=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});s in l||(l[s]=0,a[s]=0),++l[s];for(var p=0,u=o.length;p<u;++p)if(!1===(r="handleEvent"in o[p]?o[p].handleEvent(i):o[p].call(this,i))||i.propagationStopped){r=!1;break}if(--l[s],0===l[s]){var h=a[s];for(delete a[s];h--;)this.removeEventListener(s,n.VOID);delete l[s]}return r}},s.prototype.disposeInternal=function(){this.listeners_&&(0,i.clear)(this.listeners_)},s.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},s.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},s.prototype.removeEventListener=function(e,t){var i=this.listeners_&&this.listeners_[e];if(i){var s=i.indexOf(t);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=n.VOID,++this.pendingRemovals_[e]):(i.splice(s,1),0===i.length&&delete this.listeners_[e]))}},s}(e.default),l=o;exports.default=l;
},{"../Disposable.js":"DDda","./Event.js":"fKNg","../functions.js":"RgA2","../obj.js":"mH6q"}],"C8cu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"UqnM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=r,exports.unlistenByKey=n;var e=require("./obj.js");function t(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var s=r;r=function(){e.removeEventListener(t,r),s.apply(this,arguments)}}var o={target:e,type:t,listener:r};return e.addEventListener(t,r),o}function r(e,r,n,i){return t(e,r,n,i,!0)}function n(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"mH6q"}],"IdSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=s,exports.default=void 0;var e=n(require("./events/Target.js")),t=n(require("./events/EventType.js")),r=require("./events.js");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(e){function n(){var t=e.call(this)||this;return t.revision_=0,t}return o(n,e),n.prototype.changed=function(){++this.revision_,this.dispatchEvent(t.default.CHANGE)},n.prototype.getRevision=function(){return this.revision_},n.prototype.on=function(e,t){if(Array.isArray(e)){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=(0,r.listen)(this,e[i],t);return o}return(0,r.listen)(this,e,t)},n.prototype.once=function(e,t){var n;if(Array.isArray(e)){var o=e.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=(0,r.listenOnce)(this,e[i],t)}else n=(0,r.listenOnce)(this,e,t);return t.ol_key=n,n},n.prototype.un=function(e,t){var r=t.ol_key;if(r)s(r);else if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)},n}(e.default);function s(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)(0,r.unlistenByKey)(e[t]);else(0,r.unlistenByKey)(e)}var u=i;exports.default=u;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./events.js":"UqnM"}],"PhPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=v,exports.default=exports.ObjectEvent=void 0;var t=o(require("./events/Event.js")),e=o(require("./ObjectEventType.js")),r=o(require("./Observable.js")),s=require("./obj.js"),n=require("./util.js");function o(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),u=function(t){function e(e,r,s){var n=t.call(this,e)||this;return n.key=r,n.oldValue=s,n}return i(e,t),e}(t.default);exports.ObjectEvent=u;var a=function(t){function r(e){var r=t.call(this)||this;return(0,n.getUid)(r),r.values_=null,void 0!==e&&r.setProperties(e),r}return i(r,t),r.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},r.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},r.prototype.getProperties=function(){return this.values_&&(0,s.assign)({},this.values_)||{}},r.prototype.hasProperties=function(){return!!this.values_},r.prototype.notify=function(t,r){var s;s=v(t),this.dispatchEvent(new u(s,t,r)),s=e.default.PROPERTYCHANGE,this.dispatchEvent(new u(s,t,r))},r.prototype.set=function(t,e,r){var s=this.values_||(this.values_={});if(r)s[t]=e;else{var n=s[t];s[t]=e,n!==e&&this.notify(t,n)}},r.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},r.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],(0,s.isEmpty)(this.values_)&&(this.values_=null),e||this.notify(t,r)}},r}(r.default),p={};function v(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}var l=a;exports.default=l;
},{"./events/Event.js":"fKNg","./ObjectEventType.js":"zehl","./Observable.js":"IdSm","./obj.js":"mH6q","./util.js":"KniQ"}],"HbeD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};exports.default=e;
},{}],"T6DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../Object.js")),e=r(require("./Property.js")),o=require("../util.js"),i=require("../asserts.js"),n=require("../obj.js"),s=require("../math.js");function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),u=function(t){function r(o){var s=t.call(this)||this,r=(0,n.assign)({},o);return r[e.default.OPACITY]=void 0!==o.opacity?o.opacity:1,(0,i.assert)("number"==typeof r[e.default.OPACITY],64),r[e.default.VISIBLE]=void 0===o.visible||o.visible,r[e.default.Z_INDEX]=o.zIndex,r[e.default.MAX_RESOLUTION]=void 0!==o.maxResolution?o.maxResolution:1/0,r[e.default.MIN_RESOLUTION]=void 0!==o.minResolution?o.minResolution:0,r[e.default.MIN_ZOOM]=void 0!==o.minZoom?o.minZoom:-1/0,r[e.default.MAX_ZOOM]=void 0!==o.maxZoom?o.maxZoom:1/0,s.className_=void 0!==r.className?o.className:"ol-layer",delete r.className,s.setProperties(r),s.state_=null,s}return a(r,t),r.prototype.getClassName=function(){return this.className_},r.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},o=this.getZIndex();return e.opacity=(0,s.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==o?o:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},r.prototype.getLayersArray=function(t){return(0,o.abstract)()},r.prototype.getLayerStatesArray=function(t){return(0,o.abstract)()},r.prototype.getExtent=function(){return this.get(e.default.EXTENT)},r.prototype.getMaxResolution=function(){return this.get(e.default.MAX_RESOLUTION)},r.prototype.getMinResolution=function(){return this.get(e.default.MIN_RESOLUTION)},r.prototype.getMinZoom=function(){return this.get(e.default.MIN_ZOOM)},r.prototype.getMaxZoom=function(){return this.get(e.default.MAX_ZOOM)},r.prototype.getOpacity=function(){return this.get(e.default.OPACITY)},r.prototype.getSourceState=function(){return(0,o.abstract)()},r.prototype.getVisible=function(){return this.get(e.default.VISIBLE)},r.prototype.getZIndex=function(){return this.get(e.default.Z_INDEX)},r.prototype.setExtent=function(t){this.set(e.default.EXTENT,t)},r.prototype.setMaxResolution=function(t){this.set(e.default.MAX_RESOLUTION,t)},r.prototype.setMinResolution=function(t){this.set(e.default.MIN_RESOLUTION,t)},r.prototype.setMaxZoom=function(t){this.set(e.default.MAX_ZOOM,t)},r.prototype.setMinZoom=function(t){this.set(e.default.MIN_ZOOM,t)},r.prototype.setOpacity=function(t){(0,i.assert)("number"==typeof t,64),this.set(e.default.OPACITY,t)},r.prototype.setVisible=function(t){this.set(e.default.VISIBLE,t)},r.prototype.setZIndex=function(t){this.set(e.default.Z_INDEX,t)},r.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},r}(t.default),l=u;exports.default=l;
},{"../Object.js":"PhPh","./Property.js":"HbeD","../util.js":"KniQ","../asserts.js":"fLG6","../obj.js":"mH6q","../math.js":"B96G"}],"z39m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"iC8j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};exports.default=e;
},{}],"GCgv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inView=l,exports.default=void 0;var e=p(require("./Base.js")),t=p(require("../events/EventType.js")),r=p(require("./Property.js")),n=p(require("../render/EventType.js")),o=p(require("../source/State.js")),s=require("../asserts.js"),u=require("../obj.js"),i=require("../Object.js"),a=require("../events.js");function p(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(e){function p(t){var n=this,o=(0,u.assign)({},t);delete o.source,(n=e.call(this,o)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addEventListener((0,i.getChangeEventType)(r.default.SOURCE),n.handleSourcePropertyChange_);var s=t.source?t.source:null;return n.setSource(s),n}return c(p,e),p.prototype.getLayersArray=function(e){var t=e||[];return t.push(this),t},p.prototype.getLayerStatesArray=function(e){var t=e||[];return t.push(this.getLayerState()),t},p.prototype.getSource=function(){return this.get(r.default.SOURCE)||null},p.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():o.default.UNDEFINED},p.prototype.handleSourceChange_=function(){this.changed()},p.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,a.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=(0,a.listen)(e,t.default.CHANGE,this.handleSourceChange_,this)),this.changed()},p.prototype.getFeatures=function(e){return this.renderer_.getFeatures(e)},p.prototype.render=function(e,t){var r=this.getRenderer();if(r.prepareFrame(e))return r.renderFrame(e,t)},p.prototype.setMap=function(e){this.mapPrecomposeKey_&&((0,a.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&((0,a.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=(0,a.listen)(e,n.default.PRECOMPOSE,function(e){var t=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,s.assert)(!t.some(function(e){return e.layer===r.layer}),67),t.push(r)},this),this.mapRenderKey_=(0,a.listen)(this,t.default.CHANGE,e.render,e),this.changed())},p.prototype.setSource=function(e){this.set(r.default.SOURCE,e)},p.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},p.prototype.hasRenderer=function(){return!!this.renderer_},p.prototype.createRenderer=function(){return null},p.prototype.disposeInternal=function(){this.setSource(null),e.prototype.disposeInternal.call(this)},p}(e.default);function l(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var y=h;exports.default=y;
},{"./Base.js":"T6DQ","../events/EventType.js":"C8cu","./Property.js":"HbeD","../render/EventType.js":"z39m","../source/State.js":"iC8j","../asserts.js":"fLG6","../obj.js":"mH6q","../Object.js":"PhPh","../events.js":"UqnM"}],"lmV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};exports.default=e;
},{}],"LQER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(){}return t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},t}(),o=t;exports.default=o;
},{}],"V5XN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"eucy"}],"f3Nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PASSIVE_EVENT_LISTENERS=exports.IMAGE_DECODE=exports.WORKER_OFFSCREEN_CANVAS=exports.DEVICE_PIXEL_RATIO=exports.MAC=exports.WEBKIT=exports.SAFARI=exports.FIREFOX=void 0;var e="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==e.indexOf("firefox");exports.FIREFOX=r;var o=-1!==e.indexOf("safari")&&-1==e.indexOf("chrom");exports.SAFARI=o;var t=-1!==e.indexOf("webkit")&&-1==e.indexOf("edge");exports.WEBKIT=t;var n=-1!==e.indexOf("macintosh");exports.MAC=n;var i="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=i;var E="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=E;var a="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=a;var s=function(){var e=!1;try{var r=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,r),window.removeEventListener("_",null,r)}catch(o){}return e}();exports.PASSIVE_EVENT_LISTENERS=s;
},{}],"Xno5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerWidth=r,exports.outerHeight=n,exports.replaceNode=o,exports.removeNode=a,exports.removeChildren=i,exports.replaceChildren=s;var e=require("./has.js");function t(t,r,n){var o=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas");return t&&(o.width=t),r&&(o.height=r),o.getContext("2d")}function r(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function n(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function a(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function i(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function s(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],a=t[n];if(!o&&!a)break;o!==a&&(o?a?e.insertBefore(a,o):(e.removeChild(o),--n):e.appendChild(a))}}
},{"./has.js":"f3Nv"}],"HgMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_COLLAPSED=exports.CLASS_CONTROL=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var r="ol-selectable";exports.CLASS_SELECTABLE=r;var t="ol-unselectable";exports.CLASS_UNSELECTABLE=t;var s="ol-unsupported";exports.CLASS_UNSUPPORTED=s;var l="ol-control";exports.CLASS_CONTROL=l;var a="ol-collapsed";exports.CLASS_COLLAPSED=a;var o=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),S=["style","variant","weight","size","lineHeight","family"],i=function(e){var r=e.match(o);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},s=0,l=S.length;s<l;++s){var a=r[s+1];void 0!==a&&(t[S[s]]=a)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"iAG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidth=w,exports.measureAndCacheTextWidth=O,exports.measureTextWidths=H,exports.rotateAtOffset=I,exports.drawImageOrLabel=M,exports.createTransformString=_,exports.measureTextHeight=exports.registerFont=exports.textHeights=exports.labelCache=exports.checkedFonts=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0;var e=i(require("../Object.js")),t=i(require("../events/Target.js")),r=require("../has.js"),a=require("../obj.js"),n=require("../dom.js"),s=require("../css.js"),o=require("../transform.js");function i(e){return e&&e.__esModule?e:{default:e}}var l="10px sans-serif";exports.defaultFont=l;var u="#000";exports.defaultFillStyle=u;var f="round";exports.defaultLineCap=f;var d=[];exports.defaultLineDash=d;var p=0;exports.defaultLineDashOffset=p;var x="round";exports.defaultLineJoin=x;var c=10;exports.defaultMiterLimit=c;var v="#000";exports.defaultStrokeStyle=v;var g="center";exports.defaultTextAlign=g;var h="middle";exports.defaultTextBaseline=h;var m=[0,0,0,0];exports.defaultPadding=m;var y=1;exports.defaultLineWidth=y;var C=new e.default;exports.checkedFonts=C;var L=new t.default;exports.labelCache=L,L.setSize=function(){console.warn("labelCache is deprecated.")};var T,F=null,S={};exports.textHeights=S;var b=function(){var e,t,r=100,n="32px ",o=["monospace","serif"],i=o.length,l="wmytzilWMYTZIL@#/&?$%10";function u(e,r,a){for(var s=!0,u=0;u<i;++u){var f=o[u];if(t=w(e+" "+r+" "+n+f,l),a!=f){var d=w(e+" "+r+" "+n+a+","+f,l);s=s&&d!=t}}return!!s}function f(){for(var t=!0,n=C.getKeys(),s=0,o=n.length;s<o;++s){var i=n[s];C.get(i)<r&&(u.apply(this,i.split("\n"))?((0,a.clear)(S),F=null,T=void 0,C.set(i,r)):(C.set(i,C.get(i)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var a=(0,s.getFontParameters)(t);if(a)for(var n=a.families,o=0,i=n.length;o<i;++o){var l=n[o],d=a.style+"\n"+a.weight+"\n"+l;void 0===C.get(d)&&(C.set(d,r,!0),u(a.style,a.weight,l)||(C.set(d,0,!0),void 0===e&&(e=setInterval(f,32))))}}}();exports.registerFont=b;var A=function(){var e,t=S;return function(a){var n=t[a];if(null==n)if(r.WORKER_OFFSCREEN_CANVAS){var o=(0,s.getFontParameters)(a),i=j(a,"Žg"),l=isNaN(Number(o.lineHeight))?1.2:Number(o.lineHeight);S[a]=l*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=a,document.body.appendChild(e),n=e.offsetHeight,t[a]=n,document.body.removeChild(e);return n}}();function j(e,t){return F||(F=(0,n.createCanvasContext2D)(1,1)),e!=T&&(F.font=e,T=F.font),F.measureText(t)}function w(e,t){return j(e,t).width}function O(e,t,r){if(t in r)return r[t];var a=w(e,t);return r[t]=a,a}function H(e,t,r){for(var a=t.length,n=0,s=0;s<a;++s){var o=w(e,t[s]);n=Math.max(n,o),r.push(o)}return n}function I(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}function M(e,t,r,a,n,s,o,i,l,u,f){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.setTransform.apply(e,t),a.contextInstructions?(e.translate(l,u),e.scale(f[0],f[1]),N(a,e)):f[0]<0||f[1]<0?(e.translate(l,u),e.scale(f[0],f[1]),e.drawImage(a,n,s,o,i,0,0,o,i)):e.drawImage(a,n,s,o,i,l,u,o*f[0],i*f[1]),e.restore()}function N(e,t){for(var r=e.contextInstructions,a=0,n=r.length;a<n;a+=2)Array.isArray(r[a+1])?t[r[a]].apply(t,r[a+1]):t[r[a]]=r[a+1]}exports.measureTextHeight=A;var W=null;function _(e){return r.WORKER_OFFSCREEN_CANVAS?(0,o.toString)(e):(W||(W=(0,n.createCanvasContext2D)(1,1).canvas),W.style.transform=(0,o.toString)(e),W.style.transform)}
},{"../Object.js":"PhPh","../events/Target.js":"CR4Y","../has.js":"f3Nv","../obj.js":"mH6q","../dom.js":"Xno5","../css.js":"HgMV","../transform.js":"P4eA"}],"LGwr":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){for(var f=a||[],s=0,l=t;l<e;l+=n){var u=r[l],v=r[l+1];f[s++]=o[0]*u+o[2]*v+o[4],f[s++]=o[1]*u+o[3]*v+o[5]}return a&&f.length!=s&&(f.length=s),f}function t(r,t,e,n,o,a,f){for(var s=f||[],l=Math.cos(o),u=Math.sin(o),v=a[0],h=a[1],c=0,g=t;g<e;g+=n){var i=r[g]-v,p=r[g+1]-h;s[c++]=v+i*l-p*u,s[c++]=h+i*u+p*l;for(var x=g+2;x<g+n;++x)s[c++]=r[x]}return f&&s.length!=c&&(s.length=c),s}function e(r,t,e,n,o,a,f,s){for(var l=s||[],u=f[0],v=f[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;l[h++]=u+o*g,l[h++]=v+a*i;for(var p=c+2;p<c+n;++p)l[h++]=r[p]}return s&&l.length!=h&&(l.length=h),l}function n(r,t,e,n,o,a,f){for(var s=f||[],l=0,u=t;u<e;u+=n){s[l++]=r[u]+o,s[l++]=r[u+1]+a;for(var v=u+2;v<u+n;++v)s[l++]=r[v]}return f&&s.length!=l&&(s.length=l),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=r,exports.rotate=t,exports.scale=e,exports.translate=n;
},{}],"yZx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.METERS_PER_UNIT=void 0;var E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e={};exports.METERS_PER_UNIT=e,e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937;var t=E;exports.default=t;
},{}],"WUar":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js"),n=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),i=n;exports.default=i;
},{"./Units.js":"yZx6"}],"lohs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEPSG4326=f,exports.toEPSG4326=E,exports.PROJECTIONS=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0;var t=o(require("./Projection.js")),r=o(require("./Units.js")),e=require("../math.js");function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),s=6378137;exports.RADIUS=s;var a=Math.PI*s;exports.HALF_SIZE=a;var u=[-a,-a,a,a];exports.EXTENT=u;var i=[-180,-85,180,85];exports.WORLD_EXTENT=i;var c=function(t){function o(o){return t.call(this,{code:o,units:r.default.METERS,extent:u,global:!0,worldExtent:i,getPointResolution:function(t,r){return t/(0,e.cosh)(r[1]/s)}})||this}return n(o,t),o}(t.default),p=[new c("EPSG:3857"),new c("EPSG:102100"),new c("EPSG:102113"),new c("EPSG:900913"),new c("urn:ogc:def:crs:EPSG:6.18:3:3857"),new c("urn:ogc:def:crs:EPSG::3857"),new c("http://www.opengis.net/gml/srs/epsg.xml#3857")];function f(t,r,e){var o=t.length,n=e>1?e:2,u=r;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=a,c=0;c<o;c+=n){u[c]=i*t[c]/180;var p=s*Math.log(Math.tan(Math.PI*(+t[c+1]+90)/360));p>i?p=i:p<-i&&(p=-i),u[c+1]=p}return u}function E(t,r,e){var o=t.length,n=e>1?e:2,u=r;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=0;i<o;i+=n)u[i]=180*t[i]/a,u[i+1]=360*Math.atan(Math.exp(t[i+1]/s))/Math.PI-90;return u}exports.PROJECTIONS=p;
},{"./Projection.js":"WUar","./Units.js":"yZx6","../math.js":"B96G"}],"ZniN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var e=r(require("./Projection.js")),t=r(require("./Units.js"));function r(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=6378137;exports.RADIUS=o;var u=[-180,-90,180,90];exports.EXTENT=u;var s=Math.PI*o/180;exports.METERS_PER_UNIT=s;var c=function(e){function r(r,n){return e.call(this,{code:r,units:t.default.DEGREES,extent:u,axisOrientation:n,global:!0,metersPerUnit:s,worldExtent:u})||this}return n(r,e),r}(e.default),i=[new c("CRS:84"),new c("EPSG:4326","neu"),new c("urn:ogc:def:crs:EPSG::4326","neu"),new c("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new c("urn:ogc:def:crs:OGC:1.3:CRS84"),new c("urn:ogc:def:crs:OGC:2:84"),new c("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new c("urn:x-ogc:def:crs:EPSG:4326","neu")];exports.PROJECTIONS=i;
},{"./Projection.js":"WUar","./Units.js":"yZx6"}],"tlE8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=t,exports.get=r,exports.add=n;var e={};function t(){e={}}function r(t){return e[t]||null}function n(t,r){e[t]=r}
},{}],"uhlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.add=o,exports.remove=n,exports.get=i;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"mH6q"}],"q4ER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=s,exports.getLength=n,exports.getArea=u,exports.offset=h,exports.DEFAULT_RADIUS=void 0;var e=a(require("./geom/GeometryType.js")),t=require("./math.js");function a(e){return e&&e.__esModule?e:{default:e}}var r=6371008.8;function s(e,a,s){var o=s||r,n=(0,t.toRadians)(e[1]),i=(0,t.toRadians)(a[1]),u=(i-n)/2,h=(0,t.toRadians)(a[0]-e[0])/2,f=Math.sin(u)*Math.sin(u)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(i);return 2*o*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function o(e,t){for(var a=0,r=0,o=e.length;r<o-1;++r)a+=s(e[r],e[r+1],t);return a}function n(t,a){var s=a||{},i=s.radius||r,u=s.projection||"EPSG:3857",h=t.getType();h!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(u,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case e.default.POINT:case e.default.MULTI_POINT:break;case e.default.LINE_STRING:case e.default.LINEAR_RING:I=o(f=t.getCoordinates(),i);break;case e.default.MULTI_LINE_STRING:case e.default.POLYGON:for(M=0,c=(f=t.getCoordinates()).length;M<c;++M)I+=o(f[M],i);break;case e.default.MULTI_POLYGON:for(M=0,c=(f=t.getCoordinates()).length;M<c;++M)for(l=0,g=(d=f[M]).length;l<g;++l)I+=o(d[l],i);break;case e.default.GEOMETRY_COLLECTION:var L=t.getGeometries();for(M=0,c=L.length;M<c;++M)I+=n(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function i(e,a){for(var r=0,s=e.length,o=e[s-1][0],n=e[s-1][1],i=0;i<s;i++){var u=e[i][0],h=e[i][1];r+=(0,t.toRadians)(u-o)*(2+Math.sin((0,t.toRadians)(n))+Math.sin((0,t.toRadians)(h))),o=u,n=h}return r*a*a/2}function u(t,a){var s=a||{},o=s.radius||r,n=s.projection||"EPSG:3857",h=t.getType();h!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(n,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case e.default.POINT:case e.default.MULTI_POINT:case e.default.LINE_STRING:case e.default.MULTI_LINE_STRING:case e.default.LINEAR_RING:break;case e.default.POLYGON:for(f=t.getCoordinates(),I=Math.abs(i(f[0],o)),M=1,c=f.length;M<c;++M)I-=Math.abs(i(f[M],o));break;case e.default.MULTI_POLYGON:for(M=0,c=(f=t.getCoordinates()).length;M<c;++M)for(d=f[M],I+=Math.abs(i(d[0],o)),l=1,g=d.length;l<g;++l)I-=Math.abs(i(d[l],o));break;case e.default.GEOMETRY_COLLECTION:var L=t.getGeometries();for(M=0,c=L.length;M<c;++M)I+=u(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function h(e,a,s,o){var n=o||r,i=(0,t.toRadians)(e[1]),u=(0,t.toRadians)(e[0]),h=a/n,f=Math.asin(Math.sin(i)*Math.cos(h)+Math.cos(i)*Math.sin(h)*Math.cos(s)),d=u+Math.atan2(Math.sin(s)*Math.sin(h)*Math.cos(i),Math.cos(h)-Math.sin(i)*Math.sin(f));return[(0,t.toDegrees)(d),(0,t.toDegrees)(f)]}exports.DEFAULT_RADIUS=r;
},{"./geom/GeometryType.js":"lmV0","./math.js":"B96G"}],"AiCK":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=r;
},{}],"nGsj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=a,exports.createStringXY=u,exports.degreesToStringHDMS=s,exports.format=i,exports.equals=c,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.distance=d,exports.squaredDistanceToSegment=g,exports.toStringHDMS=l,exports.toStringXY=h,exports.wrapX=M,exports.getWorldsAway=v;var t=require("./extent.js"),r=require("./math.js"),e=require("./string.js");function n(t,r){return t[0]+=+r[0],t[1]+=+r[1],t}function o(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],a=n[1],u=t[0]-o,s=t[1]-a;0===u&&0===s&&(u=1);var i=Math.sqrt(u*u+s*s);return[o+e*u/i,a+e*s/i]}function a(t,r){var e,n,o=t[0],a=t[1],u=r[0],s=r[1],i=u[0],c=u[1],f=s[0],p=s[1],x=f-i,d=p-c,g=0===x&&0===d?0:(x*(o-i)+d*(a-c))/(x*x+d*d||0);return g<=0?(e=i,n=c):g>=1?(e=f,n=p):(e=i+g*x,n=c+g*d),[e,n]}function u(t){return function(r){return h(r,t)}}function s(t,n,o){var a=(0,r.modulo)(n+180,360)-180,u=Math.abs(3600*a),s=o||0,i=Math.pow(10,s),c=Math.floor(u/3600),f=Math.floor((u-3600*c)/60),p=u-3600*c-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,c+=1),c+"° "+(0,e.padNumber)(f,2)+"′ "+(0,e.padNumber)(p,2,s)+"″"+(0==a?"":" "+t.charAt(a<0?1:0))}function i(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function c(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function f(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,a=t[1]*e+t[0]*n;return t[0]=o,t[1]=a,t}function p(t,r){return t[0]*=r,t[1]*=r,t}function x(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function d(t,r){return Math.sqrt(x(t,r))}function g(t,r){return x(t,a(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return i(t,"{x}, {y}",r)}function M(r,e){if(e.canWrapX()){var n=(0,t.getWidth)(e.getExtent()),o=v(r,e,n);o&&(r[0]-=o*n)}return r}function v(r,e,n){var o=e.getExtent(),a=0;if(e.canWrapX()&&(r[0]<o[0]||r[0]>o[2])){var u=n||(0,t.getWidth)(o);a=Math.floor((r[0]-o[0])/u)}return a}
},{"./extent.js":"QDir","./math.js":"B96G","./string.js":"AiCK"}],"Diht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTransform=l,exports.identityTransform=E,exports.addProjection=g,exports.addProjections=P,exports.get=x,exports.getPointResolution=j,exports.addEquivalentProjections=v,exports.addEquivalentTransforms=m,exports.clearAllProjections=T,exports.createProjection=O,exports.createTransformFromCoordinateTransform=S,exports.addCoordinateTransforms=y,exports.fromLonLat=U,exports.toLonLat=h,exports.equivalent=R,exports.getTransformFromProjections=C,exports.getTransform=_,exports.transform=q,exports.transformExtent=b,exports.transformWithProjections=G,exports.setUserProjection=I,exports.clearUserProjection=N,exports.getUserProjection=W,exports.useGeographic=w,exports.toUserCoordinate=D,exports.fromUserCoordinate=J,exports.toUserExtent=L,exports.fromUserExtent=A,exports.createSafeCoordinateTransform=F,exports.addCommon=k,Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return r.METERS_PER_UNIT}});var e=d(require("./proj/Projection.js")),r=p(require("./proj/Units.js")),t=require("./proj/epsg3857.js"),n=require("./proj/epsg4326.js"),o=require("./proj/projections.js"),i=require("./proj/transforms.js"),u=require("./extent.js"),s=require("./math.js"),a=require("./sphere.js"),f=require("./coordinate.js");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function d(e){return e&&e.__esModule?e:{default:e}}function l(e,r,t){var n;if(void 0!==r){for(var o=0,i=e.length;o<i;++o)r[o]=e[o];n=r}else n=e.slice();return n}function E(e,r,t){if(void 0!==r&&e!==r){for(var n=0,o=e.length;n<o;++n)r[n]=e[n];e=r}return e}function g(e){(0,o.add)(e.getCode(),e),(0,i.add)(e,e,l)}function P(e){e.forEach(g)}function x(e){return"string"==typeof e?(0,o.get)(e):e||null}function j(e,t,n,o){var i,u=(e=x(e)).getPointResolutionFunc();if(u)i=u(t,n),o&&o!==e.getUnits()&&(s=e.getMetersPerUnit())&&(i=i*s/r.METERS_PER_UNIT[o]);else if(e.getUnits()==r.default.DEGREES&&!o||o==r.default.DEGREES)i=t;else{var s,f=C(e,x("EPSG:4326")),c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=f(c,c,2),i=((0,a.getDistance)(c.slice(0,2),c.slice(2,4))+(0,a.getDistance)(c.slice(4,6),c.slice(6,8)))/2,void 0!==(s=o?r.METERS_PER_UNIT[o]:e.getMetersPerUnit())&&(i/=s)}return i}function v(e){P(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,i.add)(r,e,l)})})}function m(e,r,t,n){e.forEach(function(e){r.forEach(function(r){(0,i.add)(e,r,t),(0,i.add)(r,e,n)})})}function T(){(0,o.clear)(),(0,i.clear)()}function O(e,r){return e?"string"==typeof e?x(e):e:x(r)}function S(e){return function(r,t,n){for(var o=r.length,i=void 0!==n?n:2,u=void 0!==t?t:new Array(o),s=0;s<o;s+=i){var a=e([r[s],r[s+1]]);u[s]=a[0],u[s+1]=a[1];for(var f=i-1;f>=2;--f)u[s+f]=r[s+f]}return u}}function y(e,r,t,n){var o=x(e),u=x(r);(0,i.add)(o,u,S(t)),(0,i.add)(u,o,S(n))}function U(e,r){return q(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function h(e,r){var t=q(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),n=t[0];return(n<-180||n>180)&&(t[0]=(0,s.modulo)(n+180,360)-180),t}function R(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:C(e,r)===l&&t}function C(e,r){var t=e.getCode(),n=r.getCode(),o=(0,i.get)(t,n);return o||(o=E),o}function _(e,r){return C(x(e),x(r))}function q(e,r,t){return _(r,t)(e,void 0,e.length)}function b(e,r,t,n){var o=_(r,t);return(0,u.applyTransform)(e,o,void 0,n)}function G(e,r,t){return C(r,t)(e)}var M=null;function I(e){M=x(e)}function N(){M=null}function W(){return M}function w(){I("EPSG:4326")}function D(e,r){return M?q(e,r,M):e}function J(e,r){return M?q(e,M,r):e}function L(e,r){return M?b(e,r,M):e}function A(e,r){return M?b(e,M,r):e}function F(e,r,t){return function(n){var o,i,a=n[0],c=n[1];if(e.canWrapX()){var p=e.getExtent(),d=(0,u.getWidth)(p);(i=(0,f.getWorldsAway)(n,e,d))&&(a-=i*d),a=(0,s.clamp)(a,p[0],p[2]),c=(0,s.clamp)(c,p[1],p[3]),o=t([a,c])}else o=t(n);return i&&r.canWrapX()&&(o[0]+=i*(0,u.getWidth)(r.getExtent())),o}}function k(){v(t.PROJECTIONS),v(n.PROJECTIONS),m(n.PROJECTIONS,t.PROJECTIONS,t.fromEPSG4326,t.toEPSG4326)}k();
},{"./proj/Projection.js":"WUar","./proj/Units.js":"yZx6","./proj/epsg3857.js":"lohs","./proj/epsg4326.js":"ZniN","./proj/projections.js":"tlE8","./proj/transforms.js":"uhlP","./extent.js":"QDir","./math.js":"B96G","./sphere.js":"q4ER","./coordinate.js":"nGsj"}],"F8sI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("../Object.js")),e=p(require("../proj/Units.js")),r=require("../util.js"),n=require("../transform.js"),o=require("../extent.js"),i=require("../proj.js"),s=require("../functions.js"),a=require("./flat/transform.js");function p(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=(0,n.create)(),f=function(t){function p(){var e=t.call(this)||this;return e.extent_=(0,o.createEmpty)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=(0,s.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)}),e}return u(p,t),p.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},p.prototype.clone=function(){return(0,r.abstract)()},p.prototype.closestPointXY=function(t,e,n,o){return(0,r.abstract)()},p.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},p.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},p.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},p.prototype.computeExtent=function(t){return(0,r.abstract)()},p.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&(0,o.createOrUpdateEmpty)(e),this.extentRevision_=this.getRevision()}return(0,o.returnOrUpdate)(this.extent_,t)},p.prototype.rotate=function(t,e){(0,r.abstract)()},p.prototype.scale=function(t,e,n){(0,r.abstract)()},p.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},p.prototype.getSimplifiedGeometry=function(t){return(0,r.abstract)()},p.prototype.getType=function(){return(0,r.abstract)()},p.prototype.applyTransform=function(t){(0,r.abstract)()},p.prototype.intersectsExtent=function(t){return(0,r.abstract)()},p.prototype.translate=function(t,e){(0,r.abstract)()},p.prototype.transform=function(t,r){var s=(0,i.get)(t),p=s.getUnits()==e.default.TILE_PIXELS?function(t,e,p){var u=s.getExtent(),f=s.getWorldExtent(),l=(0,o.getHeight)(f)/(0,o.getHeight)(u);return(0,n.compose)(c,f[0],f[3],l,-l,0,0,0),(0,a.transform2D)(t,0,t.length,p,c,e),(0,i.getTransform)(s,r)(t,e,p)}:(0,i.getTransform)(s,r);return this.applyTransform(p),this},p}(t.default),l=f;exports.default=l;
},{"../Object.js":"PhPh","../proj/Units.js":"yZx6","../util.js":"KniQ","../transform.js":"P4eA","../extent.js":"QDir","../proj.js":"Diht","../functions.js":"RgA2","./flat/transform.js":"LGwr"}],"Utvi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};exports.default=e;
},{}],"pnrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=l,exports.transformGeom2D=f,exports.default=void 0;var t=n(require("./Geometry.js")),e=n(require("./GeometryLayout.js")),r=require("../util.js"),i=require("../extent.js"),o=require("./flat/transform.js");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),s=function(t){function n(){var r=t.call(this)||this;return r.layout=e.default.XY,r.stride=2,r.flatCoordinates=null,r}return a(n,t),n.prototype.computeExtent=function(t){return(0,i.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return(0,r.abstract)()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e},n.prototype.setCoordinates=function(t,e){(0,r.abstract)()},n.prototype.setLayout=function(t,r,i){var o;if(t)o=l(t);else{for(var n=0;n<i;++n){if(0===r.length)return this.layout=e.default.XY,void(this.stride=2);r=r[0]}t=u(o=r.length)}this.layout=t,this.stride=o},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,o.rotate)(r,0,r.length,i,t,e,r),this.changed()}},n.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var a=r;a||(a=(0,i.getCenter)(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();(0,o.scale)(s,0,s.length,u,t,n,a,s),this.changed()}},n.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,o.translate)(r,0,r.length,i,t,e,r),this.changed()}},n}(t.default);function u(t){var r;return 2==t?r=e.default.XY:3==t?r=e.default.XYZ:4==t&&(r=e.default.XYZM),r}function l(t){var r;return t==e.default.XY?r=2:t==e.default.XYZ||t==e.default.XYM?r=3:t==e.default.XYZM&&(r=4),r}function f(t,e,r){var i=t.getFlatCoordinates();if(i){var n=t.getStride();return(0,o.transform2D)(i,0,i.length,n,e,r)}return null}var d=s;exports.default=d;
},{"./Geometry.js":"F8sI","./GeometryLayout.js":"Utvi","../util.js":"KniQ","../extent.js":"QDir","./flat/transform.js":"LGwr"}],"fo6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../../geom/GeometryType.js")),e=h(require("../VectorContext.js")),i=require("../../colorlike.js"),s=require("../../transform.js"),a=require("../canvas.js"),o=require("../../array.js"),r=require("../../extent.js"),n=require("../../geom/flat/transform.js"),l=require("../../geom/SimpleGeometry.js");function h(t){return t&&t.__esModule?t:{default:t}}var _=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),f=function(e){function h(t,i,a,o,r,n,l){var h=e.call(this)||this;return h.context_=t,h.pixelRatio_=i,h.extent_=a,h.transform_=o,h.viewRotation_=r,h.squaredTolerance_=n,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,s.create)(),h}return _(h,e),h.prototype.drawImages_=function(t,e,i,a){if(this.image_){var o=(0,n.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,h=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=h*this.imageOpacity_);var _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(var f=0,g=o.length;f<g;f+=2){var x=o[f]-this.imageAnchorX_,S=o[f+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=x+this.imageAnchorX_,d=S+this.imageAnchorY_;(0,s.compose)(l,m,d,1,1,_,-m,-d),r.setTransform.apply(r,l),r.translate(m,d),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,S,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=h)}},h.prototype.drawText_=function(t,e,i,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=(0,n.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);e<i;e+=a){var h=o[e]+this.textOffsetX_,_=o[e+1]+this.textOffsetY_;if(0!==l||1!=this.textScale_[0]||1!=this.textScale_[1]){var f=(0,s.compose)(this.tmpLocalTransform_,h,_,1,1,l,-h,-_);r.setTransform.apply(r,f),r.translate(h,_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&r.strokeText(this.text_,h,_),this.textFillState_&&r.fillText(this.text_,h,_)}}},h.prototype.moveToLineTo_=function(t,e,i,s,a){var o=this.context_,r=(0,n.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);var l=r.length;a&&(l-=2);for(var h=2;h<l;h+=2)o.lineTo(r[h],r[h+1]);return a&&o.closePath(),i},h.prototype.drawRings_=function(t,e,i,s){for(var a=0,o=i.length;a<o;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e},h.prototype.drawCircle=function(t){if((0,r.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,l.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],a=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},h.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},h.prototype.setTransform=function(t){this.transform_=t},h.prototype.drawGeometry=function(e){switch(e.getType()){case t.default.POINT:this.drawPoint(e);break;case t.default.LINE_STRING:this.drawLineString(e);break;case t.default.POLYGON:this.drawPolygon(e);break;case t.default.MULTI_POINT:this.drawMultiPoint(e);break;case t.default.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case t.default.MULTI_POLYGON:this.drawMultiPolygon(e);break;case t.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case t.default.CIRCLE:this.drawCircle(e)}},h.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&(0,r.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},h.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])},h.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},h.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},h.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var s=t.getFlatMidpoint();this.drawText_(s,0,2,2)}}},h.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,r.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,s=t.getFlatCoordinates(),a=0,o=t.getEnds(),n=t.getStride();i.beginPath();for(var l=0,h=o.length;l<h;++l)a=this.moveToLineTo_(s,a,o[l],n,!1);i.stroke()}if(""!==this.text_){var _=t.getFlatMidpoints();this.drawText_(_,0,_.length,2)}}},h.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},h.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,r.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),s=0,a=t.getEndss(),o=t.getStride();e.beginPath();for(var n=0,l=a.length;n<l;++n){var h=a[n];s=this.drawRings_(i,s,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var _=t.getFlatInteriorPoints();this.drawText_(_,0,_.length,2)}}},h.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},h.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&((0,o.equals)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},h.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:a.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})},h.prototype.setFillStrokeStyle=function(t,e){if(t){var s=t.getColor();this.fillState_={fillStyle:(0,i.asColorLike)(s||a.defaultFillStyle)}}else this.fillState_=null;if(e){var o=e.getColor(),r=e.getLineCap(),n=e.getLineDash(),l=e.getLineDashOffset(),h=e.getLineJoin(),_=e.getWidth(),f=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:a.defaultLineCap,lineDash:n||a.defaultLineDash,lineDashOffset:l||a.defaultLineDashOffset,lineJoin:void 0!==h?h:a.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==_?_:a.defaultLineWidth),miterLimit:void 0!==f?f:a.defaultMiterLimit,strokeStyle:(0,i.asColorLike)(o||a.defaultStrokeStyle)}}else this.strokeState_=null},h.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),s=t.getImage(1),a=t.getOrigin(),o=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=s,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*o[0],this.pixelRatio_*o[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},h.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var s=e.getColor();this.textFillState_={fillStyle:(0,i.asColorLike)(s||a.defaultFillStyle)}}else this.textFillState_=null;var o=t.getStroke();if(o){var r=o.getColor(),n=o.getLineCap(),l=o.getLineDash(),h=o.getLineDashOffset(),_=o.getLineJoin(),f=o.getWidth(),g=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==n?n:a.defaultLineCap,lineDash:l||a.defaultLineDash,lineDashOffset:h||a.defaultLineDashOffset,lineJoin:void 0!==_?_:a.defaultLineJoin,lineWidth:void 0!==f?f:a.defaultLineWidth,miterLimit:void 0!==g?g:a.defaultMiterLimit,strokeStyle:(0,i.asColorLike)(r||a.defaultStrokeStyle)}}else this.textStrokeState_=null;var x=t.getFont(),S=t.getOffsetX(),m=t.getOffsetY(),d=t.getRotateWithView(),c=t.getRotation(),u=t.getScaleArray(),p=t.getText(),y=t.getTextAlign(),T=t.getTextBaseline();this.textState_={font:void 0!==x?x:a.defaultFont,textAlign:void 0!==y?y:a.defaultTextAlign,textBaseline:void 0!==T?T:a.defaultTextBaseline},this.text_=void 0!==p?p:"",this.textOffsetX_=void 0!==S?this.pixelRatio_*S:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==c?c:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""},h}(e.default),g=f;exports.default=g;
},{"../../geom/GeometryType.js":"lmV0","../VectorContext.js":"LQER","../../colorlike.js":"V5XN","../../transform.js":"P4eA","../canvas.js":"iAG7","../../array.js":"luEr","../../extent.js":"QDir","../../geom/flat/transform.js":"LGwr","../../geom/SimpleGeometry.js":"pnrv"}],"irm1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};exports.default=e;
},{}],"u3kG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"UCah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=u,exports.getSquaredTolerance=n,exports.getTolerance=g,exports.renderFeature=o;var e=l(require("../render/canvas/BuilderType.js")),t=l(require("../geom/GeometryType.js")),r=l(require("../ImageState.js")),a=require("../util.js");function l(e){return e&&e.__esModule?e:{default:e}}var d=.5,i={Point:c,LineString:v,Polygon:m,MultiPoint:y,MultiLineString:I,MultiPolygon:S,GeometryCollection:s,Circle:f};function u(e,t){return parseInt((0,a.getUid)(e),10)-parseInt((0,a.getUid)(t),10)}function n(e,t){var r=g(e,t);return r*r}function g(e,t){return d*e/t}function f(t,r,a,l){var d=a.getFill(),i=a.getStroke();if(d||i){var u=t.getBuilder(a.getZIndex(),e.default.CIRCLE);u.setFillStrokeStyle(d,i),u.drawCircle(r,l)}var n=a.getText();if(n){var g=t.getBuilder(a.getZIndex(),e.default.TEXT);g.setTextStyle(n,t.addDeclutter(!1)),g.drawText(r,l)}}function o(e,t,a,l,d,i){var u=!1,n=a.getImage();if(n){var g=n.getImageState();g==r.default.LOADED||g==r.default.ERROR?n.unlistenImageChange(d):(g==r.default.IDLE&&n.load(),g=n.getImageState(),n.listenImageChange(d),u=!0)}return T(e,t,a,l,i),u}function T(e,t,r,a,l){var d=r.getGeometryFunction()(t);if(d){var u=d.simplifyTransformed(a,l);if(r.getRenderer())x(e,u,r,t);else(0,i[u.getType()])(e,u,r,t)}}function x(r,a,l,d){if(a.getType()!=t.default.GEOMETRY_COLLECTION)r.getBuilder(l.getZIndex(),e.default.DEFAULT).drawCustom(a,d,l.getRenderer());else for(var i=a.getGeometries(),u=0,n=i.length;u<n;++u)x(r,i[u],l,d)}function s(e,t,r,a){var l,d,u=t.getGeometriesArray();for(l=0,d=u.length;l<d;++l){(0,i[u[l].getType()])(e,u[l],r,a)}}function v(t,r,a,l){var d=a.getStroke();if(d){var i=t.getBuilder(a.getZIndex(),e.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawLineString(r,l)}var u=a.getText();if(u){var n=t.getBuilder(a.getZIndex(),e.default.TEXT);n.setTextStyle(u,t.addDeclutter(!1)),n.drawText(r,l)}}function I(t,r,a,l){var d=a.getStroke();if(d){var i=t.getBuilder(a.getZIndex(),e.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawMultiLineString(r,l)}var u=a.getText();if(u){var n=t.getBuilder(a.getZIndex(),e.default.TEXT);n.setTextStyle(u,t.addDeclutter(!1)),n.drawText(r,l)}}function S(t,r,a,l){var d=a.getFill(),i=a.getStroke();if(i||d){var u=t.getBuilder(a.getZIndex(),e.default.POLYGON);u.setFillStrokeStyle(d,i),u.drawMultiPolygon(r,l)}var n=a.getText();if(n){var g=t.getBuilder(a.getZIndex(),e.default.TEXT);g.setTextStyle(n,t.addDeclutter(!1)),g.drawText(r,l)}}function c(t,a,l,d){var i=l.getImage();if(i){if(i.getImageState()!=r.default.LOADED)return;var u=t.getBuilder(l.getZIndex(),e.default.IMAGE);u.setImageStyle(i,t.addDeclutter(!1)),u.drawPoint(a,d)}var n=l.getText();if(n){var g=t.getBuilder(l.getZIndex(),e.default.TEXT);g.setTextStyle(n,t.addDeclutter(!!i)),g.drawText(a,d)}}function y(t,a,l,d){var i=l.getImage();if(i){if(i.getImageState()!=r.default.LOADED)return;var u=t.getBuilder(l.getZIndex(),e.default.IMAGE);u.setImageStyle(i,t.addDeclutter(!1)),u.drawMultiPoint(a,d)}var n=l.getText();if(n){var g=t.getBuilder(l.getZIndex(),e.default.TEXT);g.setTextStyle(n,t.addDeclutter(!!i)),g.drawText(a,d)}}function m(t,r,a,l){var d=a.getFill(),i=a.getStroke();if(d||i){var u=t.getBuilder(a.getZIndex(),e.default.POLYGON);u.setFillStrokeStyle(d,i),u.drawPolygon(r,l)}var n=a.getText();if(n){var g=t.getBuilder(a.getZIndex(),e.default.TEXT);g.setTextStyle(n,t.addDeclutter(!1)),g.drawText(r,l)}}
},{"../render/canvas/BuilderType.js":"irm1","../geom/GeometryType.js":"lmV0","../ImageState.js":"u3kG","../util.js":"KniQ"}],"RvU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toContext=a,exports.getVectorContext=s,exports.getRenderPixel=l,exports.renderDeclutterItems=u;var e=o(require("./render/canvas/Immediate.js")),t=require("./has.js"),r=require("./transform.js"),i=require("./renderer/vector.js"),n=require("./proj.js");function o(e){return e&&e.__esModule?e:{default:e}}function a(i,n){var o=i.canvas,a=n||{},s=a.pixelRatio||t.DEVICE_PIXEL_RATIO,l=a.size;l&&(o.width=l[0]*s,o.height=l[1]*s,o.style.width=l[0]+"px",o.style.height=l[1]+"px");var u=[0,0,o.width,o.height],c=(0,r.scale)((0,r.create)(),s,s);return new e.default(i,s,u,c,0)}function s(t){var o,a=t.frameState,s=(0,r.multiply)(t.inversePixelTransform.slice(),a.coordinateToPixelTransform),l=(0,i.getSquaredTolerance)(a.viewState.resolution,a.pixelRatio),u=(0,n.getUserProjection)();return u&&(o=(0,n.getTransformFromProjections)(u,a.viewState.projection)),new e.default(t.context,a.pixelRatio,a.extent,s,a.viewState.rotation,l,o)}function l(e,t){var i=t.slice(0);return(0,r.apply)(e.inversePixelTransform.slice(),i),i}function u(e,t){t&&t.clear();for(var r=e.declutterItems,i=r.length-1;i>=0;--i)for(var n=r[i],o=n.items,a=0,s=o.length;a<s;a+=3)t=o[a].renderDeclutter(o[a+1],o[a+2],n.opacity,t);return r.length=0,t}
},{"./render/canvas/Immediate.js":"fo6K","./has.js":"f3Nv","./transform.js":"P4eA","./renderer/vector.js":"UCah","./proj.js":"Diht"}],"oIh9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../Disposable.js")),r=require("../functions.js"),t=require("../util.js"),o=require("../transform.js"),n=require("../extent.js"),a=require("../style/IconImageCache.js"),i=require("../layer/Layer.js"),u=require("../render.js"),c=require("../coordinate.js");function s(e){return e&&e.__esModule?e:{default:e}}var p=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),l=function(e){function s(r){var t=e.call(this)||this;return t.map_=r,t.declutterTree_=null,t}return p(s,e),s.prototype.dispatchRenderEvent=function(e,r){(0,t.abstract)()},s.prototype.calculateMatrices2D=function(e){var r=e.viewState,t=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;(0,o.compose)(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),(0,o.makeInverse)(n,t)},s.prototype.forEachFeatureAtCoordinate=function(e,r,t,o,a,u,s,p){var l,f=r.viewState;function d(e,r,t){return a.call(u,r,e?t:null)}var h=f.projection,v=(0,c.wrapX)(e.slice(),h),y=[[0,0]];if(h.canWrapX()&&o){var _=h.getExtent(),j=(0,n.getWidth)(_);y.push([-j,0],[j,0])}var m,x=r.layerStatesArray,g=x.length;this.declutterTree_&&(m=this.declutterTree_.all().map(function(e){return e.value}));for(var T=[],q=0;q<y.length;q++)for(var E=g-1;E>=0;--E){var C=x[E],b=C.layer;if(b.hasRenderer()&&(0,i.inView)(C,f)&&s.call(p,b)){var A=b.getRenderer(),w=b.getSource();if(A&&w){var F=w.getWrapX()?v:e,I=d.bind(null,C.managed);T[0]=F[0]+y[q][0],T[1]=F[1]+y[q][1],l=A.forEachFeatureAtCoordinate(T,r,t,I,m)}if(l)return l}}},s.prototype.forEachLayerAtPixel=function(e,r,o,n,a){return(0,t.abstract)()},s.prototype.hasFeatureAtCoordinate=function(e,t,o,n,a,i){return void 0!==this.forEachFeatureAtCoordinate(e,t,o,n,r.TRUE,this,a,i)},s.prototype.getMap=function(){return this.map_},s.prototype.renderFrame=function(e){this.declutterTree_=(0,u.renderDeclutterItems)(e,this.declutterTree_)},s.prototype.scheduleExpireIconCache=function(e){a.shared.canExpireCache()&&e.postRenderFunctions.push(f)},s}(e.default);function f(e,r){a.shared.expire()}var d=l;exports.default=d;
},{"../Disposable.js":"DDda","../functions.js":"RgA2","../util.js":"KniQ","../transform.js":"P4eA","../extent.js":"QDir","../style/IconImageCache.js":"V0oB","../layer/Layer.js":"GCgv","../render.js":"RvU2","../coordinate.js":"nGsj"}],"EB6P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=function(t){function e(e,r,n,o){var u=t.call(this,e)||this;return u.inversePixelTransform=r,u.frameState=n,u.context=o,u}return r(e,t),e}(t.default),o=n;exports.default=o;
},{"../events/Event.js":"fKNg"}],"MHsB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Map.js")),t=u(require("../ObjectEventType.js")),r=u(require("../render/Event.js")),n=u(require("../render/EventType.js")),i=u(require("../source/State.js")),s=require("../css.js"),a=require("../render/canvas.js"),l=require("../layer/Layer.js"),o=require("../events.js"),d=require("../dom.js");function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(e){function u(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=(0,o.listen)(a.checkedFonts,t.default.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=s.CLASS_UNSELECTABLE+" ol-layers";var l=r.getViewport();return l.insertBefore(n.element_,l.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return c(u,e),u.prototype.dispatchRenderEvent=function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new r.default(e,void 0,t);n.dispatchEvent(i)}},u.prototype.disposeInternal=function(){(0,o.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},u.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(n.default.PRECOMPOSE,t);var r=t.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),s=t.viewState;this.children_.length=0;for(var a=null,o=0,u=r.length;o<u;++o){var c=r[o];if(t.layerIndex=o,(0,l.inView)(c,s)&&(c.sourceState==i.default.READY||c.sourceState==i.default.UNDEFINED)){var h=c.layer.render(t,a);h&&h!==a&&(this.children_.push(h),a=h)}}e.prototype.renderFrame.call(this,t),(0,d.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(n.default.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},u.prototype.forEachLayerAtPixel=function(e,t,r,n,i){for(var s=t.viewState,a=t.layerStatesArray,o=a.length-1;o>=0;--o){var d=a[o],u=d.layer;if(u.hasRenderer()&&(0,l.inView)(d,s)&&i(u)){var c=u.getRenderer().getDataAtPixel(e,t,r);if(c){var h=n(u,c);if(h)return h}}}},u}(e.default),p=h;exports.default=p;
},{"./Map.js":"oIh9","../ObjectEventType.js":"zehl","../render/Event.js":"EB6P","../render/EventType.js":"z39m","../source/State.js":"iC8j","../css.js":"HgMV","../render/canvas.js":"iAG7","../layer/Layer.js":"GCgv","../events.js":"UqnM","../dom.js":"Xno5"}],"BTrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"FnDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./Object.js")),r=i(require("./CollectionEventType.js")),n=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s={LENGTH:"length"},u=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return o(e,t),e}(n.default);exports.CollectionEvent=u;var a=function(e){function n(t,r){var n=e.call(this)||this,i=r||{};if(n.unique_=!!i.unique,n.array_=t||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return o(n,e),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},n.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},n.prototype.getArray=function(){return this.array_},n.prototype.item=function(t){return this.array_[t]},n.prototype.getLength=function(){return this.get(s.LENGTH)},n.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u(r.default.ADD,e,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},n.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},n.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(r.default.REMOVE,e,t)),e},n.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u(r.default.REMOVE,i,t)),this.dispatchEvent(new u(r.default.ADD,e,t))}else{for(var o=n;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},n.prototype.updateLength_=function(){this.set(s.LENGTH,this.array_.length)},n.prototype.assertUnique_=function(e,r){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==r)throw new t.default(58)},n}(e.default),h=a;exports.default=h;
},{"./AssertionError.js":"ygGQ","./Object.js":"PhPh","./CollectionEventType.js":"BTrx","./events/Event.js":"fKNg"}],"q0nK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./Base.js")),t=c(require("../Collection.js")),r=c(require("../CollectionEventType.js")),n=c(require("../events/EventType.js")),s=c(require("../ObjectEventType.js")),i=c(require("../source/State.js")),a=require("../asserts.js"),o=require("../obj.js"),l=require("../Object.js"),u=require("../extent.js"),y=require("../util.js"),h=require("../events.js");function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f={LAYERS:"layers"},p=function(e){function c(r){var n=this,s=r||{},i=(0,o.assign)({},s);delete i.layers;var u=s.layers;return(n=e.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener((0,l.getChangeEventType)(f.LAYERS),n.handleLayersChanged_),u?Array.isArray(u)?u=new t.default(u.slice(),{unique:!0}):(0,a.assert)("function"==typeof u.getArray,43):u=new t.default(void 0,{unique:!0}),n.setLayers(u),n}return d(c,e),c.prototype.handleLayerChange_=function(){this.changed()},c.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(h.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push((0,h.listen)(e,r.default.ADD,this.handleLayersAdd_,this),(0,h.listen)(e,r.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(h.unlistenByKey);(0,o.clear)(this.listenerKeys_);for(var i=e.getArray(),a=0,l=i.length;a<l;a++){var u=i[a];this.listenerKeys_[(0,y.getUid)(u)]=[(0,h.listen)(u,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,h.listen)(u,n.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},c.prototype.handleLayersAdd_=function(e){var t=e.element;this.listenerKeys_[(0,y.getUid)(t)]=[(0,h.listen)(t,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,h.listen)(t,n.default.CHANGE,this.handleLayerChange_,this)],this.changed()},c.prototype.handleLayersRemove_=function(e){var t=e.element,r=(0,y.getUid)(t);this.listenerKeys_[r].forEach(h.unlistenByKey),delete this.listenerKeys_[r],this.changed()},c.prototype.getLayers=function(){return this.get(f.LAYERS)},c.prototype.setLayers=function(e){this.set(f.LAYERS,e)},c.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},c.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var n=this.getLayerState(),s=r,i=t.length;s<i;s++){var a=t[s];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=(0,u.getIntersection)(a.extent,n.extent):a.extent=n.extent)}return t},c.prototype.getSourceState=function(){return i.default.READY},c}(e.default),g=p;exports.default=g;
},{"./Base.js":"T6DQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/EventType.js":"C8cu","../ObjectEventType.js":"zehl","../source/State.js":"iC8j","../asserts.js":"fLG6","../obj.js":"mH6q","../Object.js":"PhPh","../extent.js":"QDir","../util.js":"KniQ","../events.js":"UqnM"}],"vFcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.map=r,o.frameState=void 0!==n?n:null,o}return r(e,t),e}(t.default),o=n;exports.default=o;
},{"./events/Event.js":"fKNg"}],"HMLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),n=function(t){function e(e,o,n,r,i){var p=t.call(this,e,o,i)||this;return p.originalEvent=n,p.pixel_=null,p.coordinate_=null,p.dragging=void 0!==r&&r,p}return o(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(t.default),r=n;exports.default=r;
},{"./MapEvent.js":"vFcA"}],"YhDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"C8cu"}],"TaSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"ohHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./events/Target.js")),t=a(require("./events/EventType.js")),i=a(require("./MapBrowserEvent.js")),n=a(require("./MapBrowserEventType.js")),o=a(require("./pointer/EventType.js")),s=require("./has.js"),r=require("./events.js");function a(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(e){function a(i,n){var a=e.call(this,i)||this;a.map_=i,a.clickTimeoutId_,a.dragging_=!1,a.dragListenerKeys_=[],a.moveTolerance_=n?n*s.DEVICE_PIXEL_RATIO:s.DEVICE_PIXEL_RATIO,a.down_=null;var d=a.map_.getViewport();return a.activePointers_=0,a.trackedTouches_={},a.element_=d,a.pointerdownListenerKey_=(0,r.listen)(d,o.default.POINTERDOWN,a.handlePointerDown_,a),a.originalPointerMoveEvent_,a.relayedListenerKey_=(0,r.listen)(d,o.default.POINTERMOVE,a.relayEvent_,a),a.boundHandleTouchMove_=a.handleTouchMove_.bind(a),a.element_.addEventListener(t.default.TOUCHMOVE,a.boundHandleTouchMove_,!!s.PASSIVE_EVENT_LISTENERS&&{passive:!1}),a}return d(a,e),a.prototype.emulateClick_=function(e){var t=new i.default(n.default.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new i.default(n.default.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var t=new i.default(n.default.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},a.prototype.updateActivePointers_=function(e){var t=e;t.type==n.default.POINTERUP||t.type==n.default.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==n.default.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},a.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new i.default(n.default.POINTERUP,this.map_,e);this.dispatchEvent(t),t.propagationStopped||this.dragging_||!this.isMouseActionButton_(e)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(r.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},a.prototype.isMouseActionButton_=function(e){return 0===e.button},a.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var t=new i.default(n.default.POINTERDOWN,this.map_,e);this.dispatchEvent(t),this.down_=e,0===this.dragListenerKeys_.length&&(this.dragListenerKeys_.push((0,r.listen)(document,n.default.POINTERMOVE,this.handlePointerMove_,this),(0,r.listen)(document,n.default.POINTERUP,this.handlePointerUp_,this),(0,r.listen)(this.element_,n.default.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==document&&this.dragListenerKeys_.push((0,r.listen)(this.element_.getRootNode(),n.default.POINTERUP,this.handlePointerUp_,this)))},a.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new i.default(n.default.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}},a.prototype.relayEvent_=function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new i.default(e.type,this.map_,e,t))},a.prototype.handleTouchMove_=function(e){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||e.preventDefault()},a.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},a.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,r.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(t.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,r.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(r.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},a}(e.default),l=h;exports.default=l;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./MapBrowserEvent.js":"HMLS","./MapBrowserEventType.js":"YhDM","./pointer/EventType.js":"TaSm","./has.js":"f3Nv","./events.js":"UqnM"}],"xLGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};exports.default=e;
},{}],"zlNQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"RQLY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var t=require("../asserts.js"),e=require("../obj.js"),i=1/0;exports.DROP=i;var n=function(){function n(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,e.clear)(this.queuedElements_)},n.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},n.prototype.enqueue=function(e){(0,t.assert)(!(this.keyFunction_(e)in this.queuedElements_),31);var n=this.priorityFunction_(e);return n!=i&&(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(t){return 2*t+1},n.prototype.getRightChildIndex_=function(t){return 2*t+2},n.prototype.getParentIndex_=function(t){return t-1>>1},n.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},n.prototype.isEmpty=function(){return 0===this.elements_.length},n.prototype.isKeyQueued=function(t){return t in this.queuedElements_},n.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},n.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,s=e[t],r=i[t],o=t;t<n>>1;){var u=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<n&&i[h]<i[u]?h:u;e[t]=e[p],i[t]=i[p],t=p}e[t]=s,i[t]=r,this.siftDown_(o,t)},n.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,s=i[e],r=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>r))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=s,n[e]=r},n.prototype.reprioritize=function(){var t,e,n,s=this.priorityFunction_,r=this.elements_,o=this.priorities_,u=0,h=r.length;for(e=0;e<h;++e)(n=s(t=r[e]))==i?delete this.queuedElements_[this.keyFunction_(t)]:(o[u]=n,r[u++]=t);r.length=u,o.length=u,this.heapify_()},n}(),s=n;exports.default=s;
},{"../asserts.js":"fLG6","../obj.js":"mH6q"}],"tHOl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTilePriority=s,exports.default=void 0;var e=o(require("./events/EventType.js")),t=i(require("./structs/PriorityQueue.js")),n=o(require("./TileState.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function r(e,n){var r=t.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return a(r,t),r.prototype.enqueue=function(n){var r=t.prototype.enqueue.call(this,n);r&&n[0].addEventListener(e.default.CHANGE,this.boundHandleTileChange_);return r},r.prototype.getTilesLoading=function(){return this.tilesLoading_},r.prototype.handleTileChange=function(t){var r=t.target,i=r.getState();if(r.hifi&&i===n.default.LOADED||i===n.default.ERROR||i===n.default.EMPTY){r.removeEventListener(e.default.CHANGE,this.boundHandleTileChange_);var o=r.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},r.prototype.loadMoreTiles=function(e,t){for(var r,i,o=0;this.tilesLoading_<e&&o<t&&this.getCount()>0;)i=(r=this.dequeue()[0]).getKey(),r.getState()!==n.default.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,r.load())},r}(t.default),l=u;function s(e,n,r,i,o){if(!(e&&r in e.wantedTiles))return t.DROP;if(!e.wantedTiles[r][n.getKey()])return t.DROP;var a=e.viewState.center,u=i[0]-a[0],l=i[1]-a[1];return 65536*Math.log(o)+Math.sqrt(u*u+l*l)/o}exports.default=l;
},{"./events/EventType.js":"C8cu","./structs/PriorityQueue.js":"RQLY","./TileState.js":"u3kG"}],"cuLW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"cE7c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"mOEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"Rc7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=a,exports.none=e;var t=require("./math.js");function a(a,e,r){return function(n,o,u,h){if(n){var M=e?0:u[0]*o,c=e?0:u[1]*o,l=a[0]+M/2,x=a[2]-M/2,i=a[1]+c/2,m=a[3]-c/2;l>x&&(x=l=(x+l)/2),i>m&&(m=i=(m+i)/2);var s=(0,t.clamp)(n[0],l,x),p=(0,t.clamp)(n[1],i,m),f=30*o;return h&&r&&(s+=-f*Math.log(1+Math.max(0,l-n[0])/f)+f*Math.log(1+Math.max(0,n[0]-x)/f),p+=-f*Math.log(1+Math.max(0,i-n[1])/f)+f*Math.log(1+Math.max(0,n[1]-m)/f)),[s,p]}}}function e(t){return t}
},{"./math.js":"B96G"}],"o7nl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToResolutions=i,exports.createSnapToPower=o,exports.createMinMaxResolution=h;var t=require("./math.js"),a=require("./extent.js"),r=require("./array.js");function e(t,r,e,n){var i=(0,a.getWidth)(r)/e[0],o=(0,a.getHeight)(r)/e[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function n(a,r,e){var n=Math.min(a,r);return n*=Math.log(1+50*Math.max(0,a/r-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/a-1))/50+1),(0,t.clamp)(n,e/2,2*r)}function i(a,i,o,h){return function(u,M,l,c){if(void 0!==u){var m=a[0],f=a[a.length-1],v=o?e(m,o,l,h):m;if(c)return void 0===i||i?n(u,v,f):(0,t.clamp)(u,f,v);var s=Math.min(v,u),p=Math.floor((0,r.linearFindNearest)(a,s,M));return a[p]>v&&p<a.length-1?a[p+1]:a[p]}}}function o(a,r,i,o,h,u){return function(M,l,c,m){if(void 0!==M){var f=h?e(r,h,c,u):r,v=void 0!==i?i:0;if(m)return void 0===o||o?n(M,f,v):(0,t.clamp)(M,v,f);var s=Math.ceil(Math.log(r/f)/Math.log(a)-1e-9),p=-l*(.5-1e-9)+.5,d=Math.min(f,M),g=Math.floor(Math.log(r/d)/Math.log(a)+p),x=Math.max(s,g),j=r/Math.pow(a,x);return(0,t.clamp)(j,v,f)}}}function h(a,r,i,o,h){return function(u,M,l,c){if(void 0!==u){var m=o?e(a,o,l,h):a;return(void 0===i||i)&&c?n(u,m,r):(0,t.clamp)(u,r,m)}}}
},{"./math.js":"B96G","./extent.js":"QDir","./array.js":"luEr"}],"EKd0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disable=e,exports.none=o,exports.createSnapToN=t,exports.createSnapToZero=n;var r=require("./math.js");function e(r){return void 0!==r?0:void 0}function o(r){return void 0!==r?r:void 0}function t(r){var e=2*Math.PI/r;return function(r,o){return o?r:void 0!==r?r=Math.floor(r/e+.5)*e:void 0}}function n(e){var o=e||(0,r.toRadians)(5);return function(r,e){return e?r:void 0!==r?Math.abs(r)<=o?0:r:void 0}}
},{"./math.js":"B96G"}],"IeCz":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"rMra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=t,exports.arrayMaxSquaredDelta=a,exports.multiArrayMaxSquaredDelta=n,exports.assignClosestPoint=s,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(c=0;c<n;++c)i[c]=e[u+c];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}for(var N=h||[NaN,NaN],x=a+s;x<n;)if(e(t,x-s,x,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s,x+=s}else x+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=s(r,e,N,a,n,o,i,u,f,l,h),e=N}return l}function i(r,e,t,a,n,s,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=o(r,e,N,a,n,s,i,u,f,l,h),e=N[N.length-1]}return l}
},{"../../math.js":"B96G"}],"FNhl":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var f=t[o],l=0;l<n;++l)e[r++]=f[l];return r}function t(e,t,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=r(e,t,n[u],o);f[l++]=s,t=s}return f.length=l,f}function n(e,r,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=t(e,r,n[u],o,f[l]);f[l++]=s,r=s[s.length-1]}return f.length=l,f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"IEpt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.radialDistance=a,exports.snap=o,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f;var r=require("../../math.js");function e(r,e,n,u,o,i,s){var f=void 0!==s?s:[];return i||(n=a(r,e,n,u,o,f,0),r=f,e=0,u=2),f.length=t(r,e,n,u,o,f,0),f}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(q=0;q<s;++q)f[q]&&(o[i++]=e[t+q*u],o[i++]=e[t+q*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"B96G"}],"znXl":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){for(var i=void 0!==o?o:[],a=0,l=r;l<t;l+=n)i[a++]=e.slice(l,l+n);return i.length=a,i}function r(r,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=e(r,t,u,o,a[l]),t=u}return a.length=l,a}function t(e,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=r(e,t,u,o,a[l]),t=u[u.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"EOSm":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"jRgU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./GeometryLayout.js")),e=u(require("./GeometryType.js")),i=u(require("./SimpleGeometry.js")),o=require("./flat/closest.js"),r=require("../extent.js"),s=require("./flat/deflate.js"),n=require("./flat/simplify.js"),a=require("./flat/inflate.js"),l=require("./flat/area.js");function u(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),d=function(i){function u(t,e){var o=i.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?o.setCoordinates(t,e):o.setFlatCoordinates(e,t),o}return f(u,i),u.prototype.clone=function(){return new u(this.flatCoordinates.slice(),this.layout)},u.prototype.closestPointXY=function(t,e,i,s){return s<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,s))},u.prototype.getArea=function(){return(0,l.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getCoordinates=function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getSimplifiedGeometryInternal=function(e){var i=[];return i.length=(0,n.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new u(i,t.default.XY)},u.prototype.getType=function(){return e.default.LINEAR_RING},u.prototype.intersectsExtent=function(t){return!1},u.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},u}(i.default),h=d;exports.default=h;
},{"./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","./flat/inflate.js":"znXl","./flat/area.js":"EOSm"}],"gLcY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./GeometryType.js")),e=i(require("./SimpleGeometry.js")),o=require("../extent.js"),r=require("./flat/deflate.js"),n=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),a=function(e){function i(t,o){var r=e.call(this)||this;return r.setCoordinates(t,o),r}return s(i,e),i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout)},i.prototype.closestPointXY=function(t,e,o,r){var i=this.flatCoordinates,s=(0,n.squaredDistance)(t,e,i[0],i[1]);if(s<r){for(var a=this.stride,u=0;u<a;++u)o[u]=i[u];return o.length=a,s}return r},i.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},i.prototype.computeExtent=function(t){return(0,o.createOrUpdateFromCoordinate)(this.flatCoordinates,t)},i.prototype.getType=function(){return t.default.POINT},i.prototype.intersectsExtent=function(t){return(0,o.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])},i.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},i}(e.default),u=a;exports.default=u;
},{"./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","../extent.js":"QDir","./flat/deflate.js":"FNhl","../math.js":"B96G"}],"dzdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"QDir"}],"UDvN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("./contains.js"),e=require("../../array.js");function t(t,n,a,o,i,s,u){for(var f,l,v,g,h,p,c,y=i[s+1],N=[],b=0,j=a.length;b<j;++b){var x=a[b];for(g=t[x-o],p=t[x-o+1],f=n;f<x;f+=o)h=t[f],c=t[f+1],(y<=p&&c<=y||p<=y&&y<=c)&&(v=(y-p)/(c-p)*(h-g)+g,N.push(v)),g=h,p=c}var M=NaN,O=-1/0;for(N.sort(e.numberSafeCompareFunction),g=N[0],f=1,l=N.length;f<l;++f){h=N[f];var P=Math.abs(h-g);P>O&&(v=(g+h)/2,(0,r.linearRingsContainsXY)(t,n,a,o,v,y)&&(M=v,O=P)),g=h}return isNaN(M)&&(M=i[s]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var i=[],s=0,u=n.length;s<u;++s){var f=n[s];i=t(r,e,f,a,o,2*s,i),e=f[f.length-1]}return i}
},{"./contains.js":"dzdN","../../array.js":"luEr"}],"U8i0":[function(require,module,exports) {
"use strict";function e(e,r,t,o,u){for(var f,n=[e[r],e[r+1]],s=[];r+o<t;r+=o){if(s[0]=e[r+o],s[1]=e[r+o+1],f=u(n,s))return f;n[0]=s[0],n[1]=s[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"GZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./segments.js"),r=require("./contains.js");function t(r,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),r,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,e.forEach)(r,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,e,i,s,a){return!!t(n,e,i,s,a)||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[1])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[3])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[1])||!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[3]))))}function a(n,e,i,a,o){if(!s(n,e,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,r.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"QDir","./segments.js":"U8i0","./contains.js":"dzdN"}],"ElTe":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"cJkE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=e,exports.linearRingsAreOriented=t,exports.linearRingssAreOriented=i,exports.orientLinearRings=o,exports.orientLinearRingsArray=a;var r=require("./reverse.js");function e(r,e,t,i){for(var o=!0,a=0;a<i;++a)if(r[e+a]!==r[t-i+a]){o=!1;break}o&&(t-=i);var s=n(r,e,t,i),u=s-i;u<e&&(u=t-i);var f=s+i;f>=t&&(f=e);var v=r[u],l=r[u+1],g=r[s],c=r[s+1],d=r[f],p=r[f+1];return g*p+v*c+l*d-(l*g+c*d+v*p)<0}function n(r,e,n,t){for(var i=-1,o=1/0,a=1/0,s=e;s<n;s+=t){var u=r[s],f=r[s+1];f>o||(f==o&&u>=a||(i=s,o=f,a=u))}return i}function t(r,n,t,i,o){for(var a=void 0!==o&&o,s=0,u=t.length;s<u;++s){var f=t[s],v=e(r,n,f,i);if(0===s){if(a&&v||!a&&!v)return!1}else if(a&&!v||!a&&v)return!1;n=f}return!0}function i(r,e,n,i,o){for(var a=0,s=n.length;a<s;++a){var u=n[a];if(!t(r,e,u,i,o))return!1;u.length&&(e=u[u.length-1])}return!0}function o(n,t,i,o,a){for(var s=void 0!==a&&a,u=0,f=i.length;u<f;++u){var v=i[u],l=e(n,t,v,o);(0===u?s&&l||!s&&!l:s&&!l||!s&&l)&&(0,r.coordinates)(n,t,v,o),t=v}return t}function a(r,e,n,t,i){for(var a=0,s=n.length;a<s;++a)e=o(r,e,n[a],t,i);return e}
},{"./reverse.js":"ElTe"}],"Nwwk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=x,exports.fromExtent=j,exports.fromCircle=P,exports.makeRegular=m,exports.default=void 0;var t=C(require("./GeometryLayout.js")),e=C(require("./GeometryType.js")),i=C(require("./LinearRing.js")),r=C(require("./Point.js")),n=C(require("./SimpleGeometry.js")),s=require("./flat/closest.js"),o=require("../extent.js"),a=require("./flat/deflate.js"),l=require("../array.js"),d=require("./flat/interiorpoint.js"),h=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),g=require("./flat/area.js"),p=require("./flat/contains.js"),c=require("../math.js"),_=require("./flat/simplify.js"),y=require("../sphere.js");function C(t){return t&&t.__esModule?t:{default:t}}var v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),R=function(n){function c(t,e,i){var r=n.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==e&&i?(r.setFlatCoordinates(e,t),r.ends_=i):r.setCoordinates(t,e),r}return v(c,n),c.prototype.appendLinearRing=function(t){this.flatCoordinates?(0,l.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},c.prototype.clone=function(){return new c(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},c.prototype.closestPointXY=function(t,e,i,r){return r<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))},c.prototype.containsXY=function(t,e){return(0,p.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},c.prototype.getArea=function(){return(0,g.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},c.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,h.inflateCoordinatesArray)(e,0,this.ends_,this.stride)},c.prototype.getEnds=function(){return this.ends_},c.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,o.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,d.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},c.prototype.getInteriorPoint=function(){return new r.default(this.getFlatInteriorPoint(),t.default.XYM)},c.prototype.getLinearRingCount=function(){return this.ends_.length},c.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new i.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},c.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],s=0,o=0,a=r.length;o<a;++o){var l=r[o],d=new i.default(e.slice(s,l),t);n.push(d),s=l}return n},c.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},c.prototype.getSimplifiedGeometryInternal=function(e){var i=[],r=[];return i.length=(0,_.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),i,0,r),new c(i,t.default.XY,r)},c.prototype.getType=function(){return e.default.POLYGON},c.prototype.intersectsExtent=function(t){return(0,u.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},c.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,a.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},c}(n.default),q=R;function x(e,i,r,n){for(var s=r||32,o=[],a=0;a<s;++a)(0,l.extend)(o,(0,y.offset)(e,i,2*Math.PI*a/s,n));return o.push(o[0],o[1]),new R(o,t.default.XY,[o.length])}function j(e){var i=e[0],r=e[1],n=e[2],s=e[3],o=[i,r,i,s,n,s,n,r,i,r];return new R(o,t.default.XY,[o.length])}function P(t,e,i){for(var r=e||32,n=t.getStride(),s=t.getLayout(),o=t.getCenter(),a=n*(r+1),l=new Array(a),d=0;d<a;d+=n){l[d]=0,l[d+1]=0;for(var h=2;h<n;h++)l[d+h]=o[h]}var u=[l.length],f=new R(l,s,u);return m(f,o,t.getRadius(),i),f}function m(t,e,i,r){for(var n=t.getFlatCoordinates(),s=t.getStride(),o=n.length/s-1,a=r||0,l=0;l<=o;++l){var d=l*s,h=a+2*(0,c.modulo)(l,o)*Math.PI/o;n[d]=e[0]+i*Math.cos(h),n[d+1]=e[1]+i*Math.sin(h)}t.changed()}exports.default=q;
},{"./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./LinearRing.js":"jRgU","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","../array.js":"luEr","./flat/interiorpoint.js":"UDvN","./flat/inflate.js":"znXl","./flat/intersectsextent.js":"GZir","./flat/orient.js":"cJkE","./flat/area.js":"EOSm","./flat/contains.js":"dzdN","../math.js":"B96G","./flat/simplify.js":"IEpt","../sphere.js":"q4ER"}],"hNqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=j,exports.createResolutionConstraint=x,exports.createRotationConstraint=A,exports.isNoopAnimation=E,exports.default=void 0;var t=v(require("./Object.js")),o=v(require("./geom/GeometryType.js")),e=v(require("./proj/Units.js")),n=v(require("./ViewHint.js")),i=v(require("./ViewProperty.js")),r=require("./tilegrid/common.js"),s=require("./proj.js"),a=require("./functions.js"),u=require("./coordinate.js"),h=require("./asserts.js"),l=require("./obj.js"),c=require("./centerconstraint.js"),p=require("./math.js"),g=require("./resolutionconstraint.js"),m=require("./rotationconstraint.js"),f=require("./easing.js"),_=require("./extent.js"),d=require("./array.js"),R=require("./geom/Polygon.js");function v(t){return t&&t.__esModule?t:{default:t}}var y=function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),C=0,I=function(t){function e(o){var e=t.call(this)||this,n=(0,l.assign)({},o);return e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=(0,s.createProjection)(n.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.cancelAnchor_=void 0,n.center&&(n.center=(0,s.fromUserCoordinate)(n.center,e.projection_)),n.extent&&(n.extent=(0,s.fromUserExtent)(n.extent,e.projection_)),e.applyOptions_(n),e}return y(e,t),e.prototype.applyOptions_=function(t){var o=x(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=o.minZoom;var e=j(t),n=o.constraint,i=A(t);this.constraints_={center:e,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var o=(0,l.assign)({},this.options_);return void 0!==o.resolution?o.resolution=this.getResolution():o.zoom=this.getZoom(),o.center=this.getCenterInternal(),o.rotation=this.getRotation(),(0,l.assign)({},o,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var o=new Array(arguments.length),e=0;e<o.length;++e){var n=arguments[e];n.center&&((n=(0,l.assign)({},n)).center=(0,s.fromUserCoordinate)(n.center,this.getProjection())),n.anchor&&((n=(0,l.assign)({},n)).anchor=(0,s.fromUserCoordinate)(n.anchor,this.getProjection())),o[e]=n}this.animateInternal.apply(this,o)},e.prototype.animateInternal=function(t){var o,e=arguments.length;if(e>1&&"function"==typeof arguments[e-1]&&(o=arguments[e-1],--e),!this.isDef()){var i=arguments[e-1];return i.center&&this.setCenterInternal(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(o&&M(o,!0))}for(var r=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,u=this.targetRotation_,h=[],l=0;l<e;++l){var c=arguments[l],g={start:r,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||f.inAndOut,callback:o};if(c.center&&(g.sourceCenter=s,g.targetCenter=c.center.slice(),s=g.targetCenter),void 0!==c.zoom?(g.sourceResolution=a,g.targetResolution=this.getResolutionForZoom(c.zoom),a=g.targetResolution):c.resolution&&(g.sourceResolution=a,g.targetResolution=c.resolution,a=g.targetResolution),void 0!==c.rotation){g.sourceRotation=u;var m=(0,p.modulo)(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=u+m,u=g.targetRotation}E(g)?g.complete=!0:r+=g.duration,h.push(g)}this.animations_.push(h),this.setHint(n.default.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[n.default.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[n.default.INTERACTING]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(n.default.ANIMATING,-this.hints_[n.default.ANIMATING]);for(var o=0,e=this.animations_.length;o<e;++o){var i=this.animations_[o];if(i[0].callback&&M(i[0].callback,!1),!t)for(var r=0,s=i.length;r<s;++r){var a=i[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),o=!1,e=this.animations_.length-1;e>=0;--e){for(var i=this.animations_[e],r=!0,s=0,a=i.length;s<a;++s){var u=i[s];if(!u.complete){var h=t-u.start,l=u.duration>0?h/u.duration:1;l>=1?(u.complete=!0,l=1):r=!1;var c=u.easing(l);if(u.sourceCenter){var g=u.sourceCenter[0],m=u.sourceCenter[1],f=g+c*(u.targetCenter[0]-g),_=m+c*(u.targetCenter[1]-m);this.targetCenter_=[f,_]}if(u.sourceResolution&&u.targetResolution){var d=1===c?u.targetResolution:u.sourceResolution+c*(u.targetResolution-u.sourceResolution);if(u.anchor){var R=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(d,0,R,!0);this.targetCenter_=this.calculateCenterZoom(v,u.anchor)}this.targetResolution_=d,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var y=1===c?(0,p.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+c*(u.targetRotation-u.sourceRotation);if(u.anchor){var C=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(C,u.anchor)}this.targetRotation_=y}if(this.applyTargetState_(!0),o=!0,!u.complete)break}}if(r){this.animations_[e]=null,this.setHint(n.default.ANIMATING,-1);var I=i[0].callback;I&&M(I,!0)}}this.animations_=this.animations_.filter(Boolean),o&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,o){var e,n=this.getCenterInternal();return void 0!==n&&(e=[n[0]-o[0],n[1]-o[1]],(0,u.rotate)(e,t-this.getRotation()),(0,u.add)(e,o)),e},e.prototype.calculateCenterZoom=function(t,o){var e,n=this.getCenterInternal(),i=this.getResolution();void 0!==n&&void 0!==i&&(e=[o[0]-t*(o[0]-n[0])/i,o[1]-t*(o[1]-n[1])/i]);return e},e.prototype.getViewportSize_=function(t){var o=this.viewportSize_;if(t){var e=o[0],n=o[1];return[Math.abs(e*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(e*Math.sin(t))+Math.abs(n*Math.cos(t))]}return o},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?(0,s.toUserCoordinate)(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(i.default.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var o=this.calculateExtentInternal(t);return(0,s.toUserExtent)(o,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var o=t||this.getViewportSize_(),e=this.getCenterInternal();(0,h.assert)(e,1);var n=this.getResolution();(0,h.assert)(void 0!==n,2);var i=this.getRotation();return(0,h.assert)(void 0!==i,3),(0,_.getForViewAndSize)(e,n,i,o)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(i.default.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,o){return this.getResolutionForExtentInternal((0,s.fromUserExtent)(t,this.getProjection()),o)},e.prototype.getResolutionForExtentInternal=function(t,o){var e=o||this.getViewportSize_(),n=(0,_.getWidth)(t)/e[0],i=(0,_.getHeight)(t)/e[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var o=t||2,e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(o);return function(t){return e/Math.pow(o,t*i)}},e.prototype.getRotation=function(){return this.get(i.default.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var o=Math.log(t||2),e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/o;return function(t){return Math.log(e/t)/o/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),o=this.getProjection(),e=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==o?o:null,resolution:e,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,o=this.getResolution();return void 0!==o&&(t=this.getZoomForResolution(o)),t},e.prototype.getZoomForResolution=function(t){var o,e,n=this.minZoom_||0;if(this.resolutions_){var i=(0,d.linearFindNearest)(this.resolutions_,t,1);n=i,o=this.resolutions_[i],e=i==this.resolutions_.length-1?2:o/this.resolutions_[i+1]}else o=this.maxResolution_,e=this.zoomFactor_;return n+Math.log(o/t)/Math.log(e)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var o=(0,p.clamp)(Math.floor(t),0,this.resolutions_.length-2),e=this.resolutions_[o]/this.resolutions_[o+1];return this.resolutions_[o]/Math.pow(e,(0,p.clamp)(t-o,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n,i=(0,l.assign)({size:this.getViewportSize_()},e||{});if((0,h.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,h.assert)(!(0,_.isEmpty)(t),25);var r=(0,s.fromUserExtent)(t,this.getProjection());n=(0,R.fromExtent)(r)}else if(t.getType()===o.default.CIRCLE){r=(0,s.fromUserExtent)(t.getExtent(),this.getProjection());(n=(0,R.fromExtent)(r)).rotate(this.getRotation(),(0,_.getCenter)(r))}else{var a=(0,s.getUserProjection)();n=a?t.clone().transform(a,this.getProjection()):t}this.fitInternal(n,i)},e.prototype.fitInternal=function(t,o){var e=o||{},n=e.size;n||(n=this.getViewportSize_());var i,r=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;i=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;for(var u=t.getFlatCoordinates(),h=this.getRotation(),l=Math.cos(-h),c=Math.sin(-h),p=1/0,g=1/0,m=-1/0,f=-1/0,_=t.getStride(),d=0,R=u.length;d<R;d+=_){var v=u[d]*l-u[d+1]*c,y=u[d]*c+u[d+1]*l;p=Math.min(p,v),g=Math.min(g,y),m=Math.max(m,v),f=Math.max(f,y)}var C=this.getResolutionForExtentInternal([p,g,m,f],[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);C=isNaN(C)?i:Math.max(C,i),C=this.getConstrainedResolution(C,s?0:1),c=-c;var I=(p+m)/2,j=(g+f)/2,x=[(I+=(r[1]-r[3])/2*C)*l-(j+=(r[0]-r[2])/2*C)*c,j*l+I*c],A=e.callback?e.callback:a.VOID;void 0!==e.duration?this.animateInternal({resolution:C,center:this.getConstrainedCenter(x,C),duration:e.duration,easing:e.easing},A):(this.targetResolution_=C,this.targetCenter_=x,this.applyTargetState_(!1,!0),M(A,!0))},e.prototype.centerOn=function(t,o,e){this.centerOnInternal((0,s.fromUserCoordinate)(t,this.getProjection()),o,e)},e.prototype.centerOnInternal=function(t,o,e){var n=this.getRotation(),i=Math.cos(-n),r=Math.sin(-n),s=t[0]*i-t[1]*r,a=t[1]*i+t[0]*r,u=this.getResolution(),h=(s+=(o[0]/2-e[0])*u)*i-(a+=(e[1]-o[1]/2)*u)*(r=-r),l=a*i+s*r;this.setCenterInternal([h,l])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var o=(0,s.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([o[0]+t[0],o[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var o=this.targetCenter_;this.setCenterInternal([o[0]+t[0],o[1]+t[1]])},e.prototype.adjustResolution=function(t,o){var e=o&&(0,s.fromUserCoordinate)(o,this.getProjection());this.adjustResolutionInternal(t,e)},e.prototype.adjustResolutionInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,e);o&&(this.targetCenter_=this.calculateCenterZoom(i,o)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,o){this.adjustResolution(Math.pow(this.zoomFactor_,-t),o)},e.prototype.adjustRotation=function(t,o){o&&(o=(0,s.fromUserCoordinate)(o,this.getProjection())),this.adjustRotationInternal(t,o)},e.prototype.adjustRotationInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,e);o&&(this.targetCenter_=this.calculateCenterRotate(n,o)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal((0,s.fromUserCoordinate)(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,o){return this.hints_[t]+=o,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,o){var e=this.getAnimating()||this.getInteracting()||o,n=this.constraints_.rotation(this.targetRotation_,e),r=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,r,e),a=this.constraints_.center(this.targetCenter_,s,r,e);this.get(i.default.ROTATION)!==n&&this.set(i.default.ROTATION,n),this.get(i.default.RESOLUTION)!==s&&this.set(i.default.RESOLUTION,s),this.get(i.default.CENTER)&&(0,u.equals)(this.get(i.default.CENTER),a)||this.set(i.default.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,o,e){var n=void 0!==t?t:200,i=o||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),h=this.constraints_.center(this.targetCenter_,a,s);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=h,void this.applyTargetState_();var l=e||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&(0,u.equals)(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:h,resolution:a,duration:n,easing:f.easeOut,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(n.default.INTERACTING,1)},e.prototype.endInteraction=function(t,o,e){var n=e&&(0,s.fromUserCoordinate)(e,this.getProjection());this.endInteractionInternal(t,o,n)},e.prototype.endInteractionInternal=function(t,o,e){this.setHint(n.default.INTERACTING,-1),this.resolveConstraints(t,o,e)},e.prototype.getConstrainedCenter=function(t,o){var e=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,o||this.getResolution(),e)},e.prototype.getConstrainedZoom=function(t,o){var e=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(e,o))},e.prototype.getConstrainedResolution=function(t,o){var e=o||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)},e}(t.default);function M(t,o){setTimeout(function(){t(o)},0)}function j(t){if(void 0!==t.extent){var o=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,c.createExtent)(t.extent,t.constrainOnlyCenter,o)}var e=(0,s.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,(0,c.createExtent)(n,!1,!1)}return c.none}function x(t){var o,n,i,a=void 0!==t.minZoom?t.minZoom:C,u=void 0!==t.maxZoom?t.maxZoom:28,h=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,m=(0,s.createProjection)(t.projection,"EPSG:3857"),f=m.getExtent(),d=t.constrainOnlyCenter,R=t.extent;if(l||R||!m.isGlobal()||(d=!1,R=f),void 0!==t.resolutions){var v=t.resolutions;n=v[a],i=void 0!==v[u]?v[u]:v[v.length-1],o=t.constrainResolution?(0,g.createSnapToResolutions)(v,c,!d&&R,p):(0,g.createMinMaxResolution)(n,i,c,!d&&R,p)}else{var y=(f?Math.max((0,_.getWidth)(f),(0,_.getHeight)(f)):360*s.METERS_PER_UNIT[e.default.DEGREES]/m.getMetersPerUnit())/r.DEFAULT_TILE_SIZE/Math.pow(2,C),I=y/Math.pow(2,28-C);void 0!==(n=t.maxResolution)?a=0:n=y/Math.pow(h,a),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(h,u):y/Math.pow(h,u):I),u=a+Math.floor(Math.log(n/i)/Math.log(h)),i=n/Math.pow(h,u-a),o=t.constrainResolution?(0,g.createSnapToPower)(h,n,i,c,!d&&R,p):(0,g.createMinMaxResolution)(n,i,c,!d&&R,p)}return{constraint:o,maxResolution:n,minResolution:i,minZoom:a,zoomFactor:h}}function A(t){if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?(0,m.createSnapToZero)():!1===o?m.none:"number"==typeof o?(0,m.createSnapToN)(o):m.none}return m.disable}function E(t){return!(t.sourceCenter&&t.targetCenter&&!(0,u.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var T=I;exports.default=T;
},{"./Object.js":"PhPh","./geom/GeometryType.js":"lmV0","./proj/Units.js":"yZx6","./ViewHint.js":"cuLW","./ViewProperty.js":"cE7c","./tilegrid/common.js":"mOEX","./proj.js":"Diht","./functions.js":"RgA2","./coordinate.js":"nGsj","./asserts.js":"fLG6","./obj.js":"mH6q","./centerconstraint.js":"Rc7z","./math.js":"B96G","./resolutionconstraint.js":"o7nl","./rotationconstraint.js":"EKd0","./easing.js":"IeCz","./extent.js":"QDir","./array.js":"luEr","./geom/Polygon.js":"Nwwk"}],"TAHd":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"kRwz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=x(require("./Object.js")),t=S(require("./Collection.js")),r=S(require("./CollectionEventType.js")),n=S(require("./events/EventType.js")),i=S(require("./layer/Group.js")),o=S(require("./MapBrowserEvent.js")),a=S(require("./MapBrowserEventHandler.js")),s=S(require("./MapBrowserEventType.js")),l=S(require("./MapEvent.js")),d=S(require("./MapEventType.js")),u=S(require("./MapProperty.js")),p=S(require("./ObjectEventType.js")),h=S(require("./pointer/EventType.js")),y=S(require("./render/EventType.js")),v=x(require("./TileQueue.js")),f=S(require("./View.js")),c=S(require("./ViewHint.js")),_=require("./has.js"),E=require("./functions.js"),g=require("./transform.js"),m=require("./asserts.js"),w=require("./extent.js"),T=require("./proj.js"),C=require("./size.js"),L=require("./events.js"),R=require("./dom.js");function S(e){return e&&e.__esModule?e:{default:e}}function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=P();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var I=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A=function(i){function f(n){var o=i.call(this)||this,a=O(n);return o.boundHandleBrowserEvent_=o.handleBrowserEvent.bind(o),o.maxTilesLoading_=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,o.pixelRatio_=void 0!==n.pixelRatio?n.pixelRatio:_.DEVICE_PIXEL_RATIO,o.postRenderTimeoutHandle_,o.animationDelayKey_,o.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(o),o.coordinateToPixelTransform_=(0,g.create)(),o.pixelToCoordinateTransform_=(0,g.create)(),o.frameIndex_=0,o.frameState_=null,o.previousExtent_=null,o.viewPropertyListenerKey_=null,o.viewChangeListenerKey_=null,o.layerGroupPropertyListenerKeys_=null,o.viewport_=document.createElement("div"),o.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),o.viewport_.style.position="relative",o.viewport_.style.overflow="hidden",o.viewport_.style.width="100%",o.viewport_.style.height="100%",o.overlayContainer_=document.createElement("div"),o.overlayContainer_.style.position="absolute",o.overlayContainer_.style.zIndex="0",o.overlayContainer_.style.width="100%",o.overlayContainer_.style.height="100%",o.overlayContainer_.style.pointerEvents="none",o.overlayContainer_.className="ol-overlaycontainer",o.viewport_.appendChild(o.overlayContainer_),o.overlayContainerStopEvent_=document.createElement("div"),o.overlayContainerStopEvent_.style.position="absolute",o.overlayContainerStopEvent_.style.zIndex="0",o.overlayContainerStopEvent_.style.width="100%",o.overlayContainerStopEvent_.style.height="100%",o.overlayContainerStopEvent_.style.pointerEvents="none",o.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",o.viewport_.appendChild(o.overlayContainerStopEvent_),o.mapBrowserEventHandler_=null,o.moveTolerance_=n.moveTolerance,o.keyboardEventTarget_=a.keyboardEventTarget,o.keyHandlerKeys_=null,o.controls=a.controls||new t.default,o.interactions=a.interactions||new t.default,o.overlays_=a.overlays,o.overlayIdIndex_={},o.renderer_=null,o.handleResize_,o.postRenderFunctions_=[],o.tileQueue_=new v.default(o.getTilePriority.bind(o),o.handleTileChange_.bind(o)),o.addEventListener((0,e.getChangeEventType)(u.default.LAYERGROUP),o.handleLayerGroupChanged_),o.addEventListener((0,e.getChangeEventType)(u.default.VIEW),o.handleViewChanged_),o.addEventListener((0,e.getChangeEventType)(u.default.SIZE),o.handleSizeChanged_),o.addEventListener((0,e.getChangeEventType)(u.default.TARGET),o.handleTargetChanged_),o.setProperties(a.values),o.controls.forEach(function(e){e.setMap(this)}.bind(o)),o.controls.addEventListener(r.default.ADD,function(e){e.element.setMap(this)}.bind(o)),o.controls.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.interactions.forEach(function(e){e.setMap(this)}.bind(o)),o.interactions.addEventListener(r.default.ADD,function(e){e.element.setMap(this)}.bind(o)),o.interactions.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.overlays_.forEach(o.addOverlayInternal_.bind(o)),o.overlays_.addEventListener(r.default.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(o)),o.overlays_.addEventListener(r.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(o)),o}return I(f,i),f.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},f.prototype.addControl=function(e){this.getControls().push(e)},f.prototype.addInteraction=function(e){this.getInteractions().push(e)},f.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},f.prototype.addOverlay=function(e){this.getOverlays().push(e)},f.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},f.prototype.disposeInternal=function(){this.setTarget(null),i.prototype.disposeInternal.call(this)},f.prototype.forEachFeatureAtPixel=function(e,t,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:E.TRUE,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,t,null,o,null)}},f.prototype.getFeaturesAtPixel=function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r},f.prototype.forEachLayerAtPixel=function(e,t,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||E.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,i,t,o)}},f.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:E.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},f.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},f.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},f.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]},f.prototype.getTarget=function(){return this.get(u.default.TARGET)},f.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},f.prototype.getCoordinateFromPixel=function(e){return(0,T.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},f.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?(0,g.apply)(t.pixelToCoordinateTransform,e.slice()):null},f.prototype.getControls=function(){return this.controls},f.prototype.getOverlays=function(){return this.overlays_},f.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},f.prototype.getInteractions=function(){return this.interactions},f.prototype.getLayerGroup=function(){return this.get(u.default.LAYERGROUP)},f.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},f.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer.getSource();if(n&&n.loading)return!0}return!1},f.prototype.getPixelFromCoordinate=function(e){var t=(0,T.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},f.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?(0,g.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null},f.prototype.getRenderer=function(){return this.renderer_},f.prototype.getSize=function(){return this.get(u.default.SIZE)},f.prototype.getView=function(){return this.get(u.default.VIEW)},f.prototype.getViewport=function(){return this.viewport_},f.prototype.getOverlayContainer=function(){return this.overlayContainer_},f.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},f.prototype.getTilePriority=function(e,t,r,n){return(0,v.getTilePriority)(this.frameState_,e,t,r,n)},f.prototype.handleBrowserEvent=function(e,t){var r=t||e.type,n=new o.default(r,this,e);this.handleMapBrowserEvent(n)},f.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===h.default.POINTERDOWN||r===n.default.WHEEL||r===n.default.KEYDOWN){var i=this.viewport_.getRootNode?this.viewport_.getRootNode():document,o=i===document?t.target:i.elementFromPoint(t.clientX,t.clientY);if(this.overlayContainerStopEvent_.contains(o)||!(i===document?document.documentElement:i).contains(o))return}e.frameState=this.frameState_;var a=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(var s=a.length-1;s>=0;s--){var l=a[s];if(l.getActive())if(!l.handleEvent(e))break}}},f.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[c.default.ANIMATING]||i[c.default.INTERACTING]){var o=!_.IMAGE_DECODE&&Date.now()-e.time>8;r=o?0:8,n=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}!e||!this.hasListener(y.default.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(y.default.RENDERCOMPLETE,e);for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,e);a.length=0},f.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},f.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.mapBrowserEventHandler_){for(var t=0,r=this.keyHandlerKeys_.length;t<r;++t)(0,L.unlistenByKey)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(n.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(n.default.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(n.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,R.removeNode)(this.viewport_)}if(e){for(var i in e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new a.default(this,this.moveTolerance_),s.default)this.mapBrowserEventHandler_.addEventListener(s.default[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(n.default.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(n.default.WHEEL,this.boundHandleBrowserEvent_,!!_.PASSIVE_EVENT_LISTENERS&&{passive:!1});var o=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[(0,L.listen)(o,n.default.KEYDOWN,this.handleBrowserEvent,this),(0,L.listen)(o,n.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(n.default.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},f.prototype.handleTileChange_=function(){this.render()},f.prototype.handleViewPropertyChanged_=function(){this.render()},f.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,L.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,L.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,L.listen)(e,p.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,L.listen)(e,n.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},f.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(L.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[(0,L.listen)(e,p.default.PROPERTYCHANGE,this.render,this),(0,L.listen)(e,n.default.CHANGE,this.render,this)]),this.render()},f.prototype.isRendered=function(){return!!this.frameState_},f.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},f.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},f.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},f.prototype.removeControl=function(e){return this.getControls().remove(e)},f.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},f.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},f.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},f.prototype.renderFrame_=function(e){var t=this.getSize(),r=this.getView(),n=this.frameState_,i=null;if(void 0!==t&&(0,C.hasArea)(t)&&r&&r.isDef()){var o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:(0,w.getForViewAndSize)(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),n)(!this.previousExtent_||!(0,w.isEmpty)(this.previousExtent_)&&!(0,w.equals)(i.extent,this.previousExtent_))&&(this.dispatchEvent(new l.default(d.default.MOVESTART,this,n)),this.previousExtent_=(0,w.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!i.viewHints[c.default.ANIMATING]&&!i.viewHints[c.default.INTERACTING]&&!(0,w.equals)(i.extent,this.previousExtent_)&&(this.dispatchEvent(new l.default(d.default.MOVEEND,this,i)),(0,w.clone)(i.extent,this.previousExtent_))}this.dispatchEvent(new l.default(d.default.POSTRENDER,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},f.prototype.setLayerGroup=function(e){this.set(u.default.LAYERGROUP,e)},f.prototype.setSize=function(e){this.set(u.default.SIZE,e)},f.prototype.setTarget=function(e){this.set(u.default.TARGET,e)},f.prototype.setView=function(e){this.set(u.default.VIEW,e)},f.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},f.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}},f}(e.default);function O(e){var r=null;void 0!==e.keyboardEventTarget&&(r="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var n,o,a,s={},l=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new i.default({layers:e.layers});return s[u.default.LAYERGROUP]=l,s[u.default.TARGET]=e.target,s[u.default.VIEW]=void 0!==e.view?e.view:new f.default,void 0!==e.controls&&(Array.isArray(e.controls)?n=new t.default(e.controls.slice()):((0,m.assert)("function"==typeof e.controls.getArray,47),n=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?o=new t.default(e.interactions.slice()):((0,m.assert)("function"==typeof e.interactions.getArray,48),o=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?a=new t.default(e.overlays.slice()):((0,m.assert)("function"==typeof e.overlays.getArray,49),a=e.overlays):a=new t.default,{controls:n,interactions:o,keyboardEventTarget:r,overlays:a,values:s}}var b=A;exports.default=b;
},{"./Object.js":"PhPh","./Collection.js":"FnDa","./CollectionEventType.js":"BTrx","./events/EventType.js":"C8cu","./layer/Group.js":"q0nK","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserEventType.js":"YhDM","./MapEvent.js":"vFcA","./MapEventType.js":"xLGm","./MapProperty.js":"zlNQ","./ObjectEventType.js":"zehl","./pointer/EventType.js":"TaSm","./render/EventType.js":"z39m","./TileQueue.js":"tHOl","./View.js":"hNqE","./ViewHint.js":"cuLW","./has.js":"f3Nv","./functions.js":"RgA2","./transform.js":"P4eA","./asserts.js":"fLG6","./extent.js":"QDir","./proj.js":"Diht","./size.js":"TAHd","./events.js":"UqnM","./dom.js":"Xno5"}],"xxE2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../Object.js")),t=s(require("../MapEventType.js")),r=require("../functions.js"),n=require("../events.js"),o=require("../dom.js");function s(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(e){function s(t){var r=e.call(this)||this,n=t.element;return!n||t.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],t.render&&(r.render=t.render),t.target&&r.setTarget(t.target),r}return i(s,e),s.prototype.disposeInternal=function(){(0,o.removeNode)(this.element),e.prototype.disposeInternal.call(this)},s.prototype.getMap=function(){return this.map_},s.prototype.setMap=function(e){this.map_&&(0,o.removeNode)(this.element);for(var s=0,i=this.listenerKeys.length;s<i;++s)(0,n.unlistenByKey)(this.listenerKeys[s]);(this.listenerKeys.length=0,this.map_=e,this.map_)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.VOID&&this.listenerKeys.push((0,n.listen)(e,t.default.POSTRENDER,this.render,this)),e.render())},s.prototype.render=function(e){},s.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},s}(e.default),u=p;exports.default=u;
},{"../Object.js":"PhPh","../MapEventType.js":"xLGm","../functions.js":"RgA2","../events.js":"UqnM","../dom.js":"Xno5"}],"Q4Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./Control.js")),t=s(require("../events/EventType.js")),l=require("../css.js"),i=require("../array.js"),o=require("../layer/Layer.js"),r=require("../dom.js");function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=function(t,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])})(t,l)};return function(t,l){function i(){this.constructor=t}e(t,l),t.prototype=null===l?Object.create(l):(i.prototype=l.prototype,new i)}}(),n=function(e){function s(i){var o=this,r=i||{};(o=e.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ulElement_=document.createElement("ul"),o.collapsed_=void 0===r.collapsed||r.collapsed,o.overrideCollapsible_=void 0!==r.collapsible,o.collapsible_=void 0===r.collapsible||r.collapsible,o.collapsible_||(o.collapsed_=!1);var s=void 0!==r.className?r.className:"ol-attribution",a=void 0!==r.tipLabel?r.tipLabel:"Attributions",n=void 0!==r.collapseLabel?r.collapseLabel:"»";"string"==typeof n?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=n):o.collapseLabel_=n;var p=void 0!==r.label?r.label:"i";"string"==typeof p?(o.label_=document.createElement("span"),o.label_.textContent=p):o.label_=p;var c=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=a,d.appendChild(c),d.addEventListener(t.default.CLICK,o.handleClick_.bind(o),!1);var u=s+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+(o.collapsed_&&o.collapsible_?" "+l.CLASS_COLLAPSED:"")+(o.collapsible_?"":" ol-uncollapsible"),_=o.element;return _.className=u,_.appendChild(o.ulElement_),_.appendChild(d),o.renderedAttributions_=[],o.renderedVisible_=!0,o}return a(s,e),s.prototype.collectSourceAttributions_=function(e){for(var t={},l=[],i=e.layerStatesArray,r=0,s=i.length;r<s;++r){var a=i[r];if((0,o.inView)(a,e.viewState)){var n=a.layer.getSource();if(n){var p=n.getAttributions();if(p){var c=p(e);if(c)if(this.overrideCollapsible_||!1!==n.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(var d=0,u=c.length;d<u;++d)c[d]in t||(l.push(c[d]),t[c[d]]=!0);else c in t||(l.push(c),t[c]=!0)}}}}return l},s.prototype.updateElement_=function(e){if(e){var t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!(0,i.equals)(t,this.renderedAttributions_)){(0,r.removeChildren)(this.ulElement_);for(var o=0,s=t.length;o<s;++o){var a=document.createElement("li");a.innerHTML=t[o],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},s.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},s.prototype.handleToggle_=function(){this.element.classList.toggle(l.CLASS_COLLAPSED),this.collapsed_?(0,r.replaceNode)(this.collapseLabel_,this.label_):(0,r.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},s.prototype.getCollapsible=function(){return this.collapsible_},s.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},s.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},s.prototype.getCollapsed=function(){return this.collapsed_},s.prototype.render=function(e){this.updateElement_(e.frameState)},s}(e.default),p=n;exports.default=p;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../array.js":"luEr","../layer/Layer.js":"GCgv","../dom.js":"Xno5"}],"sCgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Control.js")),e=r(require("../events/EventType.js")),a=require("../css.js"),o=require("../easing.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function o(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(o.prototype=a.prototype,new o)}}(),n=function(t){function r(o){var r=this,i=o||{};r=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var n=void 0!==i.className?i.className:"ol-rotate",s=void 0!==i.label?i.label:"⇧";r.label_=null,"string"==typeof s?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=s):(r.label_=s,r.label_.classList.add("ol-compass"));var l=i.tipLabel?i.tipLabel:"Reset rotation",u=document.createElement("button");u.className=n+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(r.label_),u.addEventListener(e.default.CLICK,r.handleClick_.bind(r),!1);var d=n+" "+a.CLASS_UNSELECTABLE+" "+a.CLASS_CONTROL,c=r.element;return c.className=d,c.appendChild(u),r.callResetNorth_=i.resetNorth?i.resetNorth:void 0,r.duration_=void 0!==i.duration?i.duration:250,r.autoHide_=void 0===i.autoHide||i.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(a.CLASS_HIDDEN),r}return i(r,t),r.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},r.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))}},r.prototype.render=function(t){var e=t.frameState;if(e){var o=e.viewState.rotation;if(o!=this.rotation_){var r="rotate("+o+"rad)";if(this.autoHide_){var i=this.element.classList.contains(a.CLASS_HIDDEN);i||0!==o?i&&0!==o&&this.element.classList.remove(a.CLASS_HIDDEN):this.element.classList.add(a.CLASS_HIDDEN)}this.label_.style.transform=r}this.rotation_=o}},r}(t.default),s=n;exports.default=s;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../easing.js":"IeCz"}],"L3CO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Control.js")),e=a(require("../events/EventType.js")),o=require("../css.js"),n=require("../easing.js");function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(t){function a(n){var a=this,i=n||{};a=t.call(this,{element:document.createElement("div"),target:i.target})||this;var r=void 0!==i.className?i.className:"ol-zoom",u=void 0!==i.delta?i.delta:1,d=void 0!==i.zoomInLabel?i.zoomInLabel:"+",l=void 0!==i.zoomOutLabel?i.zoomOutLabel:"−",s=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",c=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=r+"-in",p.setAttribute("type","button"),p.title=s,p.appendChild("string"==typeof d?document.createTextNode(d):d),p.addEventListener(e.default.CLICK,a.handleClick_.bind(a,u),!1);var m=document.createElement("button");m.className=r+"-out",m.setAttribute("type","button"),m.title=c,m.appendChild("string"==typeof l?document.createTextNode(l):l),m.addEventListener(e.default.CLICK,a.handleClick_.bind(a,-u),!1);var v=r+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,f=a.element;return f.className=v,f.appendChild(p),f.appendChild(m),a.duration_=void 0!==i.duration?i.duration:250,a}return i(a,t),a.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},a.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var o=e.getZoom();if(void 0!==o){var a=e.getConstrainedZoom(o+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:a,duration:this.duration_,easing:n.easeOut})):e.setZoom(a)}}},a}(t.default),u=r;exports.default=u;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../easing.js":"IeCz"}],"dOoh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=r(require("../events/EventType.js")),s=require("../css.js"),n=require("../events.js"),l=require("../dom.js");function r(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function n(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(n.prototype=s.prototype,new n)}}(),o=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],c={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},i=function(e){function r(n){var l=this,r=n||{};(l=e.call(this,{element:document.createElement("div"),target:r.target})||this).cssClassName_=void 0!==r.className?r.className:"ol-full-screen";var u=void 0!==r.label?r.label:"⤢";l.labelNode_="string"==typeof u?document.createTextNode(u):u;var o=void 0!==r.labelActive?r.labelActive:"×";l.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,l.button_=document.createElement("button");var c=r.tipLabel?r.tipLabel:"Toggle full-screen";l.setClassName_(l.button_,d()),l.button_.setAttribute("type","button"),l.button_.title=c,l.button_.appendChild(l.labelNode_),l.button_.addEventListener(t.default.CLICK,l.handleClick_.bind(l),!1);var i=l.cssClassName_+" "+s.CLASS_UNSELECTABLE+" "+s.CLASS_CONTROL+" "+(a()?"":s.CLASS_UNSUPPORTED),_=l.element;return _.className=i,_.appendChild(l.button_),l.keys_=void 0!==r.keys&&r.keys,l.source_=r.source,l}return u(r,e),r.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},r.prototype.handleFullScreen_=function(){if(a()){var e=this.getMap();if(e)if(d())m();else{var t=void 0;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?p(t):_(t)}}},r.prototype.handleFullScreenChange_=function(){var e=this.getMap();d()?(this.setClassName_(this.button_,!0),(0,l.replaceNode)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(c.ENTERFULLSCREEN)):(this.setClassName_(this.button_,!1),(0,l.replaceNode)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(c.LEAVEFULLSCREEN)),e&&e.updateSize()},r.prototype.setClassName_=function(e,t){var s=this.cssClassName_+"-true",n=this.cssClassName_+"-false",l=t?s:n;e.classList.remove(s),e.classList.remove(n),e.classList.add(l)},r.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t)for(var s=0,l=o.length;s<l;++s)this.listenerKeys.push((0,n.listen)(document,o[s],this.handleFullScreenChange_,this))},r}(e.default);function a(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function d(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function _(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function p(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():_(e)}function m(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var f=i;exports.default=f;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../events.js":"UqnM","../dom.js":"Xno5"}],"Cbl8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Control.js")),e=i(require("../pointer/EventType.js")),o=require("../Object.js"),r=require("../proj.js"),n=require("../events.js");function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),a="projection",u="coordinateFormat",p=function(t){function i(e){var r=this,n=e||{},i=document.createElement("div");return i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=t.call(this,{element:i,render:n.render,target:n.target})||this).addEventListener((0,o.getChangeEventType)(a),r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection),r.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return s(i,t),i.prototype.handleProjectionChanged_=function(){this.transform_=null},i.prototype.getCoordinateFormat=function(){return this.get(u)},i.prototype.getProjection=function(){return this.get(a)},i.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},i.prototype.handleMouseOut=function(t){this.updateHTML_(null)},i.prototype.setMap=function(o){if(t.prototype.setMap.call(this,o),o){var r=o.getViewport();this.listenerKeys.push((0,n.listen)(r,e.default.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,n.listen)(r,e.default.POINTEROUT,this.handleMouseOut,this))}},i.prototype.setCoordinateFormat=function(t){this.set(u,t)},i.prototype.setProjection=function(t){this.set(a,(0,r.get)(t))},i.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var o=this.getProjection();this.transform_=o?(0,r.getTransformFromProjections)(this.mapProjection_,o):r.identityTransform}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var i=(0,r.getUserProjection)();i&&(this.transform_=(0,r.getTransformFromProjections)(this.mapProjection_,i)),this.transform_(n,n);var s=this.getCoordinateFormat();e=s?s(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},i.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},i}(t.default),c=p;exports.default=c;
},{"./Control.js":"xxE2","../pointer/EventType.js":"TaSm","../Object.js":"PhPh","../proj.js":"Diht","../events.js":"UqnM"}],"VpAM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"qWcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Object.js")),t=a(require("./MapEventType.js")),n=a(require("./OverlayPositioning.js")),i=require("./css.js"),o=require("./extent.js"),r=require("./events.js"),s=require("./dom.js");function a(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},f=function(a){function p(t){var o=a.call(this)||this;o.options=t,o.id=t.id,o.insertFirst=void 0===t.insertFirst||t.insertFirst,o.stopEvent=void 0===t.stopEvent||t.stopEvent,o.element=document.createElement("div"),o.element.className=void 0!==t.className?t.className:"ol-overlay-container "+i.CLASS_SELECTABLE,o.element.style.position="absolute",o.element.style.pointerEvents="auto";var r=t.autoPan;return r&&"object"!=typeof r&&(r={animation:t.autoPanAnimation,margin:t.autoPanMargin}),o.autoPan=r||!1,o.rendered={transform_:"",visible:!0},o.mapPostrenderListenerKey=null,o.addEventListener((0,e.getChangeEventType)(l.ELEMENT),o.handleElementChanged),o.addEventListener((0,e.getChangeEventType)(l.MAP),o.handleMapChanged),o.addEventListener((0,e.getChangeEventType)(l.OFFSET),o.handleOffsetChanged),o.addEventListener((0,e.getChangeEventType)(l.POSITION),o.handlePositionChanged),o.addEventListener((0,e.getChangeEventType)(l.POSITIONING),o.handlePositioningChanged),void 0!==t.element&&o.setElement(t.element),o.setOffset(void 0!==t.offset?t.offset:[0,0]),o.setPositioning(void 0!==t.positioning?t.positioning:n.default.TOP_LEFT),void 0!==t.position&&o.setPosition(t.position),o}return d(p,a),p.prototype.getElement=function(){return this.get(l.ELEMENT)},p.prototype.getId=function(){return this.id},p.prototype.getMap=function(){return this.get(l.MAP)},p.prototype.getOffset=function(){return this.get(l.OFFSET)},p.prototype.getPosition=function(){return this.get(l.POSITION)},p.prototype.getPositioning=function(){return this.get(l.POSITIONING)},p.prototype.handleElementChanged=function(){(0,s.removeChildren)(this.element);var e=this.getElement();e&&this.element.appendChild(e)},p.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,s.removeNode)(this.element),(0,r.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,r.listen)(e,t.default.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},p.prototype.render=function(){this.updatePixelPosition()},p.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},p.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},p.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},p.prototype.setElement=function(e){this.set(l.ELEMENT,e)},p.prototype.setMap=function(e){this.set(l.MAP,e)},p.prototype.setOffset=function(e){this.set(l.OFFSET,e)},p.prototype.setPosition=function(e){this.set(l.POSITION,e)},p.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},p.prototype.panIntoView=function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(l.POSITION)){var n=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),r=this.getRect(i,[(0,s.outerWidth)(i),(0,s.outerHeight)(i)]),a=e||{},p=void 0===a.margin?20:a.margin;if(!(0,o.containsExtent)(n,r)){var u=r[0]-n[0],d=n[2]-r[2],f=r[1]-n[1],h=n[3]-r[3],g=[0,0];if(u<0?g[0]=u-p:d<0&&(g[0]=Math.abs(d)+p),f<0?g[1]=f-p:h<0&&(g[1]=Math.abs(h)+p),0!==g[0]||0!==g[1]){var c=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(c),P=[E[0]+g[0],E[1]+g[1]],y=a.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(P),duration:y.duration,easing:y.easing})}}}},p.prototype.getRect=function(e,t){var n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+t[0],o+t[1]]},p.prototype.setPositioning=function(e){this.set(l.POSITIONING,e)},p.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},p.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},p.prototype.updateRenderedPosition=function(e,t){var i=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var s=Math.round(e[0]+o[0])+"px",a=Math.round(e[1]+o[1])+"px",p="0%",u="0%";r==n.default.BOTTOM_RIGHT||r==n.default.CENTER_RIGHT||r==n.default.TOP_RIGHT?p="-100%":r!=n.default.BOTTOM_CENTER&&r!=n.default.CENTER_CENTER&&r!=n.default.TOP_CENTER||(p="-50%"),r==n.default.BOTTOM_LEFT||r==n.default.BOTTOM_CENTER||r==n.default.BOTTOM_RIGHT?u="-100%":r!=n.default.CENTER_LEFT&&r!=n.default.CENTER_CENTER&&r!=n.default.CENTER_RIGHT||(u="-50%");var d="translate("+p+", "+u+") translate("+s+", "+a+")";this.rendered.transform_!=d&&(this.rendered.transform_=d,i.transform=d,i.msTransform=d)},p.prototype.getOptions=function(){return this.options},p}(e.default),h=f;exports.default=h;
},{"./Object.js":"PhPh","./MapEventType.js":"xLGm","./OverlayPositioning.js":"VpAM","./css.js":"HgMV","./extent.js":"QDir","./events.js":"UqnM","./dom.js":"Xno5"}],"KMhA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../renderer/Composite.js")),t=f(require("./Control.js")),i=f(require("../events/EventType.js")),o=f(require("../MapEventType.js")),n=f(require("../MapProperty.js")),a=f(require("../ObjectEventType.js")),l=f(require("../Overlay.js")),r=f(require("../OverlayPositioning.js")),s=f(require("../PluggableMap.js")),p=f(require("../View.js")),d=f(require("../ViewProperty.js")),h=require("../css.js"),u=require("../extent.js"),c=require("../Object.js"),v=require("../events.js"),_=require("../geom/Polygon.js"),g=require("../dom.js");function f(e){return e&&e.__esModule?e:{default:e}}var w=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),m=.75,b=.1,y=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.createRenderer=function(){return new e.default(this)},i}(s.default),E=function(e){function t(t){var o=this,n=t||{};(o=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).boundHandleRotationChanged_=o.handleRotationChanged_.bind(o),o.collapsed_=void 0===n.collapsed||n.collapsed,o.collapsible_=void 0===n.collapsible||n.collapsible,o.collapsible_||(o.collapsed_=!1),o.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,o.viewExtent_=void 0;var a=void 0!==n.className?n.className:"ol-overviewmap",s=void 0!==n.tipLabel?n.tipLabel:"Overview map",p=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof p?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=p):o.collapseLabel_=p;var d=void 0!==n.label?n.label:"»";"string"==typeof d?(o.label_=document.createElement("span"),o.label_.textContent=d):o.label_=d;var u=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=s,c.appendChild(u),c.addEventListener(i.default.CLICK,o.handleClick_.bind(o),!1),o.ovmapDiv_=document.createElement("div"),o.ovmapDiv_.className="ol-overviewmap-map",o.view_=n.view,o.ovmap_=new y({view:n.view});var v=o.ovmap_;n.layers&&n.layers.forEach(function(e){v.addLayer(e)});var _=document.createElement("div");_.className="ol-overviewmap-box",_.style.boxSizing="border-box",o.boxOverlay_=new l.default({position:[0,0],positioning:r.default.CENTER_CENTER,element:_}),o.ovmap_.addOverlay(o.boxOverlay_);var g=a+" "+h.CLASS_UNSELECTABLE+" "+h.CLASS_CONTROL+(o.collapsed_&&o.collapsible_?" "+h.CLASS_COLLAPSED:"")+(o.collapsible_?"":" ol-uncollapsible"),f=o.element;f.className=g,f.appendChild(o.ovmapDiv_),f.appendChild(c);var w=o,m=o.boxOverlay_,b=o.boxOverlay_.getElement(),E=function(e){var t,i={clientX:(t=e).clientX,clientY:t.clientY},o=v.getEventCoordinateInternal(i);m.setPosition(o)},C=function(e){var t=v.getEventCoordinateInternal(e);w.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)};return b.addEventListener("mousedown",function(){window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)}),o}return w(t,e),t.prototype.setMap=function(t){var i=this.getMap();if(t!==i){if(i){var o=i.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,v.listen)(t,a.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var n=t.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===n.default.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}},t.prototype.bindView_=function(e){if(!this.view_){var t=new p.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addEventListener((0,c.getChangeEventType)(d.default.ROTATION),this.boundHandleRotationChanged_),this.handleRotationChanged_()},t.prototype.unbindView_=function(e){e.removeEventListener((0,c.getChangeEventType)(d.default.ROTATION),this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView().calculateExtentInternal(i);if(!this.viewExtent_||!(0,u.equals)(o,this.viewExtent_)){this.viewExtent_=o;var n=t.getSize(),a=t.getView().calculateExtentInternal(n),l=t.getPixelFromCoordinateInternal((0,u.getTopLeft)(o)),r=t.getPixelFromCoordinateInternal((0,u.getBottomRight)(o)),s=Math.abs(l[0]-r[0]),p=Math.abs(l[1]-r[1]),d=n[0],h=n[1];s<d*b||p<h*b||s>d*m||p>h*m?this.resetExtent_():(0,u.containsExtent)(a,o)||this.recenter_()}}},t.prototype.resetExtent_=function(){if(0!==m&&0!==b){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),o=e.getView().calculateExtentInternal(i),n=t.getView(),a=Math.log(m/b)/Math.LN2,l=1/(Math.pow(2,a/2)*b);(0,u.scaleFromCenter)(o,l),n.fitInternal((0,_.fromExtent)(o))}},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView(),n=t.getView(),a=this.rotateWithView_?0:-o.getRotation(),l=this.boxOverlay_,r=this.boxOverlay_.getElement(),s=o.getCenterInternal(),p=o.getResolution(),d=n.getResolution(),h=i[0]*p/d,u=i[1]*p/d;if(l.setPosition(s),r){r.style.width=h+"px",r.style.height=u+"px";var c="rotate("+a+"rad)";r.style.transform=c}}},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(h.CLASS_COLLAPSED),this.collapsed_?(0,g.replaceNode)(this.collapseLabel_,this.label_):(0,g.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),(0,v.listenOnce)(e,o.default.POSTRENDER,function(e){this.updateBox_()},this)}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t.prototype.render=function(e){this.validateExtent_(),this.updateBox_()},t}(t.default),C=E;exports.default=C;
},{"../renderer/Composite.js":"MHsB","./Control.js":"xxE2","../events/EventType.js":"C8cu","../MapEventType.js":"xLGm","../MapProperty.js":"zlNQ","../ObjectEventType.js":"zehl","../Overlay.js":"qWcX","../OverlayPositioning.js":"VpAM","../PluggableMap.js":"kRwz","../View.js":"hNqE","../ViewProperty.js":"cE7c","../css.js":"HgMV","../extent.js":"QDir","../Object.js":"PhPh","../events.js":"UqnM","../geom/Polygon.js":"Nwwk","../dom.js":"Xno5"}],"DK5d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Units=void 0;var e=a(require("./Control.js")),t=a(require("../proj/Units.js")),i=require("../css.js"),r=require("../proj.js"),s=require("../asserts.js"),n=require("../Object.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l="units",d={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};exports.Units=d;var p=[1,2,5],c=25.4/.28,h=function(e){function a(t){var r=this,s=t||{},a=void 0!==s.className?s.className:s.bar?"ol-scale-bar":"ol-scale-line";return(r=e.call(this,{element:document.createElement("div"),render:s.render,target:s.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=a+"-inner",r.element.className=a+" "+i.CLASS_UNSELECTABLE,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==s.minWidth?s.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener((0,n.getChangeEventType)(l),r.handleUnitsChanged_),r.setUnits(s.units||d.METRIC),r.scaleBar_=s.bar||!1,r.scaleBarSteps_=s.steps||4,r.scaleBarText_=s.text||!1,r.dpi_=s.dpi||void 0,r}return o(a,e),a.prototype.getUnits=function(){return this.get(l)},a.prototype.handleUnitsChanged_=function(){this.updateElement_()},a.prototype.setUnits=function(e){this.set(l,e)},a.prototype.setDpi=function(e){this.dpi_=e},a.prototype.updateElement_=function(){var e=this.viewState_;if(e){var i=e.center,n=e.projection,a=this.getUnits(),o=a==d.DEGREES?t.default.DEGREES:t.default.METERS,l=(0,r.getPointResolution)(n,e.resolution,i,o),h=this.minWidth_*(this.dpi_||c)/c,u=h*l,f="";if(a==d.DEGREES){var _=r.METERS_PER_UNIT[t.default.DEGREES];(u*=_)<_/60?(f="″",l*=3600):u<_?(f="′",l*=60):f="°"}else a==d.IMPERIAL?u<.9144?(f="in",l/=.0254):u<1609.344?(f="ft",l/=.3048):(f="mi",l/=1609.344):a==d.NAUTICAL?(l/=1852,f="nm"):a==d.METRIC?u<.001?(f="μm",l*=1e6):u<1?(f="mm",l*=1e3):u<1e3?f="m":(f="km",l/=1e3):a==d.US?u<.9144?(f="in",l*=39.37):u<1609.344?(f="ft",l/=.30480061):(f="mi",l/=1609.3472):(0,s.assert)(!1,33);for(var v,m,E,S,y=3*Math.floor(Math.log(h*l)/Math.log(10));;){E=Math.floor(y/3);var M=Math.pow(10,E);if(v=p[(y%3+3)%3]*M,m=Math.round(v/l),isNaN(m))return this.element.style.display="none",void(this.renderedVisible_=!1);if(m>=h)break;++y}S=this.scaleBar_?this.createScaleBar(m,v,f):v.toFixed(E<0?-E:0)+" "+f,this.renderedHTML_!=S&&(this.innerElement_.innerHTML=S,this.renderedHTML_=S),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},a.prototype.createScaleBar=function(e,t,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],n=e/this.scaleBarSteps_,a="#ffffff",o=0;o<this.scaleBarSteps_;o++)0===o&&s.push(this.createMarker("absolute",o)),s.push('<div><div class="ol-scale-singlebar" style="width: '+n+"px;background-color: "+a+';"></div>'+this.createMarker("relative",o)+(o%2==0||2===this.scaleBarSteps_?this.createStepText(o,e,!1,t,i):"")+"</div>"),o===this.scaleBarSteps_-1&&s.push(this.createStepText(o+1,e,!0,t,i)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+r+"</div>":"")+s.join("")+"</div>"},a.prototype.createMarker=function(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'},a.prototype.createStepText=function(e,t,i,r,s){var n=(0===e?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+s);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(i?t+"px":"unset")+';">'+n+"</div>"},a.prototype.getScaleForResolution=function(){var e=(0,r.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),t=this.dpi_||c,i=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*i*39.37*t},a.prototype.render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()},a}(e.default),u=h;exports.default=u;
},{"./Control.js":"xxE2","../proj/Units.js":"yZx6","../css.js":"HgMV","../proj.js":"Diht","../asserts.js":"fLG6","../Object.js":"PhPh"}],"AKwM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./Control.js")),e=l(require("../events/EventType.js")),i=l(require("../pointer/EventType.js")),n=require("../css.js"),r=require("../math.js"),o=require("../easing.js"),s=require("../events.js"),a=require("../events/Event.js");function l(t){return t&&t.__esModule?t:{default:t}}var h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d={VERTICAL:0,HORIZONTAL:1},u=function(t){function l(r){var o=this,s=r||{};(o=t.call(this,{element:document.createElement("div"),render:s.render})||this).dragListenerKeys_=[],o.currentResolution_=void 0,o.direction_=d.VERTICAL,o.dragging_,o.heightLimit_=0,o.widthLimit_=0,o.startX_,o.startY_,o.thumbSize_=null,o.sliderInitialized_=!1,o.duration_=void 0!==s.duration?s.duration:200;var l=void 0!==s.className?s.className:"ol-zoomslider",h=document.createElement("button");h.setAttribute("type","button"),h.className=l+"-thumb "+n.CLASS_UNSELECTABLE;var u=o.element;return u.className=l+" "+n.CLASS_UNSELECTABLE+" "+n.CLASS_CONTROL,u.appendChild(h),u.addEventListener(i.default.POINTERDOWN,o.handleDraggerStart_.bind(o),!1),u.addEventListener(i.default.POINTERMOVE,o.handleDraggerDrag_.bind(o),!1),u.addEventListener(i.default.POINTERUP,o.handleDraggerEnd_.bind(o),!1),u.addEventListener(e.default.CLICK,o.handleContainerClick_.bind(o),!1),h.addEventListener(e.default.CLICK,a.stopPropagation,!1),o}return h(l,t),l.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},l.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight;if(0===e&&0===i)return this.sliderInitialized_=!1;var n=t.firstElementChild,r=getComputedStyle(n),o=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),s=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);return this.thumbSize_=[o,s],e>i?(this.direction_=d.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=d.VERTICAL,this.heightLimit_=i-s),this.sliderInitialized_=!0},l.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(i),r=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:r,duration:this.duration_,easing:o.easeOut})},l.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var n=this.handleDraggerDrag_,r=this.handleDraggerEnd_;this.dragListenerKeys_.push((0,s.listen)(document,i.default.POINTERMOVE,n,this),(0,s.listen)(document,i.default.POINTERUP,r,this))}}},l.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,n=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},l.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0)},l.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==d.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},l.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===d.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,(0,r.clamp)(i,0,1)},l.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},l.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return(0,r.clamp)(1-e(t),0,1)},l.prototype.render=function(t){if(t.frameState&&(this.sliderInitialized_||this.initSlider_())){var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},l}(t.default),g=u;exports.default=g;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../pointer/EventType.js":"TaSm","../css.js":"HgMV","../math.js":"B96G","../easing.js":"IeCz","../events.js":"UqnM","../events/Event.js":"fKNg"}],"W4Y0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Control.js")),e=r(require("../events/EventType.js")),n=require("../css.js"),o=require("../geom/Polygon.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function r(o){var r=this,i=o||{};(r=t.call(this,{element:document.createElement("div"),target:i.target})||this).extent=i.extent?i.extent:null;var a=void 0!==i.className?i.className:"ol-zoom-extent",l=void 0!==i.label?i.label:"E",u=void 0!==i.tipLabel?i.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=u,s.appendChild("string"==typeof l?document.createTextNode(l):l),s.addEventListener(e.default.CLICK,r.handleClick_.bind(r),!1);var c=a+" "+n.CLASS_UNSELECTABLE+" "+n.CLASS_CONTROL,p=r.element;return p.className=c,p.appendChild(s),r}return i(r,t),r.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},r.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal((0,o.fromExtent)(e))},r}(t.default),l=a;exports.default=l;
},{"./Control.js":"xxE2","../events/EventType.js":"C8cu","../css.js":"HgMV","../geom/Polygon.js":"Nwwk"}],"ucqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=d,Object.defineProperty(exports,"Attribution",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Rotate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Control",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"FullScreen",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MousePosition",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"OverviewMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ScaleLine",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ZoomSlider",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"ZoomToExtent",{enumerable:!0,get:function(){return f.default}});var e=s(require("./control/Attribution.js")),t=s(require("./Collection.js")),r=s(require("./control/Rotate.js")),o=s(require("./control/Zoom.js")),n=s(require("./control/Control.js")),u=s(require("./control/FullScreen.js")),i=s(require("./control/MousePosition.js")),l=s(require("./control/OverviewMap.js")),a=s(require("./control/ScaleLine.js")),c=s(require("./control/ZoomSlider.js")),f=s(require("./control/ZoomToExtent.js"));function s(e){return e&&e.__esModule?e:{default:e}}function d(n){var u=n||{},i=new t.default;return(void 0===u.zoom||u.zoom)&&i.push(new o.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new r.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new e.default(u.attributionOptions)),i}
},{"./control/Attribution.js":"Q4Cf","./Collection.js":"FnDa","./control/Rotate.js":"sCgw","./control/Zoom.js":"L3CO","./control/Control.js":"xxE2","./control/FullScreen.js":"dOoh","./control/MousePosition.js":"Cbl8","./control/OverviewMap.js":"KMhA","./control/ScaleLine.js":"DK5d","./control/ZoomSlider.js":"AKwM","./control/ZoomToExtent.js":"W4Y0"}],"caOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"jB2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=a,exports.zoomByDelta=u,exports.default=void 0;var t=o(require("../Object.js")),e=o(require("./Property.js")),n=require("../easing.js");function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(t){function n(e){var n=t.call(this)||this;return e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return r(n,t),n.prototype.getActive=function(){return this.get(e.default.ACTIVE)},n.prototype.getMap=function(){return this.map_},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(e.default.ACTIVE,t)},n.prototype.setMap=function(t){this.map_=t},n}(t.default);function a(t,e,o){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==o?o:250,easing:n.linear,center:t.getConstrainedCenter(i)})}}function u(t,e,o,r){var i=t.getZoom();if(void 0!==i){var a=t.getConstrainedZoom(i+e),u=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:o,duration:void 0!==r?r:250,easing:n.easeOut})}}var s=i;exports.default=s;
},{"../Object.js":"PhPh","./Property.js":"caOi","../easing.js":"IeCz"}],"NSa4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Interaction.js")),e=r(require("../MapBrowserEventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var i=o?Object.getOwnPropertyDescriptor(t,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(r){function n(t){var e=r.call(this)||this,n=t||{};return e.delta_=n.delta?n.delta:1,e.duration_=void 0!==n.duration?n.duration:250,e}return u(n,r),n.prototype.handleEvent=function(r){var n=!1;if(r.type==e.default.DBLCLICK){var o=r.originalEvent,u=r.map,i=r.coordinate,a=o.shiftKey?-this.delta_:this.delta_,f=u.getView();(0,t.zoomByDelta)(f,a,i,this.duration_),r.preventDefault(),n=!0}return!n},n}(t.default),a=i;exports.default=a;
},{"./Interaction.js":"jB2p","../MapBrowserEventType.js":"YhDM"}],"dnA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=a,exports.default=void 0;var t=r(require("./Interaction.js")),e=r(require("../MapBrowserEventType.js")),n=require("../obj.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(t){function r(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return o(r,t),r.prototype.getPointerCount=function(){return this.targetPointers.length},r.prototype.handleDownEvent=function(t){return!1},r.prototype.handleDragEvent=function(t){},r.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==e.default.POINTERDRAG)this.handleDragEvent(t),t.preventDefault();else if(t.type==e.default.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==e.default.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==e.default.POINTERMOVE&&this.handleMoveEvent(t);return!n},r.prototype.handleMoveEvent=function(t){},r.prototype.handleUpEvent=function(t){return!1},r.prototype.stopDown=function(t){return t},r.prototype.updateTrackedPointers_=function(t){if(u(t)){var r=t.originalEvent,o=r.pointerId.toString();t.type==e.default.POINTERUP?delete this.trackedPointers_[o]:t.type==e.default.POINTERDOWN?this.trackedPointers_[o]=r:o in this.trackedPointers_&&(this.trackedPointers_[o]=r),this.targetPointers=(0,n.getValues)(this.trackedPointers_)}},r}(t.default);function a(t){for(var e=t.length,n=0,r=0,o=0;o<e;o++)n+=t[o].clientX,r+=t[o].clientY;return[n/e,r/e]}function u(t){var n=t.type;return n===e.default.POINTERDOWN||n===e.default.POINTERDRAG||n===e.default.POINTERUP}var l=i;exports.default=l;
},{"./Interaction.js":"jB2p","../MapBrowserEventType.js":"YhDM","../obj.js":"mH6q"}],"YcID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=i,exports.primaryAction=exports.penOnly=exports.touchOnly=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focusWithTabindex=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=o(require("../MapBrowserEventType.js")),t=require("../functions.js"),r=require("../has.js"),n=require("../asserts.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments;return function(e){for(var r=!0,n=0,o=t.length;n<o&&(r=r&&t[n](e));++n);return r}}var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=a;var s=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=s;var u=function(e){return e.target.getTargetElement().contains(document.activeElement)};exports.focus=u;var l=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||u(e)};exports.focusWithTabindex=l;var p=t.TRUE;exports.always=p;var y=function(t){return t.type==e.default.CLICK};exports.click=y;var v=function(e){var t=e.originalEvent;return 0==t.button&&!(r.WEBKIT&&r.MAC&&t.ctrlKey)};exports.mouseActionButton=v;var c=t.FALSE;exports.never=c;var f=function(e){return"pointermove"==e.type};exports.pointerMove=f;var x=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=x;var K=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=K;var E=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=E;var d=function(e){var t=e.originalEvent;return!t.altKey&&(r.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=d;var g=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=g;var m=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t};exports.targetNotEditable=m;var h=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"mouse"==t.pointerType};exports.mouseOnly=h;var O=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"touch"===t.pointerType};exports.touchOnly=O;var T=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"pen"===t.pointerType};exports.penOnly=T;var C=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),t.isPrimary&&0===t.button};exports.primaryAction=C;
},{"../MapBrowserEventType.js":"YhDM","../functions.js":"RgA2","../has.js":"f3Nv","../asserts.js":"fLG6"}],"N4gU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),i=require("../easing.js"),r=require("../coordinate.js");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r]}return n.default=t,e&&e.set(t,n),n}var s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(o){function a(t){var i=o.call(this,{stopDown:e.FALSE})||this,r=t||{};i.kinetic_=r.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var a=r.condition?r.condition:(0,n.all)(n.noModifierKeys,n.primaryAction);return i.condition_=r.onFocusOnly?(0,n.all)(n.focusWithTabindex,a):a,i.noKinetic_=!1,i}return s(a,o),a.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=(0,t.centroid)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();(0,r.scale)(o,a.getResolution()),(0,r.rotate)(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()},a.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(a),c=e.getCoordinateFromPixelInternal([s[0]-r*Math.cos(o),s[1]-r*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:i.easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},a.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},a}(t.default),u=c;exports.default=u;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../events/condition.js":"YcID","../easing.js":"IeCz","../coordinate.js":"nGsj"}],"PgBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Pointer.js")),n=require("../functions.js"),e=require("../events/condition.js"),o=require("../rotationconstraint.js");function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function o(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),a=function(t){function i(o){var i=this,r=o||{};return(i=t.call(this,{stopDown:n.FALSE})||this).condition_=r.condition?r.condition:e.altShiftKeysOnly,i.lastAngle_=void 0,i.duration_=void 0!==r.duration?r.duration:250,i}return r(i,t),i.prototype.handleDragEvent=function(t){if((0,e.mouseOnly)(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==o.disable){var r=n.getSize(),a=t.pixel,u=Math.atan2(r[1]/2-a[1],a[0]-r[0]/2);if(void 0!==this.lastAngle_){var s=u-this.lastAngle_;i.adjustRotationInternal(-s)}this.lastAngle_=u}}},i.prototype.handleUpEvent=function(t){return!(0,e.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)},i.prototype.handleDownEvent=function(t){return!!(0,e.mouseOnly)(t)&&(!(!(0,e.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},i}(t.default),u=a;exports.default=u;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../events/condition.js":"YcID","../rotationconstraint.js":"EKd0"}],"bMDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../Disposable.js")),e=i(require("../geom/Polygon.js"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t){function i(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return n(i,t),i.prototype.disposeInternal=function(){this.setMap(null)},i.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},i.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},i.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},i.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,n=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new e.default([n])},i.prototype.getGeometry=function(){return this.geometry_},i}(t.default),o=r;exports.default=o;
},{"../Disposable.js":"DDda","../geom/Polygon.js":"Nwwk"}],"AQRw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/Event.js")),n=i(require("./Pointer.js")),o=i(require("../render/Box.js")),e=require("../events/condition.js");function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(n,o)};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),s={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},a=function(t){function n(n,o,e){var i=t.call(this,n)||this;return i.coordinate=o,i.mapBrowserEvent=e,i}return r(n,t),n}(t.default),u=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.box_=new o.default(r.className||"ol-dragbox"),i.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.startPixel_=null,i.condition_=r.condition?r.condition:e.mouseActionButton,i.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return r(n,t),n.prototype.defaultBoxEndCondition=function(t,n,o){var e=o[0]-n[0],i=o[1]-n[1];return e*e+i*i>=this.minArea_},n.prototype.getGeometry=function(){return this.box_.getGeometry()},n.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new a(s.BOXDRAG,t.coordinate,t))},n.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new a(s.BOXEND,t.coordinate,t))),!1},n.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new a(s.BOXSTART,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(n.default),d=u;exports.default=d;
},{"../events/Event.js":"fKNg","./Pointer.js":"dnA2","../render/Box.js":"bMDg","../events/condition.js":"YcID"}],"pTqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./DragBox.js")),e=require("../extent.js"),n=require("../easing.js"),o=require("../events/condition.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function r(e){var n=this,r=e||{},i=r.condition?r.condition:o.shiftKeyOnly;return(n=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return i(r,t),r.prototype.onBoxEnd=function(t){var o=this.getMap(),r=o.getView(),i=o.getSize(),a=this.getGeometry().getExtent();if(this.out_){var u=r.calculateExtentInternal(i),s=(0,e.createOrUpdateFromCoordinates)([o.getPixelFromCoordinateInternal((0,e.getBottomLeft)(a)),o.getPixelFromCoordinateInternal((0,e.getTopRight)(a))]),c=r.getResolutionForExtentInternal(s,i);(0,e.scaleFromCenter)(u,1/c),a=u}var l=r.getConstrainedResolution(r.getResolutionForExtentInternal(a,i)),d=r.getConstrainedCenter((0,e.getCenter)(a),l);r.animateInternal({resolution:l,center:d,duration:this.duration_,easing:n.easeOut})},r}(t.default),u=a;exports.default=u;
},{"./DragBox.js":"AQRw","../extent.js":"QDir","../easing.js":"IeCz","../events/condition.js":"YcID"}],"mmJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LEFT:37,UP:38,RIGHT:39,DOWN:40};exports.default=e;
},{}],"CFRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../events/EventType.js")),e=u(require("./Interaction.js")),r=a(require("../events/KeyCode.js")),n=require("../events/condition.js"),o=require("../coordinate.js");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=n?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function a(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=function(i){function u(t){var e=i.call(this)||this,r=t||{};return e.defaultCondition_=function(t){return(0,n.noModifierKeys)(t)&&(0,n.targetNotEditable)(t)},e.condition_=void 0!==r.condition?r.condition:e.defaultCondition_,e.duration_=void 0!==r.duration?r.duration:100,e.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,e}return f(u,i),u.prototype.handleEvent=function(n){var i=!1;if(n.type==t.default.KEYDOWN){var u=n.originalEvent.keyCode;if(this.condition_(n)&&(u==r.default.DOWN||u==r.default.LEFT||u==r.default.RIGHT||u==r.default.UP)){var a=n.map.getView(),f=a.getResolution()*this.pixelDelta_,l=0,d=0;u==r.default.DOWN?d=-f:u==r.default.LEFT?l=-f:u==r.default.RIGHT?l=f:d=f;var c=[l,d];(0,o.rotate)(c,a.getRotation()),(0,e.pan)(a,c,this.duration_),n.preventDefault(),i=!0}}return!i},u}(e.default),d=l;exports.default=d;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../events/KeyCode.js":"mmJk","../events/condition.js":"YcID","../coordinate.js":"nGsj"}],"S8wR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=o(require("./Interaction.js")),r=require("../events/condition.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(n){function o(t){var e=n.call(this)||this,o=t||{};return e.condition_=o.condition?o.condition:r.targetNotEditable,e.delta_=o.delta?o.delta:1,e.duration_=void 0!==o.duration?o.duration:100,e}return a(o,n),o.prototype.handleEvent=function(r){var n=!1;if(r.type==t.default.KEYDOWN||r.type==t.default.KEYPRESS){var o=r.originalEvent.charCode;if(this.condition_(r)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=r.map,a=o=="+".charCodeAt(0)?this.delta_:-this.delta_,u=i.getView();(0,e.zoomByDelta)(u,a,void 0,this.duration_),r.preventDefault(),n=!0}}return!n},o}(e.default),c=u;exports.default=c;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../events/condition.js":"YcID"}],"gAnK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),i=t;exports.default=i;
},{}],"kPt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Mode=void 0;var t=s(require("../events/EventType.js")),e=a(require("./Interaction.js")),o=require("../has.js"),i=require("../events/condition.js"),n=require("../math.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=t[n]}return o.default=t,e&&e.set(t,o),o}function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),l={TRACKPAD:"trackpad",WHEEL:"wheel"};exports.Mode=l;var _=function(r){function a(t){var e=this,o=t||{};(e=r.call(this,o)||this).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,e.duration_=void 0!==o.duration?o.duration:250,e.timeout_=void 0!==o.timeout?o.timeout:80,e.useAnchor_=void 0===o.useAnchor||o.useAnchor,e.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var n=o.condition?o.condition:i.always;return e.condition_=o.onFocusOnly?(0,i.all)(i.focusWithTabindex,n):n,e.lastAnchor_=null,e.startTime_=void 0,e.timeoutId_,e.mode_=void 0,e.trackpadEventGap_=400,e.trackpadTimeoutId_,e.deltaPerZoom_=300,e}return u(a,r),a.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},a.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;if(e.type!==t.default.WHEEL)return!0;e.preventDefault();var i,n=e.map,r=e.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==t.default.WHEEL&&(i=r.deltaY,o.FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=o.DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?l.TRACKPAD:l.WHEEL);var s=n.getView();if(this.mode_===l.TRACKPAD&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=i;var u=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),u),!1},a.prototype.handleWheelZoom_=function(t){var o=t.getView();o.getAnimating()&&o.cancelAnimations();var i=-(0,n.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(o.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),(0,e.zoomByDelta)(o,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},a.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},a}(e.default),c=_;exports.default=c;
},{"../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../has.js":"f3Nv","../events/condition.js":"YcID","../math.js":"B96G"}],"hbGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Pointer.js")),e=require("../functions.js"),n=require("../rotationconstraint.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(r){function o(t){var n=this,o=t||{},i=o;return i.stopDown||(i.stopDown=e.FALSE),(n=r.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return i(o,r),o.prototype.handleDragEvent=function(e){var r=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.lastAngle_){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=s}this.lastAngle_=a;var l=e.map,u=l.getView();if(u.getConstraints().rotation!==n.disable){var c=l.getViewport().getBoundingClientRect(),h=(0,t.centroid)(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(h),this.rotating_&&(l.render(),u.adjustRotationInternal(r,this.anchor_))}},o.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},o.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},o}(t.default),s=a;exports.default=s;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2","../rotationconstraint.js":"EKd0"}],"rcXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Pointer.js")),e=require("../functions.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(n){function r(t){var r=this,o=t||{},i=o;return i.stopDown||(i.stopDown=e.FALSE),(r=n.call(this,i)||this).anchor_=null,r.duration_=void 0!==o.duration?o.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return o(r,n),r.prototype.handleDragEvent=function(e){var n=1,r=this.targetPointers[0],o=this.targetPointers[1],i=r.clientX-o.clientX,a=r.clientY-o.clientY,s=Math.sqrt(i*i+a*a);void 0!==this.lastDistance_&&(n=this.lastDistance_/s),this.lastDistance_=s;var u=e.map,c=u.getView();1!=n&&(this.lastScaleDelta_=n);var l=u.getViewport().getBoundingClientRect(),p=(0,t.centroid)(this.targetPointers);p[0]-=l.left,p[1]-=l.top,this.anchor_=u.getCoordinateFromPixelInternal(p),u.render(),c.adjustResolutionInternal(n,this.anchor_)},r.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},r}(t.default),a=i;exports.default=a;
},{"./Pointer.js":"dnA2","../functions.js":"RgA2"}],"IYO6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../events/Event.js")),e=o(require("../events/EventType.js")),r=o(require("./Interaction.js")),s=require("../functions.js"),n=require("../proj.js"),i=require("../events.js");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),u={ADD_FEATURES:"addfeatures"},p=function(t){function e(e,r,s,n){var i=t.call(this,e)||this;return i.features=s,i.file=r,i.projection=n,i}return a(e,t),e}(t.default),c=function(t){function r(e){var r=this,i=e||{};return(r=t.call(this,{handleEvent:s.TRUE})||this).formatConstructors_=i.formatConstructors?i.formatConstructors:[],r.projection_=i.projection?(0,n.get)(i.projection):null,r.dropListenKeys_=null,r.source_=i.source||null,r.target=i.target?i.target:null,r}return a(r,t),r.prototype.handleResult_=function(t,e){var r=e.target.result,s=this.getMap(),n=this.projection_;n||(n=s.getView().getProjection());for(var i=this.formatConstructors_,o=0,a=i.length;o<a;++o){var c=new i[o],l=this.tryReadFeatures_(c,r,{featureProjection:n});if(l&&l.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(l)),this.dispatchEvent(new p(u.ADD_FEATURES,t,l,n));break}}},r.prototype.registerListeners_=function(){var t=this.getMap();if(t){var r=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,i.listen)(r,e.default.DROP,this.handleDrop,this),(0,i.listen)(r,e.default.DRAGENTER,this.handleStop,this),(0,i.listen)(r,e.default.DRAGOVER,this.handleStop,this),(0,i.listen)(r,e.default.DROP,this.handleStop,this)]}},r.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},r.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},r.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(s){return null}},r.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(i.unlistenByKey),this.dropListenKeys_=null)},r.prototype.handleDrop=function(t){for(var r=t.dataTransfer.files,s=0,n=r.length;s<n;++s){var i=r.item(s),o=new FileReader;o.addEventListener(e.default.LOAD,this.handleResult_.bind(this,i)),o.readAsText(i)}},r.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},r}(r.default),l=c;exports.default=l;
},{"../events/Event.js":"fKNg","../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../functions.js":"RgA2","../proj.js":"Diht","../events.js":"UqnM"}],"ITeC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Pointer.js")),e=require("../events/condition.js");function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(t){function n(n){var i=this,o=n||{};return(i=t.call(this,o)||this).condition_=o.condition?o.condition:e.shiftKeyOnly,i.lastAngle_=void 0,i.lastMagnitude_=void 0,i.lastScaleDelta_=0,i.duration_=void 0!==o.duration?o.duration:400,i}return i(n,t),n.prototype.handleDragEvent=function(t){if((0,e.mouseOnly)(t)){var n=t.map,i=n.getSize(),o=t.pixel,a=o[0]-i[0]/2,r=i[1]/2-o[1],s=Math.atan2(r,a),l=Math.sqrt(a*a+r*r),u=n.getView();if(void 0!==this.lastAngle_){var d=this.lastAngle_-s;u.adjustRotationInternal(d)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/l),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}},n.prototype.handleUpEvent=function(t){if(!(0,e.mouseOnly)(t))return!0;var n=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1},n.prototype.handleDownEvent=function(t){return!!(0,e.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},n}(t.default),a=o;exports.default=a;
},{"./Pointer.js":"dnA2","../events/condition.js":"YcID"}],"AyCw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./GeometryType.js")),e=s(require("./SimpleGeometry.js")),r=require("../extent.js"),o=require("./flat/deflate.js"),i=require("./flat/transform.js");function s(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function s(t,r,o){var i=e.call(this)||this;if(void 0!==o&&void 0===r)i.setFlatCoordinates(o,t);else{var s=r||0;i.setCenterAndRadius(t,s,o)}return i}return n(s,e),s.prototype.clone=function(){return new s(this.flatCoordinates.slice(),void 0,this.layout)},s.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var d=this.getRadius()/Math.sqrt(a);r[0]=i[0]+d*s,r[1]=i[1]+d*n;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,a}return o},s.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},s.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},s.prototype.computeExtent=function(t){var e=this.flatCoordinates,o=e[this.stride]-e[0];return(0,r.createOrUpdate)(e[0]-o,e[1]-o,e[0]+o,e[1]+o,t)},s.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},s.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},s.prototype.getType=function(){return t.default.CIRCLE},s.prototype.intersectsExtent=function(t){var e=this.getExtent();if((0,r.intersects)(t,e)){var o=this.getCenter();return t[0]<=o[0]&&t[2]>=o[0]||(t[1]<=o[1]&&t[3]>=o[1]||(0,r.forEachCorner)(t,this.intersectsCoordinate.bind(this)))}return!1},s.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},s.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,s=(0,o.deflateCoordinate)(i,0,t,this.stride);i[s++]=i[0]+e;for(var n=1,a=this.stride;n<a;++n)i[s++]=i[n];i.length=s,this.changed()},s.prototype.getCoordinates=function(){return null},s.prototype.setCoordinates=function(t,e){},s.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},s.prototype.rotate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,i.rotate)(r,0,r.length,o,t,e,r)),this.changed()},s.prototype.translate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,i.translate)(r,0,r.length,o,t,e,r)),this.changed()},s}(e.default);a.prototype.transform;var u=a;exports.default=u;
},{"./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/transform.js":"LGwr"}],"mYW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=u,exports.default=void 0;var e=s(require("./Object.js")),t=o(require("./events/EventType.js")),r=require("./asserts.js"),n=require("./events.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var y=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(r){function o(t){var n=r.call(this)||this;if(n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addEventListener((0,e.getChangeEventType)(n.geometryName_),n.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var o=t;n.setGeometry(o)}else{var i=t;n.setProperties(i)}return n}return y(o,r),o.prototype.clone=function(){var e=new o(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();return r&&e.setStyle(r),e},o.prototype.getGeometry=function(){return this.get(this.geometryName_)},o.prototype.getId=function(){return this.id_},o.prototype.getGeometryName=function(){return this.geometryName_},o.prototype.getStyle=function(){return this.style_},o.prototype.getStyleFunction=function(){return this.styleFunction_},o.prototype.handleGeometryChange_=function(){this.changed()},o.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,n.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,n.listen)(e,t.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},o.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},o.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?u(e):void 0,this.changed()},o.prototype.setId=function(e){this.id_=e,this.changed()},o.prototype.setGeometryName=function(t){this.removeEventListener((0,e.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener((0,e.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},o}(e.default);function u(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:((0,r.assert)("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}var h=a;exports.default=h;
},{"./Object.js":"PhPh","./events/EventType.js":"C8cu","./asserts.js":"fLG6","./events.js":"UqnM"}],"rDTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a,f){var o,s,v=(i-t)/l;if(1===v)o=t;else if(2===v)o=t,s=u;else if(0!==v){for(var c=n[t],p=n[t+1],h=0,d=[0],g=t+l;g<i;g+=l){var x=n[g],y=n[g+1];h+=Math.sqrt((x-c)*(x-c)+(y-p)*(y-p)),d.push(h),c=x,p=y}var M=u*h,j=(0,r.binarySearch)(d,M);j<0?(s=(M-d[-j-2])/(d[-j-1]-d[-j-2]),o=t+(-j-2)*l):o=t+j*l}var q=f>1?f:2,A=a||new Array(q);for(g=0;g<q;++g)A[g]=void 0===o?NaN:void 0===s?n[o+g]:(0,e.lerp)(n[o+g],n[o+l+g],s);return A}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,o=t/i;f<o;){var s=f+o>>1;l<r[(s+1)*i-1]?o=s:f=s+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var o=0,s=n.length;o<s;++o){var v=n[o];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"luEr","../../math.js":"B96G"}],"ZZrx":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"DfxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("./GeometryLayout.js")),e=p(require("./GeometryType.js")),i=p(require("./SimpleGeometry.js")),o=require("./flat/closest.js"),n=require("../extent.js"),r=require("./flat/deflate.js"),s=require("./flat/simplify.js"),a=require("../array.js"),l=require("./flat/segments.js"),f=require("./flat/inflate.js"),h=require("./flat/interpolate.js"),d=require("./flat/intersectsextent.js"),u=require("./flat/length.js");function p(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),C=function(i){function p(t,e){var o=i.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?o.setCoordinates(t,e):o.setFlatCoordinates(e,t),o}return c(p,i),p.prototype.appendCoordinate=function(t){this.flatCoordinates?(0,a.extend)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},p.prototype.clone=function(){return new p(this.flatCoordinates.slice(),this.layout)},p.prototype.closestPointXY=function(t,e,i,r){return r<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))},p.prototype.forEachSegment=function(t){return(0,l.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.getCoordinateAtM=function(e,i){if(this.layout!=t.default.XYM&&this.layout!=t.default.XYZM)return null;var o=void 0!==i&&i;return(0,h.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o)},p.prototype.getCoordinates=function(){return(0,f.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getCoordinateAt=function(t,e){return(0,h.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},p.prototype.getLength=function(){return(0,u.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},p.prototype.getSimplifiedGeometryInternal=function(e){var i=[];return i.length=(0,s.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new p(i,t.default.XY)},p.prototype.getType=function(){return e.default.LINE_STRING},p.prototype.intersectsExtent=function(t){return(0,d.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},p}(i.default),g=C;exports.default=g;
},{"./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","../array.js":"luEr","./flat/segments.js":"U8i0","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir","./flat/length.js":"ZZrx"}],"fbCo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("./GeometryLayout.js")),e=f(require("./GeometryType.js")),i=f(require("./LineString.js")),r=f(require("./SimpleGeometry.js")),s=require("./flat/closest.js"),n=require("../extent.js"),o=require("./flat/deflate.js"),a=require("./flat/simplify.js"),l=require("../array.js"),d=require("./flat/inflate.js"),u=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js");function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=function(r){function f(t,e,i){var s=r.call(this)||this;if(s.ends_=[],s.maxDelta_=-1,s.maxDeltaRevision_=-1,Array.isArray(t[0]))s.setCoordinates(t,e);else if(void 0!==e&&i)s.setFlatCoordinates(e,t),s.ends_=i;else{for(var n=s.getLayout(),o=t,a=[],d=[],u=0,h=o.length;u<h;++u){var f=o[u];0===u&&(n=f.getLayout()),(0,l.extend)(a,f.getFlatCoordinates()),d.push(a.length)}s.setFlatCoordinates(n,a),s.ends_=d}return s}return p(f,r),f.prototype.appendLineString=function(t){this.flatCoordinates?(0,l.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},f.prototype.clone=function(){return new f(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},f.prototype.closestPointXY=function(t,e,i,r){return r<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},f.prototype.getCoordinateAtM=function(e,i,r){if(this.layout!=t.default.XYM&&this.layout!=t.default.XYZM||0===this.flatCoordinates.length)return null;var s=void 0!==i&&i,n=void 0!==r&&r;return(0,u.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,e,s,n)},f.prototype.getCoordinates=function(){return(0,d.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)},f.prototype.getEnds=function(){return this.ends_},f.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new i.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},f.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,s=[],n=0,o=0,a=e.length;o<a;++o){var l=e[o],d=new i.default(t.slice(n,l),r);s.push(d),n=l}return s},f.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,r=this.ends_,s=this.stride,n=0,o=r.length;n<o;++n){var a=r[n],d=(0,u.interpolatePoint)(e,i,a,s,.5);(0,l.extend)(t,d),i=a}return t},f.prototype.getSimplifiedGeometryInternal=function(e){var i=[],r=[];return i.length=(0,a.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,e,i,0,r),new f(i,t.default.XY,r)},f.prototype.getType=function(){return e.default.MULTI_LINE_STRING},f.prototype.intersectsExtent=function(t){return(0,h.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)},f.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,o.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},f}(r.default),y=c;exports.default=y;
},{"./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./LineString.js":"DfxW","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","./flat/simplify.js":"IEpt","../array.js":"luEr","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir"}],"dNu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./GeometryType.js")),e=u(require("./Point.js")),r=u(require("./SimpleGeometry.js")),o=require("../extent.js"),i=require("./flat/deflate.js"),n=require("../array.js"),s=require("./flat/inflate.js"),a=require("../math.js");function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),f=function(r){function u(t,e){var o=r.call(this)||this;return e&&!Array.isArray(t[0])?o.setFlatCoordinates(e,t):o.setCoordinates(t,e),o}return l(u,r),u.prototype.appendPoint=function(t){this.flatCoordinates?(0,n.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},u.prototype.clone=function(){return new u(this.flatCoordinates.slice(),this.layout)},u.prototype.closestPointXY=function(t,e,r,i){if(i<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e))return i;for(var n=this.flatCoordinates,s=this.stride,u=0,l=n.length;u<l;u+=s){var f=(0,a.squaredDistance)(t,e,n[u],n[u+1]);if(f<i){i=f;for(var d=0;d<s;++d)r[d]=n[u+d];r.length=s}}return i},u.prototype.getCoordinates=function(){return(0,s.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getPoint=function(t){var r=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||r<=t?null:new e.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},u.prototype.getPoints=function(){for(var t=this.flatCoordinates,r=this.layout,o=this.stride,i=[],n=0,s=t.length;n<s;n+=o){var a=new e.default(t.slice(n,n+o),r);i.push(a)}return i},u.prototype.getType=function(){return t.default.MULTI_POINT},u.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,i=0,n=e.length;i<n;i+=r){var s=e[i],a=e[i+1];if((0,o.containsXY)(t,s,a))return!0}return!1},u.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,i.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},u}(r.default),d=f;exports.default=d;
},{"./GeometryType.js":"lmV0","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","../extent.js":"QDir","./flat/deflate.js":"FNhl","../array.js":"luEr","./flat/inflate.js":"znXl","../math.js":"B96G"}],"VjQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"QDir"}],"ouhF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=y(require("./GeometryLayout.js")),e=y(require("./GeometryType.js")),i=y(require("./MultiPoint.js")),s=y(require("./Polygon.js")),r=y(require("./SimpleGeometry.js")),n=require("./flat/closest.js"),o=require("../extent.js"),a=require("./flat/deflate.js"),l=require("../array.js"),d=require("./flat/interiorpoint.js"),h=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),g=require("./flat/area.js"),c=require("./flat/center.js"),p=require("./flat/contains.js"),_=require("./flat/simplify.js");function y(t){return t&&t.__esModule?t:{default:t}}var v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),C=function(r){function y(t,e,i){var s=r.call(this)||this;if(s.endss_=[],s.flatInteriorPointsRevision_=-1,s.flatInteriorPoints_=null,s.maxDelta_=-1,s.maxDeltaRevision_=-1,s.orientedRevision_=-1,s.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var n=s.getLayout(),o=t,a=[],d=[],h=0,u=o.length;h<u;++h){var f=o[h];0===h&&(n=f.getLayout());for(var g=a.length,c=f.getEnds(),p=0,_=c.length;p<_;++p)c[p]+=g;(0,l.extend)(a,f.getFlatCoordinates()),d.push(c)}e=n,t=a,i=d}return void 0!==e&&i?(s.setFlatCoordinates(e,t),s.endss_=i):s.setCoordinates(t,e),s}return v(y,r),y.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;(0,l.extend)(this.flatCoordinates,t.getFlatCoordinates());for(var s=0,r=(e=t.getEnds().slice()).length;s<r;++s)e[s]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},y.prototype.clone=function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();return new y(this.flatCoordinates.slice(),this.layout,e)},y.prototype.closestPointXY=function(t,e,i,s){return s<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,n.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,n.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))},y.prototype.containsXY=function(t,e){return(0,p.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},y.prototype.getArea=function(){return(0,g.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},y.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,h.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)},y.prototype.getEndss=function(){return this.endss_},y.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,c.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,d.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},y.prototype.getInteriorPoints=function(){return new i.default(this.getFlatInteriorPoints().slice(),t.default.XYM)},y.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},y.prototype.getSimplifiedGeometryInternal=function(e){var i=[],s=[];return i.length=(0,_.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),i,0,s),new y(i,t.default.XY,s)},y.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new s.default(this.flatCoordinates.slice(e,n),this.layout,r)},y.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0,o=0,a=i.length;o<a;++o){var l=i[o].slice(),d=l[l.length-1];if(0!==n)for(var h=0,u=l.length;h<u;++h)l[h]-=n;var f=new s.default(e.slice(n,d),t,l);r.push(f),n=d}return r},y.prototype.getType=function(){return e.default.MULTI_POLYGON},y.prototype.intersectsExtent=function(t){return(0,u.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},y.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,a.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var s=i[i.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()},y}(r.default),q=C;exports.default=q;
},{"./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./MultiPoint.js":"dNu5","./Polygon.js":"Nwwk","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","../extent.js":"QDir","./flat/deflate.js":"FNhl","../array.js":"luEr","./flat/interiorpoint.js":"UDvN","./flat/inflate.js":"znXl","./flat/intersectsextent.js":"GZir","./flat/orient.js":"cJkE","./flat/area.js":"EOSm","./flat/center.js":"VjQP","./flat/contains.js":"dzdN","./flat/simplify.js":"IEpt"}],"S8ow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=require("../size.js"),o=function(){function o(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,e.toSize)(t.scale),this.displacement_=t.displacement}return o.prototype.clone=function(){var t=this.getScale();return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},o.prototype.getOpacity=function(){return this.opacity_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getScaleArray=function(){return this.scaleArray_},o.prototype.getDisplacement=function(){return this.displacement_},o.prototype.getAnchor=function(){return(0,t.abstract)()},o.prototype.getImage=function(e){return(0,t.abstract)()},o.prototype.getHitDetectionImage=function(){return(0,t.abstract)()},o.prototype.getPixelRatio=function(t){return 1},o.prototype.getImageState=function(){return(0,t.abstract)()},o.prototype.getImageSize=function(){return(0,t.abstract)()},o.prototype.getHitDetectionImageSize=function(){return(0,t.abstract)()},o.prototype.getOrigin=function(){return(0,t.abstract)()},o.prototype.getSize=function(){return(0,t.abstract)()},o.prototype.setOpacity=function(t){this.opacity_=t},o.prototype.setRotateWithView=function(t){this.rotateWithView_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(t)},o.prototype.listenImageChange=function(e){(0,t.abstract)()},o.prototype.load=function(){(0,t.abstract)()},o.prototype.unlistenImageChange=function(e){(0,t.abstract)()},o}(),i=o;exports.default=i;
},{"../util.js":"KniQ","../size.js":"TAHd"}],"il3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../ImageState.js")),e=r(require("./Image.js")),i=require("../color.js"),s=require("../colorlike.js"),n=require("../dom.js"),o=require("../render/canvas.js");function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=function(e){function r(t){var i=this,s=void 0!==t.rotateWithView&&t.rotateWithView;return(i=e.call(this,{opacity:1,rotateWithView:s,rotation:void 0!==t.rotation?t.rotation:0,scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]})||this).canvas_={},i.hitDetectionCanvas_=null,i.fill_=void 0!==t.fill?t.fill:null,i.origin_=[0,0],i.points_=t.points,i.radius_=void 0!==t.radius?t.radius:t.radius1,i.radius2_=t.radius2,i.angle_=void 0!==t.angle?t.angle:0,i.stroke_=void 0!==t.stroke?t.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return a(r,e),r.prototype.clone=function(){var t=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},r.prototype.getAnchor=function(){return this.anchor_},r.prototype.getAngle=function(){return this.angle_},r.prototype.getFill=function(){return this.fill_},r.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},r.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=(0,n.createCanvasContext2D)(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},r.prototype.getPixelRatio=function(t){return t},r.prototype.getImageSize=function(){return this.imageSize_},r.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},r.prototype.getImageState=function(){return t.default.LOADED},r.prototype.getOrigin=function(){return this.origin_},r.prototype.getPoints=function(){return this.points_},r.prototype.getRadius=function(){return this.radius_},r.prototype.getRadius2=function(){return this.radius2_},r.prototype.getSize=function(){return this.size_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.listenImageChange=function(t){},r.prototype.load=function(){},r.prototype.unlistenImageChange=function(t){},r.prototype.createRenderOptions=function(){var t,e=o.defaultLineCap,i=o.defaultLineJoin,n=0,r=null,a=0,l=0;return this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=o.defaultStrokeStyle),t=(0,s.asColorLike)(t),void 0===(l=this.stroke_.getWidth())&&(l=o.defaultLineWidth),r=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=o.defaultLineJoin),void 0===(e=this.stroke_.getLineCap())&&(e=o.defaultLineCap),void 0===(n=this.stroke_.getMiterLimit())&&(n=o.defaultMiterLimit)),{strokeStyle:t,strokeWidth:l,size:2*(this.radius_+l)+1,lineCap:e,lineDash:r,lineDashOffset:a,lineJoin:i,miterLimit:n}},r.prototype.render=function(){var t=this.createRenderOptions(),e=(0,n.createCanvasContext2D)(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_[1]=e.canvas;var i=e.canvas.width,s=i,o=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[i/2-o[0],i/2+o[1]],this.size_=[i,i],this.imageSize_=[s,s]},r.prototype.draw_=function(t,e,i,n,r){var a,l,h;e.setTransform(r,0,0,r,0,0),e.translate(i,n),e.beginPath();var u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(u*=2),a=0;a<=u;a++)l=2*a*Math.PI/u-Math.PI/2+this.angle_,h=a%2==0?this.radius_:c,e.lineTo(t.size/2+h*Math.cos(l),t.size/2+h*Math.sin(l))}if(this.fill_){var d=this.fill_.getColor();null===d&&(d=o.defaultFillStyle),e.fillStyle=(0,s.asColorLike)(d),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},r.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var e=this.fill_.getColor(),s=0;if("string"==typeof e&&(e=(0,i.asArray)(e)),null===e?s=1:Array.isArray(e)&&(s=4===e.length?e[3]:1),0===s){var o=(0,n.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o,0,0)}}},r.prototype.drawHitDetectionCanvas_=function(t,e,i,s){e.translate(i,s),e.beginPath();var n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r=void 0!==this.radius2_?this.radius2_:this.radius_;r!==this.radius_&&(n*=2);var a=void 0,l=void 0,h=void 0;for(a=0;a<=n;a++)h=2*a*Math.PI/n-Math.PI/2+this.angle_,l=a%2==0?this.radius_:r,e.lineTo(t.size/2+l*Math.cos(h),t.size/2+l*Math.sin(h))}e.fillStyle=o.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},r}(e.default),h=l;exports.default=h;
},{"../ImageState.js":"u3kG","./Image.js":"S8ow","../color.js":"eucy","../colorlike.js":"V5XN","../dom.js":"Xno5","../render/canvas.js":"iAG7"}],"cdf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),i=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return r(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(t.default),o=i;exports.default=o;
},{"./RegularShape.js":"il3X"}],"AFcg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function o(o){var r=o||{};this.color_=void 0!==r.color?r.color:null}return o.prototype.clone=function(){var r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(o){this.color_=o},o}(),r=o;exports.default=r;
},{}],"TXDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return t.prototype.clone=function(){var i=this.getColor();return new t({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),i=t;exports.default=i;
},{}],"he4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=l,exports.createDefaultStyle=f,exports.createEditingStyle=d,exports.default=void 0;var e=i(require("./Circle.js")),t=i(require("./Fill.js")),o=i(require("../geom/GeometryType.js")),r=i(require("./Stroke.js")),n=require("../asserts.js");function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e){var t=e||{};this.geometry_=null,this.geometryFunction_=a,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(e){this.renderer_=e},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(e){this.fill_=e},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(e){this.image_=e},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(e){this.text_=e},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=a,this.geometry_=e},e.prototype.setZIndex=function(e){this.zIndex_=e},e}();function l(e){var t;if("function"==typeof e)t=e;else{var o;if(Array.isArray(e))o=e;else(0,n.assert)("function"==typeof e.getZIndex,41),o=[e];t=function(){return o}}return t}var s=null;function f(o,n){if(!s){var i=new t.default({color:"rgba(255,255,255,0.4)"}),l=new r.default({color:"#3399CC",width:1.25});s=[new u({image:new e.default({fill:i,stroke:l,radius:5}),fill:i,stroke:l})]}return s}function d(){var n={},i=[255,255,255,1],l=[0,153,255,1];return n[o.default.POLYGON]=[new u({fill:new t.default({color:[255,255,255,.5]})})],n[o.default.MULTI_POLYGON]=n[o.default.POLYGON],n[o.default.LINE_STRING]=[new u({stroke:new r.default({color:i,width:5})}),new u({stroke:new r.default({color:l,width:3})})],n[o.default.MULTI_LINE_STRING]=n[o.default.LINE_STRING],n[o.default.CIRCLE]=n[o.default.POLYGON].concat(n[o.default.LINE_STRING]),n[o.default.POINT]=[new u({image:new e.default({radius:6,fill:new t.default({color:l}),stroke:new r.default({color:i,width:1.5})}),zIndex:1/0})],n[o.default.MULTI_POINT]=n[o.default.POINT],n[o.default.GEOMETRY_COLLECTION]=n[o.default.POLYGON].concat(n[o.default.LINE_STRING],n[o.default.POINT]),n}function a(e){return e.getGeometry()}var c=u;exports.default=c;
},{"./Circle.js":"cdf1","./Fill.js":"AFcg","../geom/GeometryType.js":"lmV0","./Stroke.js":"TXDt","../asserts.js":"fLG6"}],"pskK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Layer.js")),e=require("../obj.js"),r=require("../style/Style.js");function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o={RENDER_ORDER:"renderOrder"},u=function(t){function n(r){var n=this,i=r||{},o=(0,e.assign)({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(n=t.call(this,o)||this).declutter_=void 0!==i.declutter&&i.declutter,n.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,n.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,n}return i(n,t),n.prototype.getDeclutter=function(){return this.declutter_},n.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},n.prototype.getRenderBuffer=function(){return this.renderBuffer_},n.prototype.getRenderOrder=function(){return this.get(o.RENDER_ORDER)},n.prototype.getStyle=function(){return this.style_},n.prototype.getStyleFunction=function(){return this.styleFunction_},n.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},n.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},n.prototype.setRenderOrder=function(t){this.set(o.RENDER_ORDER,t)},n.prototype.setStyle=function(t){this.style_=void 0!==t?t:r.createDefaultStyle,this.styleFunction_=null===t?void 0:(0,r.toFunction)(this.style_),this.changed()},n}(t.default),l=u;exports.default=l;
},{"./Layer.js":"GCgv","../obj.js":"mH6q","../style/Style.js":"he4w"}],"kTJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.closePathInstruction=exports.beginPathInstruction=exports.strokeInstruction=exports.fillInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"QBj4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./Instruction.js")),e=l(require("../../geom/GeometryType.js")),i=l(require("../../extent/Relationship.js")),n=l(require("../VectorContext.js")),r=require("../../colorlike.js"),o=require("../../extent.js"),s=require("../canvas.js"),a=require("../../array.js"),u=require("../../geom/flat/inflate.js");function l(t){return t&&t.__esModule?t:{default:t}}var h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(n){function l(t,e,i,r){var o=n.call(this)||this;return o.tolerance=t,o.maxExtent=e,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=i,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return h(l,n),l.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},l.prototype.appendFlatCoordinates=function(t,e,n,r,s,a){var u=this.coordinates.length,l=this.getBufferedMaxExtent();a&&(e+=r);var h,d,c,f=t[e],p=t[e+1],y=this.tmpCoordinate_,v=!0;for(h=e+r;h<n;h+=r)y[0]=t[h],y[1]=t[h+1],(c=(0,o.coordinateRelationship)(l,y))!==d?(v&&(this.coordinates[u++]=f,this.coordinates[u++]=p),this.coordinates[u++]=y[0],this.coordinates[u++]=y[1],v=!1):c===i.default.INTERSECTING?(this.coordinates[u++]=y[0],this.coordinates[u++]=y[1],v=!1):v=!0,f=y[0],p=y[1],d=c;return(s&&v||h===e+r)&&(this.coordinates[u++]=f,this.coordinates[u++]=p),u},l.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e},l.prototype.drawCustom=function(i,n,r){this.beginGeometry(i,n);var o,s,a,l,h,d=i.getType(),c=i.getStride(),f=this.coordinates.length;if(d==e.default.MULTI_POLYGON){o=i.getOrientedFlatCoordinates(),l=[];var p=i.getEndss();h=0;for(var y=0,v=p.length;y<v;++y){var _=[];h=this.drawCustomCoordinates_(o,h,p[y],c,_),l.push(_)}this.instructions.push([t.default.CUSTOM,f,l,i,r,u.inflateMultiCoordinatesArray])}else d==e.default.POLYGON||d==e.default.MULTI_LINE_STRING?(a=[],o=d==e.default.POLYGON?i.getOrientedFlatCoordinates():i.getFlatCoordinates(),h=this.drawCustomCoordinates_(o,0,i.getEnds(),c,a),this.instructions.push([t.default.CUSTOM,f,a,i,r,u.inflateCoordinatesArray])):d==e.default.LINE_STRING||d==e.default.MULTI_POINT?(o=i.getFlatCoordinates(),s=this.appendFlatCoordinates(o,0,o.length,c,!1,!1),this.instructions.push([t.default.CUSTOM,f,s,i,r,u.inflateCoordinates])):d==e.default.POINT&&(o=i.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),s=this.coordinates.length,this.instructions.push([t.default.CUSTOM,f,s,i,r]));this.endGeometry(n)},l.prototype.beginGeometry=function(e,i){var n=e.getExtent();this.beginGeometryInstruction1_=[t.default.BEGIN_GEOMETRY,i,0,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[t.default.BEGIN_GEOMETRY,i,0,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},l.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},l.prototype.reverseHitDetectionInstructions=function(){var e,i=this.hitDetectionInstructions;i.reverse();var n,r,o=i.length,s=-1;for(e=0;e<o;++e)(r=(n=i[e])[0])==t.default.END_GEOMETRY?s=e:r==t.default.BEGIN_GEOMETRY&&(n[2]=e,(0,a.reverseSubArray)(this.hitDetectionInstructions,s,e),s=-1)},l.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=(0,r.asColorLike)(n||s.defaultFillStyle)}else i.fillStyle=void 0;if(e){var o=e.getColor();i.strokeStyle=(0,r.asColorLike)(o||s.defaultStrokeStyle);var a=e.getLineCap();i.lineCap=void 0!==a?a:s.defaultLineCap;var u=e.getLineDash();i.lineDash=u?u.slice():s.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||s.defaultLineDashOffset;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:s.defaultLineJoin;var d=e.getWidth();i.lineWidth=void 0!==d?d:s.defaultLineWidth;var c=e.getMiterLimit();i.miterLimit=void 0!==c?c:s.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},l.prototype.createFill=function(e){var i=e.fillStyle,n=[t.default.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n},l.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},l.prototype.createStroke=function(e){return[t.default.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},l.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},l.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,u=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,a.equals)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=u||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=u,t.currentMiterLimit=l)},l.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[t.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},l.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,o.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,o.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},l}(n.default),c=d;exports.default=c;
},{"./Instruction.js":"kTJv","../../geom/GeometryType.js":"lmV0","../../extent/Relationship.js":"bUAS","../VectorContext.js":"LQER","../../colorlike.js":"V5XN","../../extent.js":"QDir","../canvas.js":"iAG7","../../array.js":"luEr","../../geom/flat/inflate.js":"znXl"}],"JWDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Builder.js")),i=e(require("./Instruction.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),h=function(t){function e(i,e,o,h){var s=t.call(this,i,e,o,h)||this;return s.declutterGroups_=null,s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s}return o(e,t),e.prototype.drawCoordinates_=function(t,i,e,o){return this.appendFlatCoordinates(t,i,e,o,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),h=t.getStride(),s=this.coordinates.length,a=this.drawCoordinates_(o,0,o.length,h);this.instructions.push([i.default.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),h=t.getStride(),s=this.coordinates.length,a=this.drawCoordinates_(o,0,o.length,h);this.instructions.push([i.default.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),o=t.getSize(),h=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.declutterGroups_=i,this.hitDetectionImage_=h,this.image_=s,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0]},e}(t.default),s=h;exports.default=s;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv"}],"ppsk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Builder.js")),e=n(require("./Instruction.js"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function i(e,i,n,r){return t.call(this,e,i,n,r)||this}return o(i,t),i.prototype.drawFlatCoordinates_=function(t,i,n,r){var o=this.coordinates.length,s=this.appendFlatCoordinates(t,i,n,r,!1,!1),u=[e.default.MOVE_TO_LINE_TO,o,s];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n},i.prototype.drawLineString=function(t,i){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],e.beginPathInstruction);var s=t.getFlatCoordinates(),u=t.getStride();this.drawFlatCoordinates_(s,0,s.length,u),this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(i)}},i.prototype.drawMultiLineString=function(t,i){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],e.beginPathInstruction);for(var s=t.getEnds(),u=t.getFlatCoordinates(),a=t.getStride(),l=0,h=0,c=s.length;h<c;++h)l=this.drawFlatCoordinates_(u,l,s[h],a);this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(i)}},i.prototype.finish=function(){var i=this.state;return null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&this.instructions.push(e.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(e.strokeInstruction),i.lastStroke=this.coordinates.length),i.lastStroke=0,t.prototype.applyStroke.call(this,i),this.instructions.push(e.beginPathInstruction)},i}(t.default),u=s;exports.default=u;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv"}],"e19k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Builder.js")),e=o(require("./Instruction.js")),i=require("../canvas.js"),s=require("../../geom/flat/simplify.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=s?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function r(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),u=function(t){function n(e,i,s,n){return t.call(this,e,i,s,n)||this}return l(n,t),n.prototype.drawFlatCoordinatess_=function(t,i,s,n){var o=this.state,r=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,u=s.length;this.instructions.push(e.beginPathInstruction),this.hitDetectionInstructions.push(e.beginPathInstruction);for(var h=0;h<u;++h){var a=s[h],c=this.coordinates.length,f=this.appendFlatCoordinates(t,i,a,n,!0,!l),d=[e.default.MOVE_TO_LINE_TO,c,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),l&&(this.instructions.push(e.closePathInstruction),this.hitDetectionInstructions.push(e.closePathInstruction)),i=a}return r&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),l&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),i},n.prototype.drawCircle=function(t,s){var n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),h=this.coordinates.length;this.appendFlatCoordinates(l,0,l.length,u,!1,!1);var a=[e.default.CIRCLE,h];this.instructions.push(e.beginPathInstruction,a),this.hitDetectionInstructions.push(e.beginPathInstruction,a),void 0!==n.fillStyle&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),void 0!==n.strokeStyle&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),this.endGeometry(s)}},n.prototype.drawPolygon=function(t,s){var n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(u,0,l,h),this.endGeometry(s)}},n.prototype.drawMultiPolygon=function(t,s){var n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),h=t.getStride(),a=0,c=0,f=l.length;c<f;++c)a=this.drawFlatCoordinatess_(u,a,l[c],h);this.endGeometry(s)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,o=i.length;n<o;++n)i[n]=(0,s.snap)(i[n],e);return t.prototype.finish.call(this)},n.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(t.default),h=u;exports.default=h;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../canvas.js":"iAG7","../../geom/flat/simplify.js":"IEpt"}],"AXKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"point",LINE:"line"};exports.default=e;
},{}],"hCfl":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"DEzw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=h(require("./Builder.js")),e=h(require("./Instruction.js")),i=h(require("../../geom/GeometryType.js")),s=h(require("../../style/TextPlacement.js")),l=require("../../colorlike.js"),a=require("../canvas.js"),r=require("../../util.js"),o=require("../../extent.js"),n=require("../../geom/flat/straightchunk.js");function h(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),u={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=u;var d=function(t){function h(e,i,s,l){var a=t.call(this,e,i,s,l)||this;return a.declutterGroups_,a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a}return f(h,t),h.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},h.prototype.drawText=function(t,l){var r=this.textFillState_,h=this.textStrokeState_,f=this.textState_;if(""!==this.text_&&f&&(r||h)){var u,d,g=this.coordinates.length,_=t.getType(),c=null,x=2,S=t.getStride();if(f.placement===s.default.LINE){if(!(0,o.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var p=void 0;if(c=t.getFlatCoordinates(),_==i.default.LINE_STRING)p=[c.length];else if(_==i.default.MULTI_LINE_STRING)p=t.getEnds();else if(_==i.default.POLYGON)p=t.getEnds().slice(0,1);else if(_==i.default.MULTI_POLYGON){var k=t.getEndss();for(p=[],u=0,d=k.length;u<d;++u)p.push(k[u][0])}this.beginGeometry(t,l);for(var y=f.textAlign,v=0,L=void 0,N=0,O=p.length;N<O;++N){if(null==y){var m=(0,n.matchingChunk)(f.maxAngle,c,v,p[N],S);v=m[0],L=m[1]}else L=p[N];for(u=v;u<L;u+=S)this.coordinates.push(c[u],c[u+1]);x=this.coordinates.length,v=p[N];var F=this.declutterGroups_?0===N?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(g,x,F),g=x}this.endGeometry(l)}else{var T=null;switch(f.overflow||(T=[]),_){case i.default.POINT:case i.default.MULTI_POINT:x=(c=t.getFlatCoordinates()).length;break;case i.default.LINE_STRING:c=t.getFlatMidpoint();break;case i.default.CIRCLE:c=t.getCenter();break;case i.default.MULTI_LINE_STRING:S=2,x=(c=t.getFlatMidpoints()).length;break;case i.default.POLYGON:c=t.getFlatInteriorPoint(),f.overflow||T.push(c[2]/this.resolution),S=3;break;case i.default.MULTI_POLYGON:var I=t.getFlatInteriorPoints();for(c=[],u=0,d=I.length;u<d;u+=3)f.overflow||T.push(I[u+2]/this.resolution),c.push(I[u],I[u+1]);if(S=2,0==(x=c.length))return}x=this.appendFlatCoordinates(c,0,x,S,!1,!1),this.saveTextStates_(),(f.backgroundFill||f.backgroundStroke)&&(this.setFillStrokeStyle(f.backgroundFill,f.backgroundStroke),f.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),f.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,l);var b=f.padding;if(b!=a.defaultPadding&&(f.scale[0]<0||f.scale[1]<0)){var A=f.padding[0],G=f.padding[1],R=f.padding[2],C=f.padding[3];f.scale[0]<0&&(G=-G,C=-C),f.scale[1]<0&&(A=-A,R=-R),b=[A,G,R,C]}var D=this.pixelRatio;this.instructions.push([e.default.DRAW_IMAGE,g,x,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,b==a.defaultPadding?a.defaultPadding:b.map(function(t){return t*D}),!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]);var w=1/D;this.hitDetectionInstructions.push([e.default.DRAW_IMAGE,g,x,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,b,!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]),this.endGeometry(l)}}},h.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var l=this.textKey_;l in this.textStates||(this.textStates[l]={font:e.font,textAlign:e.textAlign||a.defaultTextAlign,textBaseline:e.textBaseline||a.defaultTextBaseline,scale:e.scale});var r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))},h.prototype.drawChars_=function(t,i,s){var l=this.textStrokeState_,a=this.textState_,r=this.strokeKey_,o=this.textKey_,n=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,f=u[a.textBaseline],d=this.textOffsetY_*h,g=this.text_,_=l?l.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([e.default.DRAW_CHARS,t,i,f,s,a.overflow,n,a.maxAngle,h,d,r,_*h,g,o,1]),this.hitDetectionInstructions.push([e.default.DRAW_CHARS,t,i,f,s,a.overflow,n,a.maxAngle,1,d,r,_,g,o,1/h])},h.prototype.setTextStyle=function(t,e){var i,s,o;if(t){this.declutterGroups_=e;var n=t.getFill();n?((s=this.textFillState_)||(s={},this.textFillState_=s),s.fillStyle=(0,l.asColorLike)(n.getColor()||a.defaultFillStyle)):(s=null,this.textFillState_=s);var h=t.getStroke();if(h){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);var f=h.getLineDash(),u=h.getLineDashOffset(),d=h.getWidth(),g=h.getMiterLimit();o.lineCap=h.getLineCap()||a.defaultLineCap,o.lineDash=f?f.slice():a.defaultLineDash,o.lineDashOffset=void 0===u?a.defaultLineDashOffset:u,o.lineJoin=h.getLineJoin()||a.defaultLineJoin,o.lineWidth=void 0===d?a.defaultLineWidth:d,o.miterLimit=void 0===g?a.defaultMiterLimit:g,o.strokeStyle=(0,l.asColorLike)(h.getColor()||a.defaultStrokeStyle)}else o=null,this.textStrokeState_=o;i=this.textState_;var _=t.getFont()||a.defaultFont;(0,a.registerFont)(_);var c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=_,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||a.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||a.defaultPadding,i.scale=void 0===c?[1,1]:c;var x=t.getOffsetX(),S=t.getOffsetY(),p=t.getRotateWithView(),k=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===x?0:x,this.textOffsetY_=void 0===S?0:S,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===k?0:k,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:(0,r.getUid)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+(0,r.getUid)(s.fillStyle):""}else this.text_=""},h}(t.default),g=d;exports.default=g;
},{"./Builder.js":"QBj4","./Instruction.js":"kTJv","../../geom/GeometryType.js":"lmV0","../../style/TextPlacement.js":"AXKs","../../colorlike.js":"V5XN","../canvas.js":"iAG7","../../util.js":"KniQ","../../extent.js":"QDir","../../geom/flat/straightchunk.js":"hCfl"}],"vqHd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./Builder.js")),t=l(require("./ImageBuilder.js")),r=l(require("./LineStringBuilder.js")),i=l(require("./PolygonBuilder.js")),u=l(require("./TextBuilder.js"));function l(e){return e&&e.__esModule?e:{default:e}}var n={Circle:i.default,Default:e.default,Image:t.default,LineString:r.default,Polygon:i.default,Text:u.default},s=function(){function e(e,t,r,i,u){this.declutter_=u,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}return e.prototype.addDeclutter=function(e){var t=null;return this.declutter_&&(e?(t=this.declutterGroups_)[0][0]++:(t=[[1]],this.declutterGroups_=t)),t},e.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var r=this.buildersByZIndex_[t];for(var i in r){var u=r[i].finish();e[t][i]=u}}return e},e.prototype.getBuilder=function(e,t){var r=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(i={},this.buildersByZIndex_[r]=i);var u=i[t];void 0===u&&(u=new(0,n[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=u);return u},e}(),o=s;exports.default=o;
},{"./Builder.js":"QBj4","./ImageBuilder.js":"JWDt","./LineStringBuilder.js":"ppsk","./PolygonBuilder.js":"e19k","./TextBuilder.js":"DEzw"}],"fpOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../events/EventType.js")),t=a(require("../ImageState.js")),r=a(require("../Observable.js")),n=a(require("../source/State.js")),o=require("../util.js");function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(r){function a(e){var t=r.call(this)||this;return t.boundHandleImageChange_=t.handleImageChange_.bind(t),t.layer_=e,t}return u(a,r),a.prototype.getFeatures=function(e){return(0,o.abstract)()},a.prototype.prepareFrame=function(e){return(0,o.abstract)()},a.prototype.renderFrame=function(e,t){return(0,o.abstract)()},a.prototype.loadedTileCallback=function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r},a.prototype.createLoadedTileFinder=function(e,t,r){return function(n,o){var a=this.loadedTileCallback.bind(this,r,n);return e.forEachLoadedTile(t,n,o,a)}.bind(this)},a.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,o){},a.prototype.getDataAtPixel=function(e,t,r){return(0,o.abstract)()},a.prototype.getLayer=function(){return this.layer_},a.prototype.handleFontsChanged=function(){},a.prototype.handleImageChange_=function(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()},a.prototype.loadImage=function(r){var n=r.getState();return n!=t.default.LOADED&&n!=t.default.ERROR&&r.addEventListener(e.default.CHANGE,this.boundHandleImageChange_),n==t.default.IDLE&&(r.load(),n=r.getState()),n==t.default.LOADED},a.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==n.default.READY&&e.changed()},a}(r.default),d=i;exports.default=d;
},{"../events/EventType.js":"C8cu","../ImageState.js":"u3kG","../Observable.js":"IdSm","../source/State.js":"iC8j","../util.js":"KniQ"}],"vPfl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../Layer.js")),e=s(require("../../render/Event.js")),r=s(require("../../render/EventType.js")),n=require("../../transform.js"),o=require("../../dom.js"),a=require("../../extent.js"),i=require("../../render/canvas.js");function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(t){function s(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform=(0,n.create)(),r.pixelTransform=(0,n.create)(),r.inversePixelTransform=(0,n.create)(),r.context=null,r.containerReused=!1,r}return l(s,t),s.prototype.useContainer=function(t,e,r){var n,a,i=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===i&&((l=t.firstElementChild)instanceof HTMLCanvasElement&&(a=l.getContext("2d")));if(!a||0!==a.canvas.width&&a.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=a,this.containerReused=!0),!this.container){(n=document.createElement("div")).className=i;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var l=(a=(0,o.createCanvasContext2D)()).canvas;n.appendChild(l),(s=l.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=a}},s.prototype.clip=function(t,e,r){var o=e.pixelRatio,s=e.size[0]*o/2,l=e.size[1]*o/2,p=e.viewState.rotation,c=(0,a.getTopLeft)(r),u=(0,a.getTopRight)(r),d=(0,a.getBottomRight)(r),f=(0,a.getBottomLeft)(r);(0,n.apply)(e.coordinateToPixelTransform,c),(0,n.apply)(e.coordinateToPixelTransform,u),(0,n.apply)(e.coordinateToPixelTransform,d),(0,n.apply)(e.coordinateToPixelTransform,f),t.save(),(0,i.rotateAtOffset)(t,-p,s,l),t.beginPath(),t.moveTo(c[0]*o,c[1]*o),t.lineTo(u[0]*o,u[1]*o),t.lineTo(d[0]*o,d[1]*o),t.lineTo(f[0]*o,f[1]*o),t.clip(),(0,i.rotateAtOffset)(t,p,s,l)},s.prototype.clipUnrotated=function(t,e,r){var o=(0,a.getTopLeft)(r),i=(0,a.getTopRight)(r),s=(0,a.getBottomRight)(r),l=(0,a.getBottomLeft)(r);(0,n.apply)(e.coordinateToPixelTransform,o),(0,n.apply)(e.coordinateToPixelTransform,i),(0,n.apply)(e.coordinateToPixelTransform,s),(0,n.apply)(e.coordinateToPixelTransform,l);var p=this.inversePixelTransform;(0,n.apply)(p,o),(0,n.apply)(p,i),(0,n.apply)(p,s),(0,n.apply)(p,l),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()},s.prototype.dispatchRenderEvent_=function(t,r,n){var o=this.getLayer();if(o.hasListener(t)){var a=new e.default(t,this.inversePixelTransform,n,r);o.dispatchEvent(a)}},s.prototype.preRender=function(t,e){this.dispatchRenderEvent_(r.default.PRERENDER,t,e)},s.prototype.postRender=function(t,e){this.dispatchRenderEvent_(r.default.POSTRENDER,t,e)},s.prototype.getRenderTransform=function(t,e,r,o,a,i,s){var l=a/2,p=i/2,c=o/e,u=-c,d=-t[0]+s,f=-t[1];return(0,n.compose)(this.tempTransform,l,p,c,u,-r,d,f)},s.prototype.getDataAtPixel=function(t,e,r){var o,a=(0,n.apply)(this.inversePixelTransform,t.slice()),i=this.context;try{var s=Math.round(a[0]),l=Math.round(a[1]),p=document.createElement("canvas"),c=p.getContext("2d");p.width=1,p.height=1,c.clearRect(0,0,1,1),c.drawImage(i.canvas,s,l,1,1,0,0,1,1),o=c.getImageData(0,0,1,1).data}catch(u){return"SecurityError"===u.name?new Uint8Array:o}return 0===o[3]?null:o},s}(t.default),c=p;exports.default=c;
},{"../Layer.js":"fpOz","../../render/Event.js":"EB6P","../../render/EventType.js":"z39m","../../transform.js":"P4eA","../../dom.js":"Xno5","../../extent.js":"QDir","../../render/canvas.js":"iAG7"}],"C6Up":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,i=arguments[3];!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"JxN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=r;var t=require("../../math.js"),a=require("./transform.js");function r(r,e,h,M,o,s,n,v,i,l,p,u){var f,P=[];if(u){var I=(0,a.rotate)(r,e,h,M,u,[r[e],r[e+1]]);f=I[0]>I[I.length-M]}else f=r[e]>r[h-M];for(var w,d,q=o.length,c=r[e],j=r[e+1],x=r[e+=M],b=r[e+1],g=0,m=Math.sqrt(Math.pow(x-c,2)+Math.pow(b-j,2)),O=!1,_=0;_<q;++_){for(var y=o[w=f?q-_-1:_],T=v*i(l,y,p),k=s+T/2;e<h-M&&g+m<k;)c=x,j=b,x=r[e+=M],b=r[e+1],g+=m,m=Math.sqrt(Math.pow(x-c,2)+Math.pow(b-j,2));var z=k-g,A=Math.atan2(b-j,x-c);if(f&&(A+=A>0?-Math.PI:Math.PI),void 0!==d){var B=A-d;if(O=O||0!==B,B+=B>Math.PI?-2*Math.PI:B<-Math.PI?2*Math.PI:0,Math.abs(B)>n)return null}d=A;var C=z/m,D=(0,t.lerp)(c,x,C),E=(0,t.lerp)(j,b,C);P[w]=[D,E,T/2,A,y],s+=T}return O?P:[[P[0][0],P[0][1],P[0][2],P[0][3],o]]}
},{"../../math.js":"B96G","./transform.js":"LGwr"}],"pZKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=d(require("./Instruction.js")),e=d(require("rbush/rbush.js")),i=require("./TextBuilder.js"),a=require("../../has.js"),s=require("../../transform.js"),r=require("../../extent.js"),l=require("../canvas.js"),n=require("../../geom/flat/textpath.js"),h=require("../../array.js"),o=require("../../geom/flat/length.js"),u=require("../../geom/flat/transform.js");function d(t){return t&&t.__esModule?t:{default:t}}var f=(0,r.createEmpty)(),c=(0,s.create)(),p=[],v=[],_=[],g=[],x=function(){function d(t,e,i,a,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=a.instructions,this.coordinates=a.coordinates,this.coordinateCache_={},this.renderBuffer_=r,this.renderedTransform_=(0,s.create)(),this.hitDetectionInstructions=a.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=a.fillStates||{},this.strokeStates=a.strokeStates||{},this.textStates=a.textStates||{},this.widths_={},this.labels_={}}return d.prototype.createLabel=function(t,e,s,r){var n=t+e+s+r;if(this.labels_[n])return this.labels_[n];var h=r?this.strokeStates[r]:null,o=s?this.fillStates[s]:null,u=this.textStates[e],d=this.pixelRatio,f=[u.scale[0]*d,u.scale[1]*d],c=i.TEXT_ALIGN[u.textAlign||l.defaultTextAlign],p=r&&h.lineWidth?h.lineWidth:0,v=t.split("\n"),_=v.length,g=[],x=(0,l.measureTextWidths)(u.font,v,g),m=(0,l.measureTextHeight)(u.font),T=x+p,y=[],b=(T+2)*f[0],S=(m*_+p)*f[1],k={width:b<0?Math.floor(b):Math.ceil(b),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:y};(1==f[0]&&1==f[1]||y.push("scale",f),y.push("font",u.font),r)&&(y.push("strokeStyle",h.strokeStyle),y.push("lineWidth",p),y.push("lineCap",h.lineCap),y.push("lineJoin",h.lineJoin),y.push("miterLimit",h.miterLimit),(a.WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(y.push("setLineDash",[h.lineDash]),y.push("lineDashOffset",h.lineDashOffset)));s&&y.push("fillStyle",o.fillStyle),y.push("textBaseline","middle"),y.push("textAlign","center");var L,R=.5-c,I=c*T+R*p;if(r)for(L=0;L<_;++L)y.push("strokeText",[v[L],I+R*g[L],.5*(p+m)+L*m]);if(s)for(L=0;L<_;++L)y.push("fillText",[v[L],I+R*g[L],.5*(p+m)+L*m]);return this.labels_[n]=k,k},d.prototype.replayTextBackground_=function(t,e,i,a,s,r,l,n){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,s),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],n&&(t.fillStyle=r[1]),this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())},d.prototype.replayImageOrLabel_=function(t,e,i,a,n,h,o,u,d,x,m,T,y,b,S,k,L,R,I){var E=R||I;i-=h*=b[0],a-=o*=b[1];var M=k+m>n.width?n.width-m:k,w=d+T>n.height?n.height-T:d,O=L[3]+M*b[0]+L[1],A=L[0]+w*b[1]+L[2],C=i-L[3],D=a-L[0];(E||0!==y)&&(p[0]=C,g[0]=C,p[1]=D,v[1]=D,v[0]=C+O,_[0]=v[0],_[1]=D+A,g[1]=_[1]);var P=null;if(0!==y){var W=i+h,N=a+o;P=(0,s.compose)(c,W,N,1,1,y,-W,-N),(0,s.apply)(c,p),(0,s.apply)(c,v),(0,s.apply)(c,_),(0,s.apply)(c,g),(0,r.createOrUpdate)(Math.min(p[0],v[0],_[0],g[0]),Math.min(p[1],v[1],_[1],g[1]),Math.max(p[0],v[0],_[0],g[0]),Math.max(p[1],v[1],_[1],g[1]),f)}else(0,r.createOrUpdate)(C,D,C+O,D+A,f);var q=0,j=0;if(u){var B=this.renderBuffer_;B[0]=Math.max(B[0],(0,r.getWidth)(f)),q=B[0],B[1]=Math.max(B[1],(0,r.getHeight)(f)),j=B[1]}var F=t.canvas,G=I?I[2]*b[0]/2:0,X=f[0]-G<=(F.width+q)/e&&f[2]+G>=-q/e&&f[1]-G<=(F.height+j)/e&&f[3]+G>=-j/e;if(S&&(i=Math.round(i),a=Math.round(a)),u){if(!X&&1==u[0])return!1;var Y=X?[t,P?P.slice(0):null,x,n,m,T,M,w,i,a,b,f.slice()]:null;Y&&(E&&Y.push(R,I,p.slice(0),v.slice(0),_.slice(0),g.slice(0)),u.push(Y))}else X&&(E&&this.replayTextBackground_(t,p,v,_,g,R,I,!1),(0,l.drawImageOrLabel)(t,P,x,n,m,T,M,w,i,a,b));return!0},d.prototype.fill_=function(t){if(this.alignFill_){var e=(0,s.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},d.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},d.prototype.renderDeclutter=function(t,i,a,s){for(var r=[],n=1,h=t.length;n<h;++n){var o=(c=t[n])[11];r.push({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:i})}s||(s=new e.default(9));var u=!1;for(n=0,h=r.length;n<h;++n)if(s.collides(r[n])){u=!0;break}if(!u){s.load(r);for(var d=1,f=t.length;d<f;++d){var c,p=(c=t[d])[0],v=p.globalAlpha;v!==a&&(p.globalAlpha=a),c.length>12&&this.replayTextBackground_(c[0],c[14],c[15],c[16],c[17],c[12],c[13],!0),l.drawImageOrLabel.apply(void 0,c),v!==a&&(p.globalAlpha=v)}}return t.length=1,s},d.prototype.drawLabelWithPointPlacement_=function(t,e,a,s){var r=this.textStates[e],n=this.createLabel(t,e,s,a),h=this.strokeStates[a],o=this.pixelRatio,u=i.TEXT_ALIGN[r.textAlign||l.defaultTextAlign],d=i.TEXT_ALIGN[r.textBaseline||l.defaultTextBaseline],f=h&&h.lineWidth?h.lineWidth:0;return{label:n,anchorX:u*(n.width/o-2*r.scale[0])+2*(.5-u)*f,anchorY:d*n.height/o+2*(.5-d)*f}},d.prototype.execute_=function(e,a,d,f,c,p,v){var _;this.declutterItems.length=0,this.pixelCoordinates_&&(0,h.equals)(d,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=(0,u.transform2D)(this.coordinates,0,this.coordinates.length,2,d,this.pixelCoordinates_),(0,s.setFromArray)(this.renderedTransform_,d));for(var g,x,m,T,y,b,S,k,L,R,I,E,M,w,O,A,C,D=0,P=f.length,W=0,N=0,q=0,j=null,B=null,F=this.coordinateCache_,G=this.viewRotation_,X=Math.round(1e12*Math.atan2(-d[1],d[0]))/1e12,Y={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},H=this.instructions!=f||this.overlaps?0:200;D<P;){var J=f[D];switch(J[0]){case t.default.BEGIN_GEOMETRY:(O=J[1]).getGeometry()?void 0===v||(0,r.intersects)(v,J[3])?++D:D=J[2]+1:D=J[2];break;case t.default.BEGIN_PATH:N>H&&(this.fill_(e),N=0),q>H&&(e.stroke(),q=0),N||q||(e.beginPath(),T=NaN,y=NaN),++D;break;case t.default.CIRCLE:var K=_[W=J[1]],U=_[W+1],V=_[W+2]-K,z=_[W+3]-U,Q=Math.sqrt(V*V+z*z);e.moveTo(K+Q,U),e.arc(K,U,Q,0,2*Math.PI,!0),++D;break;case t.default.CLOSE_PATH:e.closePath(),++D;break;case t.default.CUSTOM:W=J[1],g=J[2];var Z=J[3],$=J[4],tt=6==J.length?J[5]:void 0;Y.geometry=Z,Y.feature=O,D in F||(F[D]=[]);var et=F[D];tt?tt(_,W,g,2,et):(et[0]=_[W],et[1]=_[W+1],et.length=2),$(et,Y),++D;break;case t.default.DRAW_IMAGE:W=J[1],g=J[2],R=J[3],x=J[4],m=J[5],L=p?null:J[6];var it=J[7],at=J[8],st=J[9],rt=J[10],lt=J[11],nt=J[12],ht=J[13],ot=J[14];if(!R&&J.length>=19){I=J[18],E=J[19],M=J[20],w=J[21];var ut=this.drawLabelWithPointPlacement_(I,E,M,w);R=ut.label,J[3]=R;var dt=J[22];x=(ut.anchorX-dt)*this.pixelRatio,J[4]=x;var ft=J[23];m=(ut.anchorY-ft)*this.pixelRatio,J[5]=m,it=R.height,J[7]=it,ot=R.width,J[14]=ot}var ct=void 0;J.length>24&&(ct=J[24]);var pt=void 0,vt=void 0,_t=void 0;J.length>16?(pt=J[15],vt=J[16],_t=J[17]):(pt=l.defaultPadding,vt=!1,_t=!1),lt&&X?nt+=G:lt||X||(nt-=G);for(var gt=0,xt=0;W<g;W+=2)if(!(ct&&ct[gt++]<ot/this.pixelRatio)){if(L){var mt=Math.floor(xt);k=L.length<mt+1?[L[0][0]]:L[mt]}(qt=this.replayImageOrLabel_(e,a,_[W],_[W+1],R,x,m,k,it,at,st,rt,nt,ht,c,ot,pt,vt?j:null,_t?B:null))&&k&&L[L.length-1]!==k&&L.push(k),k&&(k.length-1===k[0]&&this.declutterItems.push(this,k,O),xt+=1/k[0])}++D;break;case t.default.DRAW_CHARS:var Tt=J[1],yt=J[2],bt=J[3];k=p?null:J[4];var St=J[5];w=J[6];var kt=J[7],Lt=J[8],Rt=J[9];M=J[10];var It=J[11];I=J[12],E=J[13];var Et=[J[14],J[14]],Mt=this.textStates[E],wt=Mt.font,Ot=[Mt.scale[0]*Lt,Mt.scale[1]*Lt],At=void 0;wt in this.widths_?At=this.widths_[wt]:(At={},this.widths_[wt]=At);var Ct=(0,o.lineStringLength)(_,Tt,yt,2),Dt=Math.abs(Ot[0])*(0,l.measureAndCacheTextWidth)(wt,I,At);if(St||Dt<=Ct){var Pt=this.textStates[E].textAlign,Wt=(Ct-Dt)*i.TEXT_ALIGN[Pt],Nt=(0,n.drawTextOnPath)(_,Tt,yt,2,I,Wt,kt,Math.abs(Ot[0]),l.measureAndCacheTextWidth,wt,At,X?0:this.viewRotation_);if(Nt){var qt=!1,jt=void 0,Bt=void 0,Ft=void 0,Gt=void 0,Xt=void 0;if(M)for(jt=0,Bt=Nt.length;jt<Bt;++jt)Ft=(Xt=Nt[jt])[4],Gt=this.createLabel(Ft,E,"",M),x=Xt[2]+It,m=bt*Gt.height+2*(.5-bt)*It*Ot[1]/Ot[0]-Rt,qt=this.replayImageOrLabel_(e,a,Xt[0],Xt[1],Gt,x,m,k,Gt.height,1,0,0,Xt[3],Et,!1,Gt.width,l.defaultPadding,null,null)||qt;if(w)for(jt=0,Bt=Nt.length;jt<Bt;++jt)Ft=(Xt=Nt[jt])[4],Gt=this.createLabel(Ft,E,w,""),x=Xt[2],m=bt*Gt.height-Rt,qt=this.replayImageOrLabel_(e,a,Xt[0],Xt[1],Gt,x,m,k,Gt.height,1,0,0,Xt[3],Et,!1,Gt.width,l.defaultPadding,null,null)||qt;qt&&this.declutterItems.push(this,k,O)}}++D;break;case t.default.END_GEOMETRY:if(void 0!==p){var Yt=p(O=J[1]);if(Yt)return Yt}++D;break;case t.default.FILL:H?N++:this.fill_(e),++D;break;case t.default.MOVE_TO_LINE_TO:for(W=J[1],g=J[2],A=_[W],S=(C=_[W+1])+.5|0,(b=A+.5|0)===T&&S===y||(e.moveTo(A,C),T=b,y=S),W+=2;W<g;W+=2)b=(A=_[W])+.5|0,S=(C=_[W+1])+.5|0,W!=g-2&&b===T&&S===y||(e.lineTo(A,C),T=b,y=S);++D;break;case t.default.SET_FILL_STYLE:j=J,this.alignFill_=J[2],N&&(this.fill_(e),N=0,q&&(e.stroke(),q=0)),e.fillStyle=J[1],++D;break;case t.default.SET_STROKE_STYLE:B=J,q&&(e.stroke(),q=0),this.setStrokeStyle_(e,J),++D;break;case t.default.STROKE:H?q++:e.stroke(),++D;break;default:++D}}N&&this.fill_(e),q&&e.stroke()},d.prototype.execute=function(t,e,i,a,s){this.viewRotation_=a,this.execute_(t,e,i,this.instructions,s,void 0,void 0)},d.prototype.executeHitDetection=function(t,e,i,a,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,a,s)},d}(),m=x;exports.default=m;
},{"./Instruction.js":"kTJv","rbush/rbush.js":"C6Up","./TextBuilder.js":"DEzw","../../has.js":"f3Nv","../../transform.js":"P4eA","../../extent.js":"QDir","../canvas.js":"iAG7","../../geom/flat/textpath.js":"JxN9","../../array.js":"luEr","../../geom/flat/length.js":"ZZrx","../../geom/flat/transform.js":"LGwr"}],"ngEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCircleArray=d,exports.replayDeclutter=v,exports.default=void 0;var e=u(require("./BuilderType.js")),t=u(require("./Executor.js")),r=require("../../extent.js"),o=require("../../transform.js"),i=require("../../dom.js"),n=require("../../obj.js"),a=require("../../array.js"),s=require("../../geom/flat/transform.js");function u(e){return e&&e.__esModule?e:{default:e}}var f=[e.default.POLYGON,e.default.CIRCLE,e.default.LINE_STRING,e.default.IMAGE,e.default.TEXT,e.default.DEFAULT],c=function(){function u(e,t,r,i,n,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,o.create)(),this.createExecutors_(n)}return u.prototype.clip=function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()},u.prototype.createExecutors_=function(e){for(var r in e){var o=this.executorsByZIndex_[r];void 0===o&&(o={},this.executorsByZIndex_[r]=o);var i=e[r],n=[this.renderBuffer_||0,this.renderBuffer_||0];for(var a in i){var s=i[a];o[a]=new t.default(this.resolution_,this.pixelRatio_,this.overlaps_,s,n)}}},u.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],o=0,i=e.length;o<i;++o)if(e[o]in r)return!0;return!1},u.prototype.forEachFeatureAtCoordinate=function(t,n,s,u,c,h){var l=2*(u=Math.round(u))+1,v=(0,o.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/n,-1/n,-s,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,i.createCanvasContext2D)(l,l));var x,p=this.hitDetectionContext_;p.canvas.width!==l||p.canvas.height!==l?(p.canvas.width=l,p.canvas.height=l):p.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(x=(0,r.createEmpty)(),(0,r.extendCoordinate)(x,t),(0,r.buffer)(x,n*(this.renderBuffer_+u),x));var _,m=d(u);function y(t){for(var r=p.getImageData(0,0,l,l).data,o=0;o<l;o++)for(var i=0;i<l;i++)if(m[o][i]&&r[4*(i*l+o)+3]>0){var n=void 0;return(!h||_!=e.default.IMAGE&&_!=e.default.TEXT||-1!==h.indexOf(t))&&(n=c(t)),n||void p.clearRect(0,0,l,l)}}var g,E,I,C,B,T=Object.keys(this.executorsByZIndex_).map(Number);for(T.sort(a.numberSafeCompareFunction),g=T.length-1;g>=0;--g){var b=T[g].toString();for(I=this.executorsByZIndex_[b],E=f.length-1;E>=0;--E)if(void 0!==(C=I[_=f[E]])&&(B=C.executeHitDetection(p,v,s,y,x)))return B}},u.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],o=t[1],i=t[2],n=t[3],a=[r,o,r,n,i,n,i,o];return(0,s.transform2D)(a,0,8,2,e,a),a},u.prototype.isEmpty=function(){return(0,n.isEmpty)(this.executorsByZIndex_)},u.prototype.execute=function(t,r,o,i,n,s,u){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a.numberSafeCompareFunction),this.maxExtent_&&(t.save(),this.clip(t,o));var h,l,d,v,x,p,_=s||f;for(h=0,l=c.length;h<l;++h){var m=c[h].toString();for(x=this.executorsByZIndex_[m],d=0,v=_.length;d<v;++d){var y=_[d];if(void 0!==(p=x[y]))if(!u||y!=e.default.IMAGE&&y!=e.default.TEXT)p.execute(t,r,o,i,n);else{var g=u[m];g?g.push(p,o.slice(0)):u[m]=[p,o.slice(0)]}}}this.maxExtent_&&t.restore()},u}(),h={0:[[!0]]};function l(e,t,r){var o,i=Math.floor(e.length/2);if(t>=i)for(o=i;o<t;o++)e[o][r]=!0;else if(t<i)for(o=t+1;o<i;o++)e[o][r]=!0}function d(e){if(void 0!==h[e])return h[e];for(var t=2*e+1,r=new Array(t),o=0;o<t;o++)r[o]=new Array(t);for(var i=e,n=0,a=0;i>=n;)l(r,e+i,e+n),l(r,e+n,e+i),l(r,e-n,e+i),l(r,e-i,e+n),l(r,e-i,e-n),l(r,e-n,e-i),l(r,e+n,e-i),l(r,e+i,e-n),2*((a+=1+2*++n)-i)+1>0&&(a+=1-2*(i-=1));return h[e]=r,r}function v(e,t,r,o,i,n){for(var s=Object.keys(e).map(Number).sort(a.numberSafeCompareFunction),u=0,f=s.length;u<f;++u)for(var c=e[s[u].toString()],h=void 0,l=0,d=c.length;l<d;){var v=c[l++],x=c[l++];v.execute(t,1,x,r,i),v!==h&&v.declutterItems.length>0&&(h=v,n.push({items:v.declutterItems,opacity:o}))}}var x=c;exports.default=x;
},{"./BuilderType.js":"irm1","./Executor.js":"pZKE","../../extent.js":"QDir","../../transform.js":"P4eA","../../dom.js":"Xno5","../../obj.js":"mH6q","../../array.js":"luEr","../../geom/flat/transform.js":"LGwr"}],"Rlas":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={FRACTION:"fraction",PIXELS:"pixels"};exports.default=e;
},{}],"Ojbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./events/Target.js")),e=r(require("./events/EventType.js")),o=require("./util.js");function r(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),u=function(t){function r(e,o,r,n){var u=t.call(this)||this;return u.extent=e,u.pixelRatio_=r,u.resolution=o,u.state=n,u}return n(r,t),r.prototype.changed=function(){this.dispatchEvent(e.default.CHANGE)},r.prototype.getExtent=function(){return this.extent},r.prototype.getImage=function(){return(0,o.abstract)()},r.prototype.getPixelRatio=function(){return this.pixelRatio_},r.prototype.getResolution=function(){return this.resolution},r.prototype.getState=function(){return this.state},r.prototype.load=function(){(0,o.abstract)()},r}(t.default),i=u;exports.default=i;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./util.js":"KniQ"}],"DHWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listenImage=h,exports.default=void 0;var t=a(require("./events/EventType.js")),e=a(require("./ImageBase.js")),n=a(require("./ImageState.js")),i=require("./has.js"),r=require("./extent.js"),s=require("./events.js");function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=function(t){function e(e,i,r,s,a,o){var u=t.call(this,e,i,r,n.default.IDLE)||this;return u.src_=s,u.image_=new Image,null!==a&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=n.default.IDLE,u.imageLoadFunction_=o,u}return o(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=n.default.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,r.getHeight)(this.extent)/this.image_.height),this.state=n.default.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=n.default.IDLE&&this.state!=n.default.ERROR||(this.state=n.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=h(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(e.default);function h(e,n,r){var a=e;if(a.src&&i.IMAGE_DECODE){var o=a.decode(),u=!0;return o.then(function(){u&&n()}).catch(function(t){u&&("EncodingError"===t.name&&"Invalid image type."===t.message?n():r())}),function(){u=!1}}var h=[(0,s.listenOnce)(a,t.default.LOAD,n),(0,s.listenOnce)(a,t.default.ERROR,r)];return function(){h.forEach(s.unlistenByKey)}}var l=u;exports.default=l;
},{"./events/EventType.js":"C8cu","./ImageBase.js":"Ojbp","./ImageState.js":"u3kG","./has.js":"f3Nv","./extent.js":"QDir","./events.js":"UqnM"}],"XCOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=c,exports.default=void 0;var t=r(require("../events/Target.js")),e=r(require("../events/EventType.js")),i=r(require("../ImageState.js")),a=require("../dom.js"),n=require("./IconImageCache.js"),s=require("../Image.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),h=null,_=function(t){function n(e,i,a,n,s,r){var o=t.call(this)||this;return o.hitDetectionImage_=null,o.image_=e||new Image,null!==n&&(o.image_.crossOrigin=n),o.canvas_={},o.color_=r,o.unlisten_=null,o.imageState_=s,o.size_=a,o.src_=i,o.tainted_,o}return o(n,t),n.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===i.default.LOADED){h||(h=(0,a.createCanvasContext2D)(1,1)),h.drawImage(this.image_,0,0);try{h.getImageData(0,0,1,1),this.tainted_=!1}catch(t){h=null,this.tainted_=!0}}return!0===this.tainted_},n.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(e.default.CHANGE)},n.prototype.handleImageError_=function(){this.imageState_=i.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.handleImageLoad_=function(){this.imageState_=i.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},n.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},n.prototype.getImageState=function(){return this.imageState_},n.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=(0,a.createCanvasContext2D)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},n.prototype.getSize=function(){return this.size_},n.prototype.getSrc=function(){return this.src_},n.prototype.load=function(){if(this.imageState_==i.default.IDLE){this.imageState_=i.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,s.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},n.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),this.isTainted_()){var a=this.color_;return i.globalCompositeOperation="multiply",i.fillStyle="rgb("+a[0]+","+a[1]+","+a[2]+")",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",void i.drawImage(this.image_,0,0)}for(var n=i.getImageData(0,0,e.width,e.height),s=n.data,r=this.color_[0]/255,o=this.color_[1]/255,h=this.color_[2]/255,_=0,c=s.length;_<c;_+=4)s[_]*=r,s[_+1]*=o,s[_+2]*=h;i.putImageData(n,0,0)}},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(t.default);function c(t,e,i,a,s,r){var o=n.shared.get(e,a,r);return o||(o=new _(t,e,i,a,s,r),n.shared.set(e,a,r,o)),o}var l=_;exports.default=l;
},{"../events/Target.js":"CR4Y","../events/EventType.js":"C8cu","../ImageState.js":"u3kG","../dom.js":"Xno5","./IconImageCache.js":"V0oB","../Image.js":"DHWK"}],"z2xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../events/EventType.js")),i=h(require("./IconAnchorUnits.js")),e=h(require("./IconOrigin.js")),o=h(require("../ImageState.js")),r=h(require("./Image.js")),n=require("../color.js"),s=require("../asserts.js"),a=require("./IconImage.js"),c=require("../util.js");function h(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),u=function(r){function h(t){var h=this,l=t||{},u=void 0!==l.opacity?l.opacity:1,g=void 0!==l.rotation?l.rotation:0,f=void 0!==l.scale?l.scale:1,_=void 0!==l.rotateWithView&&l.rotateWithView;(h=r.call(this,{opacity:u,rotation:g,scale:f,displacement:void 0!==l.displacement?l.displacement:[0,0],rotateWithView:_})||this).anchor_=void 0!==l.anchor?l.anchor:[.5,.5],h.normalizedAnchor_=null,h.anchorOrigin_=void 0!==l.anchorOrigin?l.anchorOrigin:e.default.TOP_LEFT,h.anchorXUnits_=void 0!==l.anchorXUnits?l.anchorXUnits:i.default.FRACTION,h.anchorYUnits_=void 0!==l.anchorYUnits?l.anchorYUnits:i.default.FRACTION,h.crossOrigin_=void 0!==l.crossOrigin?l.crossOrigin:null;var d=void 0!==l.img?l.img:null,O=void 0!==l.imgSize?l.imgSize:null,p=l.src;(0,s.assert)(!(void 0!==p&&d),4),(0,s.assert)(!d||d&&O,5),void 0!==p&&0!==p.length||!d||(p=d.src||(0,c.getUid)(d)),(0,s.assert)(void 0!==p&&p.length>0,6);var I=void 0!==l.src?o.default.IDLE:o.default.LOADED;return h.color_=void 0!==l.color?(0,n.asArray)(l.color):null,h.iconImage_=(0,a.get)(d,p,O,h.crossOrigin_,I,h.color_),h.offset_=void 0!==l.offset?l.offset:[0,0],h.offsetOrigin_=void 0!==l.offsetOrigin?l.offsetOrigin:e.default.TOP_LEFT,h.origin_=null,h.size_=void 0!==l.size?l.size:null,h}return l(h,r),h.prototype.clone=function(){var t=this.getScale();return new h({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},h.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,o=this.getSize();if(this.anchorXUnits_==i.default.FRACTION||this.anchorYUnits_==i.default.FRACTION){if(!o)return null;t=this.anchor_.slice(),this.anchorXUnits_==i.default.FRACTION&&(t[0]*=o[0]),this.anchorYUnits_==i.default.FRACTION&&(t[1]*=o[1])}if(this.anchorOrigin_!=e.default.TOP_LEFT){if(!o)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=e.default.TOP_RIGHT&&this.anchorOrigin_!=e.default.BOTTOM_RIGHT||(t[0]=-t[0]+o[0]),this.anchorOrigin_!=e.default.BOTTOM_LEFT&&this.anchorOrigin_!=e.default.BOTTOM_RIGHT||(t[1]=-t[1]+o[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},h.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},h.prototype.getColor=function(){return this.color_},h.prototype.getImage=function(t){return this.iconImage_.getImage(t)},h.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},h.prototype.getImageSize=function(){return this.iconImage_.getSize()},h.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},h.prototype.getImageState=function(){return this.iconImage_.getImageState()},h.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},h.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,i=this.getDisplacement();if(this.offsetOrigin_!=e.default.TOP_LEFT){var o=this.getSize(),r=this.iconImage_.getSize();if(!o||!r)return null;t=t.slice(),this.offsetOrigin_!=e.default.TOP_RIGHT&&this.offsetOrigin_!=e.default.BOTTOM_RIGHT||(t[0]=r[0]-o[0]-t[0]),this.offsetOrigin_!=e.default.BOTTOM_LEFT&&this.offsetOrigin_!=e.default.BOTTOM_RIGHT||(t[1]=r[1]-o[1]-t[1])}return t[0]+=i[0],t[1]+=i[1],this.origin_=t,this.origin_},h.prototype.getSrc=function(){return this.iconImage_.getSrc()},h.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},h.prototype.listenImageChange=function(i){this.iconImage_.addEventListener(t.default.CHANGE,i)},h.prototype.load=function(){this.iconImage_.load()},h.prototype.unlistenImageChange=function(i){this.iconImage_.removeEventListener(t.default.CHANGE,i)},h}(r.default),g=u;exports.default=g;
},{"../events/EventType.js":"C8cu","./IconAnchorUnits.js":"Rlas","./IconOrigin.js":"urGY","../ImageState.js":"u3kG","./Image.js":"S8ow","../color.js":"eucy","../asserts.js":"fLG6","./IconImage.js":"XCOy","../util.js":"KniQ"}],"RPsG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Fill.js")),e=i(require("./TextPlacement.js")),o=require("../size.js");function i(t){return t&&t.__esModule?t:{default:t}}var n="#333",r=function(){function i(i){var r=i||{};this.font_=r.font,this.rotation_=r.rotation,this.rotateWithView_=r.rotateWithView,this.scale_=r.scale,this.scaleArray_=(0,o.toSize)(void 0!==r.scale?r.scale:1),this.text_=r.text,this.textAlign_=r.textAlign,this.textBaseline_=r.textBaseline,this.fill_=void 0!==r.fill?r.fill:new t.default({color:n}),this.maxAngle_=void 0!==r.maxAngle?r.maxAngle:Math.PI/4,this.placement_=void 0!==r.placement?r.placement:e.default.POINT,this.overflow_=!!r.overflow,this.stroke_=void 0!==r.stroke?r.stroke:null,this.offsetX_=void 0!==r.offsetX?r.offsetX:0,this.offsetY_=void 0!==r.offsetY?r.offsetY:0,this.backgroundFill_=r.backgroundFill?r.backgroundFill:null,this.backgroundStroke_=r.backgroundStroke?r.backgroundStroke:null,this.padding_=void 0===r.padding?null:r.padding}return i.prototype.clone=function(){var t=this.getScale();return new i({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},i.prototype.getOverflow=function(){return this.overflow_},i.prototype.getFont=function(){return this.font_},i.prototype.getMaxAngle=function(){return this.maxAngle_},i.prototype.getPlacement=function(){return this.placement_},i.prototype.getOffsetX=function(){return this.offsetX_},i.prototype.getOffsetY=function(){return this.offsetY_},i.prototype.getFill=function(){return this.fill_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getScaleArray=function(){return this.scaleArray_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.getText=function(){return this.text_},i.prototype.getTextAlign=function(){return this.textAlign_},i.prototype.getTextBaseline=function(){return this.textBaseline_},i.prototype.getBackgroundFill=function(){return this.backgroundFill_},i.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},i.prototype.getPadding=function(){return this.padding_},i.prototype.setOverflow=function(t){this.overflow_=t},i.prototype.setFont=function(t){this.font_=t},i.prototype.setMaxAngle=function(t){this.maxAngle_=t},i.prototype.setOffsetX=function(t){this.offsetX_=t},i.prototype.setOffsetY=function(t){this.offsetY_=t},i.prototype.setPlacement=function(t){this.placement_=t},i.prototype.setRotateWithView=function(t){this.rotateWithView_=t},i.prototype.setFill=function(t){this.fill_=t},i.prototype.setRotation=function(t){this.rotation_=t},i.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,o.toSize)(void 0!==t?t:1)},i.prototype.setStroke=function(t){this.stroke_=t},i.prototype.setText=function(t){this.text_=t},i.prototype.setTextAlign=function(t){this.textAlign_=t},i.prototype.setTextBaseline=function(t){this.textBaseline_=t},i.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},i.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},i.prototype.setPadding=function(t){this.padding_=t},i}(),s=r;exports.default=s;
},{"./Fill.js":"AFcg","./TextPlacement.js":"AXKs","../size.js":"TAHd"}],"qeKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"cdf1","./style/Fill.js":"AFcg","./style/Icon.js":"z2xv","./style/IconImage.js":"XCOy","./style/Image.js":"S8ow","./style/RegularShape.js":"il3X","./style/Stroke.js":"TXDt","./style/Style.js":"he4w","./style/Text.js":"RPsG"}],"MrCe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHitDetectionImageData=s,exports.hitDetect=g;var e=l(require("./Immediate.js")),t=l(require("../../geom/GeometryType.js")),r=l(require("../../style/IconAnchorUnits.js")),a=require("../../style.js"),i=require("../../dom.js"),n=require("../../extent.js"),o=require("../../array.js");function l(e){return e&&e.__esModule?e:{default:e}}function s(l,s,g,u,c,h,f){var d=l[0]/2,v=l[1]/2,m=(0,i.createCanvasContext2D)(d,v);m.imageSmoothingEnabled=!1;for(var y=m.canvas,I=new e.default(m,.5,c,null,f),p=g.length,S=Math.floor(16777215/p),w={},x=1;x<=p;++x){var C=g[x-1],j=C.getStyleFunction()||u;if(u){var q=j(C,h);if(q){Array.isArray(q)||(q=[q]);for(var E="#"+("000000"+(x*S).toString(16)).slice(-6),M=0,O=q.length;M<O;++M){var b=q[M],D=b.clone(),N=D.getFill();N&&N.setColor(E);var T=D.getStroke();T&&T.setColor(E),D.setText(void 0);var G=b.getImage();if(G){var L=G.getImageSize();if(!L)continue;var P=document.createElement("canvas");P.width=L[0],P.height=L[1];var R=P.getContext("2d",{alpha:!1});R.fillStyle=E;var _=R.canvas;R.fillRect(0,0,_.width,_.height);var z=L?L[0]:_.width,A=L?L[1]:_.height;(0,i.createCanvasContext2D)(z,A).drawImage(_,0,0),D.setImage(new a.Icon({img:_,imgSize:L,anchor:G.getAnchor(),anchorXUnits:r.default.PIXELS,anchorYUnits:r.default.PIXELS,offset:G.getOrigin(),size:G.getSize(),opacity:G.getOpacity(),scale:G.getScale(),rotation:G.getRotation(),rotateWithView:G.getRotateWithView()}))}var F=Number(D.getZIndex());(V=w[F])||(V={},w[F]=V,V[t.default.POLYGON]=[],V[t.default.CIRCLE]=[],V[t.default.LINE_STRING]=[],V[t.default.POINT]=[]);var U=D.getGeometryFunction()(C);U&&(0,n.intersects)(c,U.getExtent())&&V[U.getType().replace("Multi","")].push(U,D)}}}}for(var X=Object.keys(w).map(Number).sort(o.numberSafeCompareFunction),k=(x=0,X.length);x<k;++x){var V=w[X[x]];for(var W in V){var Y=V[W];for(M=0,O=Y.length;M<O;M+=2){I.setStyle(Y[M+1]);for(var H=0,Z=s.length;H<Z;++H)I.setTransform(s[H]),I.drawGeometry(Y[M])}}}return m.getImageData(0,0,y.width,y.height)}function g(e,t,r){var a=[];if(r){var i=4*(Math.round(e[0]/2)+Math.round(e[1]/2)*r.width),n=r.data[i],o=r.data[i+1],l=r.data[i+2]+256*(o+256*n),s=Math.floor(16777215/t.length);l&&l%s==0&&a.push(t[l/s-1])}return a}
},{"./Immediate.js":"fo6K","../../geom/GeometryType.js":"lmV0","../../style/IconAnchorUnits.js":"Rlas","../../style.js":"qeKX","../../dom.js":"Xno5","../../extent.js":"QDir","../../array.js":"luEr"}],"F2e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../../render/canvas/BuilderGroup.js")),t=p(require("./Layer.js")),r=c(require("../../render/canvas/ExecutorGroup.js")),n=p(require("../../ViewHint.js")),i=require("../../transform.js"),a=require("../../extent.js"),o=require("../../render/canvas/hitdetect.js"),s=require("../vector.js"),u=require("../../proj.js"),d=require("../../util.js"),h=require("../../coordinate.js");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),g=function(t){function l(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=(0,a.createEmpty)(),r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.clipping=!0,r}return f(l,t),l.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},l.prototype.renderFrame=function(e,t){var o=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];(0,i.makeScale)(this.pixelTransform,1/o,1/o),(0,i.makeInverse)(this.inversePixelTransform,this.pixelTransform);var d=(0,i.toString)(this.pixelTransform);this.useContainer(t,d,s.opacity);var h=this.context,l=h.canvas,c=this.replayGroup_;if(!c||c.isEmpty())return!this.containerReused&&l.width>0&&(l.width=0),this.container;var p=Math.round(e.size[0]*o),f=Math.round(e.size[1]*o);l.width!=p||l.height!=f?(l.width=p,l.height=f,l.style.transform!==d&&(l.style.transform=d)):this.containerReused||h.clearRect(0,0,p,f),this.preRender(h,e);var g=e.extent,y=e.viewState,v=y.center,_=y.resolution,m=y.projection,x=y.rotation,R=m.getExtent(),I=this.getLayer().getSource(),j=!1;if(s.extent&&this.clipping){var w=(0,u.fromUserExtent)(s.extent,m);(j=!(0,a.containsExtent)(w,e.extent)&&(0,a.intersects)(w,e.extent))&&this.clipUnrotated(h,e,w)}var E=e.viewHints,O=!(E[n.default.ANIMATING]||E[n.default.INTERACTING]),T=this.getRenderTransform(v,_,x,o,p,f,0),F=this.getLayer().getDeclutter()?{}:null;if(c.execute(h,1,T,x,O,void 0,F),I.getWrapX()&&m.canWrapX()&&!(0,a.containsExtent)(R,g)){for(var D=g[0],C=(0,a.getWidth)(R),S=0,b=void 0;D<R[0];){b=C*--S;var G=this.getRenderTransform(v,_,x,o,p,f,b);c.execute(h,1,G,x,O,void 0,F),D+=C}for(S=0,D=g[2];D>R[2];){b=C*++S;var A=this.getRenderTransform(v,_,x,o,p,f,b);c.execute(h,1,A,x,O,void 0,F),D-=C}}if(F){var P=e.viewHints,N=!(P[n.default.ANIMATING]||P[n.default.INTERACTING]);(0,r.replayDeclutter)(F,h,x,1,N,e.declutterItems)}j&&h.restore(),this.postRender(h,e);var W=s.opacity,q=this.container;return W!==parseFloat(q.style.opacity)&&(q.style.opacity=1===W?"":String(W)),this.renderedRotation_!==y.rotation&&(this.renderedRotation_=y.rotation,this.hitDetectionImageData_=null),this.container},l.prototype.getFeatures=function(e){return new Promise(function(t,r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];(0,i.apply)(this.pixelTransform,n);var s=this.renderedCenter_,u=this.renderedResolution_,d=this.renderedRotation_,h=this.renderedProjection_,l=this.renderedExtent_,c=this.getLayer(),p=[],f=n[0]/2,g=n[1]/2;p.push(this.getRenderTransform(s,u,d,.5,f,g,0).slice());var y=c.getSource(),v=h.getExtent();if(y.getWrapX()&&h.canWrapX()&&!(0,a.containsExtent)(v,l)){for(var _=l[0],m=(0,a.getWidth)(v),x=0,R=void 0;_<v[0];)R=m*--x,p.push(this.getRenderTransform(s,u,d,.5,f,g,R).slice()),_+=m;for(x=0,_=l[2];_>v[2];)R=m*++x,p.push(this.getRenderTransform(s,u,d,.5,f,g,R).slice()),_-=m}this.hitDetectionImageData_=(0,o.createHitDetectionImageData)(n,p,this.renderedFeatures_,c.getStyleFunction(),l,u,d)}t((0,o.hitDetect)(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},l.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,i){if(this.replayGroup_){var a=t.viewState.resolution,o=t.viewState.rotation,s=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,function(e){var t=(0,d.getUid)(e);if(!(t in u))return u[t]=!0,n(e,s)},s.getDeclutter()?i:null)}},l.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},l.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},l.prototype.prepareFrame=function(t){var i=this.getLayer(),o=i.getSource();if(!o)return!1;var d=t.viewHints[n.default.ANIMATING],l=t.viewHints[n.default.INTERACTING],c=i.getUpdateWhileAnimating(),p=i.getUpdateWhileInteracting();if(!this.dirty_&&!c&&d||!p&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var f=t.extent,g=t.viewState,y=g.projection,v=g.resolution,_=t.pixelRatio,m=i.getRevision(),x=i.getRenderBuffer(),R=i.getRenderOrder();void 0===R&&(R=s.defaultOrder);var I=g.center.slice(),j=(0,a.buffer)(f,x*v),w=[j.slice()],E=y.getExtent();if(o.getWrapX()&&y.canWrapX()&&!(0,a.containsExtent)(E,t.extent)){var O=(0,a.getWidth)(E),T=Math.max((0,a.getWidth)(j)/2,O);j[0]=E[0]-T,j[2]=E[2]+T,(0,h.wrapX)(I,y);var F=(0,a.wrapX)(w[0],y);F[0]<E[0]&&F[2]<E[2]?w.push([F[0]+O,F[1],F[2]+O,F[3]]):F[0]>E[0]&&F[2]>E[2]&&w.push([F[0]-O,F[1],F[2]-O,F[3]])}if(!this.dirty_&&this.renderedResolution_==v&&this.renderedRevision_==m&&this.renderedRenderOrder_==R&&(0,a.containsExtent)(this.renderedExtent_,j))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var D,C=new e.default((0,s.getTolerance)(v,_),j,v,_,i.getDeclutter()),S=(0,u.getUserProjection)();if(S){for(var b=0,G=w.length;b<G;++b)o.loadFeatures((0,u.toUserExtent)(w[b],y),v,S);D=(0,u.getTransformFromProjections)(S,y)}else for(b=0,G=w.length;b<G;++b)o.loadFeatures(w[b],v,y);var A=(0,s.getSquaredTolerance)(v,_),P=function(e){var t,r=e.getStyleFunction()||i.getStyleFunction();if(r&&(t=r(e,v)),t){var n=this.renderFeature(e,A,t,C,D);this.dirty_=this.dirty_||n}}.bind(this),N=(0,u.toUserExtent)(j,y),W=o.getFeaturesInExtent(N);R&&W.sort(R);for(b=0,G=W.length;b<G;++b)P(W[b]);this.renderedFeatures_=W;var q=C.finish(),M=new r.default(j,v,_,o.getOverlaps(),q,i.getRenderBuffer());return this.renderedResolution_=v,this.renderedRevision_=m,this.renderedRenderOrder_=R,this.renderedExtent_=j,this.renderedCenter_=I,this.renderedProjection_=y,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},l.prototype.renderFeature=function(e,t,r,n,i){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var o=0,u=r.length;o<u;++o)a=(0,s.renderFeature)(n,e,r[o],t,this.boundHandleStyleImageChange_,i)||a;else a=(0,s.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i);return a},l}(t.default),y=g;exports.default=y;
},{"../../render/canvas/BuilderGroup.js":"vqHd","./Layer.js":"vPfl","../../render/canvas/ExecutorGroup.js":"ngEc","../../ViewHint.js":"cuLW","../../transform.js":"P4eA","../../extent.js":"QDir","../../render/canvas/hitdetect.js":"MrCe","../vector.js":"UCah","../../proj.js":"Diht","../../util.js":"KniQ","../../coordinate.js":"nGsj"}],"dflx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseVector.js")),e=r(require("../renderer/canvas/VectorLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(t){function r(e){return t.call(this,e)||this}return n(r,t),r.prototype.createRenderer=function(){return new e.default(this)},r}(t.default),u=o;exports.default=u;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorLayer.js":"F2e3"}],"MiUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("rbush/rbush.js")),e=require("../extent.js"),r=require("../util.js"),i=require("../obj.js");function n(t){return t&&t.__esModule?t:{default:t}}var o=function(){function n(e){this.rbush_=new t.default(e),this.items_={}}return n.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,r.getUid)(e)]=i},n.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,o=e.length;n<o;n++){var s=t[n],u=e[n],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[n]=a,this.items_[(0,r.getUid)(u)]=a}this.rbush_.load(i)},n.prototype.remove=function(t){var e=(0,r.getUid)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},n.prototype.update=function(t,i){var n=this.items_[(0,r.getUid)(i)],o=[n.minX,n.minY,n.maxX,n.maxY];(0,e.equals)(o,t)||(this.remove(i),this.insert(t,i))},n.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},n.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},n.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},n.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},n.prototype.forEach_=function(t,e){for(var r,i=0,n=t.length;i<n;i++)if(r=e(t[i]))return r;return r},n.prototype.isEmpty=function(){return(0,i.isEmpty)(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(t){var r=this.rbush_.toJSON();return(0,e.createOrUpdate)(r.minX,r.minY,r.maxX,r.maxY,t)},n.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},n}(),s=o;exports.default=s;
},{"rbush/rbush.js":"C6Up","../extent.js":"QDir","../util.js":"KniQ","../obj.js":"mH6q"}],"H38a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../Object.js")),o=n(require("./State.js")),r=require("../util.js"),e=require("../proj.js");function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(o,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])})(o,r)};return function(o,r){function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),u=function(t){function n(r){var n=t.call(this)||this;return n.projection_=(0,e.get)(r.projection),n.attributions_=s(r.attributions),n.attributionsCollapsible_=void 0===r.attributionsCollapsible||r.attributionsCollapsible,n.loading=!1,n.state_=void 0!==r.state?r.state:o.default.READY,n.wrapX_=void 0!==r.wrapX&&r.wrapX,n}return i(n,t),n.prototype.getAttributions=function(){return this.attributions_},n.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},n.prototype.getProjection=function(){return this.projection_},n.prototype.getResolutions=function(){return(0,r.abstract)()},n.prototype.getState=function(){return this.state_},n.prototype.getWrapX=function(){return this.wrapX_},n.prototype.getContextOptions=function(){},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.attributions_=s(t),this.changed()},n.prototype.setState=function(t){this.state_=t,this.changed()},n}(t.default);function s(t){return t?Array.isArray(t)?function(o){return t}:"function"==typeof t?t:function(o){return[t]}:null}var a=u;exports.default=a;
},{"../Object.js":"PhPh","./State.js":"iC8j","../util.js":"KniQ","../proj.js":"Diht"}],"s8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};exports.default=e;
},{}],"JpXE":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function r(e){return function(t,r){var n=e.getZForResolution(r),o=e.getTileRangeForExtentAndZ(t,n),u=[],i=[n,0,0];for(i[1]=o.minX;i[1]<=o.maxX;++i[1])for(i[2]=o.minY;i[2]<=o.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=r;
},{}],"AbO3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};exports.default=e;
},{}],"U3JP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=n,exports.xhr=o,exports.setWithCredentials=a;var e=r(require("./format/FormatType.js")),t=require("./functions.js");function r(e){return e&&e.__esModule?e:{default:e}}var s=!1;function n(t,r,n,o){return function(a,i,u){var f=new XMLHttpRequest;f.open("GET","function"==typeof t?t(a,i,u):t,!0),r.getType()==e.default.ARRAY_BUFFER&&(f.responseType="arraybuffer"),f.withCredentials=s,f.onload=function(t){if(!f.status||f.status>=200&&f.status<300){var s=r.getType(),i=void 0;s==e.default.JSON||s==e.default.TEXT?i=f.responseText:s==e.default.XML?(i=f.responseXML)||(i=(new DOMParser).parseFromString(f.responseText,"application/xml")):s==e.default.ARRAY_BUFFER&&(i=f.response),i?n.call(this,r.readFeatures(i,{extent:a,featureProjection:u}),r.readProjection(i)):o.call(this)}else o.call(this)}.bind(this),f.onerror=function(){o.call(this)}.bind(this),f.send()}}function o(e,r){return n(e,r,function(e,t){"function"==typeof this.addFeatures&&this.addFeatures(e)},t.VOID)}function a(e){s=e}
},{"./format/FormatType.js":"AbO3","./functions.js":"RgA2"}],"ZS12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=E(require("../Collection.js")),t=E(require("../CollectionEventType.js")),r=E(require("../events/Event.js")),n=E(require("../events/EventType.js")),i=E(require("../ObjectEventType.js")),o=E(require("../structs/RBush.js")),s=E(require("./Source.js")),a=E(require("./State.js")),u=E(require("./VectorEventType.js")),h=require("../functions.js"),l=require("../loadingstrategy.js"),d=require("../asserts.js"),f=require("../extent.js"),c=require("../array.js"),_=require("../util.js"),p=require("../obj.js"),v=require("../events.js"),y=require("../featureloader.js");function E(e){return e&&e.__esModule?e:{default:e}}var g=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),x=function(e){function t(t,r){var n=e.call(this,t)||this;return n.feature=r,n}return g(t,e),t}(r.default);exports.VectorSourceEvent=x;var F=function(r){function s(t){var n=this,i=t||{};(n=r.call(this,{attributions:i.attributions,projection:void 0,state:a.default.READY,wrapX:void 0===i.wrapX||i.wrapX})||this).loader_=h.VOID,n.format_=i.format,n.overlaps_=void 0===i.overlaps||i.overlaps,n.url_=i.url,void 0!==i.loader?n.loader_=i.loader:void 0!==n.url_&&((0,d.assert)(n.format_,7),n.loader_=(0,y.xhr)(n.url_,n.format_)),n.strategy_=void 0!==i.strategy?i.strategy:l.all;var s,u,f=void 0===i.useSpatialIndex||i.useSpatialIndex;return n.featuresRtree_=f?new o.default:null,n.loadedExtentsRtree_=new o.default,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(i.features)?u=i.features:i.features&&(u=(s=i.features).getArray()),f||void 0!==s||(s=new e.default(u)),void 0!==u&&n.addFeaturesInternal(u),void 0!==s&&n.bindFeaturesCollection_(s),n}return g(s,r),s.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},s.prototype.addFeatureInternal=function(e){var t=(0,_.getUid)(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new x(u.default.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},s.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[(0,v.listen)(t,n.default.CHANGE,this.handleFeatureChange_,this),(0,v.listen)(t,i.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},s.prototype.addToIndex_=function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,d.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},s.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},s.prototype.addFeaturesInternal=function(e){for(var t=[],r=[],n=[],i=0,o=e.length;i<o;i++){var s=e[i],a=(0,_.getUid)(s);this.addToIndex_(a,s)&&r.push(s)}i=0;for(var h=r.length;i<h;i++){s=r[i],a=(0,_.getUid)(s);this.setupChangeEvents_(a,s);var l=s.getGeometry();if(l){var d=l.getExtent();t.push(d),n.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(t,n);i=0;for(var f=r.length;i<f;i++)this.dispatchEvent(new x(u.default.ADDFEATURE,r[i]))},s.prototype.bindFeaturesCollection_=function(e){var r=!1;this.addEventListener(u.default.ADDFEATURE,function(t){r||(r=!0,e.push(t.feature),r=!1)}),this.addEventListener(u.default.REMOVEFEATURE,function(t){r||(r=!0,e.remove(t.feature),r=!1)}),e.addEventListener(t.default.ADD,function(e){r||(r=!0,this.addFeature(e.element),r=!1)}.bind(this)),e.addEventListener(t.default.REMOVE,function(e){r||(r=!0,this.removeFeature(e.element),r=!1)}.bind(this)),this.featuresCollection_=e},s.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(v.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new x(u.default.CLEAR);this.dispatchEvent(n),this.changed()},s.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},s.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},s.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},s.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})},s.prototype.getFeaturesCollection=function(){return this.featuresCollection_},s.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,p.isEmpty)(this.nullGeometryFeatures_)||(0,c.extend)(e,(0,p.getValues)(this.nullGeometryFeatures_))),e},s.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},s.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},s.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],n=e[1],i=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||h.TRUE;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),h=s;if((s=t.closestPointXY(r,n,o,s))<h){i=e;var l=Math.sqrt(s);a[0]=r-l,a[1]=n-l,a[2]=r+l,a[3]=n+l}}}),i},s.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},s.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},s.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},s.prototype.getFormat=function(){return this.format_},s.prototype.getOverlaps=function(){return this.overlaps_},s.prototype.getUrl=function(){return this.url_},s.prototype.handleFeatureChange_=function(e){var t=e.target,r=(0,_.getUid)(t),n=t.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var o=t.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new x(u.default.CHANGEFEATURE,t))},s.prototype.hasFeature=function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:(0,_.getUid)(e)in this.uidIndex_},s.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,p.isEmpty)(this.nullGeometryFeatures_)},s.prototype.loadFeatures=function(e,t,r){var n=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(var o=function(e,o){var a=i[e];n.forEachInExtent(a,function(e){return(0,f.containsExtent)(e.extent,a)})||(s.loader_.call(s,a,t,r),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==h.VOID)},s=this,a=0,u=i.length;a<u;++a)o(a)},s.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),r.prototype.refresh.call(this)},s.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,f.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)},s.prototype.removeFeature=function(e){var t=(0,_.getUid)(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},s.prototype.removeFeatureInternal=function(e){var t=(0,_.getUid)(e);this.featureChangeKeys_[t].forEach(v.unlistenByKey),delete this.featureChangeKeys_[t];var r=e.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new x(u.default.REMOVEFEATURE,e))},s.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},s.prototype.setLoader=function(e){this.loader_=e},s.prototype.setUrl=function(e){(0,d.assert)(this.format_,7),this.setLoader((0,y.xhr)(e,this.format_))},s}(s.default),I=F;exports.default=I;
},{"../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../ObjectEventType.js":"zehl","../structs/RBush.js":"MiUH","./Source.js":"H38a","./State.js":"iC8j","./VectorEventType.js":"s8Fc","../functions.js":"RgA2","../loadingstrategy.js":"JpXE","../asserts.js":"fLG6","../extent.js":"QDir","../array.js":"luEr","../util.js":"KniQ","../obj.js":"mH6q","../events.js":"UqnM","../featureloader.js":"U3JP"}],"e7i2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRegularPolygon=R,exports.createBox=j,exports.default=void 0;var t=L(require("../geom/Circle.js")),e=L(require("../events/Event.js")),i=L(require("../events/EventType.js")),o=L(require("../Feature.js")),s=L(require("../geom/GeometryType.js")),r=L(require("./Property.js")),n=L(require("../geom/LineString.js")),a=L(require("../MapBrowserEvent.js")),h=L(require("../MapBrowserEventType.js")),d=L(require("../geom/MultiLineString.js")),u=L(require("../geom/MultiPoint.js")),_=L(require("../geom/MultiPolygon.js")),c=L(require("../geom/Point.js")),l=L(require("./Pointer.js")),f=O(require("../geom/Polygon.js")),p=L(require("../layer/Vector.js")),g=L(require("../source/Vector.js")),y=require("../functions.js"),m=require("../events/condition.js"),C=require("../extent.js"),v=require("../style/Style.js"),P=require("../proj.js"),k=require("../Object.js"),T=require("../coordinate.js");function w(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return w=function(){return t},t}function O(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=w();if(e&&e.has(t))return e.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=o?Object.getOwnPropertyDescriptor(t,s):null;r&&(r.get||r.set)?Object.defineProperty(i,s,r):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function L(t){return t&&t.__esModule?t:{default:t}}var N=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),D={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},E=function(t){function e(e,i){var o=t.call(this,e)||this;return o.feature=i,o}return N(e,t),e}(e.default),G=function(e){function l(i){var o=this,a=i;a.stopDown||(a.stopDown=y.FALSE),(o=e.call(this,a)||this).shouldHandle_=!1,o.downPx_=null,o.downTimeout_,o.lastDragTime_,o.freehand_=!1,o.source_=i.source?i.source:null,o.features_=i.features?i.features:null,o.snapTolerance_=i.snapTolerance?i.snapTolerance:12,o.type_=i.type,o.mode_=M(o.type_),o.stopClick_=!!i.stopClick,o.minPoints_=i.minPoints?i.minPoints:o.mode_===D.POLYGON?3:2,o.maxPoints_=i.maxPoints?i.maxPoints:1/0,o.finishCondition_=i.finishCondition?i.finishCondition:y.TRUE;var h=i.geometryFunction;if(!h)if(o.type_===s.default.CIRCLE)h=function(e,i,o){var s=i||new t.default([NaN,NaN]),r=(0,P.fromUserCoordinate)(e[0],o),n=(0,T.squaredDistance)(r,(0,P.fromUserCoordinate)(e[1],o));s.setCenterAndRadius(r,Math.sqrt(n));var a=(0,P.getUserProjection)();return a&&s.transform(o,a),s};else{var d,u=o.mode_;u===D.POINT?d=c.default:u===D.LINE_STRING?d=n.default:u===D.POLYGON&&(d=f.default),h=function(t,e,i){var o=e;return o?u===D.POLYGON?t[0].length?o.setCoordinates([t[0].concat([t[0][0]])]):o.setCoordinates([]):o.setCoordinates(t):o=new d(t),o}}return o.geometryFunction_=h,o.dragVertexDelay_=void 0!==i.dragVertexDelay?i.dragVertexDelay:500,o.finishCoordinate_=null,o.sketchFeature_=null,o.sketchPoint_=null,o.sketchCoords_=null,o.sketchLine_=null,o.sketchLineCoords_=null,o.squaredClickTolerance_=i.clickTolerance?i.clickTolerance*i.clickTolerance:36,o.overlay_=new p.default({source:new g.default({useSpatialIndex:!1,wrapX:!!i.wrapX&&i.wrapX}),style:i.style?i.style:F(),updateWhileInteracting:!0}),o.geometryName_=i.geometryName,o.condition_=i.condition?i.condition:m.noModifierKeys,o.freehandCondition_,i.freehand?o.freehandCondition_=m.always:o.freehandCondition_=i.freehandCondition?i.freehandCondition:m.shiftKeyOnly,o.addEventListener((0,k.getChangeEventType)(r.default.ACTIVE),o.updateState_),o}return N(l,e),l.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},l.prototype.getOverlay=function(){return this.overlay_},l.prototype.handleEvent=function(t){t.originalEvent.type===i.default.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==D.POINT&&this.freehandCondition_(t);var o=t.type===h.default.POINTERMOVE,s=!0;!this.freehand_&&this.lastDragTime_&&t.type===h.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,o=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===h.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),s=!1):this.freehand_&&t.type===h.default.POINTERDOWN?s=!1:o?(s=t.type===h.default.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.preventDefault()):("mouse"==t.originalEvent.pointerType||t.type===h.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===h.default.DBLCLICK&&(s=!1),e.prototype.handleEvent.call(this,t)&&s},l.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.default(h.default.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},l.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===D.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===D.POINT&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},l.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,o=e[0]-i[0],s=e[1]-i[1],r=o*o+s*s;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t)},l.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_];if(this.mode_===D.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===D.POLYGON){var s=this.sketchCoords_;i=s[0].length>this.minPoints_,o=[s[0][0],s[0][s[0].length-2]]}if(i)for(var r=t.map,n=0,a=o.length;n<a;n++){var h=o[n],d=r.getPixelFromCoordinate(h),u=t.pixel,_=u[0]-d[0],c=u[1]-d[1],l=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(_*_+c*c)<=l){this.finishCoordinate_=h;break}}}return e},l.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.default(new c.default(e)),this.updateSketchFeatures_())},l.prototype.startDrawing_=function(t){var e=t.coordinate,i=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===D.POINT?this.sketchCoords_=e.slice():this.mode_===D.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.default(new n.default(this.sketchLineCoords_)));var s=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))},l.prototype.modifyDrawing_=function(t){var e,i,r,a=t.coordinate,h=this.sketchFeature_.getGeometry(),d=t.map.getView().getProjection();(this.mode_===D.POINT?i=this.sketchCoords_:this.mode_===D.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(a=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=a[0],i[1]=a[1],this.geometryFunction_(this.sketchCoords_,h,d),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(a);if(h.getType()==s.default.POLYGON&&this.mode_!==D.POLYGON){this.sketchLine_||(this.sketchLine_=new o.default);var u=h.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(u.getLayout(),u.getFlatCoordinates()),r.changed()):(r=new n.default(u.getFlatCoordinates(),u.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},l.prototype.addToDrawing_=function(t){var e,i,o=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,o,s)):this.mode_===D.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o,s)),this.updateSketchFeatures_(),e&&this.finishDrawing()},l.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===D.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},l.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,o)):this.mode_===D.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,o),e=i.getCoordinates()),this.type_===s.default.MULTI_POINT?t.setGeometry(new u.default([e])):this.type_===s.default.MULTI_LINE_STRING?t.setGeometry(new d.default([e])):this.type_===s.default.MULTI_POLYGON&&t.setGeometry(new _.default([e])),this.dispatchEvent(new E(I.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},l.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},l.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new E(I.DRAWABORT,t))},l.prototype.appendCoordinates=function(t){var e=this.mode_,i=[];e===D.LINE_STRING?i=this.sketchCoords_:e===D.POLYGON&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var o=i.pop(),s=0;s<t.length;s++)this.addToDrawing_(t[s]);this.addToDrawing_(o)},l.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))},l.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},l.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},l}(l.default);function F(){var t=(0,v.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}function R(e,i){return function(o,s,r){var n=(0,P.fromUserCoordinate)(o[0],r),a=(0,P.fromUserCoordinate)(o[1],r),h=Math.sqrt((0,T.squaredDistance)(n,a)),d=s||(0,f.fromCircle)(new t.default(n),e),u=i;if(!i){var _=a[0]-n[0],c=a[1]-n[1];u=Math.atan(c/_)-(_<0?Math.PI:0)}(0,f.makeRegular)(d,n,h,u);var l=(0,P.getUserProjection)();return l&&d.transform(r,l),d}}function j(){return function(t,e,i){var o=(0,C.boundingExtent)(t.map(function(t){return(0,P.fromUserCoordinate)(t,i)})),s=[[(0,C.getBottomLeft)(o),(0,C.getBottomRight)(o),(0,C.getTopRight)(o),(0,C.getTopLeft)(o),(0,C.getBottomLeft)(o)]],r=e;r?r.setCoordinates(s):r=new f.default(s);var n=(0,P.getUserProjection)();return n&&r.transform(i,n),r}}function M(t){var e;return t===s.default.POINT||t===s.default.MULTI_POINT?e=D.POINT:t===s.default.LINE_STRING||t===s.default.MULTI_LINE_STRING?e=D.LINE_STRING:t===s.default.POLYGON||t===s.default.MULTI_POLYGON?e=D.POLYGON:t===s.default.CIRCLE&&(e=D.CIRCLE),e}var S=G;exports.default=S;
},{"../geom/Circle.js":"AyCw","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../Feature.js":"mYW9","../geom/GeometryType.js":"lmV0","./Property.js":"caOi","../geom/LineString.js":"DfxW","../MapBrowserEvent.js":"HMLS","../MapBrowserEventType.js":"YhDM","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","../geom/Point.js":"gLcY","./Pointer.js":"dnA2","../geom/Polygon.js":"Nwwk","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../functions.js":"RgA2","../events/condition.js":"YcID","../extent.js":"QDir","../style/Style.js":"he4w","../proj.js":"Diht","../Object.js":"PhPh","../coordinate.js":"nGsj"}],"o7b8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../events/Event.js")),t=h(require("../Feature.js")),n=h(require("../geom/GeometryType.js")),r=h(require("../MapBrowserEventType.js")),o=h(require("../geom/Point.js")),i=h(require("./Pointer.js")),a=h(require("../layer/Vector.js")),u=h(require("../source/Vector.js")),l=require("../events/condition.js"),s=require("../extent.js"),p=require("../coordinate.js"),c=require("../style/Style.js"),d=require("../geom/Polygon.js"),x=require("../proj.js");function h(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_={EXTENTCHANGED:"extentchanged"},v=function(e){function t(t){var n=e.call(this,_.EXTENTCHANGED)||this;return n.extent=t,n}return f(t,e),t}(e.default),y=function(e){function n(t){var n=this,r=t||{};return(n=e.call(this,r)||this).condition_=r.condition?r.condition:l.always,n.extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,t||(t={}),n.extentOverlay_=new a.default({source:new u.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:g(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new a.default({source:new u.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:E(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&n.setExtent(t.extent),n}return f(n,e),n.prototype.snapToVertex_=function(e,t){var n=t.getCoordinateFromPixelInternal(e),r=this.getExtentInternal();if(r){var o=P(r);o.sort(function(e,t){return(0,p.squaredDistanceToSegment)(n,e)-(0,p.squaredDistanceToSegment)(n,t)});var i=o[0],a=(0,p.closestOnSegment)(n,i),u=t.getPixelFromCoordinateInternal(a);if((0,p.distance)(e,u)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(i[0]),s=t.getPixelFromCoordinateInternal(i[1]),c=(0,p.squaredDistance)(u,l),d=(0,p.squaredDistance)(u,s),x=Math.sqrt(Math.min(c,d));return this.snappedToVertex_=x<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>d?i[1]:i[0]),a}}return null},n.prototype.handlePointerMove_=function(e){var t=e.pixel,n=e.map,r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(r)},n.prototype.createOrUpdateExtentFeature_=function(e){var n=this.extentFeature_;return n?e?n.setGeometry((0,d.fromExtent)(e)):n.setGeometry(void 0):(n=e?new t.default((0,d.fromExtent)(e)):new t.default({}),this.extentFeature_=n,this.extentOverlay_.getSource().addFeature(n)),n},n.prototype.createOrUpdatePointerFeature_=function(e){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(e):(n=new t.default(new o.default(e)),this.vertexFeature_=n,this.vertexOverlay_.getSource().addFeature(n));return n},n.prototype.handleEvent=function(t){return!t.originalEvent||!this.condition_(t)||(t.type!=r.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},n.prototype.handleDownEvent=function(e){var t=e.pixel,n=e.map,r=this.getExtentInternal(),o=this.snapToVertex_(t,n),i=function(e){var t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(o&&r){var a=o[0]==r[0]||o[0]==r[2]?o[0]:null,u=o[1]==r[1]||o[1]==r[3]?o[1]:null;null!==a&&null!==u?this.pointerHandler_=m(i(o)):null!==a?this.pointerHandler_=O(i([a,r[1]]),i([a,r[3]])):null!==u&&(this.pointerHandler_=O(i([r[0],u]),i([r[2],u])))}else o=n.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=m(o);return!0},n.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}},n.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==(0,s.getArea)(t)||this.setExtent(null),!1},n.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},n.prototype.getExtent=function(){return(0,x.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.extent_},n.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new v(this.extent_))},n}(i.default);function g(){var e=(0,c.createEditingStyle)();return function(t,r){return e[n.default.POLYGON]}}function E(){var e=(0,c.createEditingStyle)();return function(t,r){return e[n.default.POINT]}}function m(e){return function(t){return(0,s.boundingExtent)([e,t])}}function O(e,t){return e[0]==t[0]?function(n){return(0,s.boundingExtent)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return(0,s.boundingExtent)([e,[t[0],n[1]]])}:null}function P(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}var T=y;exports.default=T;
},{"../events/Event.js":"fKNg","../Feature.js":"mYW9","../geom/GeometryType.js":"lmV0","../MapBrowserEventType.js":"YhDM","../geom/Point.js":"gLcY","./Pointer.js":"dnA2","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../events/condition.js":"YcID","../extent.js":"QDir","../coordinate.js":"nGsj","../style/Style.js":"he4w","../geom/Polygon.js":"Nwwk","../proj.js":"Diht"}],"qrxo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModifyEvent=void 0;var e=C(require("../Collection.js")),t=C(require("../CollectionEventType.js")),r=C(require("../events/Event.js")),n=C(require("../events/EventType.js")),i=C(require("../Feature.js")),o=C(require("../geom/GeometryType.js")),a=C(require("../MapBrowserEventType.js")),s=C(require("../geom/Point.js")),u=C(require("./Pointer.js")),d=C(require("../structs/RBush.js")),l=C(require("../source/VectorEventType.js")),g=C(require("../layer/Vector.js")),h=C(require("../source/Vector.js")),f=require("../events/condition.js"),_=require("../extent.js"),p=require("../coordinate.js"),c=require("../style/Style.js"),m=require("../array.js"),v=require("../geom/Polygon.js"),y=require("../proj.js"),x=require("../util.js");function C(e){return e&&e.__esModule?e:{default:e}}var E=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S=0,F=1,P=[0,0,0,0],T=[],I={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},w=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=n,i}return E(t,e),t}(r.default);exports.ModifyEvent=w;var G=function(r){function u(n){var i,o=r.call(this,n)||this;if(o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=n.condition?n.condition:f.primaryAction,o.defaultDeleteCondition_=function(e){return(0,f.altKeyOnly)(e)&&(0,f.singleClick)(e)},o.deleteCondition_=n.deleteCondition?n.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=n.insertVertexCondition?n.insertVertexCondition:f.always,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.modified_=!1,o.rBush_=new d.default,o.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new g.default({source:new h.default({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:b(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,n.source?(o.source_=n.source,i=new e.default(o.source_.getFeatures()),o.source_.addEventListener(l.default.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(l.default.REMOVEFEATURE,o.handleSourceRemove_.bind(o))):i=n.features,!i)throw new Error("The modify interaction requires features or a source");return o.features_=i,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(t.default.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(t.default.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o}return E(u,r),u.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener(n.default.CHANGE,this.boundHandleFeatureChange_)},u.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new w(I.MODIFYSTART,this.features_,e)))},u.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(n.default.CHANGE,this.boundHandleFeatureChange_)},u.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);t.remove(i)}},u.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.prototype.setActive.call(this,e)},u.prototype.setMap=function(e){this.overlay_.setMap(e),r.prototype.setMap.call(this,e)},u.prototype.getOverlay=function(){return this.overlay_},u.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},u.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},u.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},u.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},u.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},u.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},u.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}},u.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert((0,_.boundingExtent)(o),a)}},u.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),d={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert((0,_.boundingExtent)(u),d)}},u.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),d={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert((0,_.boundingExtent)(u),d)}},u.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],d=0,l=u.length-1;d<l;++d){var g=u.slice(d,d+2),h={feature:e,geometry:t,depth:[a,n],index:d,segment:g};this.rBush_.insert((0,_.boundingExtent)(g),h)}},u.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),n={feature:e,geometry:t,index:S,segment:[r,r]},i={feature:e,geometry:t,index:F,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert((0,_.createOrUpdateFromCoordinate)(r),n);var a=t,s=(0,y.getUserProjection)();if(s&&this.getMap()){var u=this.getMap().getView().getProjection();a=a.clone().transform(s,u),a=(0,v.fromCircle)(a).transform(u,s)}this.rBush_.insert(a.getExtent(),i)},u.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},u.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new i.default(new s.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},u.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=a.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=a.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==a.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),r.prototype.handleEvent.call(this,e)&&!t);var t},u.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],a=i[0],s=a.depth,u=a.geometry,d=void 0,l=a.segment,g=i[1];t.length<u.getStride();)t.push(l[g][t.length]);switch(u.getType()){case o.default.POINT:d=t,l[0]=t,l[1]=t;break;case o.default.MULTI_POINT:(d=u.getCoordinates())[a.index]=t,l[0]=t,l[1]=t;break;case o.default.LINE_STRING:(d=u.getCoordinates())[a.index+g]=t,l[g]=t;break;case o.default.MULTI_LINE_STRING:case o.default.POLYGON:(d=u.getCoordinates())[s[0]][a.index+g]=t,l[g]=t;break;case o.default.MULTI_POLYGON:(d=u.getCoordinates())[s[1]][s[0]][a.index+g]=t,l[g]=t;break;case o.default.CIRCLE:if(l[0]=t,l[1]=t,a.index===S)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=e.map.getView().getProjection(),f=(0,p.distance)((0,y.fromUserCoordinate)(u.getCenter(),h),(0,y.fromUserCoordinate)(t,h)),_=(0,y.getUserProjection)();if(_){var c=u.clone().transform(_,h);c.setRadius(f),f=c.transform(h,_).getRadius()}u.setRadius(f),this.changingFeature_=!1}}d&&this.setGeometryCoordinates_(u,d)}this.createOrUpdateVertexFeature_(t)},u.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var n=e.map.getView().getProjection(),i=[],a=r.getGeometry().getCoordinates(),s=(0,_.boundingExtent)([a]),u=this.rBush_.getInExtent(s),d={};u.sort(M);for(var l=0,g=u.length;l<g;++l){var h=u[l],f=h.segment,c=(0,x.getUid)(h.geometry),m=h.depth;if(m&&(c+="-"+m.join("-")),d[c]||(d[c]=new Array(2)),h.geometry.getType()!==o.default.CIRCLE||h.index!==F)if(!(0,p.equals)(f[0],a)||d[c][0])if(!(0,p.equals)(f[1],a)||d[c][1])(0,x.getUid)(f)in this.vertexSegments_&&!d[c][0]&&!d[c][1]&&this.insertVertexCondition_(e)&&i.push([h,a]);else{if((h.geometry.getType()===o.default.LINE_STRING||h.geometry.getType()===o.default.MULTI_LINE_STRING)&&d[c][0]&&0===d[c][0].index)continue;this.dragSegments_.push([h,1]),d[c][1]=h}else this.dragSegments_.push([h,0]),d[c][0]=h;else{var v=U(t,h,n);(0,p.equals)(v,a)&&!d[c][0]&&(this.dragSegments_.push([h,0]),d[c][0]=h)}}i.length&&this.willModifyFeatures_(e);for(var y=i.length-1;y>=0;--y)this.insertVertex_.apply(this,i[y])}return!!this.vertexFeature_},u.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],n=r.geometry;if(n.getType()===o.default.CIRCLE){var i=n.getCenter(),a=r.featureSegments[0],s=r.featureSegments[1];a.segment[0]=i,a.segment[1]=i,s.segment[0]=i,s.segment[1]=i,this.rBush_.update((0,_.createOrUpdateFromCoordinate)(i),a);var u=n,d=(0,y.getUserProjection)();if(d){var l=e.map.getView().getProjection();u=u.clone().transform(d,l),u=(0,v.fromCircle)(u).transform(l,d)}this.rBush_.update(u.getExtent(),s)}else this.rBush_.update((0,_.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new w(I.MODIFYEND,this.features_,e)),this.modified_=!1),!1},u.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},u.prototype.handlePointerAtPixel_=function(e,t,r){var n=r||t.getCoordinateFromPixel(e),i=t.getView().getProjection(),a=(0,y.fromUserExtent)((0,_.createOrUpdateFromCoordinate)(n,P),i),s=t.getView().getResolution()*this.pixelTolerance_,u=(0,y.toUserExtent)((0,_.buffer)(a,s,P),i),d=this.rBush_.getInExtent(u);if(d.length>0){d.sort(function(e,t){return L(n,e,i)-L(n,t,i)});var l=d[0],g=l.segment,h=U(n,l,i),f=t.getPixelFromCoordinate(h),c=(0,p.distance)(e,f);if(c<=this.pixelTolerance_){var m={};if(l.geometry.getType()===o.default.CIRCLE&&l.index===F)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var v=t.getPixelFromCoordinate(g[0]),C=t.getPixelFromCoordinate(g[1]),E=(0,p.squaredDistance)(f,v),S=(0,p.squaredDistance)(f,C);c=Math.sqrt(Math.min(E,S)),this.snappedToVertex_=c<=this.pixelTolerance_,this.snappedToVertex_&&(h=E>S?g[1]:g[0]),this.createOrUpdateVertexFeature_(h);for(var T=1,I=d.length;T<I;++T){var w=d[T].segment;if(!((0,p.equals)(g[0],w[0])&&(0,p.equals)(g[1],w[1])||(0,p.equals)(g[0],w[1])&&(0,p.equals)(g[1],w[0])))break;m[(0,x.getUid)(w)]=!0}}return m[(0,x.getUid)(g)]=!0,void(this.vertexSegments_=m)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},u.prototype.insertVertex_=function(e,t){for(var r,n=e.segment,i=e.feature,a=e.geometry,s=e.depth,u=e.index;t.length<a.getStride();)t.push(0);switch(a.getType()){case o.default.MULTI_LINE_STRING:case o.default.POLYGON:(r=a.getCoordinates())[s[0]].splice(u+1,0,t);break;case o.default.MULTI_POLYGON:(r=a.getCoordinates())[s[1]][s[0]].splice(u+1,0,t);break;case o.default.LINE_STRING:(r=a.getCoordinates()).splice(u+1,0,t);break;default:return}this.setGeometryCoordinates_(a,r);var d=this.rBush_;d.remove(e),this.updateSegmentIndices_(a,u,s,1);var l={segment:[n[0],t],feature:i,geometry:a,depth:s,index:u};d.insert((0,_.boundingExtent)(l.segment),l),this.dragSegments_.push([l,1]);var g={segment:[t,n[1]],feature:i,geometry:a,depth:s,index:u+1};d.insert((0,_.boundingExtent)(g.segment),g),this.dragSegments_.push([g,0]),this.ignoreNextSingleClick_=!0},u.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.default.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);var t=this.removeVertex_();return this.dispatchEvent(new w(I.MODIFYEND,this.features_,e)),this.modified_=!1,t}return!1},u.prototype.removeVertex_=function(){var e,t,r,n,i,a,s,u,d,l,g,h=this.dragSegments_,f={},p=!1;for(i=h.length-1;i>=0;--i)l=(r=h[i])[0],g=(0,x.getUid)(l.feature),l.depth&&(g+="-"+l.depth.join("-")),g in f||(f[g]={}),0===r[1]?(f[g].right=l,f[g].index=l.index):1==r[1]&&(f[g].left=l,f[g].index=l.index+1);for(g in f){switch(d=f[g].right,s=f[g].left,(u=(a=f[g].index)-1)<0&&(u=0),e=t=(n=(l=void 0!==s?s:d).geometry).getCoordinates(),p=!1,n.getType()){case o.default.MULTI_LINE_STRING:t[l.depth[0]].length>2&&(t[l.depth[0]].splice(a,1),p=!0);break;case o.default.LINE_STRING:t.length>2&&(t.splice(a,1),p=!0);break;case o.default.MULTI_POLYGON:e=e[l.depth[1]];case o.default.POLYGON:(e=e[l.depth[0]]).length>4&&(a==e.length-1&&(a=0),e.splice(a,1),p=!0,0===a&&(e.pop(),e.push(e[0]),u=e.length-1))}if(p){this.setGeometryCoordinates_(n,t);var c=[];if(void 0!==s&&(this.rBush_.remove(s),c.push(s.segment[0])),void 0!==d&&(this.rBush_.remove(d),c.push(d.segment[1])),void 0!==s&&void 0!==d){var m={depth:l.depth,feature:l.feature,geometry:l.geometry,index:u,segment:c};this.rBush_.insert((0,_.boundingExtent)(m.segment),m)}this.updateSegmentIndices_(n,a,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return p},u.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},u.prototype.updateSegmentIndices_=function(e,t,r,n){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||(0,m.equals)(i.depth,r))&&i.index>t&&(i.index+=n)})},u}(u.default);function M(e,t){return e.index-t.index}function L(e,t,r){var n=t.geometry;if(n.getType()===o.default.CIRCLE){var i=n;if(t.index===F){var a=(0,y.getUserProjection)();a&&(i=i.clone().transform(a,r));var s=(0,p.squaredDistance)(i.getCenter(),(0,y.fromUserCoordinate)(e,r)),u=Math.sqrt(s)-i.getRadius();return u*u}}var d=(0,y.fromUserCoordinate)(e,r);return T[0]=(0,y.fromUserCoordinate)(t.segment[0],r),T[1]=(0,y.fromUserCoordinate)(t.segment[1],r),(0,p.squaredDistanceToSegment)(d,T)}function U(e,t,r){var n=t.geometry;if(n.getType()===o.default.CIRCLE&&t.index===F){var i=n,a=(0,y.getUserProjection)();return a&&(i=i.clone().transform(a,r)),(0,y.toUserCoordinate)(i.getClosestPoint((0,y.fromUserCoordinate)(e,r)),r)}var s=(0,y.fromUserCoordinate)(e,r);return T[0]=(0,y.fromUserCoordinate)(t.segment[0],r),T[1]=(0,y.fromUserCoordinate)(t.segment[1],r),(0,y.toUserCoordinate)((0,p.closestOnSegment)(s,T),r)}function b(){var e=(0,c.createEditingStyle)();return function(t,r){return e[o.default.POINT]}}var N=G;exports.default=N;
},{"../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../Feature.js":"mYW9","../geom/GeometryType.js":"lmV0","../MapBrowserEventType.js":"YhDM","../geom/Point.js":"gLcY","./Pointer.js":"dnA2","../structs/RBush.js":"MiUH","../source/VectorEventType.js":"s8Fc","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../events/condition.js":"YcID","../extent.js":"QDir","../coordinate.js":"nGsj","../style/Style.js":"he4w","../array.js":"luEr","../geom/Polygon.js":"Nwwk","../proj.js":"Diht","../util.js":"KniQ"}],"SMGe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../Collection.js")),t=c(require("../CollectionEventType.js")),r=c(require("../events/Event.js")),i=c(require("../geom/GeometryType.js")),n=c(require("./Interaction.js")),o=require("../functions.js"),s=require("../obj.js"),a=require("../style/Style.js"),u=require("../array.js"),l=require("../util.js"),d=require("../events/condition.js");function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),h={SELECT:"select"},y=function(e){function t(t,r,i,n){var o=e.call(this,t)||this;return o.selected=r,o.deselected=i,o.mapBrowserEvent=n,o}return f(t,e),t}(r.default),_={},p=function(r){function i(t){var i,n=r.call(this)||this,s=t||{};if(n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=s.condition?s.condition:d.singleClick,n.addCondition_=s.addCondition?s.addCondition:d.never,n.removeCondition_=s.removeCondition?s.removeCondition:d.never,n.toggleCondition_=s.toggleCondition?s.toggleCondition:d.shiftKeyOnly,n.multi_=!!s.multi&&s.multi,n.filter_=s.filter?s.filter:o.TRUE,n.hitTolerance_=s.hitTolerance?s.hitTolerance:0,n.style_=void 0!==s.style?s.style:v(),n.features_=s.features||new e.default,s.layers)if("function"==typeof s.layers)i=s.layers;else{var a=s.layers;i=function(e){return(0,u.includes)(a,e)}}else i=o.TRUE;return n.layerFilter_=i,n.featureLayerAssociation_={},n}return f(i,r),i.prototype.addFeatureLayerAssociation_=function(e,t){this.featureLayerAssociation_[(0,l.getUid)(e)]=t},i.prototype.getFeatures=function(){return this.features_},i.prototype.getHitTolerance=function(){return this.hitTolerance_},i.prototype.getLayer=function(e){return this.featureLayerAssociation_[(0,l.getUid)(e)]},i.prototype.setHitTolerance=function(e){this.hitTolerance_=e},i.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),r.prototype.setMap.call(this,e),e?(this.features_.addEventListener(t.default.ADD,this.boundAddFeature_),this.features_.addEventListener(t.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(t.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(t.default.REMOVE,this.boundRemoveFeature_))},i.prototype.addFeature_=function(e){var t=e.element;this.style_&&this.applySelectedStyle_(t)},i.prototype.removeFeature_=function(e){var t=e.element;this.style_&&this.restorePreviousStyle_(t)},i.prototype.getStyle=function(){return this.style_},i.prototype.applySelectedStyle_=function(e){var t=(0,l.getUid)(e);t in _||(_[t]=e.getStyle()),e.setStyle(this.style_)},i.prototype.restorePreviousStyle_=function(e){var t=(0,l.getUid)(e),r=this.getMap().getInteractions().getArray().filter(function(t){return t instanceof i&&t.getStyle()&&-1!==t.getFeatures().getArray().indexOf(e)});r.length>0?e.setStyle(r[r.length-1].getStyle()):(e.setStyle(_[t]),delete _[t])},i.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[(0,l.getUid)(e)]},i.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),n=!t&&!r&&!i,o=e.map,a=this.getFeatures(),l=[],d=[];if(n){(0,s.clear)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return d.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=a.getLength()-1;c>=0;--c){var f=a.item(c),_=d.indexOf(f);_>-1?d.splice(_,1):(a.remove(f),l.push(f))}0!==d.length&&a.extend(d)}else{o.forEachFeatureAtPixel(e.pixel,function(e,n){if(this.filter_(e,n))return!t&&!i||(0,u.includes)(a.getArray(),e)?(r||i)&&(0,u.includes)(a.getArray(),e)&&(l.push(e),this.removeFeatureLayerAssociation_(e)):(d.push(e),this.addFeatureLayerAssociation_(e,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=l.length-1;p>=0;--p)a.remove(l[p]);a.extend(d)}return(d.length>0||l.length>0)&&this.dispatchEvent(new y(h.SELECT,d,l,e)),!0},i}(n.default);function v(){var e=(0,a.createEditingStyle)();return(0,u.extend)(e[i.default.POLYGON],e[i.default.LINE_STRING]),(0,u.extend)(e[i.default.GEOMETRY_COLLECTION],e[i.default.LINE_STRING]),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}var g=p;exports.default=g;
},{"../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../events/Event.js":"fKNg","../geom/GeometryType.js":"lmV0","./Interaction.js":"jB2p","../functions.js":"RgA2","../obj.js":"mH6q","../style/Style.js":"he4w","../array.js":"luEr","../util.js":"KniQ","../events/condition.js":"YcID"}],"NnGW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../CollectionEventType.js")),t=p(require("../events/EventType.js")),r=p(require("../geom/GeometryType.js")),n=p(require("./Pointer.js")),i=p(require("../structs/RBush.js")),o=p(require("../source/VectorEventType.js")),s=require("../functions.js"),a=require("../extent.js"),u=require("../coordinate.js"),l=require("../geom/Polygon.js"),h=require("../proj.js"),d=require("../util.js"),f=require("../obj.js"),g=require("../events.js");function p(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function _(e){return e.feature?e.feature:e.element?e.element:void 0}var v=[],y=function(n){function p(e){var t=this,r=e||{},o=r;return o.handleDownEvent||(o.handleDownEvent=s.TRUE),o.stopDown||(o.stopDown=s.FALSE),(t=n.call(this,o)||this).source_=r.source?r.source:null,t.vertex_=void 0===r.vertex||r.vertex,t.edge_=void 0===r.edge||r.edge,t.features_=r.features?r.features:null,t.featuresListenerKeys_=[],t.featureChangeListenerKeys_={},t.indexedFeaturesExtents_={},t.pendingFeatures_={},t.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,t.rBush_=new i.default,t.SEGMENT_WRITERS_={Point:t.writePointGeometry_.bind(t),LineString:t.writeLineStringGeometry_.bind(t),LinearRing:t.writeLineStringGeometry_.bind(t),Polygon:t.writePolygonGeometry_.bind(t),MultiPoint:t.writeMultiPointGeometry_.bind(t),MultiLineString:t.writeMultiLineStringGeometry_.bind(t),MultiPolygon:t.writeMultiPolygonGeometry_.bind(t),GeometryCollection:t.writeGeometryCollectionGeometry_.bind(t),Circle:t.writeCircleGeometry_.bind(t)},t}return c(p,n),p.prototype.addFeature=function(e,r){var n=void 0===r||r,i=(0,d.getUid)(e),o=e.getGeometry();if(o){var s=this.SEGMENT_WRITERS_[o.getType()];s&&(this.indexedFeaturesExtents_[i]=o.getExtent((0,a.createEmpty)()),s(e,o))}n&&(this.featureChangeListenerKeys_[i]=(0,g.listen)(e,t.default.CHANGE,this.handleFeatureChange_,this))},p.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},p.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},p.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},p.prototype.handleEvent=function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),n.prototype.handleEvent.call(this,e)},p.prototype.handleFeatureAdd_=function(e){var t=_(e);this.addFeature(t)},p.prototype.handleFeatureRemove_=function(e){var t=_(e);this.removeFeature(t)},p.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=(0,d.getUid)(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},p.prototype.handleUpEvent=function(e){var t=(0,f.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},p.prototype.removeFeature=function(e,t){var r=void 0===t||t,n=(0,d.getUid)(e),i=this.indexedFeaturesExtents_[n];if(i){var o=this.rBush_,s=[];o.forEachInExtent(i,function(t){e===t.feature&&s.push(t)});for(var a=s.length-1;a>=0;--a)o.remove(s[a])}r&&((0,g.unlistenByKey)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},p.prototype.setMap=function(t){var r=this.getMap(),i=this.featuresListenerKeys_,s=this.getFeatures_();r&&(i.forEach(g.unlistenByKey),i.length=0,s.forEach(this.forEachFeatureRemove_.bind(this))),n.prototype.setMap.call(this,t),t&&(this.features_?i.push((0,g.listen)(this.features_,e.default.ADD,this.handleFeatureAdd_,this),(0,g.listen)(this.features_,e.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push((0,g.listen)(this.source_,o.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,g.listen)(this.source_,o.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),s.forEach(this.forEachFeatureAdd_.bind(this)))},p.prototype.snapTo=function(e,t,n){var i=n.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=n.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),s=(0,a.boundingExtent)([i,o]),l=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(l=l.filter(function(e){return e.feature.getGeometry().getType()!==r.default.CIRCLE}));var d=!1,f=null,g=null;if(0===l.length)return{snapped:d,vertex:f,vertexPixel:g};for(var p,c=n.getView().getProjection(),_=(0,h.fromUserCoordinate)(t,c),y=1/0,m=0;m<l.length;++m){var x=l[m];v[0]=(0,h.fromUserCoordinate)(x.segment[0],c),v[1]=(0,h.fromUserCoordinate)(x.segment[1],c);var E=(0,u.squaredDistanceToSegment)(_,v);E<y&&(p=x,y=E)}var F=p.segment;if(this.vertex_&&!this.edge_){var C=n.getPixelFromCoordinate(F[0]),P=n.getPixelFromCoordinate(F[1]),G=(0,u.squaredDistance)(e,C),T=(0,u.squaredDistance)(e,P);Math.sqrt(Math.min(G,T))<=this.pixelTolerance_&&(d=!0,f=G>T?F[1]:F[0],g=n.getPixelFromCoordinate(f))}else if(this.edge_){var w=p.feature.getGeometry().getType()===r.default.CIRCLE;if(w){var M=p.feature.getGeometry(),j=(0,h.getUserProjection)();j&&(M=M.clone().transform(j,c)),f=(0,h.toUserCoordinate)((0,u.closestOnCircle)(_,M),c)}else v[0]=(0,h.fromUserCoordinate)(F[0],c),v[1]=(0,h.fromUserCoordinate)(F[1],c),f=(0,h.toUserCoordinate)((0,u.closestOnSegment)(_,v),c);if(g=n.getPixelFromCoordinate(f),(0,u.distance)(e,g)<=this.pixelTolerance_&&(d=!0,this.vertex_&&!w)){C=n.getPixelFromCoordinate(F[0]),P=n.getPixelFromCoordinate(F[1]),G=(0,u.squaredDistance)(g,C),T=(0,u.squaredDistance)(g,P);Math.sqrt(Math.min(G,T))<=this.pixelTolerance_&&(f=G>T?F[1]:F[0],g=n.getPixelFromCoordinate(f))}}return d&&(g=[Math.round(g[0]),Math.round(g[1])]),{snapped:d,vertex:f,vertexPixel:g}},p.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},p.prototype.writeCircleGeometry_=function(e,t){var r=this.getMap().getView().getProjection(),n=t,i=(0,h.getUserProjection)();i&&(n=n.clone().transform(i,r));var o=(0,l.fromCircle)(n);i&&o.transform(r,i);for(var s=o.getCoordinates()[0],u=0,d=s.length-1;u<d;++u){var f=s.slice(u,u+2),g={feature:e,segment:f};this.rBush_.insert((0,a.boundingExtent)(f),g)}},p.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i(e,r[n])}},p.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),s={feature:e,segment:o};this.rBush_.insert((0,a.boundingExtent)(o),s)}},p.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,u=o.length-1;s<u;++s){var l=o.slice(s,s+2),h={feature:e,segment:l};this.rBush_.insert((0,a.boundingExtent)(l),h)}},p.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],s={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),s)}},p.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,u=o.length;s<u;++s)for(var l=o[s],h=0,d=l.length-1;h<d;++h){var f=l.slice(h,h+2),g={feature:e,segment:f};this.rBush_.insert((0,a.boundingExtent)(f),g)}},p.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},p.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],s=0,u=o.length-1;s<u;++s){var l=o.slice(s,s+2),h={feature:e,segment:l};this.rBush_.insert((0,a.boundingExtent)(l),h)}},p}(n.default),m=y;exports.default=m;
},{"../CollectionEventType.js":"BTrx","../events/EventType.js":"C8cu","../geom/GeometryType.js":"lmV0","./Pointer.js":"dnA2","../structs/RBush.js":"MiUH","../source/VectorEventType.js":"s8Fc","../functions.js":"RgA2","../extent.js":"QDir","../coordinate.js":"nGsj","../geom/Polygon.js":"Nwwk","../proj.js":"Diht","../util.js":"KniQ","../obj.js":"mH6q","../events.js":"UqnM"}],"dAAZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TranslateEvent=void 0;var t=s(require("../Collection.js")),e=s(require("../events/Event.js")),r=s(require("./Property.js")),a=s(require("./Pointer.js")),n=require("../functions.js"),i=require("../Object.js"),o=require("../array.js");function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),u={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},h=function(t){function e(e,r,a,n,i){var o=t.call(this,e)||this;return o.features=r,o.coordinate=a,o.startCoordinate=n,o.mapBrowserEvent=i,o}return l(e,t),e}(e.default);exports.TranslateEvent=h;var c=function(e){function a(t){var a,s=this,l=t||{};if((s=e.call(this,l)||this).lastCoordinate_=null,s.startCoordinate_=null,s.features_=void 0!==l.features?l.features:null,l.layers)if("function"==typeof l.layers)a=l.layers;else{var u=l.layers;a=function(t){return(0,o.includes)(u,t)}}else a=n.TRUE;return s.layerFilter_=a,s.filter_=l.filter?l.filter:n.TRUE,s.hitTolerance_=l.hitTolerance?l.hitTolerance:0,s.lastFeature_=null,s.addEventListener((0,i.getChangeEventType)(r.default.ACTIVE),s.handleActiveChanged_),s}return l(a,e),a.prototype.handleDownEvent=function(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATESTART,r,e.coordinate,this.startCoordinate_,e)),!0}return!1},a.prototype.handleUpEvent=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATEEND,r,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1},a.prototype.handleDragEvent=function(e){if(this.lastCoordinate_){var r=e.coordinate,a=r[0]-this.lastCoordinate_[0],n=r[1]-this.lastCoordinate_[1],i=this.features_||new t.default([this.lastFeature_]);i.forEach(function(t){var e=t.getGeometry();e.translate(a,n),t.setGeometry(e)}),this.lastCoordinate_=r,this.dispatchEvent(new h(u.TRANSLATING,i,r,this.startCoordinate_,e))}},a.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},a.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||(0,o.includes)(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},a.prototype.getHitTolerance=function(){return this.hitTolerance_},a.prototype.setHitTolerance=function(t){this.hitTolerance_=t},a.prototype.setMap=function(t){var r=this.getMap();e.prototype.setMap.call(this,t),this.updateState_(r)},a.prototype.handleActiveChanged_=function(){this.updateState_(null)},a.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},a}(a.default),f=c;exports.default=f;
},{"../Collection.js":"FnDa","../events/Event.js":"fKNg","./Property.js":"caOi","./Pointer.js":"dnA2","../functions.js":"RgA2","../Object.js":"PhPh","../array.js":"luEr"}],"aMDX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=O,Object.defineProperty(exports,"DoubleClickZoom",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"DragPan",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DragRotate",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"DragZoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"KeyboardPan",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"KeyboardZoom",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"MouseWheelZoom",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"PinchRotate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"PinchZoom",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"DragAndDrop",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"DragBox",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"DragRotateAndZoom",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"Draw",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Extent",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Modify",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Pointer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Snap",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"Translate",{enumerable:!0,get:function(){return x.default}});var e=h(require("./Collection.js")),t=h(require("./interaction/DoubleClickZoom.js")),r=h(require("./interaction/DragPan.js")),n=h(require("./interaction/DragRotate.js")),o=h(require("./interaction/DragZoom.js")),u=h(require("./interaction/KeyboardPan.js")),i=h(require("./interaction/KeyboardZoom.js")),a=h(require("./Kinetic.js")),c=h(require("./interaction/MouseWheelZoom.js")),d=h(require("./interaction/PinchRotate.js")),l=h(require("./interaction/PinchZoom.js")),f=h(require("./interaction/DragAndDrop.js")),s=h(require("./interaction/DragBox.js")),p=h(require("./interaction/DragRotateAndZoom.js")),b=h(require("./interaction/Draw.js")),m=h(require("./interaction/Extent.js")),j=h(require("./interaction/Interaction.js")),g=h(require("./interaction/Modify.js")),y=h(require("./interaction/Pointer.js")),P=h(require("./interaction/Select.js")),D=h(require("./interaction/Snap.js")),x=h(require("./interaction/Translate.js"));function h(e){return e&&e.__esModule?e:{default:e}}function O(f){var s=f||{},p=new e.default,b=new a.default(-.005,.05,100);return(void 0===s.altShiftDragRotate||s.altShiftDragRotate)&&p.push(new n.default),(void 0===s.doubleClickZoom||s.doubleClickZoom)&&p.push(new t.default({delta:s.zoomDelta,duration:s.zoomDuration})),(void 0===s.dragPan||s.dragPan)&&p.push(new r.default({onFocusOnly:s.onFocusOnly,kinetic:b})),(void 0===s.pinchRotate||s.pinchRotate)&&p.push(new d.default),(void 0===s.pinchZoom||s.pinchZoom)&&p.push(new l.default({duration:s.zoomDuration})),(void 0===s.keyboard||s.keyboard)&&(p.push(new u.default),p.push(new i.default({delta:s.zoomDelta,duration:s.zoomDuration}))),(void 0===s.mouseWheelZoom||s.mouseWheelZoom)&&p.push(new c.default({onFocusOnly:s.onFocusOnly,duration:s.zoomDuration})),(void 0===s.shiftDragZoom||s.shiftDragZoom)&&p.push(new o.default({duration:s.zoomDuration})),p}
},{"./Collection.js":"FnDa","./interaction/DoubleClickZoom.js":"NSa4","./interaction/DragPan.js":"N4gU","./interaction/DragRotate.js":"PgBj","./interaction/DragZoom.js":"pTqW","./interaction/KeyboardPan.js":"CFRo","./interaction/KeyboardZoom.js":"S8wR","./Kinetic.js":"gAnK","./interaction/MouseWheelZoom.js":"kPt6","./interaction/PinchRotate.js":"hbGN","./interaction/PinchZoom.js":"rcXm","./interaction/DragAndDrop.js":"IYO6","./interaction/DragBox.js":"AQRw","./interaction/DragRotateAndZoom.js":"ITeC","./interaction/Draw.js":"e7i2","./interaction/Extent.js":"o7b8","./interaction/Interaction.js":"jB2p","./interaction/Modify.js":"qrxo","./interaction/Pointer.js":"dnA2","./interaction/Select.js":"SMGe","./interaction/Snap.js":"NnGW","./interaction/Translate.js":"dAAZ"}],"kYy5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./renderer/Composite.js")),e=u(require("./PluggableMap.js")),r=require("./obj.js"),o=require("./control.js"),n=require("./interaction.js");function u(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),s=function(e){function u(t){return(t=(0,r.assign)({},t)).controls||(t.controls=(0,o.defaults)()),t.interactions||(t.interactions=(0,n.defaults)({onFocusOnly:!0})),e.call(this,t)||this}return i(u,e),u.prototype.createRenderer=function(){return new t.default(this)},u}(e.default),c=s;exports.default=c;
},{"./renderer/Composite.js":"MHsB","./PluggableMap.js":"kRwz","./obj.js":"mH6q","./control.js":"ucqx","./interaction.js":"aMDX"}],"BAXJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=o;var e=a(require("./Projection.js")),r=require("../proj.js"),s=require("../obj.js"),t=require("./transforms.js");function a(e){return e&&e.__esModule?e:{default:e}}function o(a){var o,i,n=Object.keys(a.defs),d=n.length;for(o=0;o<d;++o){var f=n[o];if(!(0,r.get)(f)){var u=a.defs(f);(0,r.addProjection)(new e.default({code:f,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:u.units}))}}for(o=0;o<d;++o){var v=n[o],c=(0,r.get)(v);for(i=0;i<d;++i){var j=n[i],g=(0,r.get)(j);if(!(0,t.get)(v,j)){var l=a.defs(v),m=a.defs(j);if(l===m)(0,r.addEquivalentProjections)([c,g]);else{var x=a((0,s.assign)({},l,{axis:void 0}),(0,s.assign)({},m,{axis:void 0}));(0,r.addCoordinateTransforms)(c,g,(0,r.createSafeCoordinateTransform)(c,g,x.forward),(0,r.createSafeCoordinateTransform)(g,c,x.inverse))}}}}}
},{"./Projection.js":"WUar","../proj.js":"Diht","../obj.js":"mH6q","./transforms.js":"uhlP"}],"nzid":[function(require,module,exports) {
"use strict";function e(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LiBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SPI=exports.TWO_PI=exports.FORTPI=exports.R2D=exports.D2R=exports.EPSLN=exports.RA6=exports.RA4=exports.SIXTH=exports.HALF_PI=exports.SEC_TO_RAD=exports.PJD_NODATUM=exports.PJD_WGS84=exports.PJD_7PARAM=exports.PJD_3PARAM=void 0;var r=1;exports.PJD_3PARAM=r;var e=2;exports.PJD_7PARAM=e;var t=4;exports.PJD_WGS84=t;var o=5;exports.PJD_NODATUM=o;var s=484813681109536e-20;exports.SEC_TO_RAD=s;var p=Math.PI/2;exports.HALF_PI=p;var x=.16666666666666666;exports.SIXTH=x;var P=.04722222222222222;exports.RA4=P;var a=.022156084656084655;exports.RA6=a;var A=1e-10;exports.EPSLN=A;var _=.017453292519943295;exports.D2R=_;var v=57.29577951308232;exports.R2D=v;var D=Math.PI/4;exports.FORTPI=D;var R=2*Math.PI;exports.TWO_PI=R;var I=3.14159265359;exports.SPI=I;
},{}],"mr61":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={};exports.default=e,e.greenwich=0,e.lisbon=-9.131906111111,e.paris=2.337229166667,e.bogota=-74.080916666667,e.madrid=-3.687938888889,e.rome=12.452333333333,e.bern=7.439583333333,e.jakarta=106.807719444444,e.ferro=-17.666666666667,e.brussels=4.367975,e.stockholm=18.058277777778,e.athens=23.7163375,e.oslo=10.722916666667;
},{}],"jm2i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};exports.default=e;
},{}],"jFbK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=/[\s_\-\/\(\)]/g;function r(r,t){if(r[t])return r[t];for(var o,s=Object.keys(r),a=t.toLowerCase().replace(e,""),u=-1;++u<s.length;)if((o=s[u]).toLowerCase().replace(e,"")===a)return r[o]}
},{}],"yf7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("./constants/values"),n=u(require("./constants/PrimeMeridian")),o=u(require("./constants/units")),e=u(require("./match"));function u(t){return t&&t.__esModule?t:{default:t}}function a(u){var a,r,i,s={},f=u.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var o=n.split("=");return o.push(!0),t[o[0].toLowerCase()]=o[1],t},{}),l={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(n){s.lat0=n*t.D2R},lat_1:function(n){s.lat1=n*t.D2R},lat_2:function(n){s.lat2=n*t.D2R},lat_ts:function(n){s.lat_ts=n*t.D2R},lon_0:function(n){s.long0=n*t.D2R},lon_1:function(n){s.long1=n*t.D2R},lon_2:function(n){s.long2=n*t.D2R},alpha:function(n){s.alpha=parseFloat(n)*t.D2R},lonc:function(n){s.longc=n*t.D2R},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){s.units=t;var n=(0,e.default)(o.default,t);n&&(s.to_meter=n.to_meter)},from_greenwich:function(n){s.from_greenwich=n*t.D2R},pm:function(o){var u=(0,e.default)(n.default,o);s.from_greenwich=(u||parseFloat(o))*t.D2R},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(s.axis=t)}};for(a in f)r=f[a],a in l?"function"==typeof(i=l[a])?i(r):s[i]=r:s[a]=r;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}
},{"./constants/values":"LiBj","./constants/PrimeMeridian":"mr61","./constants/units":"jm2i","./match":"jFbK"}],"QUL1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p;exports.default=t;var e=1,r=2,i=3,s=4,h=5,o=-1,n=/\s/,a=/[A-Za-z]/,u=/[A-Za-z84]/,d=/[,\]]/,c=/[\d\.E\-\+]/;function l(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=e}function p(t){return new l(t).output()}l.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==s)for(;n.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case e:return this.neutral(t);case r:return this.keyword(t);case s:return this.quoted(t);case h:return this.afterquote(t);case i:return this.number(t);case o:return}},l.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=s);if(d.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},l.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=e)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=e,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=o))):void 0},l.prototype.number=function(t){if(!c.test(t)){if(d.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},l.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=h},l.prototype.keyword=function(t){if(u.test(t))this.word+=t;else{if("["===t){var r=[];return r.push(this.word),this.level++,null===this.root?this.root=r:this.currentObject.push(r),this.stack.push(this.currentObject),this.currentObject=r,void(this.state=e)}if(!d.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},l.prototype.neutral=function(t){if(a.test(t))return this.word=t,void(this.state=r);if('"'===t)return this.word="",void(this.state=s);if(c.test(t))return this.word=t,void(this.state=i);if(!d.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},l.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===o)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};
},{}],"Wfmr":[function(require,module,exports) {
"use strict";function e(e,a,s){Array.isArray(a)&&(s.unshift(a),a=null);var c=a?{}:e,t=s.reduce(function(e,a){return r(a,e),e},c);a&&(e[a]=t)}function r(a,s){if(Array.isArray(a)){var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(s[c]={},void r(a[0],s[c])):void(s[c]=a[0]);if(a.length)if("TOWGS84"!==c){if("AXIS"===c)return c in s||(s[c]=[]),void s[c].push(a);var t;switch(Array.isArray(c)||(s[c]={}),c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return s[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&r(a[2],s[c]));case"SPHEROID":case"ELLIPSOID":return s[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&r(a[3],s[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void e(s,c,a);default:for(t=-1;++t<a.length;)if(!Array.isArray(a[t]))return r(a,s[c]);return e(s,c,a)}}else s[c]=a;else s[c]=!0}else s[a]=!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sExpr=r;
},{}],"GYTI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("./parser")),t=require("./process");function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=.017453292519943295;function n(e,t){var a=t[0],o=t[1];!(a in e)&&o in e&&(e[a]=e[o],3===t.length&&(e[a]=t[2](e[a])))}function d(e){return e*r}function l(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===o(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",a=0,r=e.AXIS.length;a<r;++a){var l=e.AXIS[a][0].toLowerCase();-1!==l.indexOf("north")?t+="n":-1!==l.indexOf("south")?t+="s":-1!==l.indexOf("east")?t+="e":-1!==l.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var i=e.GEOGCS;function _(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(i=e),i&&(i.DATUM?e.datumCode=i.DATUM.name.toLowerCase():e.datumCode=i.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(e.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=i.DATUM.SPHEROID.a,e.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(e.datum_params=i.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d],["x0","false_easting",_],["y0","false_northing",_],["long0","central_meridian",d],["lat0","latitude_of_origin",d],["lat0","standard_parallel_1",d],["lat1","standard_parallel_1",d],["lat2","standard_parallel_2",d],["azimuth","Azimuth"],["alpha","azimuth",d],["srsCode","name"]].forEach(function(t){return n(e,t)}),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=d(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function i(a){var o=(0,e.default)(a),r=o.shift(),n=o.shift();o.unshift(["name",n]),o.unshift(["type",r]);var d={};return(0,t.sExpr)(o,d),l(d),d}
},{"./parser":"QUL1","./process":"Wfmr"}],"KsYW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./global")),r=i(require("./projString")),t=i(require("wkt-parser"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e){var i=this;if(2===arguments.length){var a=arguments[1];"string"==typeof a?"+"===a.charAt(0)?n[e]=(0,r.default)(arguments[1]):n[e]=(0,t.default)(arguments[1]):n[e]=a}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?n.apply(i,e):n(e)});if("string"==typeof e){if(e in n)return n[e]}else"EPSG"in e?n["EPSG:"+e.EPSG]=e:"ESRI"in e?n["ESRI:"+e.ESRI]=e:"IAU2000"in e?n["IAU2000:"+e.IAU2000]=e:console.log(e);return}}(0,e.default)(n);var a=n;exports.default=a;
},{"./global":"nzid","./projString":"yf7I","wkt-parser":"GYTI"}],"Ia21":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./defs")),r=n(require("wkt-parser")),t=n(require("./projString")),u=n(require("./match"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return"string"==typeof e}function i(r){return r in e.default}var a=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function o(e){return a.some(function(r){return e.indexOf(r)>-1})}var d=["3857","900913","3785","102113"];function l(e){var r=(0,u.default)(e,"authority");if(r){var t=(0,u.default)(r,"epsg");return t&&d.indexOf(t)>-1}}function C(e){var r=(0,u.default)(e,"extension");if(r)return(0,u.default)(r,"proj4")}function E(e){return"+"===e[0]}function s(u){if(!f(u))return u;if(i(u))return e.default[u];if(o(u)){var n=(0,r.default)(u);if(l(n))return e.default["EPSG:3857"];var a=C(n);return a?(0,t.default)(a):n}return E(u)?(0,t.default)(u):void 0}var c=s;exports.default=c;
},{"./defs":"KsYW","wkt-parser":"GYTI","./projString":"yf7I","./match":"jFbK"}],"wM1P":[function(require,module,exports) {
"use strict";function e(e,r){var t,o;if(e=e||{},!r)return e;for(o in r)void 0!==(t=r[o])&&(e[o]=t);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"AEhT":[function(require,module,exports) {
"use strict";function e(e,t,r){var s=e*t;return r/Math.sqrt(1-s*s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Yu1R":[function(require,module,exports) {
"use strict";function e(e){return e<0?-1:1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"c0D1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../constants/values"),t=r(require("./sign"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return Math.abs(r)<=e.SPI?r:r-(0,t.default)(r)*e.TWO_PI}
},{"../constants/values":"LiBj","./sign":"Yu1R"}],"dGKf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../constants/values");function t(t,r,a){var s=t*a,u=.5*t;return s=Math.pow((1-s)/(1+s),u),Math.tan(.5*(e.HALF_PI-r))/s}
},{"../constants/values":"LiBj"}],"KCUm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../constants/values");function e(e,a){for(var r,n,s=.5*e,u=t.HALF_PI-2*Math.atan(a),o=0;o<=15;o++)if(r=e*Math.sin(u),u+=n=t.HALF_PI-2*Math.atan(a*Math.pow((1-r)/(1+r),s))-u,Math.abs(n)<=1e-10)return u;return-9999}
},{"../constants/values":"LiBj"}],"qCu6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=n,exports.inverse=o,exports.default=exports.names=void 0;var t=a(require("../common/msfnz")),s=a(require("../common/adjust_lon")),i=a(require("../common/tsfnz")),e=a(require("../common/phi2z")),h=require("../constants/values");function a(t){return t&&t.__esModule?t:{default:t}}function r(){var s=this.b/this.a;this.es=1-s*s,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,t.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function n(t){var e,a,r=t.x,n=t.y;if(n*h.R2D>90&&n*h.R2D<-90&&r*h.R2D>180&&r*h.R2D<-180)return null;if(Math.abs(Math.abs(n)-h.HALF_PI)<=h.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,s.default)(r-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(h.FORTPI+.5*n));else{var o=Math.sin(n),u=(0,i.default)(this.e,n,o);e=this.x0+this.a*this.k0*(0,s.default)(r-this.long0),a=this.y0-this.a*this.k0*Math.log(u)}return t.x=e,t.y=a,t}function o(t){var i,a,r=t.x-this.x0,n=t.y-this.y0;if(this.sphere)a=h.HALF_PI-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var o=Math.exp(-n/(this.a*this.k0));if(-9999===(a=(0,e.default)(this.e,o)))return null}return i=(0,s.default)(this.long0+r/(this.a*this.k0)),t.x=i,t.y=a,t}var u=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];exports.names=u;var l={init:r,forward:n,inverse:o,names:u};exports.default=l;
},{"../common/msfnz":"AEhT","../common/adjust_lon":"c0D1","../common/tsfnz":"dGKf","../common/phi2z":"KCUm","../constants/values":"LiBj"}],"mwVT":[function(require,module,exports) {
"use strict";function e(){}function t(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.inverse=exports.forward=t,exports.default=exports.names=void 0;var r=["longlat","identity"];exports.names=r;var o={init:e,forward:t,inverse:t,names:r};exports.default=o;
},{}],"USh1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=s,exports.get=u,exports.start=i,exports.default=void 0;var e=r(require("./projections/merc")),t=r(require("./projections/longlat"));function r(e){return e&&e.__esModule?e:{default:e}}var o=[e.default,t.default],a={},n=[];function s(e,t){var r=n.length;return e.names?(n[r]=e,e.names.forEach(function(e){a[e.toLowerCase()]=r}),this):(console.log(t),!0)}function u(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==a[t]&&n[a[t]]?n[a[t]]:void 0}function i(){o.forEach(s)}var d={start:i,add:s,get:u};exports.default=d;
},{"./projections/merc":"qCu6","./projections/longlat":"mwVT"}],"FyU7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WGS84=exports.default=void 0;var e={};exports.default=e,e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},e.hough={a:6378270,rf:297,ellipseName:"Hough"},e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var a=e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports.WGS84=a,e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};
},{}],"e0HC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eccentricity=a,exports.sphere=f;var e=require("./constants/values"),t=o(require("./constants/Ellipsoid")),r=n(require("./match"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(t,r,n,u){var o=t*t,a=r*r,f=(o-a)/o,i=0;return u?(o=(t*=1-f*(e.SIXTH+f*(e.RA4+f*e.RA6)))*t,f=0):i=Math.sqrt(f),{es:f,e:i,ep2:(o-a)/a}}function f(n,u,o,a,f){if(!n){var i=(0,r.default)(t.default,a);i||(i=t.WGS84),n=i.a,u=i.b,o=i.rf}return o&&!u&&(u=(1-1/o)*n),(0===o||Math.abs(n-u)<e.EPSLN)&&(f=!0,u=n),{a:n,b:u,rf:o,sphere:f}}
},{"./constants/values":"LiBj","./constants/Ellipsoid":"FyU7","./match":"jFbK"}],"yYWe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={};exports.default=e,e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},e.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},e.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},e.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},e.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};
},{}],"YYTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=require("./constants/values");function t(t,m,_,r,e,u){var s={};return s.datum_type=void 0===t||"none"===t?a.PJD_NODATUM:a.PJD_WGS84,m&&(s.datum_params=m.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=a.PJD_3PARAM),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=a.PJD_7PARAM,s.datum_params[3]*=a.SEC_TO_RAD,s.datum_params[4]*=a.SEC_TO_RAD,s.datum_params[5]*=a.SEC_TO_RAD,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=_,s.b=r,s.es=e,s.ep2=u,s}var m=t;exports.default=m;
},{"./constants/values":"LiBj"}],"TmNP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./parseCode")),t=d(require("./extend")),s=d(require("./projections")),a=require("./deriveConstants"),r=d(require("./constants/Datum")),i=d(require("./datum")),u=d(require("./match"));function d(e){return e&&e.__esModule?e:{default:e}}function o(s,d){if(!(this instanceof o))return new o(s);d=d||function(e){if(e)throw e};var l=(0,e.default)(s);if("object"==typeof l){var n=o.projections.get(l.projName);if(n){if(l.datumCode&&"none"!==l.datumCode){var p=(0,u.default)(r.default,l.datumCode);p&&(l.datum_params=p.towgs84?p.towgs84.split(","):null,l.ellps=p.ellipse,l.datumName=p.datumName?p.datumName:l.datumCode)}l.k0=l.k0||1,l.axis=l.axis||"enu",l.ellps=l.ellps||"wgs84";var f=(0,a.sphere)(l.a,l.b,l.rf,l.ellps,l.sphere),m=(0,a.eccentricity)(f.a,f.b,f.rf,l.R_A),h=l.datum||(0,i.default)(l.datumCode,l.datum_params,f.a,f.b,m.es,m.ep2);(0,t.default)(this,l),(0,t.default)(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=h,this.init(),d(null,this)}else d(s)}else d(s)}o.projections=s.default,o.projections.start();var l=o;exports.default=l;
},{"./parseCode":"Ia21","./extend":"wM1P","./projections":"USh1","./deriveConstants":"e0HC","./constants/Datum":"yYWe","./datum":"YYTB","./match":"jFbK"}],"AJ6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareDatums=t,exports.geodeticToGeocentric=r,exports.geocentricToGeodetic=e,exports.geocentricToWgs84=s,exports.geocentricFromWgs84=m;var a=require("./constants/values");function t(t,r){return t.datum_type===r.datum_type&&(!(t.a!==r.a||Math.abs(t.es-r.es)>5e-11)&&(t.datum_type===a.PJD_3PARAM?t.datum_params[0]===r.datum_params[0]&&t.datum_params[1]===r.datum_params[1]&&t.datum_params[2]===r.datum_params[2]:t.datum_type!==a.PJD_7PARAM||t.datum_params[0]===r.datum_params[0]&&t.datum_params[1]===r.datum_params[1]&&t.datum_params[2]===r.datum_params[2]&&t.datum_params[3]===r.datum_params[3]&&t.datum_params[4]===r.datum_params[4]&&t.datum_params[5]===r.datum_params[5]&&t.datum_params[6]===r.datum_params[6]))}function r(t,r,e){var s,m,u,_,p=t.x,n=t.y,d=t.z?t.z:0;if(n<-a.HALF_PI&&n>-1.001*a.HALF_PI)n=-a.HALF_PI;else if(n>a.HALF_PI&&n<1.001*a.HALF_PI)n=a.HALF_PI;else{if(n<-a.HALF_PI)return{x:-1/0,y:-1/0,z:t.z};if(n>a.HALF_PI)return{x:1/0,y:1/0,z:t.z}}return p>Math.PI&&(p-=2*Math.PI),m=Math.sin(n),_=Math.cos(n),u=m*m,{x:((s=e/Math.sqrt(1-r*u))+d)*_*Math.cos(p),y:(s+d)*_*Math.sin(p),z:(s*(1-r)+d)*m}}function e(t,r,e,s){var m,u,_,p,n,d,o,i,x,P,y,M,z,c,A,h=t.x,f=t.y,I=t.z?t.z:0;if(m=Math.sqrt(h*h+f*f),u=Math.sqrt(h*h+f*f+I*I),m/e<1e-12){if(c=0,u/e<1e-12)return a.HALF_PI,A=-s,{x:t.x,y:t.y,z:t.z}}else c=Math.atan2(f,h);_=I/u,i=(p=m/u)*(1-r)*(n=1/Math.sqrt(1-r*(2-r)*p*p)),x=_*n,z=0;do{z++,d=r*(o=e/Math.sqrt(1-r*x*x))/(o+(A=m*i+I*x-o*(1-r*x*x))),M=(y=_*(n=1/Math.sqrt(1-d*(2-d)*p*p)))*i-(P=p*(1-d)*n)*x,i=P,x=y}while(M*M>1e-24&&z<30);return{x:c,y:Math.atan(y/Math.abs(P)),z:A}}function s(t,r,e){if(r===a.PJD_3PARAM)return{x:t.x+e[0],y:t.y+e[1],z:t.z+e[2]};if(r===a.PJD_7PARAM){var s=e[0],m=e[1],u=e[2],_=e[3],p=e[4],n=e[5],d=e[6];return{x:d*(t.x-n*t.y+p*t.z)+s,y:d*(n*t.x+t.y-_*t.z)+m,z:d*(-p*t.x+_*t.y+t.z)+u}}}function m(t,r,e){if(r===a.PJD_3PARAM)return{x:t.x-e[0],y:t.y-e[1],z:t.z-e[2]};if(r===a.PJD_7PARAM){var s=e[0],m=e[1],u=e[2],_=e[3],p=e[4],n=e[5],d=e[6],o=(t.x-s)/d,i=(t.y-m)/d,x=(t.z-u)/d;return{x:o+n*i-p*x,y:-n*o+i+_*x,z:p*o-_*i+x}}}
},{"./constants/values":"LiBj"}],"casK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("./constants/values"),t=require("./datumUtils");function a(t){return t===e.PJD_3PARAM||t===e.PJD_7PARAM}function u(u,r,o){return(0,t.compareDatums)(u,r)?o:u.datum_type===e.PJD_NODATUM||r.datum_type===e.PJD_NODATUM?o:u.es!==r.es||u.a!==r.a||a(u.datum_type)||a(r.datum_type)?(o=(0,t.geodeticToGeocentric)(o,u.es,u.a),a(u.datum_type)&&(o=(0,t.geocentricToWgs84)(o,u.datum_type,u.datum_params)),a(r.datum_type)&&(o=(0,t.geocentricFromWgs84)(o,r.datum_type,r.datum_params)),(0,t.geocentricToGeodetic)(o,r.es,r.a,r.b)):o}
},{"./constants/values":"LiBj","./datumUtils":"AJ6k"}],"Trp1":[function(require,module,exports) {
"use strict";function e(e,s,a){var r,i,t,c=a.x,d=a.y,n=a.z||0,u={};for(t=0;t<3;t++)if(!s||2!==t||void 0!==a.z)switch(0===t?(r=c,i=-1!=="ew".indexOf(e.axis[t])?"x":"y"):1===t?(r=d,i=-1!=="ns".indexOf(e.axis[t])?"y":"x"):(r=n,i="z"),e.axis[t]){case"e":case"w":case"n":case"s":u[i]=r;break;case"u":void 0!==a[i]&&(u.z=r);break;case"d":void 0!==a[i]&&(u.z=-r);break;default:return null}return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Q8bn":[function(require,module,exports) {
"use strict";function e(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fxXU":[function(require,module,exports) {
"use strict";function e(e){t(e.x),t(e.y)}function t(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"n5UB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("./constants/values"),t=d(require("./datum_transform")),r=d(require("./adjust_axis")),u=d(require("./Proj")),a=d(require("./common/toPoint")),o=d(require("./checkSanity"));function d(e){return e&&e.__esModule?e:{default:e}}function m(t,r){return(t.datum.datum_type===e.PJD_3PARAM||t.datum.datum_type===e.PJD_7PARAM)&&"WGS84"!==r.datumCode||(r.datum.datum_type===e.PJD_3PARAM||r.datum.datum_type===e.PJD_7PARAM)&&"WGS84"!==t.datumCode}function n(d,i,_){var f;if(Array.isArray(_)&&(_=(0,a.default)(_)),(0,o.default)(_),d.datum&&i.datum&&m(d,i)&&(_=n(d,f=new u.default("WGS84"),_),d=f),"enu"!==d.axis&&(_=(0,r.default)(d,!1,_)),"longlat"===d.projName)_={x:_.x*e.D2R,y:_.y*e.D2R,z:_.z||0};else if(d.to_meter&&(_={x:_.x*d.to_meter,y:_.y*d.to_meter,z:_.z||0}),!(_=d.inverse(_)))return;return d.from_greenwich&&(_.x+=d.from_greenwich),_=(0,t.default)(d.datum,i.datum,_),i.from_greenwich&&(_={x:_.x-i.from_greenwich,y:_.y,z:_.z||0}),"longlat"===i.projName?_={x:_.x*e.R2D,y:_.y*e.R2D,z:_.z||0}:(_=i.forward(_),i.to_meter&&(_={x:_.x/i.to_meter,y:_.y/i.to_meter,z:_.z||0})),"enu"!==i.axis?(0,r.default)(i,!0,_):_}
},{"./constants/values":"LiBj","./datum_transform":"casK","./adjust_axis":"Trp1","./Proj":"TmNP","./common/toPoint":"Q8bn","./checkSanity":"fxXU"}],"adlr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Proj")),r=n(require("./transform"));function n(e){return e&&e.__esModule?e:{default:e}}var t=(0,e.default)("WGS84");function o(e,n,t){var o,a,u;return Array.isArray(t)?(o=(0,r.default)(e,n,t)||{x:NaN,y:NaN},t.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(t.splice(3)):[o.x,o.y,t[2]].concat(t.splice(3)):[o.x,o.y].concat(t.splice(2)):[o.x,o.y]):(a=(0,r.default)(e,n,t),2===(u=Object.keys(t)).length?a:(u.forEach(function(r){if(void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=t[r]}),a))}function a(r){return r instanceof e.default?r:r.oProj?r.oProj:(0,e.default)(r)}function u(e,r,n){e=a(e);var u,i=!1;return void 0===r?(r=e,e=t,i=!0):(void 0!==r.x||Array.isArray(r))&&(n=r,r=e,e=t,i=!0),r=a(r),n?o(e,r,n):(u={forward:function(n){return o(e,r,n)},inverse:function(n){return o(r,e,n)}},i&&(u.oProj=r),u)}var i=u;exports.default=i;
},{"./Proj":"TmNP","./transform":"n5UB"}],"kAqR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forward=c,exports.inverse=u,exports.toPoint=f,exports.default=void 0;var t=6,e="AJSAJS",r="AFAFAF",a=65,n=73,o=79,i=86,s=90,h={forward:c,inverse:u,toPoint:f};function c(t,e){return e=e||5,d(b({lat:t[1],lon:t[0]}),e)}function u(t){var e=v(A(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function f(t){var e=v(A(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function l(t){return t*(Math.PI/180)}function M(t){return t/Math.PI*180}function b(t){var e,r,a,n,o,i,s=t.lat,h=t.lon,c=6378137,u=l(s),f=l(h);i=Math.floor((h+180)/6)+1,180===h&&(i=60),s>=56&&s<64&&h>=3&&h<12&&(i=32),s>=72&&s<84&&(h>=0&&h<9?i=31:h>=9&&h<21?i=33:h>=21&&h<33?i=35:h>=33&&h<42&&(i=37)),o=l(6*(i-1)-180+3),e=c/Math.sqrt(1-.00669438*Math.sin(u)*Math.sin(u)),r=Math.tan(u)*Math.tan(u),a=.006739496752268451*Math.cos(u)*Math.cos(u);var M=.9996*e*((n=Math.cos(u)*(f-o))+(1-r+a)*n*n*n/6+(5-18*r+r*r+72*a-.39089081163157013)*n*n*n*n*n/120)+5e5,b=.9996*(c*(.9983242984503243*u-.002514607064228144*Math.sin(2*u)+2639046602129982e-21*Math.sin(4*u)-3.418046101696858e-9*Math.sin(6*u))+e*Math.tan(u)*(n*n/2+(5-r+9*a+4*a*a)*n*n*n*n/24+(61-58*r+r*r+600*a-2.2240339282485886)*n*n*n*n*n*n/720));return s<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(M),zoneNumber:i,zoneLetter:g(s)}}function v(t){var e=t.northing,r=t.easting,a=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var o,i,s,h,c,u,f,l,b=6378137,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,k=e;a<"N"&&(k-=1e7),u=6*(n-1)-180+3,l=(f=k/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*f)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*f)+151*g*g*g/96*Math.sin(6*f),o=b/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),i=Math.tan(l)*Math.tan(l),s=.006739496752268451*Math.cos(l)*Math.cos(l),h=.99330562*b/Math.pow(1-.00669438*Math.sin(l)*Math.sin(l),1.5),c=d/(.9996*o);var m=l-o*Math.tan(l)/h*(c*c/2-(5+3*i+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*i+298*s+45*i*i-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);m=M(m);var p,A=(c-(1+2*i+s)*c*c*c/6+(5-2*s+28*i-3*s*s+.05391597401814761+24*i*i)*c*c*c*c*c/120)/Math.cos(l);if(A=u+M(A),t.accuracy){var z=v({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});p={top:z.lat,right:z.lon,bottom:m,left:A}}else p={lat:m,lon:A};return p}function g(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function d(t,e){var r="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+k(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+a.substr(a.length-5,e)}function k(t,e,r){var a=m(r);return p(Math.floor(t/1e5),Math.floor(e/1e5)%20,a)}function m(e){var r=e%t;return 0===r&&(r=t),r}function p(t,h,c){var u=c-1,f=e.charCodeAt(u),l=r.charCodeAt(u),M=f+t-1,b=l+h,v=!1;return M>s&&(M=M-s+a-1,v=!0),(M===n||f<n&&M>n||(M>n||f<n)&&v)&&M++,(M===o||f<o&&M>o||(M>o||f<o)&&v)&&++M===n&&M++,M>s&&(M=M-s+a-1),b>i?(b=b-i+a-1,v=!0):v=!1,(b===n||l<n&&b>n||(b>n||l<n)&&v)&&b++,(b===o||l<o&&b>o||(b>o||l<o)&&v)&&++b===n&&b++,b>i&&(b=b-i+a-1),String.fromCharCode(M)+String.fromCharCode(b)}function A(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,a=null,n="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,o++}var i=parseInt(n,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;a=t.substring(o,o+=2);for(var h=m(i),c=z(a.charAt(0),h),u=w(a.charAt(1),h);u<C(s);)u+=2e6;var f=r-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var l,M,b,v=f/2,g=0,d=0;return v>0&&(l=1e5/Math.pow(10,v),M=t.substring(o,o+v),g=parseFloat(M)*l,b=t.substring(o+v),d=parseFloat(b)*l),{easting:g+c,northing:d+u,zoneLetter:s,zoneNumber:i,accuracy:l}}function z(t,r){for(var i=e.charCodeAt(r-1),h=1e5,c=!1;i!==t.charCodeAt(0);){if(++i===n&&i++,i===o&&i++,i>s){if(c)throw"Bad character: "+t;i=a,c=!0}h+=1e5}return h}function w(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var s=r.charCodeAt(e-1),h=0,c=!1;s!==t.charCodeAt(0);){if(++s===n&&s++,s===o&&s++,s>i){if(c)throw"Bad character: "+t;s=a,c=!0}h+=1e5}return h}function C(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}exports.default=h;
},{}],"wpuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("mgrs");function e(t,i,r){if(!(this instanceof e))return new e(t,i,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===i){var s=t.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=t,this.y=i,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}e.fromMGRS=function(i){return new e((0,t.toPoint)(i))},e.prototype.toMGRS=function(e){return(0,t.forward)([this.x,this.y],e)};var i=e;exports.default=i;
},{"mgrs":"kAqR"}],"L3DR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=1,r=.25,t=.046875,u=.01953125,a=.01068115234375,o=.75,s=.46875,n=.013020833333333334,v=.007120768229166667,c=.3645833333333333,d=.005696614583333333,f=.3076171875;function i(i){var l=[];l[0]=e-i*(r+i*(t+i*(u+i*a))),l[1]=i*(o-i*(t+i*(u+i*a)));var p=i*i;return l[2]=p*(s-i*(n+i*v)),p*=i,l[3]=p*(c-i*d),l[4]=p*i*f,l}
},{}],"SByC":[function(require,module,exports) {
"use strict";function e(e,t,r,u){return r*=t,t*=t,u[0]*e-r*(u[1]+t*(u[2]+t*(u[3]+t*u[4])))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"bfA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./pj_mlfn")),r=require("../constants/values");function t(e){return e&&e.__esModule?e:{default:e}}var a=20;function u(t,u,s){for(var n=1/(1-u),o=t,f=a;f;--f){var i=Math.sin(o),l=1-u*i*i;if(o-=l=((0,e.default)(o,i,Math.cos(o),s)-t)*(l*Math.sqrt(l))*n,Math.abs(l)<r.EPSLN)return o}return o}
},{"./pj_mlfn":"SByC","../constants/values":"LiBj"}],"qgIp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=n,exports.inverse=M,exports.default=exports.names=void 0;var t=o(require("../common/pj_enfn")),s=o(require("../common/pj_mlfn")),a=o(require("../common/pj_inv_mlfn")),h=o(require("../common/adjust_lon")),i=require("../constants/values"),e=o(require("../common/sign"));function o(t){return t&&t.__esModule?t:{default:t}}function r(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,t.default)(this.es),this.ml0=(0,s.default)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function n(t){var a,e,o,r=t.x,n=t.y,M=(0,h.default)(r-this.long0),l=Math.sin(n),u=Math.cos(n);if(this.es){var p=u*M,f=Math.pow(p,2),v=this.ep2*Math.pow(u,2),d=Math.pow(v,2),c=Math.abs(u)>i.EPSLN?Math.tan(n):0,m=Math.pow(c,2),x=Math.pow(m,2);a=1-this.es*Math.pow(l,2),p/=Math.sqrt(a);var w=(0,s.default)(n,l,u,this.en);e=this.a*(this.k0*p*(1+f/6*(1-m+v+f/20*(5-18*m+x+14*v-58*m*v+f/42*(61+179*x-x*m-479*m)))))+this.x0,o=this.a*(this.k0*(w-this.ml0+l*M*p/2*(1+f/12*(5-m+9*v+4*d+f/30*(61+x-58*m+270*v-330*m*v+f/56*(1385+543*x-x*m-3111*m))))))+this.y0}else{var _=u*Math.sin(M);if(Math.abs(Math.abs(_)-1)<i.EPSLN)return 93;if(e=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,o=u*Math.cos(M)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(o))>=1){if(_-1>i.EPSLN)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=e,t.y=o,t}function M(t){var s,o,r,n,M=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(s=this.ml0+l/this.k0,o=(0,a.default)(s,this.es,this.en),Math.abs(o)<i.HALF_PI){var u=Math.sin(o),p=Math.cos(o),f=Math.abs(p)>i.EPSLN?Math.tan(o):0,v=this.ep2*Math.pow(p,2),d=Math.pow(v,2),c=Math.pow(f,2),m=Math.pow(c,2);s=1-this.es*Math.pow(u,2);var x=M*Math.sqrt(s)/this.k0,w=Math.pow(x,2);r=o-(s*=f)*w/(1-this.es)*.5*(1-w/12*(5+3*c-9*v*c+v-4*d-w/30*(61+90*c-252*v*c+45*m+46*v-w/56*(1385+3633*c+4095*m+1574*m*c)))),n=(0,h.default)(this.long0+x*(1-w/6*(1+2*c+v-w/20*(5+28*c+24*m+8*v*c+6*v-w/42*(61+662*c+1320*m+720*m*c))))/p)}else r=i.HALF_PI*(0,e.default)(l),n=0;else{var _=Math.exp(M/this.k0),y=.5*(_-1/_),q=this.lat0+l/this.k0,g=Math.cos(q);s=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(y,2))),r=Math.asin(s),l<0&&(r=-r),n=0===y&&0===g?0:(0,h.default)(Math.atan2(y,g)+this.long0)}return t.x=n,t.y=r,t}var l=["Transverse_Mercator","Transverse Mercator","tmerc"];exports.names=l;var u={init:r,forward:n,inverse:M,names:l};exports.default=u;
},{"../common/pj_enfn":"L3DR","../common/pj_mlfn":"SByC","../common/pj_inv_mlfn":"bfA2","../common/adjust_lon":"c0D1","../constants/values":"LiBj","../common/sign":"Yu1R"}],"zIub":[function(require,module,exports) {
"use strict";function e(e){var t=Math.exp(e);return t=(t-1/t)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"AMFr":[function(require,module,exports) {
"use strict";function t(t,a){t=Math.abs(t),a=Math.abs(a);var e=Math.max(t,a),r=Math.min(t,a)/(e||1);return e*Math.sqrt(1+Math.pow(r,2))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"mNE4":[function(require,module,exports) {
"use strict";function e(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Z0aI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./hypot")),t=r(require("./log1py"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){var u=Math.abs(r);return u=(0,t.default)(u*(1+u/((0,e.default)(1,u)+1))),r<0?-u:u}
},{"./hypot":"AMFr","./log1py":"mNE4"}],"rPdz":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o=2*Math.cos(2*t),s=e.length-1,n=e[s],u=0;--s>=0;)r=o*n-u+e[s],u=n,n=r;return t+r*Math.sin(2*t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"La0z":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o=2*Math.cos(t),s=e.length-1,n=e[s],u=0;--s>=0;)r=o*n-u+e[s],u=n,n=r;return Math.sin(t)*r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aHjm":[function(require,module,exports) {
"use strict";function e(e){var t=Math.exp(e);return t=(t+1/t)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ZVBg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./sinh")),t=r(require("./cosh"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u,n){for(var o,s,a=Math.sin(u),f=Math.cos(u),i=(0,e.default)(n),l=(0,t.default)(n),d=2*f*l,c=-2*a*i,h=r.length-1,M=r[h],_=0,p=0,v=0;--h>=0;)o=p,s=_,M=d*(p=M)-o-c*(_=v)+r[h],v=c*p-s+d*_;return[(d=a*l)*M-(c=f*i)*v,d*v+c*M]}
},{"./sinh":"zIub","./cosh":"aHjm"}],"suR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=o,exports.forward=u,exports.inverse=c,exports.default=exports.names=void 0;var t=n(require("../common/sinh")),s=n(require("../common/hypot")),i=n(require("../common/asinhy")),h=n(require("../common/gatg")),e=n(require("../common/clens")),a=n(require("../common/clens_cmplx")),r=n(require("../common/adjust_lon"));function n(t){return t&&t.__esModule?t:{default:t}}function o(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),s=t/(2-t),i=s;this.cgb[0]=s*(2+s*(-2/3+s*(s*(116/45+s*(26/45+s*(-2854/675)))-2))),this.cbg[0]=s*(s*(2/3+s*(4/3+s*(-82/45+s*(32/45+s*(4642/4725)))))-2),i*=s,this.cgb[1]=i*(7/3+s*(s*(-227/45+s*(2704/315+s*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+s*(-16/15+s*(-13/9+s*(904/315+s*(-1522/945))))),i*=s,this.cgb[2]=i*(56/15+s*(-136/35+s*(-1262/105+s*(73814/2835)))),this.cbg[2]=i*(-26/15+s*(34/21+s*(1.6+s*(-12686/2835)))),i*=s,this.cgb[3]=i*(4279/630+s*(-332/35+s*(-399572/14175))),this.cbg[3]=i*(1237/630+s*(s*(-24832/14175)-2.4)),i*=s,this.cgb[4]=i*(4174/315+s*(-144838/6237)),this.cbg[4]=i*(-734/315+s*(109598/31185)),i*=s,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(s,2),this.Qn=this.k0/(1+s)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=s*(s*(2/3+s*(-37/96+s*(1/360+s*(81/512+s*(-96199/604800)))))-.5),this.gtu[0]=s*(.5+s*(-2/3+s*(5/16+s*(41/180+s*(-127/288+s*(7891/37800)))))),this.utg[1]=i*(-1/48+s*(-1/15+s*(437/1440+s*(-46/105+s*(1118711/3870720))))),this.gtu[1]=i*(13/48+s*(s*(557/1440+s*(281/630+s*(-1983433/1935360)))-.6)),i*=s,this.utg[2]=i*(-17/480+s*(37/840+s*(209/4480+s*(-5569/90720)))),this.gtu[2]=i*(61/240+s*(-103/140+s*(15061/26880+s*(167603/181440)))),i*=s,this.utg[3]=i*(-4397/161280+s*(11/504+s*(830251/7257600))),this.gtu[3]=i*(49561/161280+s*(-179/168+s*(6601661/7257600))),i*=s,this.utg[4]=i*(-4583/161280+s*(108847/3991680)),this.gtu[4]=i*(34729/80640+s*(-3418889/1995840)),i*=s,this.utg[5]=-.03233083094085698*i,this.gtu[5]=.6650675310896665*i;var a=(0,h.default)(this.cbg,this.lat0);this.Zb=-this.Qn*(a+(0,e.default)(this.gtu,2*a))}function u(t){var e=(0,r.default)(t.x-this.long0),n=t.y;n=(0,h.default)(this.cbg,n);var o=Math.sin(n),u=Math.cos(n),c=Math.sin(e),g=Math.cos(e);n=Math.atan2(o,g*u),e=Math.atan2(c*u,(0,s.default)(o,u*g)),e=(0,i.default)(Math.tan(e));var l,d,f=(0,a.default)(this.gtu,2*n,2*e);return n+=f[0],e+=f[1],Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,d=1/0),t.x=l,t.y=d,t}function c(i){var e,n,o=(i.x-this.x0)*(1/this.a),u=(i.y-this.y0)*(1/this.a);if(u=(u-this.Zb)/this.Qn,o/=this.Qn,Math.abs(o)<=2.623395162778){var c=(0,a.default)(this.utg,2*u,2*o);u+=c[0],o+=c[1],o=Math.atan((0,t.default)(o));var g=Math.sin(u),l=Math.cos(u),d=Math.sin(o),f=Math.cos(o);u=Math.atan2(g*f,(0,s.default)(d,f*l)),o=Math.atan2(d,f*l),e=(0,r.default)(o+this.long0),n=(0,h.default)(this.cgb,u)}else e=1/0,n=1/0;return i.x=e,i.y=n,i}var g=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"];exports.names=g;var l={init:o,forward:u,inverse:c,names:g};exports.default=l;
},{"../common/sinh":"zIub","../common/hypot":"AMFr","../common/asinhy":"Z0aI","../common/gatg":"rPdz","../common/clens":"La0z","../common/clens_cmplx":"ZVBg","../common/adjust_lon":"c0D1"}],"qFlE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./adjust_lon"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if(void 0===t){if((t=Math.floor(30*((0,e.default)(r)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}
},{"./adjust_lon":"c0D1"}],"F3qh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=i,exports.default=exports.names=exports.dependsOn=void 0;var e=s(require("../common/adjust_zone")),t=s(require("./etmerc")),r=require("../constants/values");function s(e){return e&&e.__esModule?e:{default:e}}var n="etmerc";function i(){var s=(0,e.default)(this.zone,this.long0);if(void 0===s)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(s)-183)*r.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,t.default.init.apply(this),this.forward=t.default.forward,this.inverse=t.default.inverse}exports.dependsOn=n;var o=["Universal Transverse Mercator System","utm"];exports.names=o;var a={init:i,names:o,dependsOn:n};exports.default=a;
},{"../common/adjust_zone":"qFlE","./etmerc":"suR5","../constants/values":"LiBj"}],"DL1G":[function(require,module,exports) {
"use strict";function e(e,t){return Math.pow((1-e)/(1+e),t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Vek0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=i,exports.forward=h,exports.inverse=r,exports.default=exports.names=void 0;var t=a(require("../common/srat")),s=require("../constants/values");function a(t){return t&&t.__esModule?t:{default:t}}var e=20;function i(){var a=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+s.FORTPI),this.C)*(0,t.default)(this.e*a,this.ratexp))}function h(a){var e=a.x,i=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+s.FORTPI),this.C)*(0,t.default)(this.e*Math.sin(i),this.ratexp))-s.HALF_PI,a.x=this.C*e,a}function r(a){for(var i=a.x/this.C,h=a.y,r=Math.pow(Math.tan(.5*h+s.FORTPI)/this.K,1/this.C),n=e;n>0&&(h=2*Math.atan(r*(0,t.default)(this.e*Math.sin(a.y),-.5*this.e))-s.HALF_PI,!(Math.abs(h-a.y)<1e-14));--n)a.y=h;return n?(a.x=i,a.y=h,a):null}var n=["gauss"];exports.names=n;var o={init:i,forward:h,inverse:r,names:n};exports.default=o;
},{"../common/srat":"DL1G","../constants/values":"LiBj"}],"BtEk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=h,exports.inverse=a,exports.default=exports.names=void 0;var t=s(require("./gauss")),i=s(require("../common/adjust_lon"));function s(t){return t&&t.__esModule?t:{default:t}}function e(){t.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function h(s){var e,h,a,r;return s.x=(0,i.default)(s.x-this.long0),t.default.forward.apply(this,[s]),e=Math.sin(s.y),h=Math.cos(s.y),a=Math.cos(s.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*h*a),s.x=r*h*Math.sin(s.x),s.y=r*(this.cosc0*e-this.sinc0*h*a),s.x=this.a*s.x+this.x0,s.y=this.a*s.y+this.y0,s}function a(s){var e,h,a,r,o;if(s.x=(s.x-this.x0)/this.a,s.y=(s.y-this.y0)/this.a,s.x/=this.k0,s.y/=this.k0,o=Math.sqrt(s.x*s.x+s.y*s.y)){var n=2*Math.atan2(o,this.R2);e=Math.sin(n),h=Math.cos(n),r=Math.asin(h*this.sinc0+s.y*e*this.cosc0/o),a=Math.atan2(s.x*e,o*this.cosc0*h-s.y*this.sinc0*e)}else r=this.phic0,a=0;return s.x=a,s.y=r,t.default.inverse.apply(this,[s]),s.x=(0,i.default)(s.x+this.long0),s}var r=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];exports.names=r;var o={init:e,forward:h,inverse:a,names:r};exports.default=o;
},{"./gauss":"Vek0","../common/adjust_lon":"c0D1"}],"nkLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ssfn_=e,exports.init=l,exports.forward=c,exports.inverse=M,exports.default=exports.names=void 0;var t=require("../constants/values"),s=o(require("../common/sign")),h=o(require("../common/msfnz")),i=o(require("../common/tsfnz")),a=o(require("../common/phi2z")),n=o(require("../common/adjust_lon"));function o(t){return t&&t.__esModule?t:{default:t}}function e(s,h,i){return h*=i,Math.tan(.5*(t.HALF_PI+s))*Math.pow((1-h)/(1+h),.5*i)}function l(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=t.EPSLN&&(this.k0=.5*(1+(0,s.default)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=t.EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=t.EPSLN&&(this.k0=.5*this.cons*(0,h.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,i.default)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,h.default)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-t.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function c(s){var h,a,o,e,l,c,M=s.x,r=s.y,u=Math.sin(r),f=Math.cos(r),x=(0,n.default)(M-this.long0);return Math.abs(Math.abs(M-this.long0)-Math.PI)<=t.EPSLN&&Math.abs(r+this.lat0)<=t.EPSLN?(s.x=NaN,s.y=NaN,s):this.sphere?(h=2*this.k0/(1+this.sinlat0*u+this.coslat0*f*Math.cos(x)),s.x=this.a*h*f*Math.sin(x)+this.x0,s.y=this.a*h*(this.coslat0*u-this.sinlat0*f*Math.cos(x))+this.y0,s):(a=2*Math.atan(this.ssfn_(r,u,this.e))-t.HALF_PI,e=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=t.EPSLN?(l=(0,i.default)(this.e,r*this.con,this.con*u),c=2*this.a*this.k0*l/this.cons,s.x=this.x0+c*Math.sin(M-this.long0),s.y=this.y0-this.con*c*Math.cos(M-this.long0),s):(Math.abs(this.sinlat0)<t.EPSLN?(h=2*this.a*this.k0/(1+e*Math.cos(x)),s.y=h*o):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*e*Math.cos(x))),s.y=h*(this.cosX0*o-this.sinX0*e*Math.cos(x))+this.y0),s.x=h*e*Math.sin(x)+this.x0,s))}function M(s){var h,i,o,e,l;s.x-=this.x0,s.y-=this.y0;var c=Math.sqrt(s.x*s.x+s.y*s.y);if(this.sphere){var M=2*Math.atan(c/(2*this.a*this.k0));return h=this.long0,i=this.lat0,c<=t.EPSLN?(s.x=h,s.y=i,s):(i=Math.asin(Math.cos(M)*this.sinlat0+s.y*Math.sin(M)*this.coslat0/c),h=Math.abs(this.coslat0)<t.EPSLN?this.lat0>0?(0,n.default)(this.long0+Math.atan2(s.x,-1*s.y)):(0,n.default)(this.long0+Math.atan2(s.x,s.y)):(0,n.default)(this.long0+Math.atan2(s.x*Math.sin(M),c*this.coslat0*Math.cos(M)-s.y*this.sinlat0*Math.sin(M))),s.x=h,s.y=i,s)}if(Math.abs(this.coslat0)<=t.EPSLN){if(c<=t.EPSLN)return i=this.lat0,h=this.long0,s.x=h,s.y=i,s;s.x*=this.con,s.y*=this.con,o=c*this.cons/(2*this.a*this.k0),i=this.con*(0,a.default)(this.e,o),h=this.con*(0,n.default)(this.con*this.long0+Math.atan2(s.x,-1*s.y))}else e=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),h=this.long0,c<=t.EPSLN?l=this.X0:(l=Math.asin(Math.cos(e)*this.sinX0+s.y*Math.sin(e)*this.cosX0/c),h=(0,n.default)(this.long0+Math.atan2(s.x*Math.sin(e),c*this.cosX0*Math.cos(e)-s.y*this.sinX0*Math.sin(e)))),i=-1*(0,a.default)(this.e,Math.tan(.5*(t.HALF_PI+l)));return s.x=h,s.y=i,s}var r=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];exports.names=r;var u={init:l,forward:c,inverse:M,names:r,ssfn_:e};exports.default=u;
},{"../constants/values":"LiBj","../common/sign":"Yu1R","../common/msfnz":"AEhT","../common/tsfnz":"dGKf","../common/phi2z":"KCUm","../common/adjust_lon":"c0D1"}],"XMD3":[function(require,module,exports) {
"use strict";function t(){var t=this.lat0;this.lambda0=this.long0;var a=Math.sin(t),h=this.a,s=1/this.rf,i=2*s-Math.pow(s,2),M=this.e=Math.sqrt(i);this.R=this.k0*h*Math.sqrt(1-i)/(1-i*Math.pow(a,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(a/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),e=Math.log((1+M*a)/(1-M*a));this.K=n-this.alpha*o+this.alpha*M/2*e}function a(t){var a=Math.log(Math.tan(Math.PI/4-t.y/2)),h=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(a+h)+this.K,i=2*(Math.atan(Math.exp(s))-Math.PI/4),M=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(M)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(M))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(M));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*n+this.x0,t}function h(t){for(var a=t.x-this.x0,h=t.y-this.y0,s=a/this.R,i=2*(Math.atan(Math.exp(h/this.R))-Math.PI/4),M=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(s)),n=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+n/this.alpha,e=0,r=M,l=-1e3,p=0;Math.abs(r-l)>1e-7;){if(++p>20)return;e=1/this.alpha*(Math.log(Math.tan(Math.PI/4+M/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(r))/2)),l=r,r=2*Math.atan(Math.exp(e))-Math.PI/2}return t.x=o,t.y=r,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=t,exports.forward=a,exports.inverse=h,exports.default=exports.names=void 0;var s=["somerc"];exports.names=s;var i={init:t,forward:a,inverse:h,names:s};exports.default=i;
},{}],"O3Wr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=e,exports.inverse=o,exports.default=exports.names=void 0;var t=i(require("../common/tsfnz")),h=i(require("../common/adjust_lon")),s=i(require("../common/phi2z")),a=require("../constants/values");function i(t){return t&&t.__esModule?t:{default:t}}function l(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var s=Math.sin(this.lat0),a=Math.cos(this.lat0),i=this.e*s;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(a,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var l,e,o=(0,t.default)(this.e,this.lat0,s),n=this.bl/a*Math.sqrt((1-this.es)/(1-i*i));if(n*n<1&&(n=1),isNaN(this.longc)){var M=(0,t.default)(this.e,this.lat1,Math.sin(this.lat1)),r=(0,t.default)(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(o,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(o,this.bl);var u=Math.pow(M,this.bl),b=Math.pow(r,this.bl);e=.5*((l=this.el/u)-1/l);var m=(this.el*this.el-b*u)/(this.el*this.el+b*u),c=(b-u)/(b+u),g=(0,h.default)(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(m*Math.tan(.5*this.bl*g)/c)/this.bl,this.long0=(0,h.default)(this.long0);var p=(0,h.default)(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/e),this.alpha=Math.asin(n*Math.sin(this.gamma0))}else l=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=l*Math.pow(o,this.bl),e=.5*(l-1/l),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(e*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}function e(s){var i,l,e,o=s.x,n=s.y,M=(0,h.default)(o-this.long0);if(Math.abs(Math.abs(n)-a.HALF_PI)<=a.EPSLN)e=n>0?-1:1,l=this.al/this.bl*Math.log(Math.tan(a.FORTPI+e*this.gamma0*.5)),i=-1*e*a.HALF_PI*this.al/this.bl;else{var r=(0,t.default)(this.e,n,Math.sin(n)),u=this.el/Math.pow(r,this.bl),b=.5*(u-1/u),m=.5*(u+1/u),c=Math.sin(this.bl*M),g=(b*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/m;l=Math.abs(Math.abs(g)-1)<=a.EPSLN?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,i=Math.abs(Math.cos(this.bl*M))<=a.EPSLN?this.al*this.bl*M:this.al*Math.atan2(b*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*M))/this.bl}return this.no_rot?(s.x=this.x0+i,s.y=this.y0+l):(i-=this.uc,s.x=this.x0+l*Math.cos(this.alpha)+i*Math.sin(this.alpha),s.y=this.y0+i*Math.cos(this.alpha)-l*Math.sin(this.alpha)),s}function o(t){var i,l;this.no_rot?(l=t.y-this.y0,i=t.x-this.x0):(l=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),i=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),i+=this.uc);var e=Math.exp(-1*this.bl*l/this.al),o=.5*(e-1/e),n=.5*(e+1/e),M=Math.sin(this.bl*i/this.al),r=(M*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/n,u=Math.pow(this.el/Math.sqrt((1+r)/(1-r)),1/this.bl);return Math.abs(r-1)<a.EPSLN?(t.x=this.long0,t.y=a.HALF_PI):Math.abs(r+1)<a.EPSLN?(t.x=this.long0,t.y=-1*a.HALF_PI):(t.y=(0,s.default)(this.e,u),t.x=(0,h.default)(this.long0-Math.atan2(o*Math.cos(this.gamma0)-M*Math.sin(this.gamma0),Math.cos(this.bl*i/this.al))/this.bl)),t}var n=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"];exports.names=n;var M={init:l,forward:e,inverse:o,names:n};exports.default=M;
},{"../common/tsfnz":"dGKf","../common/adjust_lon":"c0D1","../common/phi2z":"KCUm","../constants/values":"LiBj"}],"NMWS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=o,exports.inverse=l,exports.default=exports.names=void 0;var t=n(require("../common/msfnz")),s=n(require("../common/tsfnz")),i=n(require("../common/sign")),h=n(require("../common/adjust_lon")),a=n(require("../common/phi2z")),e=require("../constants/values");function n(t){return t&&t.__esModule?t:{default:t}}function r(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<e.EPSLN)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var h=Math.sin(this.lat1),a=Math.cos(this.lat1),n=(0,t.default)(this.e,h,a),r=(0,s.default)(this.e,this.lat1,h),o=Math.sin(this.lat2),l=Math.cos(this.lat2),u=(0,t.default)(this.e,o,l),f=(0,s.default)(this.e,this.lat2,o),M=(0,s.default)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>e.EPSLN?this.ns=Math.log(n/u)/Math.log(r/f):this.ns=h,isNaN(this.ns)&&(this.ns=h),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(M,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function o(t){var a=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=e.EPSLN&&(n=(0,i.default)(n)*(e.HALF_PI-2*e.EPSLN));var r,o,l=Math.abs(Math.abs(n)-e.HALF_PI);if(l>e.EPSLN)r=(0,s.default)(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(r,this.ns);else{if((l=n*this.ns)<=0)return null;o=0}var u=this.ns*(0,h.default)(a-this.long0);return t.x=this.k0*(o*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(u))+this.y0,t}function l(t){var s,i,n,r,o,l=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(s=Math.sqrt(l*l+u*u),i=1):(s=-Math.sqrt(l*l+u*u),i=-1);var f=0;if(0!==s&&(f=Math.atan2(i*l,i*u)),0!==s||this.ns>0){if(i=1/this.ns,n=Math.pow(s/(this.a*this.f0),i),-9999===(r=(0,a.default)(this.e,n)))return null}else r=-e.HALF_PI;return o=(0,h.default)(f/this.ns+this.long0),t.x=o,t.y=r,t}var u=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"];exports.names=u;var f={init:r,forward:o,inverse:l,names:u};exports.default=f;
},{"../common/msfnz":"AEhT","../common/tsfnz":"dGKf","../common/sign":"Yu1R","../common/adjust_lon":"c0D1","../common/phi2z":"KCUm","../constants/values":"LiBj"}],"JY2o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=i,exports.inverse=a,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon"));function s(t){return t&&t.__esModule?t:{default:t}}function h(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function i(s){var h,i,a,n,M,e,o,r=s.x,f=s.y,l=(0,t.default)(r-this.long0);return h=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/h)-this.s45),a=-l*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),M=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(n)),e=this.n*M,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),s.y=o*Math.cos(e)/1,s.x=o*Math.sin(e)/1,this.czech||(s.y*=-1,s.x*=-1),s}function a(t){var s,h,i,a,n,M,e,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),n=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/n,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),h=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(s)),t.x=this.long0-h/this.alfa,M=s,e=0;var r=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(M))/(1-this.e*Math.sin(M)),this.e/2))-this.s45),Math.abs(M-t.y)<1e-10&&(e=1),M=t.y,r+=1}while(0===e&&r<15);return r>=15?null:t}var n=["Krovak","krovak"];exports.names=n;var M={init:h,forward:i,inverse:a,names:n};exports.default=M;
},{"../common/adjust_lon":"c0D1"}],"SVmX":[function(require,module,exports) {
"use strict";function e(e,t,s,n,r){return e*r-t*Math.sin(2*r)+s*Math.sin(4*r)-n*Math.sin(6*r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"GM9p":[function(require,module,exports) {
"use strict";function e(e){return 1-.25*e*(1+e/16*(3+1.25*e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tw5q":[function(require,module,exports) {
"use strict";function e(e){return.375*e*(1+.25*e*(1+.46875*e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"DKVF":[function(require,module,exports) {
"use strict";function e(e){return.05859375*e*e*(1+.75*e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"XZDP":[function(require,module,exports) {
"use strict";function e(e){return e*e*e*(35/3072)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"M8OB":[function(require,module,exports) {
"use strict";function e(e,t,r){var s=t*r;return e/Math.sqrt(1-s*s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"v1Oe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../constants/values"),t=r(require("./sign"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return Math.abs(r)<e.HALF_PI?r:r-(0,t.default)(r)*Math.PI}
},{"../constants/values":"LiBj","./sign":"Yu1R"}],"GBx2":[function(require,module,exports) {
"use strict";function t(t,e,a,r,s){var o,n;o=t/e;for(var M=0;M<15;M++)if(o+=n=(t-(e*o-a*Math.sin(2*o)+r*Math.sin(4*o)-s*Math.sin(6*o)))/(e-2*a*Math.cos(2*o)+4*r*Math.cos(4*o)-6*s*Math.cos(6*o)),Math.abs(n)<=1e-10)return o;return NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"hdfx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=f,exports.forward=m,exports.inverse=M,exports.default=exports.names=void 0;var t=l(require("../common/mlfn")),s=l(require("../common/e0fn")),e=l(require("../common/e1fn")),a=l(require("../common/e2fn")),i=l(require("../common/e3fn")),h=l(require("../common/gN")),n=l(require("../common/adjust_lon")),r=l(require("../common/adjust_lat")),o=l(require("../common/imlfn")),u=require("../constants/values");function l(t){return t&&t.__esModule?t:{default:t}}function f(){this.sphere||(this.e0=(0,s.default)(this.es),this.e1=(0,e.default)(this.es),this.e2=(0,a.default)(this.es),this.e3=(0,i.default)(this.es),this.ml0=this.a*(0,t.default)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function m(s){var e,a,i=s.x,r=s.y;if(i=(0,n.default)(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),a=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),u=Math.cos(r),l=(0,h.default)(this.a,this.e,o),f=Math.tan(r)*Math.tan(r),m=i*Math.cos(r),M=m*m,c=this.es*u*u/(1-this.es);e=l*m*(1-M*f*(1/6-(8-f+8*c)*M/120)),a=this.a*(0,t.default)(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+l*o/u*M*(.5+(5-f+6*c)*M/24)}return s.x=e+this.x0,s.y=a+this.y0,s}function M(t){t.x-=this.x0,t.y-=this.y0;var s,e,a=t.x/this.a,i=t.y/this.a;if(this.sphere){var l=i+this.lat0;s=Math.asin(Math.sin(l)*Math.cos(a)),e=Math.atan2(Math.tan(a),Math.cos(l))}else{var f=this.ml0/this.a+i,m=(0,o.default)(f,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(m)-u.HALF_PI)<=u.EPSLN)return t.x=this.long0,t.y=u.HALF_PI,i<0&&(t.y*=-1),t;var M=(0,h.default)(this.a,this.e,Math.sin(m)),c=M*M*M/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(m),2),x=a*this.a/M,v=x*x;s=m-M*Math.tan(m)/c*x*x*(.5-(1+3*d)*x*x/24),e=x*(1-v*(d/3+(1+3*d)*d*v/15))/Math.cos(m)}return t.x=(0,n.default)(e+this.long0),t.y=(0,r.default)(s),t}var c=["Cassini","Cassini_Soldner","cass"];exports.names=c;var d={init:f,forward:m,inverse:M,names:c};exports.default=d;
},{"../common/mlfn":"SVmX","../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/gN":"M8OB","../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/imlfn":"GBx2","../constants/values":"LiBj"}],"Os8Z":[function(require,module,exports) {
"use strict";function e(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tT4j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=n,exports.forward=d,exports.inverse=L,exports.default=exports.names=exports.OBLIQ=exports.EQUIT=exports.N_POLE=exports.S_POLE=void 0;var s=require("../constants/values"),t=h(require("../common/qsfnz")),i=h(require("../common/adjust_lon"));function h(s){return s&&s.__esModule?s:{default:s}}var a=1;exports.S_POLE=a;var e=2;exports.N_POLE=e;var r=3;exports.EQUIT=r;var o=4;function n(){var i,h=Math.abs(this.lat0);if(Math.abs(h-s.HALF_PI)<s.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(h)<s.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,t.default)(this.e,1),this.mmf=.5/(1-this.es),this.apa=p(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=(0,t.default)(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function d(h){var a,e,r,o,n,d,L,m,c,E,M=h.x,l=h.y;if(M=(0,i.default)(M-this.long0),this.sphere){if(n=Math.sin(l),E=Math.cos(l),r=Math.cos(M),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((e=this.mode===this.EQUIT?1+E*r:1+this.sinph0*n+this.cosph0*E*r)<=s.EPSLN)return null;a=(e=Math.sqrt(2/e))*E*Math.sin(M),e*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*E*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(l+this.lat0)<s.EPSLN)return null;e=s.FORTPI-.5*l,a=(e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)))*Math.sin(M),e*=r}}else{switch(L=0,m=0,c=0,r=Math.cos(M),o=Math.sin(M),n=Math.sin(l),d=(0,t.default)(this.e,n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(L=d/this.qp,m=Math.sqrt(1-L*L)),this.mode){case this.OBLIQ:c=1+this.sinb1*L+this.cosb1*m*r;break;case this.EQUIT:c=1+m*r;break;case this.N_POLE:c=s.HALF_PI+l,d=this.qp-d;break;case this.S_POLE:c=l-s.HALF_PI,d=this.qp+d}if(Math.abs(c)<s.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),e=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*L-this.sinb1*m*r):(c=Math.sqrt(2/(1+m*r)))*L*this.ymf,a=this.xmf*c*m*o;break;case this.N_POLE:case this.S_POLE:d>=0?(a=(c=Math.sqrt(d))*o,e=r*(this.mode===this.S_POLE?c:-c)):a=e=0}}return h.x=this.a*a+this.x0,h.y=this.a*e+this.y0,h}function L(t){t.x-=this.x0,t.y-=this.y0;var h,a,e,r,o,n,d,L=t.x/this.a,m=t.y/this.a;if(this.sphere){var c,E=0,M=0;if((a=.5*(c=Math.sqrt(L*L+m*m)))>1)return null;switch(a=2*Math.asin(a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(M=Math.sin(a),E=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(c)<=s.EPSLN?0:Math.asin(m*M/c),L*=M,m=E*c;break;case this.OBLIQ:a=Math.abs(c)<=s.EPSLN?this.lat0:Math.asin(E*this.sinph0+m*M*this.cosph0/c),L*=M*this.cosph0,m=(E-Math.sin(a)*this.sinph0)*c;break;case this.N_POLE:m=-m,a=s.HALF_PI-a;break;case this.S_POLE:a-=s.HALF_PI}h=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(L,m):0}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(L/=this.dd,m*=this.dd,(n=Math.sqrt(L*L+m*m))<s.EPSLN)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*n/this.rq),e=Math.cos(r),L*=r=Math.sin(r),this.mode===this.OBLIQ?(d=e*this.sinb1+m*r*this.cosb1/n,o=this.qp*d,m=n*this.cosb1*e-m*this.sinb1*r):(d=m*r/n,o=this.qp*d,m=n*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),!(o=L*L+m*m))return t.x=this.long0,t.y=this.lat0,t;d=1-o/this.qp,this.mode===this.S_POLE&&(d=-d)}h=Math.atan2(L,m),a=u(Math.asin(d),this.apa)}return t.x=(0,i.default)(this.long0+h),t.y=a,t}exports.OBLIQ=o;var m=.3333333333333333,c=.17222222222222222,E=.10257936507936508,M=.06388888888888888,l=.0664021164021164,O=.016415012942191543;function p(s){var t,i=[];return i[0]=s*m,t=s*s,i[0]+=t*c,i[1]=t*M,t*=s,i[0]+=t*E,i[1]+=t*l,i[2]=t*O,i}function u(s,t){var i=s+s;return s+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var f=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];exports.names=f;var P={init:n,forward:d,inverse:L,names:f,S_POLE:a,N_POLE:e,EQUIT:r,OBLIQ:o};exports.default=P;
},{"../constants/values":"LiBj","../common/qsfnz":"Os8Z","../common/adjust_lon":"c0D1"}],"r3wc":[function(require,module,exports) {
"use strict";function e(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"BQzq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=o,exports.inverse=r,exports.phi1z=p,exports.default=exports.names=void 0;var s=n(require("../common/msfnz")),t=n(require("../common/qsfnz")),i=n(require("../common/adjust_lon")),h=n(require("../common/asinz")),a=require("../constants/values");function n(s){return s&&s.__esModule?s:{default:s}}function e(){Math.abs(this.lat1+this.lat2)<a.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,s.default)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,t.default)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,s.default)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,t.default)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,t.default)(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>a.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function o(s){var h=s.x,a=s.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var n=(0,t.default)(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*(0,i.default)(h-this.long0),r=e*Math.sin(o)+this.x0,p=this.rh-e*Math.cos(o)+this.y0;return s.x=r,s.y=p,s}function r(s){var t,h,a,n,e,o;return s.x-=this.x0,s.y=this.rh-s.y+this.y0,this.ns0>=0?(t=Math.sqrt(s.x*s.x+s.y*s.y),a=1):(t=-Math.sqrt(s.x*s.x+s.y*s.y),a=-1),n=0,0!==t&&(n=Math.atan2(a*s.x,a*s.y)),a=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(h=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,h)),e=(0,i.default)(n/this.ns0+this.long0),s.x=e,s.y=o,s}function p(s,t){var i,n,e,o,r=(0,h.default)(.5*t);if(s<a.EPSLN)return r;for(var p=s*s,c=1;c<=25;c++)if(r+=o=.5*(e=1-(n=s*(i=Math.sin(r)))*n)*e/Math.cos(r)*(t/(1-p)-i/e+.5/s*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return r;return null}var c=["Albers_Conic_Equal_Area","Albers","aea"];exports.names=c;var u={init:e,forward:o,inverse:r,names:c,phi1z:p};exports.default=u;
},{"../common/msfnz":"AEhT","../common/qsfnz":"Os8Z","../common/adjust_lon":"c0D1","../common/asinz":"r3wc","../constants/values":"LiBj"}],"hgIf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=n,exports.forward=a,exports.inverse=e,exports.default=exports.names=void 0;var t=h(require("../common/adjust_lon")),s=h(require("../common/asinz")),i=require("../constants/values");function h(t){return t&&t.__esModule?t:{default:t}}function n(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function a(s){var h,n,a,e,o,r,c,p=s.x,u=s.y;return a=(0,t.default)(p-this.long0),h=Math.sin(u),n=Math.cos(u),e=Math.cos(a),1,(o=this.sin_p14*h+this.cos_p14*n*e)>0||Math.abs(o)<=i.EPSLN?(r=this.x0+1*this.a*n*Math.sin(a)/o,c=this.y0+1*this.a*(this.cos_p14*h-this.sin_p14*n*e)/o):(r=this.x0+this.infinity_dist*n*Math.sin(a),c=this.y0+this.infinity_dist*(this.cos_p14*h-this.sin_p14*n*e)),s.x=r,s.y=c,s}function e(i){var h,n,a,e,o,r;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(h=Math.sqrt(i.x*i.x+i.y*i.y))?(e=Math.atan2(h,this.rc),n=Math.sin(e),a=Math.cos(e),r=(0,s.default)(a*this.sin_p14+i.y*n*this.cos_p14/h),o=Math.atan2(i.x*n,h*this.cos_p14*a-i.y*this.sin_p14*n),o=(0,t.default)(this.long0+o)):(r=this.phic0,o=0),i.x=o,i.y=r,i}var o=["gnom"];exports.names=o;var r={init:n,forward:a,inverse:e,names:o};exports.default=r;
},{"../common/adjust_lon":"c0D1","../common/asinz":"r3wc","../constants/values":"LiBj"}],"stIj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("../constants/values");function a(a,e){var r=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*t.HALF_PI:t.HALF_PI;for(var s,o,n,u,M=Math.asin(.5*e),h=0;h<30;h++)if(o=Math.sin(M),n=Math.cos(M),u=a*o,M+=s=Math.pow(1-u*u,2)/(2*n)*(e/(1-a*a)-o/(1-u*u)+.5/a*Math.log((1-u)/(1+u))),Math.abs(s)<=1e-10)return M;return NaN}
},{"../constants/values":"LiBj"}],"qHgu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=r,exports.inverse=o,exports.default=exports.names=void 0;var t=a(require("../common/adjust_lon")),s=a(require("../common/qsfnz")),e=a(require("../common/msfnz")),i=a(require("../common/iqsfnz"));function a(t){return t&&t.__esModule?t:{default:t}}function h(){this.sphere||(this.k0=(0,e.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function r(e){var i,a,h=e.x,r=e.y,o=(0,t.default)(h-this.long0);if(this.sphere)i=this.x0+this.a*o*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var n=(0,s.default)(this.e,Math.sin(r));i=this.x0+this.a*this.k0*o,a=this.y0+this.a*n*.5/this.k0}return e.x=i,e.y=a,e}function o(s){var e,a;return s.x-=this.x0,s.y-=this.y0,this.sphere?(e=(0,t.default)(this.long0+s.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(s.y/this.a*Math.cos(this.lat_ts))):(a=(0,i.default)(this.e,2*s.y*this.k0/this.a),e=(0,t.default)(this.long0+s.x/(this.a*this.k0))),s.x=e,s.y=a,s}var n=["cea"];exports.names=n;var u={init:h,forward:r,inverse:o,names:n};exports.default=u;
},{"../common/adjust_lon":"c0D1","../common/qsfnz":"Os8Z","../common/msfnz":"AEhT","../common/iqsfnz":"stIj"}],"C2W8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=a,exports.inverse=r,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon")),i=s(require("../common/adjust_lat"));function s(t){return t&&t.__esModule?t:{default:t}}function e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function a(s){var e=s.x,a=s.y,r=(0,t.default)(e-this.long0),l=(0,i.default)(a-this.lat0);return s.x=this.x0+this.a*r*this.rc,s.y=this.y0+this.a*l,s}function r(s){var e=s.x,a=s.y;return s.x=(0,t.default)(this.long0+(e-this.x0)/(this.a*this.rc)),s.y=(0,i.default)(this.lat0+(a-this.y0)/this.a),s}var l=["Equirectangular","Equidistant_Cylindrical","eqc"];exports.names=l;var n={init:e,forward:a,inverse:r,names:l};exports.default=n;
},{"../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe"}],"GnT9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=f,exports.forward=M,exports.inverse=m,exports.default=exports.names=void 0;var t=l(require("../common/e0fn")),s=l(require("../common/e1fn")),i=l(require("../common/e2fn")),e=l(require("../common/e3fn")),a=l(require("../common/adjust_lon")),h=l(require("../common/adjust_lat")),n=l(require("../common/mlfn")),r=require("../constants/values"),o=l(require("../common/gN"));function l(t){return t&&t.__esModule?t:{default:t}}var u=20;function f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,t.default)(this.es),this.e1=(0,s.default)(this.es),this.e2=(0,i.default)(this.es),this.e3=(0,e.default)(this.es),this.ml0=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function M(t){var s,i,e,l=t.x,u=t.y,f=(0,a.default)(l-this.long0);if(e=f*Math.sin(u),this.sphere)Math.abs(u)<=r.EPSLN?(s=this.a*f,i=-1*this.a*this.lat0):(s=this.a*Math.sin(e)/Math.tan(u),i=this.a*((0,h.default)(u-this.lat0)+(1-Math.cos(e))/Math.tan(u)));else if(Math.abs(u)<=r.EPSLN)s=this.a*f,i=-1*this.ml0;else{var M=(0,o.default)(this.a,this.e,Math.sin(u))/Math.tan(u);s=M*Math.sin(e),i=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,u)-this.ml0+M*(1-Math.cos(e))}return t.x=s+this.x0,t.y=i+this.y0,t}function m(t){var s,i,e,h,o,l,f,M,m;if(e=t.x-this.x0,h=t.y-this.y0,this.sphere)if(Math.abs(h+this.a*this.lat0)<=r.EPSLN)s=(0,a.default)(e/this.a+this.long0),i=0;else{var d;for(l=this.lat0+h/this.a,f=e*e/this.a/this.a+l*l,M=l,o=u;o;--o)if(M+=m=-1*(l*(M*(d=Math.tan(M))+1)-M-.5*(M*M+f)*d)/((M-l)/d-1),Math.abs(m)<=r.EPSLN){i=M;break}s=(0,a.default)(this.long0+Math.asin(e*Math.tan(M)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=r.EPSLN)i=0,s=(0,a.default)(this.long0+e/this.a);else{var c,p,v,x,q;for(l=(this.ml0+h)/this.a,f=e*e/this.a/this.a+l*l,M=l,o=u;o;--o)if(q=this.e*Math.sin(M),c=Math.sqrt(1-q*q)*Math.tan(M),p=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,M),v=this.e0-2*this.e1*Math.cos(2*M)+4*this.e2*Math.cos(4*M)-6*this.e3*Math.cos(6*M),M-=m=(l*(c*(x=p/this.a)+1)-x-.5*c*(x*x+f))/(this.es*Math.sin(2*M)*(x*x+f-2*l*x)/(4*c)+(l-x)*(c*v-2/Math.sin(2*M))-v),Math.abs(m)<=r.EPSLN){i=M;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),s=(0,a.default)(this.long0+Math.asin(e*c/this.a)/Math.sin(i))}return t.x=s,t.y=i,t}var d=["Polyconic","poly"];exports.names=d;var c={init:f,forward:M,inverse:m,names:d};exports.default=c;
},{"../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/mlfn":"SVmX","../constants/values":"LiBj","../common/gN":"M8OB"}],"IFhf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=s,exports.forward=h,exports.inverse=r,exports.default=exports.names=exports.iterations=void 0;var i=require("../constants/values"),t=1;function s(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function h(t){var s,h=t.x,r=t.y-this.lat0,e=h-this.long0,_=r/i.SEC_TO_RAD*1e-5,a=e,o=1,B=0;for(s=1;s<=10;s++)o*=_,B+=this.A[s]*o;var m,n=B,C=a,v=1,x=0,f=0,A=0;for(s=1;s<=6;s++)m=x*n+v*C,v=v*n-x*C,x=m,f=f+this.B_re[s]*v-this.B_im[s]*x,A=A+this.B_im[s]*v+this.B_re[s]*x;return t.x=A*this.a+this.x0,t.y=f*this.a+this.y0,t}function r(t){var s,h,r=t.x,e=t.y,_=r-this.x0,a=(e-this.y0)/this.a,o=_/this.a,B=1,m=0,n=0,C=0;for(s=1;s<=6;s++)h=m*a+B*o,B=B*a-m*o,m=h,n=n+this.C_re[s]*B-this.C_im[s]*m,C=C+this.C_im[s]*B+this.C_re[s]*m;for(var v=0;v<this.iterations;v++){var x,f=n,A=C,D=a,p=o;for(s=2;s<=6;s++)x=A*n+f*C,f=f*n-A*C,A=x,D+=(s-1)*(this.B_re[s]*f-this.B_im[s]*A),p+=(s-1)*(this.B_im[s]*f+this.B_re[s]*A);f=1,A=0;var u=this.B_re[1],l=this.B_im[1];for(s=2;s<=6;s++)x=A*n+f*C,f=f*n-A*C,A=x,u+=s*(this.B_re[s]*f-this.B_im[s]*A),l+=s*(this.B_im[s]*f+this.B_re[s]*A);var d=u*u+l*l;n=(D*u+p*l)/d,C=(p*u-D*l)/d}var y=n,c=C,g=1,w=0;for(s=1;s<=9;s++)g*=y,w+=this.D[s]*g;var O=this.lat0+w*i.SEC_TO_RAD*1e5,E=this.long0+c;return t.x=E,t.y=O,t}exports.iterations=t;var e=["New_Zealand_Map_Grid","nzmg"];exports.names=e;var _={init:s,forward:h,inverse:r,names:e};exports.default=_;
},{"../constants/values":"LiBj"}],"sJ7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=a,exports.inverse=i,exports.default=exports.names=void 0;var t=e(require("../common/adjust_lon"));function e(t){return t&&t.__esModule?t:{default:t}}function r(){}function a(e){var r=e.x,a=e.y,i=(0,t.default)(r-this.long0),s=this.x0+this.a*i,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return e.x=s,e.y=n,e}function i(e){e.x-=this.x0,e.y-=this.y0;var r=(0,t.default)(this.long0+e.x/this.a),a=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=r,e.y=a,e}var s=["Miller_Cylindrical","mill"];exports.names=s;var n={init:r,forward:a,inverse:i,names:s};exports.default=n;
},{"../common/adjust_lon":"c0D1"}],"oaUa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=u,exports.forward=l,exports.inverse=m,exports.default=exports.names=void 0;var t=r(require("../common/adjust_lon")),s=r(require("../common/adjust_lat")),i=r(require("../common/pj_enfn")),e=r(require("../common/pj_mlfn")),h=r(require("../common/pj_inv_mlfn")),a=require("../constants/values"),n=r(require("../common/asinz"));function r(t){return t&&t.__esModule?t:{default:t}}var o=20;function u(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,i.default)(this.es)}function l(s){var i,h,n=s.x,r=s.y;if(n=(0,t.default)(n-this.long0),this.sphere){if(this.m)for(var u=this.n*Math.sin(r),l=o;l;--l){var m=(this.m*r+Math.sin(r)-u)/(this.m+Math.cos(r));if(r-=m,Math.abs(m)<a.EPSLN)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;i=this.a*this.C_x*n*(this.m+Math.cos(r)),h=this.a*this.C_y*r}else{var f=Math.sin(r),d=Math.cos(r);h=this.a*(0,e.default)(r,f,d,this.en),i=this.a*n*d/Math.sqrt(1-this.es*f*f)}return s.x=i,s.y=h,s}function m(i){var e,r,o,u;return i.x-=this.x0,o=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,n.default)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,n.default)(Math.sin(e)/this.n)),o=(0,t.default)(o+this.long0),e=(0,s.default)(e)):(e=(0,h.default)(i.y/this.a,this.es,this.en),(u=Math.abs(e))<a.HALF_PI?(u=Math.sin(e),r=this.long0+i.x*Math.sqrt(1-this.es*u*u)/(this.a*Math.cos(e)),o=(0,t.default)(r)):u-a.EPSLN<a.HALF_PI&&(o=this.long0)),i.x=o,i.y=e,i}var f=["Sinusoidal","sinu"];exports.names=f;var d={init:u,forward:l,inverse:m,names:f};exports.default=d;
},{"../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/pj_enfn":"L3DR","../common/pj_mlfn":"SByC","../common/pj_inv_mlfn":"bfA2","../constants/values":"LiBj","../common/asinz":"r3wc"}],"vzNE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=r,exports.inverse=i,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon")),a=require("../constants/values");function s(t){return t&&t.__esModule?t:{default:t}}function e(){}function r(s){for(var e=s.x,r=s.y,i=(0,t.default)(e-this.long0),n=r,h=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-h)/(1+Math.cos(n));if(n+=o,Math.abs(o)<a.EPSLN)break}n/=2,Math.PI/2-Math.abs(r)<a.EPSLN&&(i=0);var M=.900316316158*this.a*i*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return s.x=M,s.y=u,s}function i(a){var s,e;a.x-=this.x0,a.y-=this.y0,e=a.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),s=Math.asin(e);var r=(0,t.default)(this.long0+a.x/(.900316316158*this.a*Math.cos(s)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),e=(2*s+Math.sin(2*s))/Math.PI,Math.abs(e)>1&&(e=1);var i=Math.asin(e);return a.x=r,a.y=i,a}var n=["Mollweide","moll"];exports.names=n;var h={init:e,forward:r,inverse:i,names:n};exports.default=h;
},{"../common/adjust_lon":"c0D1","../constants/values":"LiBj"}],"aWhG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=m,exports.forward=f,exports.inverse=d,exports.default=exports.names=void 0;var t=u(require("../common/e0fn")),s=u(require("../common/e1fn")),i=u(require("../common/e2fn")),h=u(require("../common/e3fn")),e=u(require("../common/msfnz")),a=u(require("../common/mlfn")),r=u(require("../common/adjust_lon")),n=u(require("../common/adjust_lat")),l=u(require("../common/imlfn")),o=require("../constants/values");function u(t){return t&&t.__esModule?t:{default:t}}function m(){Math.abs(this.lat1+this.lat2)<o.EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,t.default)(this.es),this.e1=(0,s.default)(this.es),this.e2=(0,i.default)(this.es),this.e3=(0,h.default)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,e.default)(this.e,this.sinphi,this.cosphi),this.ml1=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<o.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,e.default)(this.e,this.sinphi,this.cosphi),this.ml2=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function f(t){var s,i=t.x,h=t.y;if(this.sphere)s=this.a*(this.g-h);else{var e=(0,a.default)(this.e0,this.e1,this.e2,this.e3,h);s=this.a*(this.g-e)}var n=this.ns*(0,r.default)(i-this.long0),l=this.x0+s*Math.sin(n),o=this.y0+this.rh-s*Math.cos(n);return t.x=l,t.y=o,t}function d(t){var s,i,h,e;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1);var a=0;if(0!==i&&(a=Math.atan2(s*t.x,s*t.y)),this.sphere)return e=(0,r.default)(this.long0+a/this.ns),h=(0,n.default)(this.g-i/this.a),t.x=e,t.y=h,t;var o=this.g-i/this.a;return h=(0,l.default)(o,this.e0,this.e1,this.e2,this.e3),e=(0,r.default)(this.long0+a/this.ns),t.x=e,t.y=h,t}var c=["Equidistant_Conic","eqdc"];exports.names=c;var p={init:m,forward:f,inverse:d,names:c};exports.default=p;
},{"../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/msfnz":"AEhT","../common/mlfn":"SVmX","../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/imlfn":"GBx2","../constants/values":"LiBj"}],"wESf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=r,exports.inverse=i,exports.default=exports.names=void 0;var t=h(require("../common/adjust_lon")),a=require("../constants/values"),s=h(require("../common/asinz"));function h(t){return t&&t.__esModule?t:{default:t}}function e(){this.R=this.a}function r(h){var e,r,i=h.x,n=h.y,M=(0,t.default)(i-this.long0);Math.abs(n)<=a.EPSLN&&(e=this.x0+this.R*M,r=this.y0);var o=(0,s.default)(2*Math.abs(n/Math.PI));(Math.abs(M)<=a.EPSLN||Math.abs(Math.abs(n)-a.HALF_PI)<=a.EPSLN)&&(e=this.x0,r=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var u=.5*Math.abs(Math.PI/M-M/Math.PI),P=u*u,x=Math.sin(o),d=Math.cos(o),I=d/(x+d-1),l=I*I,v=I*(2/x-1),c=v*v,f=Math.PI*this.R*(u*(I-c)+Math.sqrt(P*(I-c)*(I-c)-(c+P)*(l-c)))/(c+P);M<0&&(f=-f),e=this.x0+f;var y=P+I;return f=Math.PI*this.R*(v*y-u*Math.sqrt((c+P)*(P+1)-y*y))/(c+P),r=n>=0?this.y0+f:this.y0-f,h.x=e,h.y=r,h}function i(s){var h,e,r,i,n,M,o,u,P,x,d,I;return s.x-=this.x0,s.y-=this.y0,d=Math.PI*this.R,n=(r=s.x/d)*r+(i=s.y/d)*i,d=3*(i*i/(u=-2*(M=-Math.abs(i)*(1+n))+1+2*i*i+n*n)+(2*(o=M-2*i*i+r*r)*o*o/u/u/u-9*M*o/u/u)/27)/(P=(M-o*o/3/u)/u)/(x=2*Math.sqrt(-P/3)),Math.abs(d)>1&&(d=d>=0?1:-1),I=Math.acos(d)/3,e=s.y>=0?(-x*Math.cos(I+Math.PI/3)-o/3/u)*Math.PI:-(-x*Math.cos(I+Math.PI/3)-o/3/u)*Math.PI,h=Math.abs(r)<a.EPSLN?this.long0:(0,t.default)(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(r*r-i*i)+n*n))/2/r),s.x=h,s.y=e,s}var n=["Van_der_Grinten_I","VanDerGrinten","vandg"];exports.names=n;var M={init:e,forward:r,inverse:i,names:n};exports.default=M;
},{"../common/adjust_lon":"c0D1","../constants/values":"LiBj","../common/asinz":"r3wc"}],"UeWW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=_,exports.inverse=c,exports.default=exports.names=void 0;var t=u(require("../common/adjust_lon")),s=require("../constants/values"),a=u(require("../common/mlfn")),h=u(require("../common/e0fn")),i=u(require("../common/e1fn")),e=u(require("../common/e2fn")),n=u(require("../common/e3fn")),o=u(require("../common/gN")),M=u(require("../common/asinz")),r=u(require("../common/imlfn"));function u(t){return t&&t.__esModule?t:{default:t}}function l(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _(M){var r,u,l,_,c,p,f,x,d,y,m,P,L,q,b,A,I,v,E,F,H,N,g=M.x,S=M.y,w=Math.sin(M.y),j=Math.cos(M.y),z=(0,t.default)(g-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s.EPSLN?(M.x=this.x0+this.a*(s.HALF_PI-S)*Math.sin(z),M.y=this.y0-this.a*(s.HALF_PI-S)*Math.cos(z),M):Math.abs(this.sin_p12+1)<=s.EPSLN?(M.x=this.x0+this.a*(s.HALF_PI+S)*Math.sin(z),M.y=this.y0+this.a*(s.HALF_PI+S)*Math.cos(z),M):(v=this.sin_p12*w+this.cos_p12*j*Math.cos(z),I=(A=Math.acos(v))?A/Math.sin(A):1,M.x=this.x0+this.a*I*j*Math.sin(z),M.y=this.y0+this.a*I*(this.cos_p12*w-this.sin_p12*j*Math.cos(z)),M):(r=(0,h.default)(this.es),u=(0,i.default)(this.es),l=(0,e.default)(this.es),_=(0,n.default)(this.es),Math.abs(this.sin_p12-1)<=s.EPSLN?(c=this.a*(0,a.default)(r,u,l,_,s.HALF_PI),p=this.a*(0,a.default)(r,u,l,_,S),M.x=this.x0+(c-p)*Math.sin(z),M.y=this.y0-(c-p)*Math.cos(z),M):Math.abs(this.sin_p12+1)<=s.EPSLN?(c=this.a*(0,a.default)(r,u,l,_,s.HALF_PI),p=this.a*(0,a.default)(r,u,l,_,S),M.x=this.x0+(c+p)*Math.sin(z),M.y=this.y0+(c+p)*Math.cos(z),M):(f=w/j,x=(0,o.default)(this.a,this.e,this.sin_p12),d=(0,o.default)(this.a,this.e,w),y=Math.atan((1-this.es)*f+this.es*x*this.sin_p12/(d*j)),E=0===(m=Math.atan2(Math.sin(z),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(z)))?Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.abs(Math.abs(m)-Math.PI)<=s.EPSLN?-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.asin(Math.sin(z)*Math.cos(y)/Math.sin(m)),P=this.e*this.sin_p12/Math.sqrt(1-this.es),A=x*E*(1-(F=E*E)*(b=(L=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es))*L)*(1-b)/6+(H=F*E)/8*(q=P*L)*(1-2*b)+(N=H*E)/120*(b*(4-7*b)-3*P*P*(1-7*b))-N*E/48*q),M.x=this.x0+A*Math.sin(m),M.y=this.y0+A*Math.cos(m),M))}function c(u){var l,_,c,p,f,x,d,y,m,P,L,q,b,A,I,v,E,F,H,N,g,S,w,j;if(u.x-=this.x0,u.y-=this.y0,this.sphere){if((l=Math.sqrt(u.x*u.x+u.y*u.y))>2*s.HALF_PI*this.a)return;return _=l/this.a,c=Math.sin(_),p=Math.cos(_),f=this.long0,Math.abs(l)<=s.EPSLN?x=this.lat0:(x=(0,M.default)(p*this.sin_p12+u.y*c*this.cos_p12/l),d=Math.abs(this.lat0)-s.HALF_PI,f=Math.abs(d)<=s.EPSLN?this.lat0>=0?(0,t.default)(this.long0+Math.atan2(u.x,-u.y)):(0,t.default)(this.long0-Math.atan2(-u.x,u.y)):(0,t.default)(this.long0+Math.atan2(u.x*c,l*this.cos_p12*p-u.y*this.sin_p12*c))),u.x=f,u.y=x,u}return y=(0,h.default)(this.es),m=(0,i.default)(this.es),P=(0,e.default)(this.es),L=(0,n.default)(this.es),Math.abs(this.sin_p12-1)<=s.EPSLN?(b=(q=this.a*(0,a.default)(y,m,P,L,s.HALF_PI))-(l=Math.sqrt(u.x*u.x+u.y*u.y)),x=(0,r.default)(b/this.a,y,m,P,L),f=(0,t.default)(this.long0+Math.atan2(u.x,-1*u.y)),u.x=f,u.y=x,u):Math.abs(this.sin_p12+1)<=s.EPSLN?(q=this.a*(0,a.default)(y,m,P,L,s.HALF_PI),b=(l=Math.sqrt(u.x*u.x+u.y*u.y))-q,x=(0,r.default)(b/this.a,y,m,P,L),f=(0,t.default)(this.long0+Math.atan2(u.x,u.y)),u.x=f,u.y=x,u):(l=Math.sqrt(u.x*u.x+u.y*u.y),v=Math.atan2(u.x,u.y),A=(0,o.default)(this.a,this.e,this.sin_p12),E=Math.cos(v),H=-(F=this.e*this.cos_p12*E)*F/(1-this.es),N=3*this.es*(1-H)*this.sin_p12*this.cos_p12*E/(1-this.es),w=1-H*(S=(g=l/A)-H*(1+H)*Math.pow(g,3)/6-N*(1+3*H)*Math.pow(g,4)/24)*S/2-g*S*S*S/6,I=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*E),f=(0,t.default)(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(I))),j=Math.sin(I),x=Math.atan2((j-this.es*w*this.sin_p12)*Math.tan(I),j*(1-this.es)),u.x=f,u.y=x,u)}var p=["Azimuthal_Equidistant","aeqd"];exports.names=p;var f={init:l,forward:_,inverse:c,names:p};exports.default=f;
},{"../common/adjust_lon":"c0D1","../constants/values":"LiBj","../common/mlfn":"SVmX","../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/gN":"M8OB","../common/asinz":"r3wc","../common/imlfn":"GBx2"}],"ni3R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=h,exports.inverse=n,exports.default=exports.names=void 0;var t=i(require("../common/adjust_lon")),s=i(require("../common/asinz")),a=require("../constants/values");function i(t){return t&&t.__esModule?t:{default:t}}function e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function h(s){var i,e,h,n,o,r,u,l=s.x,x=s.y;return h=(0,t.default)(l-this.long0),i=Math.sin(x),e=Math.cos(x),n=Math.cos(h),1,((o=this.sin_p14*i+this.cos_p14*e*n)>0||Math.abs(o)<=a.EPSLN)&&(r=1*this.a*e*Math.sin(h),u=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*e*n)),s.x=r,s.y=u,s}function n(i){var e,h,n,o,r,u,l;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),h=(0,s.default)(e/this.a),n=Math.sin(h),o=Math.cos(h),u=this.long0,Math.abs(e)<=a.EPSLN?(l=this.lat0,i.x=u,i.y=l,i):(l=(0,s.default)(o*this.sin_p14+i.y*n*this.cos_p14/e),r=Math.abs(this.lat0)-a.HALF_PI,Math.abs(r)<=a.EPSLN?(u=this.lat0>=0?(0,t.default)(this.long0+Math.atan2(i.x,-i.y)):(0,t.default)(this.long0-Math.atan2(-i.x,i.y)),i.x=u,i.y=l,i):(u=(0,t.default)(this.long0+Math.atan2(i.x*n,e*this.cos_p14*o-i.y*this.sin_p14*n)),i.x=u,i.y=l,i))}var o=["ortho"];exports.names=o;var r={init:e,forward:h,inverse:n,names:o};exports.default=r;
},{"../common/adjust_lon":"c0D1","../common/asinz":"r3wc","../constants/values":"LiBj"}],"tdNV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=e,exports.inverse=i,exports.default=exports.names=void 0;var a=require("../constants/values"),t={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},s={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function h(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=a.HALF_PI-a.FORTPI/2?this.face=t.TOP:this.lat0<=-(a.HALF_PI-a.FORTPI/2)?this.face=t.BOTTOM:Math.abs(this.long0)<=a.FORTPI?this.face=t.FRONT:Math.abs(this.long0)<=a.HALF_PI+a.FORTPI?this.face=this.long0>0?t.RIGHT:t.LEFT:this.face=t.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function e(h){var e,i,I,P,l,F,n={x:0,y:0},R={value:0};if(h.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(h.y)):h.y,i=h.x,this.face===t.TOP)P=a.HALF_PI-e,i>=a.FORTPI&&i<=a.HALF_PI+a.FORTPI?(R.value=s.AREA_0,I=i-a.HALF_PI):i>a.HALF_PI+a.FORTPI||i<=-(a.HALF_PI+a.FORTPI)?(R.value=s.AREA_1,I=i>0?i-a.SPI:i+a.SPI):i>-(a.HALF_PI+a.FORTPI)&&i<=-a.FORTPI?(R.value=s.AREA_2,I=i+a.HALF_PI):(R.value=s.AREA_3,I=i);else if(this.face===t.BOTTOM)P=a.HALF_PI+e,i>=a.FORTPI&&i<=a.HALF_PI+a.FORTPI?(R.value=s.AREA_0,I=-i+a.HALF_PI):i<a.FORTPI&&i>=-a.FORTPI?(R.value=s.AREA_1,I=-i):i<-a.FORTPI&&i>=-(a.HALF_PI+a.FORTPI)?(R.value=s.AREA_2,I=-i-a.HALF_PI):(R.value=s.AREA_3,I=i>0?-i+a.SPI:-i-a.SPI);else{var u,M,c,r,o,T;this.face===t.RIGHT?i=_(i,+a.HALF_PI):this.face===t.BACK?i=_(i,+a.SPI):this.face===t.LEFT&&(i=_(i,-a.HALF_PI)),r=Math.sin(e),o=Math.cos(e),T=Math.sin(i),u=o*Math.cos(i),M=o*T,c=r,this.face===t.FRONT?I=A(P=Math.acos(u),c,M,R):this.face===t.RIGHT?I=A(P=Math.acos(M),c,-u,R):this.face===t.BACK?I=A(P=Math.acos(-u),c,-M,R):this.face===t.LEFT?I=A(P=Math.acos(-M),c,u,R):(P=I=0,R.value=s.AREA_0)}return F=Math.atan(12/a.SPI*(I+Math.acos(Math.sin(I)*Math.cos(a.FORTPI))-a.HALF_PI)),l=Math.sqrt((1-Math.cos(P))/(Math.cos(F)*Math.cos(F))/(1-Math.cos(Math.atan(1/Math.cos(I))))),R.value===s.AREA_1?F+=a.HALF_PI:R.value===s.AREA_2?F+=a.SPI:R.value===s.AREA_3&&(F+=1.5*a.SPI),n.x=l*Math.cos(F),n.y=l*Math.sin(F),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,h.x=n.x,h.y=n.y,h}function i(h){var e,i,A,I,P,l,F,n,R,u,M,c,r={lam:0,phi:0},o={value:0};if(h.x=(h.x-this.x0)/this.a,h.y=(h.y-this.y0)/this.a,i=Math.atan(Math.sqrt(h.x*h.x+h.y*h.y)),e=Math.atan2(h.y,h.x),h.x>=0&&h.x>=Math.abs(h.y)?o.value=s.AREA_0:h.y>=0&&h.y>=Math.abs(h.x)?(o.value=s.AREA_1,e-=a.HALF_PI):h.x<0&&-h.x>=Math.abs(h.y)?(o.value=s.AREA_2,e=e<0?e+a.SPI:e-a.SPI):(o.value=s.AREA_3,e+=a.HALF_PI),R=a.SPI/12*Math.tan(e),P=Math.sin(R)/(Math.cos(R)-1/Math.sqrt(2)),l=Math.atan(P),(F=1-(A=Math.cos(e))*A*(I=Math.tan(i))*I*(1-Math.cos(Math.atan(1/Math.cos(l)))))<-1?F=-1:F>1&&(F=1),this.face===t.TOP)n=Math.acos(F),r.phi=a.HALF_PI-n,o.value===s.AREA_0?r.lam=l+a.HALF_PI:o.value===s.AREA_1?r.lam=l<0?l+a.SPI:l-a.SPI:o.value===s.AREA_2?r.lam=l-a.HALF_PI:r.lam=l;else if(this.face===t.BOTTOM)n=Math.acos(F),r.phi=n-a.HALF_PI,o.value===s.AREA_0?r.lam=-l+a.HALF_PI:o.value===s.AREA_1?r.lam=-l:o.value===s.AREA_2?r.lam=-l-a.HALF_PI:r.lam=l<0?-l-a.SPI:-l+a.SPI;else{var T,v,f;R=(T=F)*T,v=(R+=(f=R>=1?0:Math.sqrt(1-R)*Math.sin(l))*f)>=1?0:Math.sqrt(1-R),o.value===s.AREA_1?(R=v,v=-f,f=R):o.value===s.AREA_2?(v=-v,f=-f):o.value===s.AREA_3&&(R=v,v=f,f=-R),this.face===t.RIGHT?(R=T,T=-v,v=R):this.face===t.BACK?(T=-T,v=-v):this.face===t.LEFT&&(R=T,T=v,v=-R),r.phi=Math.acos(-f)-a.HALF_PI,r.lam=Math.atan2(v,T),this.face===t.RIGHT?r.lam=_(r.lam,-a.HALF_PI):this.face===t.BACK?r.lam=_(r.lam,-a.SPI):this.face===t.LEFT&&(r.lam=_(r.lam,+a.HALF_PI))}0!==this.es&&(u=r.phi<0?1:0,M=Math.tan(r.phi),c=this.b/Math.sqrt(M*M+this.one_minus_f_squared),r.phi=Math.atan(Math.sqrt(this.a*this.a-c*c)/(this.one_minus_f*c)),u&&(r.phi=-r.phi));return r.lam+=this.long0,h.x=r.lam,h.y=r.phi,h}function A(t,h,e,i){var A;return t<a.EPSLN?(i.value=s.AREA_0,A=0):(A=Math.atan2(h,e),Math.abs(A)<=a.FORTPI?i.value=s.AREA_0:A>a.FORTPI&&A<=a.HALF_PI+a.FORTPI?(i.value=s.AREA_1,A-=a.HALF_PI):A>a.HALF_PI+a.FORTPI||A<=-(a.HALF_PI+a.FORTPI)?(i.value=s.AREA_2,A=A>=0?A-a.SPI:A+a.SPI):(i.value=s.AREA_3,A+=a.HALF_PI)),A}function _(t,s){var h=t+s;return h<-a.SPI?h+=a.TWO_PI:h>+a.SPI&&(h-=a.TWO_PI),h}var I=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];exports.names=I;var P={init:h,forward:e,inverse:i,names:I};exports.default=P;
},{"../constants/values":"LiBj"}],"ebFR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=v,exports.inverse=c,exports.default=exports.names=void 0;var e=require("../constants/values"),t=r(require("../common/adjust_lon"));function r(e){return e&&e.__esModule?e:{default:e}}var s=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],i=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],n=.8487,o=1.3523,a=e.R2D/5,u=1/a,y=18,f=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},h=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])};function x(e,t,r,s){for(var i=t;s;--s){var n=e(i);if(i-=n,Math.abs(n)<r)break}return i}function l(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function v(r){var h=(0,t.default)(r.x-this.long0),x=Math.abs(r.y),l=Math.floor(x*a);l<0?l=0:l>=y&&(l=y-1),x=e.R2D*(x-u*l);var v={x:f(s[l],x)*h,y:f(i[l],x)};return r.y<0&&(v.y=-v.y),v.x=v.x*this.a*n+this.x0,v.y=v.y*this.a*o+this.y0,v}function c(r){var a={x:(r.x-this.x0)/(this.a*n),y:Math.abs(r.y-this.y0)/(this.a*o)};if(a.y>=1)a.x/=s[y][0],a.y=r.y<0?-e.HALF_PI:e.HALF_PI;else{var u=Math.floor(a.y*y);for(u<0?u=0:u>=y&&(u=y-1);;)if(i[u][0]>a.y)--u;else{if(!(i[u+1][0]<=a.y))break;++u}var l=i[u],v=5*(a.y-l[0])/(i[u+1][0]-l[0]);v=x(function(e){return(f(l,e)-a.y)/h(l,e)},v,e.EPSLN,100),a.x/=f(s[u],v),a.y=(5*u+v)*e.D2R,r.y<0&&(a.y=-a.y)}return a.x=(0,t.default)(a.x+this.long0),a}var d=["Robinson","robin"];exports.names=d;var b={init:l,forward:v,inverse:c,names:d};exports.default=b;
},{"../constants/values":"LiBj","../common/adjust_lon":"c0D1"}],"Q4M2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=t,exports.forward=r,exports.inverse=o,exports.default=exports.names=void 0;var e=require("../datumUtils");function t(){this.name="geocent"}function r(t){return(0,e.geodeticToGeocentric)(t,this.es,this.a)}function o(t){return(0,e.geocentricToGeodetic)(t,this.es,this.a,this.b)}var i=["Geocentric","geocentric","geocent","Geocent"];exports.names=i;var s={init:t,forward:r,inverse:o,names:i};exports.default=s;
},{"../datumUtils":"AJ6k"}],"FDZ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=O;var e=z(require("./lib/projections/tmerc")),o=z(require("./lib/projections/etmerc")),r=z(require("./lib/projections/utm")),i=z(require("./lib/projections/sterea")),t=z(require("./lib/projections/stere")),d=z(require("./lib/projections/somerc")),j=z(require("./lib/projections/omerc")),c=z(require("./lib/projections/lcc")),a=z(require("./lib/projections/krovak")),s=z(require("./lib/projections/cass")),l=z(require("./lib/projections/laea")),n=z(require("./lib/projections/aea")),u=z(require("./lib/projections/gnom")),p=z(require("./lib/projections/cea")),f=z(require("./lib/projections/eqc")),q=z(require("./lib/projections/poly")),b=z(require("./lib/projections/nzmg")),P=z(require("./lib/projections/mill")),m=z(require("./lib/projections/sinu")),g=z(require("./lib/projections/moll")),v=z(require("./lib/projections/eqdc")),_=z(require("./lib/projections/vandg")),k=z(require("./lib/projections/aeqd")),x=z(require("./lib/projections/ortho")),y=z(require("./lib/projections/qsc")),M=z(require("./lib/projections/robin")),h=z(require("./lib/projections/geocent"));function z(e){return e&&e.__esModule?e:{default:e}}function O(z){z.Proj.projections.add(e.default),z.Proj.projections.add(o.default),z.Proj.projections.add(r.default),z.Proj.projections.add(i.default),z.Proj.projections.add(t.default),z.Proj.projections.add(d.default),z.Proj.projections.add(j.default),z.Proj.projections.add(c.default),z.Proj.projections.add(a.default),z.Proj.projections.add(s.default),z.Proj.projections.add(l.default),z.Proj.projections.add(n.default),z.Proj.projections.add(u.default),z.Proj.projections.add(p.default),z.Proj.projections.add(f.default),z.Proj.projections.add(q.default),z.Proj.projections.add(b.default),z.Proj.projections.add(P.default),z.Proj.projections.add(m.default),z.Proj.projections.add(g.default),z.Proj.projections.add(v.default),z.Proj.projections.add(_.default),z.Proj.projections.add(k.default),z.Proj.projections.add(x.default),z.Proj.projections.add(y.default),z.Proj.projections.add(M.default),z.Proj.projections.add(h.default)}
},{"./lib/projections/tmerc":"qgIp","./lib/projections/etmerc":"suR5","./lib/projections/utm":"F3qh","./lib/projections/sterea":"BtEk","./lib/projections/stere":"nkLl","./lib/projections/somerc":"XMD3","./lib/projections/omerc":"O3Wr","./lib/projections/lcc":"NMWS","./lib/projections/krovak":"JY2o","./lib/projections/cass":"hdfx","./lib/projections/laea":"tT4j","./lib/projections/aea":"BQzq","./lib/projections/gnom":"hgIf","./lib/projections/cea":"qHgu","./lib/projections/eqc":"C2W8","./lib/projections/poly":"GnT9","./lib/projections/nzmg":"IFhf","./lib/projections/mill":"sJ7j","./lib/projections/sinu":"oaUa","./lib/projections/moll":"vzNE","./lib/projections/eqdc":"aWhG","./lib/projections/vandg":"wESf","./lib/projections/aeqd":"UeWW","./lib/projections/ortho":"ni3R","./lib/projections/qsc":"tdNV","./lib/projections/robin":"ebFR","./lib/projections/geocent":"Q4M2"}],"oaf9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./core")),t=o(require("./Proj")),r=o(require("./Point")),u=o(require("./common/toPoint")),a=o(require("./defs")),d=o(require("./transform")),f=o(require("mgrs")),l=o(require("../projs"));function o(e){return e&&e.__esModule?e:{default:e}}e.default.defaultDatum="WGS84",e.default.Proj=t.default,e.default.WGS84=new e.default.Proj("WGS84"),e.default.Point=r.default,e.default.toPoint=u.default,e.default.defs=a.default,e.default.transform=d.default,e.default.mgrs=f.default,e.default.version="__VERSION__",(0,l.default)(e.default);var i=e.default;exports.default=i;
},{"./core":"adlr","./Proj":"TmNP","./Point":"wpuw","./common/toPoint":"Q8bn","./defs":"KsYW","./transform":"n5UB","mgrs":"kAqR","../projs":"FDZ4"}],"zOcJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("ol/proj/Projection")),e=require("ol/proj/proj4.js"),r=o(require("proj4"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=p();return function(){var r,o=a(t);if(e){var n=a(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return l(this,r)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(o){c(f,t.default);var n=i(f);function f(){return u(this,f),r.default.defs("EPSG:3765","+proj=tmerc +lat_0=0 +lon_0=16.5 +k=0.9999 +x_0=500000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),(0,e.register)(r.default),n.call(this,{code:"EPSG:3765",units:"m",extent:[208311.05,4614890.75,724721.78,5159767.36]})}return f}();exports.default=y;
},{"ol/proj/Projection":"WUar","ol/proj/proj4.js":"BAXJ","proj4":"oaf9"}],"ErCb":[function(require,module,exports) {
module.exports={project:"Vodovod Omiš",gitPath:"https://github.com/AlenKelemen/IMAGIS-data.git",path:"vodovodOmis",center:[535420.4693824024,4814471.358589062],zoom:5.7,sources:[{name:"VodoopskrbaVod",path:"Vodoopskrba/Vod",type:"geojson",schema:{geometry:"linestring",properties:[{Name:"Tip",Label:"Tip",Description:"Tip",Constrains:["Magistralni","Distributivni","Interni","Strani",""],DataType:9},{Name:"DN",Label:"DN",Description:"Nazivni promjer",DataType:8},{Name:"Materijal",Label:"Materijal",Description:"Materijal",Constrains:["SL","NL","PEHD","PVC","ČE","AC","POC",""],DataType:9},{Name:"Lokacija",Label:"Lokacija",Description:"Najbliži toponim",DataType:9},{Name:"MjernaZona",Label:"DMA",Description:"Mjerna zona- DMA",DataType:9},{Name:"TehnickaCjelina",Label:"Tehnicka cjelina",Description:"Tehnicka cjelina",DataType:9},{Name:"LokalnaUprava",Label:"Lokalna uprava",Description:"Lokalna uprava",DataType:9},{Name:"Status",Label:"Status",Description:"Status",Constrains:["Plan","Projekt","Izgradnja","Lokacijska dozvola","Građevinska dozvola","Rad","Povremeno","Kvar","Izvan pogona","Uništeno",""],DataType:9},{Name:"PodaciIzvor",Label:"Izvor podataka",Description:"Izvor podataka",DataType:9},{Name:"PodaciTocnost",Label:"Točnost podataka",Description:"Točnost podataka",Constrains:["GEO","GPS","SV1000","SV5000","SV10000","SV25000","SV50000","GEOSKICA","FIKTIVNO",""],DataType:9},{Name:"PodaciIme",Label:"Podatke unio",Description:"Podatke unio",DataType:9},{Name:"PodaciDatum",Label:"Datum unosa",Description:"Datum unosa podataka",DataType:3}]}},{name:"VodoopskrbaHidrant",path:"Vodoopskrba/Hidrant",type:"geojson",schema:{geometry:"point",properties:[{Name:"Tip",Label:"Tip",Description:"Tip",Constrains:["NH","PH","NHZ","PHZ",""],DataType:9},{Name:"DN",Label:"DN",Description:"Nazivni promjer",Constrains:[50,80,100,""],DataType:8},{Name:"Materijal",Label:"Materijal",Description:"Materijal",Constrains:["SL","NL","PEHD","PVC","ČE","AC","POC",""],DataType:9},{Name:"Lokacija",Label:"Lokacija",Description:"Najbliži toponim",DataType:9},{Name:"MjernaZona",Label:"DMA",Description:"Mjerna zona- DMA",DataType:9},{Name:"TehnickaCjelina",Label:"Tehnicka cjelina",Description:"Tehnicka cjelina",DataType:9},{Name:"LokalnaUprava",Label:"Lokalna uprava",Description:"Lokalna uprava",DataType:9},{Name:"Status",Label:"Status",Description:"Status",Constrains:["Plan","Projekt","Izgradnja","Lokacijska dozvola","Građevinska dozvola","Rad","Povremeno","Kvar","Izvan pogona","Uništeno",""],DataType:9},{Name:"PodaciIzvor",Label:"Izvor podataka",Description:"Izvor podataka",DataType:9},{Name:"PodaciTocnost",Label:"Točnost podataka",Description:"Točnost podataka",Constrains:["GEO","GPS","SV1000","SV5000","SV10000","SV25000","SV50000","GEOSKICA","FIKTIVNO",""],DataType:9},{Name:"PodaciIme",Label:"Podatke unio",Description:"Podatke unio",DataType:9},{Name:"PodaciDatum",Label:"Datum unosa",Description:"Datum unosa podataka",DataType:3}]}},{name:"VodoopskrbaVodospremnik",path:"Vodoopskrba/Vodospremnik",type:"geojson",schema:{geometry:"point",properties:[{Name:"Lokacija",Label:"Lokacija",Description:"Najbliži toponim",DataType:9},{Name:"MjernaZona",Label:"DMA",Description:"Mjerna zona- DMA",DataType:9},{Name:"TehnickaCjelina",Label:"Tehnicka cjelina",Description:"Tehnicka cjelina",DataType:9},{Name:"LokalnaUprava",Label:"Lokalna uprava",Description:"Lokalna uprava",DataType:9},{Name:"Status",Label:"Status",Description:"Status",Constrains:["Plan","Projekt","Izgradnja","Lokacijska dozvola","Građevinska dozvola","Rad","Povremeno","Kvar","Izvan pogona","Uništeno",""],DataType:9},{Name:"PodaciIzvor",Label:"Izvor podataka",Description:"Izvor podataka",DataType:9},{Name:"PodaciTocnost",Label:"Točnost podataka",Description:"Točnost podataka",Constrains:["GEO","GPS","SV1000","SV5000","SV10000","SV25000","SV50000","GEOSKICA","FIKTIVNO",""],DataType:9},{Name:"PodaciIme",Label:"Podatke unio",Description:"Podatke unio",DataType:9},{Name:"PodaciDatum",Label:"Datum unosa",Description:"Datum unosa podataka",DataType:3}]}},{name:"VodoopskrbaPodrucjeZgrada",path:"Vodoopskrba/PodrucjeZgrada",type:"geojson",schema:{geometry:"polygon",properties:[{Name:"Lokacija",Label:"Lokacija",Description:"Najbliži toponim",DataType:9},{Name:"MjernaZona",Label:"DMA",Description:"Mjerna zona- DMA",DataType:9},{Name:"TehnickaCjelina",Label:"Tehnicka cjelina",Description:"Tehnicka cjelina",DataType:9},{Name:"LokalnaUprava",Label:"Lokalna uprava",Description:"Lokalna uprava",DataType:9},{Name:"Status",Label:"Status",Description:"Status",Constrains:["Plan","Projekt","Izgradnja","Lokacijska dozvola","Građevinska dozvola","Rad","Povremeno","Kvar","Izvan pogona","Uništeno",""],DataType:9},{Name:"PodaciIzvor",Label:"Izvor podataka",Description:"Izvor podataka",DataType:9},{Name:"PodaciTocnost",Label:"Točnost podataka",Description:"Točnost podataka",Constrains:["GEO","GPS","SV1000","SV5000","SV10000","SV25000","SV50000","GEOSKICA","FIKTIVNO",""],DataType:9},{Name:"PodaciIme",Label:"Podatke unio",Description:"Podatke unio",DataType:9},{Name:"PodaciDatum",Label:"Datum unosa",Description:"Datum unosa podataka",DataType:3}]}},{name:"TH",path:"https://gis.edc.hr/imagisth/threport/device",type:"th",schema:{geometry:"point",properties:[{Name:"company_id",Label:"ID kompanije",Description:"ID kompanije"},{Name:"device_id",Label:"ID uređaja",Description:"ID uređaja"},{Name:"device_name",Label:"Ime uređaja",Description:"Ime uređaja"},{Name:"gain_id",Label:"ID mjerenja",Description:"ID mjerenja",Hidden:!0},{Name:"info_id",Label:"ID info",Description:"ID info",Hidden:!0}]}},{name:"mgOmis",restUrl:"https://gis.edc.hr/mapguide/rest/",agentUrl:"https://gis.edc.hr/mapguide/mapagent/mapagent.fcgi?",mapdefinition:"Library://vodovodOmis/Maps/osnovno.MapDefinition",format:"PNG",type:"mg"},{name:"mgSplit",restUrl:"https://gis.edc.hr/mapguide/rest/",agentUrl:"https://gis.edc.hr/mapguide/mapagent/mapagent.fcgi?",mapdefinition:"Library://vikSplit/Maps/osnovno.MapDefinition",format:"PNG",type:"mg"},{name:"mgKrizevci",restUrl:"https://gis.edc.hr/mapguide/rest/",agentUrl:"https://gis.edc.hr/mapguide/mapagent/mapagent.fcgi?",mapdefinition:"Library://vodneUslugeKrizevci/Maps/tiled.MapDefinition",format:"PNG",type:"mg"},{name:"OSM",type:"osm"},{name:"Bing",APIKey:"AgFHvfmLkp5DnDE26m9RAx4MSzpNwgwCfy2nQ1dGYSs7IIF107x5-nrxgMJJsPIf",imagerySet:"AerialWithLabels",type:"bing"},{name:"DGU_DOF_TOPONIMI",path:"https://geoportal.dgu.hr/wms",params:{LAYERS:"DOF_TOPONIMI"},type:"wms"},{name:"DGU_DOF",path:"https://geoportal.dgu.hr/wms",params:{LAYERS:"DOF"},type:"wms"},{name:"DGU_TK25",path:"https://geoportal.dgu.hr/wms",params:{LAYERS:"TK25"},type:"wms"},{name:"DGU_HOK",path:"https://geoportal.dgu.hr/wms",params:{LAYERS:"HOK"},type:"wms"},{name:"DGU_DKP",path:"https://linux.edc.hr/ca/oss.uredjenazemlja.hr:443/OssWebServices/inspireService/cp_wms/ows",params:{TRANSPARENT:!0,LAYERS:"CP.CadastralZoning,CP.CadastralParcel",TOKEN:"606c639ac3861d59c3cac4e5b29a74047b6e3b0e9940ca180d240b002d8c83f7"},type:"wms"}],layers:[{source:"OSM",name:"OSM",label:"Open Street Map",info:"",visible:!1,opacity:.7},{source:"Bing",name:"Bing",label:"Bing Aerial With Labels",info:"Bing Aerial With Labels",visible:!1,opacity:.9},{source:"DGU_DOF",name:"DGU_DOF",label:"DIGITALNA ORTOFOTO KARTA 2011",info:"DIGITALNA ORTOFOTO KARTA U BOJI Skraćeni naziv DOF Godina nastanka 2011.",visible:!1,opacity:.6},{source:"DGU_DOF_TOPONIMI",name:"DGU_DOF_TOPONIMI",label:"DIGITALNA ORTOFOTO KARTA 2011, TOPONIMI",info:"DIGITALNA ORTOFOTO KARTA U BOJI Skraćeni naziv DOF Godina nastanka 2011.",visible:!1,opacity:.9},{source:"DGU_TK25",name:"DGU_TK25",label:"TOPOGRAFSKA KARTA 1:25000",info:"TOPOGRAFSKA KARTA 1:25000 Skraćeni naziv TK25 Godina nastanka 1996.-2010.",minResolution:20,visible:!1,opacity:.9},{source:"DGU_HOK",name:"DGU_HOK",label:"HRVATSKA OSNOVNA KARTA",info:"HRVATSKA OSNOVNA KARTA Skraćeni naziv HOK Godina nastanka 1954.-2010.",visible:!1,opacity:.9},{source:"DGU_DKP",name:"DGU_DKP",label:"DGU Digitalni Katastarski Plan",info:"Državna geodetska uprava kao subjekt NIPP-a učinila je dostupnom mrežnu uslugu pregleda katastarskih čestica i katastarskih općina. Mrežna usluga pregleda razvijena je u skladu s INSPIRE provedbenim pravilima",maxResolution:4.157078628540042,visible:!1,opacity:.9,translucent:!0,zIndex:999},{source:"VodoopskrbaPodrucjeZgrada",name:"podrucjeZgrada",label:"Područje, parcela, zgrada (poligoni)",info:"",maxResolution:500,visible:!0,zIndex:1,style:[{fill:{color:"rgba(0,0,255,0.25)"},stroke:{color:"rgba(0,0,0,1)",width:1}}]},{source:"VodoopskrbaVod",name:"vod",label:"Cjevovod",info:"",maxResolution:100,visible:!0,zIndex:200,style:[{filter:{property:"DN",operator:">",value:250},resolution:[0,50],stroke:{color:"rgba(0,0,255,1)",width:3},text:{text:"DN",resolution:[0,4],placement:"line",scale:1.2}},{filter:{property:"DN",operator:"<=",value:250},resolution:[0,50],stroke:{color:"blue",width:1},text:{text:"DN",resolution:[0,5],placement:"line"}}]},{source:"TH",name:"TH",label:"Telemetrijski hidrant",info:"",maxResolution:500,visible:!0,zIndex:1e3,style:[{icon:{src:"th",scale:.6,anchor:[.5,.5]}}]},{source:"VodoopskrbaVodospremnik",name:"vodospremnik",label:"Vodospremnik",info:"",visible:!0,zIndex:11,style:[{regularShape:{radius:10,points:6,fill:{color:"rgba(214,20,20,1)"},stroke:{color:"rgba(255,125,0,1)"}}}]},{source:"VodoopskrbaHidrant",name:"hidrant",label:"Hidrant",info:"",maxResolution:25,visible:!0,zIndex:12,style:[{regularShape:{radius:3,points:24,fill:{color:"rgba(255,0,0,1)"}}}]}]};
},{}],"qR3i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("ol/control/Control"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,u=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw u}}}}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=v();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){a(o,t.default);var n=s(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,o),(t=n.call(this,{element:document.createElement(e.semantic||"div")})).element.className=e.className||"container",t.controls_=[],t}return l(o,[{key:"setVisible",value:function(t){this.element.style.display=t?"block":"none",this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t})}},{key:"getVisible",value:function(){return"none"!==this.element.style.display}},{key:"addControl",value:function(t){this.controls_.push(t),t.setTarget(this.element),t.set("parent",this),this.getMap()&&this.getMap().addControl(t)}},{key:"removeControl",value:function(t){this.controls_.splice(this.controls_.findIndex(function(e){return e===t}),1),this.getMap().removeControl(t)}},{key:"getControls",value:function(){return this.controls_}},{key:"getActiveControls",value:function(){var t,e=[],n=r(this.controls_);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.getActive()&&e.push(o)}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"deactivateControls",value:function(t){var e,n=r(this.controls_);try{for(n.s();!(e=n.n()).done;){var o=e.value;o!==t&&o.getActive()&&o.setActive(!1)}}catch(i){n.e(i)}finally{n.f()}}}]),o}();exports.default=d;
},{"ol/control/Control":"xxE2"}],"M5pz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"HTO1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Layer.js")),t=o(require("./TileProperty.js")),r=require("../obj.js");function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(e){function o(t){var o=this,n=t||{},i=(0,r.assign)({},n);return delete i.preload,delete i.useInterimTilesOnError,(o=e.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),o.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),o}return n(o,e),o.prototype.getPreload=function(){return this.get(t.default.PRELOAD)},o.prototype.setPreload=function(e){this.set(t.default.PRELOAD,e)},o.prototype.getUseInterimTilesOnError=function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)},o.prototype.setUseInterimTilesOnError=function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)},o}(e.default),s=i;exports.default=s;
},{"./Layer.js":"GCgv","./TileProperty.js":"M5pz","../obj.js":"mH6q"}],"snev":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i,exports.default=void 0;var t=function(){function t(t,i,n,m){this.minX=t,this.maxX=i,this.minY=n,this.maxY=m}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function i(i,n,m,e,s){return void 0!==s?(s.minX=i,s.maxX=n,s.minY=m,s.maxY=e,s):new t(i,n,m,e)}var n=t;exports.default=n;
},{}],"hkMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Layer.js")),t=u(require("../../TileRange.js")),r=u(require("../../TileState.js")),i=require("../../transform.js"),n=require("../../obj.js"),o=require("../../extent.js"),a=require("../../render/canvas.js"),s=require("../../proj.js"),l=require("../../util.js"),d=require("../../array.js");function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),p=function(e){function u(r){var i=e.call(this,r)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=(0,o.createEmpty)(),i.tmpTileRange_=new t.default(0,0,0,0),i}return h(u,e),u.prototype.isDrawableTile=function(e){var t=this.getLayer(),i=e.getState(),n=t.getUseInterimTilesOnError();return i==r.default.LOADED||i==r.default.EMPTY||i==r.default.ERROR&&!n},u.prototype.getTile=function(e,t,i,n){var o=n.pixelRatio,a=n.viewState.projection,s=this.getLayer(),l=s.getSource().getTile(e,t,i,o,a);return l.getState()==r.default.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):l.setState(r.default.LOADED)),this.isDrawableTile(l)||(l=l.getInterimTile()),l},u.prototype.loadedTileCallback=function(t,r,i){return!!this.isDrawableTile(i)&&e.prototype.loadedTileCallback.call(this,t,r,i)},u.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},u.prototype.renderFrame=function(e,t){var u=e.layerStatesArray[e.layerIndex],h=e.viewState,p=h.projection,c=h.resolution,g=h.center,T=h.rotation,f=e.pixelRatio,m=this.getLayer(),v=m.getSource(),x=v.getRevision(),y=v.getTileGridForProjection(p),R=y.getZForResolution(c,v.zDirection),w=y.getResolution(R),C=e.extent,E=u.extent&&(0,s.fromUserExtent)(u.extent,p);E&&(C=(0,o.getIntersection)(C,(0,s.fromUserExtent)(u.extent,p)));var j=v.getTilePixelRatio(f),_=Math.round(e.size[0]*j),P=Math.round(e.size[1]*j);if(T){var S=Math.round(Math.sqrt(_*_+P*P));_=S,P=S}var b=w*_/2/j,O=w*P/2/j,q=[g[0]-b,g[1]-O,g[0]+b,g[1]+O],I=y.getTileRangeForExtentAndZ(C,R),A={};A[R]={};var U=this.createLoadedTileFinder(v,p,A),D=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;for(var M=I.minX;M<=I.maxX;++M)for(var F=I.minY;F<=I.maxY;++F){var z=this.getTile(R,M,F,e);if(this.isDrawableTile(z)){var Y=(0,l.getUid)(this);if(z.getState()==r.default.LOADED){A[R][z.tileCoord.toString()]=z;var Z=z.inTransition(Y);this.newTiles_||!Z&&-1!==this.renderedTiles.indexOf(z)||(this.newTiles_=!0)}if(1===z.getAlpha(Y,e.time))continue}var k=y.getTileCoordChildTileRange(z.tileCoord,L,D),K=!1;k&&(K=U(R+1,k)),K||y.forEachTileCoordParentTileRange(z.tileCoord,U,L,D)}var X=w/c;(0,i.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/j,1/j,T,-_/2,-P/2);var G=(0,a.createTransformString)(this.pixelTransform);this.useContainer(t,G,u.opacity);var Q=this.context,N=Q.canvas;(0,i.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,i.compose)(this.tempTransform,_/2,P/2,X,X,0,-_/2,-P/2),N.width!=_||N.height!=P?(N.width=_,N.height=P):this.containerReused||Q.clearRect(0,0,_,P),E&&this.clipUnrotated(Q,e,E),(0,n.assign)(Q,v.getContextOptions()),this.preRender(Q,e),this.renderedTiles.length=0;var B,H,J,V=Object.keys(A).map(Number);V.sort(d.numberSafeCompareFunction),1!==u.opacity||this.containerReused&&!v.getOpaque(e.viewState.projection)?(B=[],H=[]):V=V.reverse();for(var W=V.length-1;W>=0;--W){var $=V[W],ee=v.getTilePixelSize($,f,p),te=y.getResolution($)/w,re=ee[0]*te*X,ie=ee[1]*te*X,ne=y.getTileCoordForCoordAndZ((0,o.getTopLeft)(q),$),oe=y.getTileCoordExtent(ne),ae=(0,i.apply)(this.tempTransform,[j*(oe[0]-q[0])/w,j*(q[3]-oe[3])/w]),se=j*v.getGutterForProjection(p),le=A[$];for(var de in le){var ue=(z=le[de]).tileCoord,he=ae[0]-(ne[1]-ue[1])*re,pe=Math.round(he+re),ce=ae[1]-(ne[2]-ue[2])*ie,ge=Math.round(ce+ie),Te=pe-(M=Math.round(he)),fe=ge-(F=Math.round(ce)),me=R===$;if(!(Z=me&&1!==z.getAlpha((0,l.getUid)(this),e.time)))if(B){Q.save(),J=[M,F,M+Te,F,M+Te,F+fe,M,F+fe];for(var ve=0,xe=B.length;ve<xe;++ve)if(R!==$&&$<H[ve]){var ye=B[ve];Q.beginPath(),Q.moveTo(J[0],J[1]),Q.lineTo(J[2],J[3]),Q.lineTo(J[4],J[5]),Q.lineTo(J[6],J[7]),Q.moveTo(ye[6],ye[7]),Q.lineTo(ye[4],ye[5]),Q.lineTo(ye[2],ye[3]),Q.lineTo(ye[0],ye[1]),Q.clip()}B.push(J),H.push($)}else Q.clearRect(M,F,Te,fe);this.drawTileImage(z,e,M,F,Te,fe,se,me,u.opacity),B&&!Z&&Q.restore(),this.renderedTiles.push(z),this.updateUsedTiles(e.usedTiles,v,z)}}return this.renderedRevision=x,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!(0,o.equals)(this.renderedExtent_,q),this.renderedExtent_=q,this.renderedPixelRatio=f,this.renderedProjection=p,this.manageTilePyramid(e,v,y,f,p,C,R,m.getPreload()),this.scheduleExpireCache(e,v),this.postRender(Q,e),u.extent&&Q.restore(),G!==N.style.transform&&(N.style.transform=G),this.container},u.prototype.drawTileImage=function(e,t,r,i,n,o,a,s,d){var u=this.getTileImage(e);if(u){var h=(0,l.getUid)(this),p=s?e.getAlpha(h,t.time):1,c=d*p,g=c!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,i,n,o),g&&this.context.restore(),1!==p?t.animate=!0:s&&e.endTransition(h)}},u.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},u.prototype.getTileImage=function(e){return e.getImage()},u.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=(0,l.getUid)(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}},u.prototype.updateUsedTiles=function(e,t,r){var i=(0,l.getUid)(t);i in e||(e[i]={}),e[i][r.getKey()]=!0},u.prototype.manageTilePyramid=function(e,t,i,n,o,a,s,d,u){var h=(0,l.getUid)(t);h in e.wantedTiles||(e.wantedTiles[h]={});var p,c,g,T,f,m,v=e.wantedTiles[h],x=e.tileQueue,y=0;for(m=i.getMinZoom();m<=s;++m)for(c=i.getTileRangeForExtentAndZ(a,m,c),g=i.getResolution(m),T=c.minX;T<=c.maxX;++T)for(f=c.minY;f<=c.maxY;++f)s-m<=d?(++y,(p=t.getTile(m,T,f,n,o)).getState()==r.default.IDLE&&(v[p.getKey()]=!0,x.isKeyQueued(p.getKey())||x.enqueue([p,h,i.getTileCoordCenter(p.tileCoord),g])),void 0!==u&&u(p)):t.useTile(m,T,f,o);t.updateCacheSize(y,o)},u}(e.default);p.prototype.getLayer;var c=p;exports.default=c;
},{"./Layer.js":"vPfl","../../TileRange.js":"snev","../../TileState.js":"u3kG","../../transform.js":"P4eA","../../obj.js":"mH6q","../../extent.js":"QDir","../../render/canvas.js":"iAG7","../../proj.js":"Diht","../../util.js":"KniQ","../../array.js":"luEr"}],"BUEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseTile.js")),t=r(require("../renderer/canvas/TileLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.createRenderer=function(){return new t.default(this)},r}(e.default),u=o;exports.default=u;
},{"./BaseTile.js":"HTO1","../renderer/canvas/TileLayer.js":"hkMV"}],"IWZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./events/Target.js")),e=o(require("./events/EventType.js")),i=o(require("./TileState.js")),r=require("./util.js"),n=require("./easing.js");function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(t){function o(e,i,r){var n=t.call(this)||this,o=r||{};return n.tileCoord=e,n.state=i,n.interimTile=null,n.hifi=!0,n.key="",n.transition_=void 0===o.transition?250:o.transition,n.transitionStarts_={},n}return s(o,t),o.prototype.changed=function(){this.dispatchEvent(e.default.CHANGE)},o.prototype.release=function(){},o.prototype.getKey=function(){return this.key+"/"+this.tileCoord},o.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==i.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},o.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==i.default.LOADED){t.interimTile=null;break}t.getState()==i.default.LOADING?e=t:t.getState()==i.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},o.prototype.getTileCoord=function(){return this.tileCoord},o.prototype.getState=function(){return this.state},o.prototype.setState=function(t){if(this.state!==i.default.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},o.prototype.load=function(){(0,r.abstract)()},o.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:(0,n.easeIn)(r/this.transition_)},o.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},o.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},o}(t.default),u=a;exports.default=u;
},{"./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./TileState.js":"u3kG","./util.js":"KniQ","./easing.js":"IeCz"}],"TOsW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Tile.js")),e=r(require("./TileState.js")),i=require("./dom.js"),n=require("./Image.js");function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=function(t){function i(e,i,n,r,s,a){var o=t.call(this,e,i,a)||this;return o.crossOrigin_=r,o.src_=n,o.image_=new Image,null!==r&&(o.image_.crossOrigin=r),o.unlisten_=null,o.tileLoadFunction_=s,o}return s(i,t),i.prototype.getImage=function(){return this.image_},i.prototype.getKey=function(){return this.src_},i.prototype.handleImageError_=function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=o(),this.changed()},i.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()},i.prototype.load=function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,n.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},i.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},i}(t.default);function o(){var t=(0,i.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var u=a;exports.default=u;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG","./dom.js":"Xno5","./Image.js":"DHWK"}],"fF5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENABLE_RASTER_REPROJECTION=exports.ERROR_THRESHOLD=void 0;var R=.5;exports.ERROR_THRESHOLD=R;var E=!0;exports.ENABLE_RASTER_REPROJECTION=E;
},{}],"BiRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),i=require("../proj.js"),r=require("../math.js"),e=10,s=.25,o=function(){function o(s,o,n,a,h,u){this.sourceProj_=s,this.targetProj_=o;var d={},c=(0,i.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var i=t[0]+"/"+t[1];return d[i]||(d[i]=c(t)),d[i]},this.maxSourceExtent_=a,this.errorThresholdSquared_=h*h,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(a)==(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var _=(0,t.getTopLeft)(n),l=(0,t.getTopRight)(n),g=(0,t.getBottomRight)(n),f=(0,t.getBottomLeft)(n),W=this.transformInv_(_),v=this.transformInv_(l),m=this.transformInv_(g),x=this.transformInv_(f),p=e+(u?Math.max(0,Math.ceil((0,r.log2)((0,t.getArea)(n)/(u*u*256*256)))):0);if(this.addQuad_(_,l,g,f,W,v,m,x,p),this.wrapsXInSource_){var F=1/0;this.triangles_.forEach(function(t,i,r){F=Math.min(F,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-F>this.sourceWorldWidth_/2){var i=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];i[0][0]-F>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-F>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-F>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);var r=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-r<this.sourceWorldWidth_/2&&(t.source=i)}}.bind(this))}d={}}return o.prototype.addTriangle_=function(t,i,r,e,s,o){this.triangles_.push({source:[e,s,o],target:[t,i,r]})},o.prototype.addQuad_=function(i,e,o,n,a,h,u,d,c){var _=(0,t.boundingExtent)([a,h,u,d]),l=this.sourceWorldWidth_?(0,t.getWidth)(_)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&l>.5&&l<1,W=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=(0,t.boundingExtent)([i,e,o,n]);W=(0,t.getWidth)(v)/this.targetWorldWidth_>s||W}!f&&this.sourceProj_.isGlobal()&&l&&(W=l>s||W)}if(!(!W&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3]))||(0,t.intersects)(_,this.maxSourceExtent_)){var m=0;if(!(W||isFinite(a[0])&&isFinite(a[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(d[0])&&isFinite(d[1])))if(c>0)W=!0;else if(1!=(m=(isFinite(a[0])&&isFinite(a[1])?0:8)+(isFinite(h[0])&&isFinite(h[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(d[0])&&isFinite(d[1])?0:1))&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!W){var x=[(i[0]+o[0])/2,(i[1]+o[1])/2],p=this.transformInv_(x),F=void 0;if(f)F=((0,r.modulo)(a[0],g)+(0,r.modulo)(u[0],g))/2-(0,r.modulo)(p[0],g);else F=(a[0]+u[0])/2-p[0];var j=(a[1]+u[1])/2-p[1];W=F*F+j*j>this.errorThresholdSquared_}if(W){if(Math.abs(i[0]-o[0])<=Math.abs(i[1]-o[1])){var E=[(e[0]+o[0])/2,(e[1]+o[1])/2],I=this.transformInv_(E),P=[(n[0]+i[0])/2,(n[1]+i[1])/2],S=this.transformInv_(P);this.addQuad_(i,e,E,P,a,h,I,S,c-1),this.addQuad_(P,E,o,n,S,I,u,d,c-1)}else{var T=[(i[0]+e[0])/2,(i[1]+e[1])/2],M=this.transformInv_(T),b=[(o[0]+n[0])/2,(o[1]+n[1])/2],X=this.transformInv_(b);this.addQuad_(i,T,b,n,a,M,X,d,c-1),this.addQuad_(T,e,o,b,M,h,u,X,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(i,o,n,a,u,d),0==(14&m)&&this.addTriangle_(i,o,e,a,u,h),m&&(0==(13&m)&&this.addTriangle_(e,n,i,h,d,a),0==(7&m)&&this.addTriangle_(e,n,o,h,d,u))}},o.prototype.calculateSourceExtent=function(){var i=(0,t.createEmpty)();return this.triangles_.forEach(function(r,e,s){var o=r.source;(0,t.extendCoordinate)(i,o[0]),(0,t.extendCoordinate)(i,o[1]),(0,t.extendCoordinate)(i,o[2])}),i},o.prototype.getTriangles=function(){return this.triangles_},o}(),n=o;exports.default=n;
},{"../extent.js":"QDir","../proj.js":"Diht","../math.js":"B96G"}],"a8mu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IMAGE_SMOOTHING_DISABLED=exports.DEFAULT_WMS_VERSION=void 0;var e="1.3.0";exports.DEFAULT_WMS_VERSION=e;var o={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};exports.IMAGE_SMOOTHING_DISABLED=o;
},{}],"U255":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceResolution=u,exports.calculateSourceExtentResolution=g,exports.render=v;var e,t=require("./source/common.js"),r=require("./obj.js"),a=require("./extent.js"),n=require("./dom.js"),o=require("./proj.js"),i=require("./math.js");function s(e,t,r,a,n){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(a,n),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,a)+1,Math.max(r,n)),e.restore()}function l(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function c(){if(void 0===e){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",s(t,4,5,4,0),s(t,4,5,0,5);var r=t.getImageData(0,0,3,3).data;e=l(r,0)||l(r,4)||l(r,8)}return e}function u(e,t,r,n){var i=(0,o.transform)(r,t,e),s=(0,o.getPointResolution)(t,n,r),l=t.getMetersPerUnit();void 0!==l&&(s*=l);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var u=e.getExtent();if(!u||(0,a.containsCoordinate)(u,i)){var g=(0,o.getPointResolution)(e,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function g(e,t,r,n){var o=(0,a.getCenter)(r),i=u(e,t,o,n);return(!isFinite(i)||i<=0)&&(0,a.forEachCorner)(r,function(r){return i=u(e,t,r,n),isFinite(i)&&i>0}),i}function v(e,o,s,l,u,g,v,h,f,m,d,x){var T=(0,n.createCanvasContext2D)(Math.round(s*e),Math.round(s*o));if((0,r.assign)(T,x),0===f.length)return T.canvas;function p(e){return Math.round(e*s)/s}T.scale(s,s),T.globalCompositeOperation="lighter";var M=(0,a.createEmpty)();f.forEach(function(e,t,r){(0,a.extend)(M,e.extent)});var b=(0,a.getWidth)(M),C=(0,a.getHeight)(M),E=(0,n.createCanvasContext2D)(Math.round(s*b/l),Math.round(s*C/l));(0,r.assign)(E,x);var P=s/l;f.forEach(function(e,t,r){var n=e.extent[0]-M[0],o=-(e.extent[3]-M[3]),i=(0,a.getWidth)(e.extent),s=(0,a.getHeight)(e.extent);e.image.width>0&&e.image.height>0&&E.drawImage(e.image,m,m,e.image.width-2*m,e.image.height-2*m,n*P,o*P,i*P,s*P)});var j=(0,a.getTopLeft)(v);return h.getTriangles().forEach(function(e,r,a){var n=e.source,o=e.target,u=n[0][0],v=n[0][1],h=n[1][0],f=n[1][1],m=n[2][0],d=n[2][1],b=p((o[0][0]-j[0])/g),C=p(-(o[0][1]-j[1])/g),P=p((o[1][0]-j[0])/g),S=p(-(o[1][1]-j[1])/g),q=p((o[2][0]-j[0])/g),I=p(-(o[2][1]-j[1])/g),O=u,y=v;u=0,v=0;var D=[[h-=O,f-=y,0,0,P-b],[m-=O,d-=y,0,0,q-b],[0,0,h,f,S-C],[0,0,m,d,I-C]],R=(0,i.solveLinearSystem)(D);if(R){if(T.save(),T.beginPath(),c()||x===t.IMAGE_SMOOTHING_DISABLED){T.moveTo(P,S);for(var w=b-P,_=C-S,k=0;k<4;k++)T.lineTo(P+p((k+1)*w/4),S+p(k*_/3)),3!=k&&T.lineTo(P+p((k+1)*w/4),S+p((k+1)*_/3));T.lineTo(q,I)}else T.moveTo(P,S),T.lineTo(b,C),T.lineTo(q,I);T.clip(),T.transform(R[0],R[2],R[1],R[3],b,C),T.translate(M[0]-O,M[3]-y),T.scale(l/s,-l/s),T.drawImage(E.canvas,0,0),T.restore()}}),d&&(T.save(),T.globalCompositeOperation="source-over",T.strokeStyle="black",T.lineWidth=1,h.getTriangles().forEach(function(e,t,r){var a=e.target,n=(a[0][0]-j[0])/g,o=-(a[0][1]-j[1])/g,i=(a[1][0]-j[0])/g,s=-(a[1][1]-j[1])/g,l=(a[2][0]-j[0])/g,c=-(a[2][1]-j[1])/g;T.beginPath(),T.moveTo(i,s),T.lineTo(n,o),T.lineTo(l,c),T.closePath(),T.stroke()}),T.restore()),T.canvas}
},{"./source/common.js":"a8mu","./obj.js":"mH6q","./extent.js":"QDir","./dom.js":"Xno5","./proj.js":"Diht","./math.js":"B96G"}],"WlOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=l(require("../events/EventType.js")),r=l(require("../Tile.js")),i=l(require("../TileState.js")),s=l(require("./Triangulation.js")),o=require("../reproj.js"),n=require("../math.js"),u=require("../extent.js"),a=require("../events.js");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),d=function(r){function l(t,a,l,c,d,_,f,h,g,p,T,E){var v=r.call(this,d,i.default.IDLE)||this;v.renderEdges_=void 0!==T&&T,v.contextOptions_=E,v.pixelRatio_=f,v.gutter_=h,v.canvas_=null,v.sourceTileGrid_=a,v.targetTileGrid_=c,v.wrappedTileCoord_=_||d,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var y=c.getTileCoordExtent(v.wrappedTileCoord_),x=v.targetTileGrid_.getExtent(),R=v.sourceTileGrid_.getExtent(),j=x?(0,u.getIntersection)(y,x):y;if(0===(0,u.getArea)(j))return v.state=i.default.EMPTY,v;var O=t.getExtent();O&&(R=R?(0,u.getIntersection)(R,O):O);var m=c.getResolution(v.wrappedTileCoord_[0]),L=(0,o.calculateSourceExtentResolution)(t,l,j,m);if(!isFinite(L)||L<=0)return v.state=i.default.EMPTY,v;var D=void 0!==p?p:e.ERROR_THRESHOLD;if(v.triangulation_=new s.default(t,l,j,R,L*D,m),0===v.triangulation_.getTriangles().length)return v.state=i.default.EMPTY,v;v.sourceZ_=a.getZForResolution(L);var G=v.triangulation_.calculateSourceExtent();if(R&&(t.canWrapX()?(G[1]=(0,n.clamp)(G[1],R[1],R[3]),G[3]=(0,n.clamp)(G[3],R[1],R[3])):G=(0,u.getIntersection)(G,R)),(0,u.getArea)(G)){for(var I=a.getTileRangeForExtentAndZ(G,v.sourceZ_),S=I.minX;S<=I.maxX;S++)for(var A=I.minY;A<=I.maxY;A++){var C=g(v.sourceZ_,S,A,f);C&&v.sourceTiles_.push(C)}0===v.sourceTiles_.length&&(v.state=i.default.EMPTY)}else v.state=i.default.EMPTY;return v}return c(l,r),l.prototype.getImage=function(){return this.canvas_},l.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,r,s){t&&t.getState()==i.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=i.default.ERROR;else{var t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),s="number"==typeof r?r:r[0],n="number"==typeof r?r:r[1],u=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,o.render)(s,n,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),u,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=i.default.LOADED}this.changed()},l.prototype.load=function(){if(this.state==i.default.IDLE){this.state=i.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(r,s,o){var n=r.getState();if(n==i.default.IDLE||n==i.default.LOADING){e++;var u=(0,a.listen)(r,t.default.CHANGE,function(t){var s=r.getState();s!=i.default.LOADED&&s!=i.default.ERROR&&s!=i.default.EMPTY||((0,a.unlistenByKey)(u),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),this.sourceTiles_.forEach(function(e,t,r){e.getState()==i.default.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},l.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(a.unlistenByKey),this.sourcesListenerKeys_=null},l}(r.default),_=d;exports.default=_;
},{"./common.js":"fF5X","../events/EventType.js":"C8cu","../Tile.js":"IWZI","../TileState.js":"u3kG","./Triangulation.js":"BiRY","../reproj.js":"U255","../math.js":"B96G","../extent.js":"QDir","../events.js":"UqnM"}],"oMDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=function(){function t(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},t.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},t.prototype.get=function(t,s){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},t.prototype.remove=function(t){var s=this.entries_[t];return(0,e.assert)(void 0!==s,15),s===this.newest_?(this.newest_=s.older,this.newest_&&(this.newest_.newer=null)):s===this.oldest_?(this.oldest_=s.newer,this.oldest_&&(this.oldest_.older=null)):(s.newer.older=s.older,s.older.newer=s.newer),delete this.entries_[t],--this.count_,s.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var e,t=new Array(this.count_),s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.key_;return t},t.prototype.getValues=function(){var e,t=new Array(this.count_),s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.value_;return t},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},t.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},t.prototype.set=function(t,s){(0,e.assert)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:s};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(e){this.highWaterMark=e},t}(),s=t;exports.default=s;
},{"../asserts.js":"fLG6"}],"faTr":[function(require,module,exports) {
"use strict";function e(e,t,n,r){return void 0!==r?(r[0]=e,r[1]=t,r[2]=n,r):[e,t,n]}function t(e,t,n){return e+"/"+t+"/"+n}function n(e){return t(e[0],e[1],e[2])}function r(e){return e.split("/").map(Number)}function o(e){return(e[1]<<e[0])+e[2]}function u(e,t){var n=e[0],r=e[1],o=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;var u,i=t.getExtent();return!(u=i?t.getTileRangeForExtentAndZ(i,n):t.getFullTileRange(n))||u.containsXY(r,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=e,exports.getKeyZXY=t,exports.getKey=n,exports.fromKey=r,exports.hash=o,exports.withinExtentAndZ=u;
},{}],"YFDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./structs/LRUCache.js")),e=require("./tilecoord.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),r.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},r.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),r=(0,e.fromKey)(t)[0];this.forEach(function(t){t.tileCoord[0]!==r&&(this.remove((0,e.getKey)(t.tileCoord)),t.release())}.bind(this))}},r}(t.default),i=n;exports.default=i;
},{"./structs/LRUCache.js":"oMDz","./tilecoord.js":"faTr"}],"KXhD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"dpZ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../TileRange.js")),e=require("./common.js"),i=require("../asserts.js"),o=require("../math.js"),r=require("../extent.js"),n=require("../tilecoord.js"),s=require("../array.js"),l=require("../size.js");function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function h(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=o?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}var a=[0,0,0],g=function(){function u(o){var n;if(this.minZoom=void 0!==o.minZoom?o.minZoom:0,this.resolutions_=o.resolutions,(0,i.assert)((0,s.isSorted)(this.resolutions_,function(t,e){return e-t},!0),17),!o.origins)for(var l=0,u=this.resolutions_.length-1;l<u;++l)if(n){if(this.resolutions_[l]/this.resolutions_[l+1]!==n){n=void 0;break}}else n=this.resolutions_[l]/this.resolutions_[l+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==o.origin?o.origin:null,this.origins_=null,void 0!==o.origins&&(this.origins_=o.origins,(0,i.assert)(this.origins_.length==this.resolutions_.length,20));var h=o.extent;void 0===h||this.origin_||this.origins_||(this.origin_=(0,r.getTopLeft)(h)),(0,i.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==o.tileSizes&&(this.tileSizes_=o.tileSizes,(0,i.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==o.tileSize?o.tileSize:this.tileSizes_?null:e.DEFAULT_TILE_SIZE,(0,i.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==o.sizes?this.fullTileRanges_=o.sizes.map(function(e,i){return new t.default(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1))},this):h&&this.calculateTileRanges_(h)}return u.prototype.forEachTileCoord=function(t,e,i){for(var o=this.getTileRangeForExtentAndZ(t,e),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,l=o.maxY;s<=l;++s)i([e,r,s])},u.prototype.forEachTileCoordParentTileRange=function(e,i,o,r){var n,s,l,u=null,h=e[0]-1;for(2===this.zoomFactor_?(s=e[1],l=e[2]):u=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),n=(0,t.createOrUpdate)(s,s,l,l,o)):n=this.getTileRangeForExtentAndZ(u,h,o),i(h,n))return!0;--h}return!1},u.prototype.getExtent=function(){return this.extent_},u.prototype.getMaxZoom=function(){return this.maxZoom},u.prototype.getMinZoom=function(){return this.minZoom},u.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},u.prototype.getResolution=function(t){return this.resolutions_[t]},u.prototype.getResolutions=function(){return this.resolutions_},u.prototype.getTileCoordChildTileRange=function(e,i,o){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*e[1],n=2*e[2];return(0,t.createOrUpdate)(r,r+1,n,n+1,i)}var s=this.getTileCoordExtent(e,o);return this.getTileRangeForExtentAndZ(s,e[0]+1,i)}return null},u.prototype.getTileRangeExtent=function(t,e,i){var o=this.getOrigin(t),n=this.getResolution(t),s=(0,l.toSize)(this.getTileSize(t),this.tmpSize_),u=o[0]+e.minX*s[0]*n,h=o[0]+(e.maxX+1)*s[0]*n,a=o[1]+e.minY*s[1]*n,g=o[1]+(e.maxY+1)*s[1]*n;return(0,r.createOrUpdate)(u,a,h,g,i)},u.prototype.getTileRangeForExtentAndZ=function(e,i,o){var r=a;this.getTileCoordForXYAndZ_(e[0],e[3],i,!1,r);var n=r[1],s=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],i,!0,r),(0,t.createOrUpdate)(n,r[1],s,r[2],o)},u.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=(0,l.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*i,e[1]-(t[2]+.5)*o[1]*i]},u.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),o=this.getResolution(t[0]),n=(0,l.toSize)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*n[0]*o,u=i[1]-(t[2]+1)*n[1]*o,h=s+n[0]*o,a=u+n[1]*o;return(0,r.createOrUpdate)(s,u,h,a,e)},u.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},u.prototype.getTileCoordForXYAndResolution_=function(t,e,i,o,r){var s=this.getZForResolution(i),u=i/this.getResolution(s),h=this.getOrigin(s),a=(0,l.toSize)(this.getTileSize(s),this.tmpSize_),g=o?.5:0,p=o?.5:0,f=Math.floor((t-h[0])/i+g),_=Math.floor((h[1]-e)/i+p),c=u*f/a[0],d=u*_/a[1];return o?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d)),(0,n.createOrUpdate)(s,c,d,r)},u.prototype.getTileCoordForXYAndZ_=function(t,e,i,o,r){var s=this.getOrigin(i),u=this.getResolution(i),h=(0,l.toSize)(this.getTileSize(i),this.tmpSize_),a=o?.5:0,g=o?.5:0,p=Math.floor((t-s[0])/u+a),f=Math.floor((s[1]-e)/u+g),_=p/h[0],c=f/h[1];return o?(_=Math.ceil(_)-1,c=Math.ceil(c)-1):(_=Math.floor(_),c=Math.floor(c)),(0,n.createOrUpdate)(i,_,c,r)},u.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},u.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},u.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},u.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},u.prototype.getZForResolution=function(t,e){var i=(0,s.linearFindNearest)(this.resolutions_,t,e||0);return(0,o.clamp)(i,this.minZoom,this.maxZoom)},u.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),o=this.minZoom;o<e;++o)i[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=i},u}(),p=g;exports.default=p;
},{"../TileRange.js":"snev","./common.js":"mOEX","../asserts.js":"fLG6","../math.js":"B96G","../extent.js":"QDir","../tilecoord.js":"faTr","../array.js":"luEr","../size.js":"TAHd"}],"ExRx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getForProjection=s,exports.wrapX=l,exports.createForExtent=d,exports.createXYZ=c,exports.createForProjection=x,exports.extentFromProjection=g;var e=a(require("./extent/Corner.js")),t=a(require("./tilegrid/TileGrid.js")),r=a(require("./proj/Units.js")),o=require("./tilegrid/common.js"),i=require("./proj.js"),n=require("./extent.js"),u=require("./size.js");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.getDefaultTileGrid();return t||(t=x(e),e.setDefaultTileGrid(t)),t}function l(e,t,r){var o=t[0],i=e.getTileCoordCenter(t),u=g(r);if((0,n.containsCoordinate)(u,i))return t;var a=(0,n.getWidth)(u),s=Math.ceil((u[0]-i[0])/a);return i[0]+=a*s,e.getTileCoordForCoordAndZ(i,o)}function d(r,o,i,u){var a=void 0!==u?u:e.default.TOP_LEFT,s=f(r,o,i);return new t.default({extent:r,origin:(0,n.getCorner)(r,a),resolutions:s,tileSize:i})}function c(e){var r=e||{},o=r.extent||(0,i.get)("EPSG:3857").getExtent(),n={extent:o,minZoom:r.minZoom,tileSize:r.tileSize,resolutions:f(o,r.maxZoom,r.tileSize,r.maxResolution)};return new t.default(n)}function f(e,t,r,i){for(var a=void 0!==t?t:o.DEFAULT_MAX_ZOOM,s=(0,n.getHeight)(e),l=(0,n.getWidth)(e),d=(0,u.toSize)(void 0!==r?r:o.DEFAULT_TILE_SIZE),c=i>0?i:Math.max(l/d[0],s/d[1]),f=a+1,x=new Array(f),g=0;g<f;++g)x[g]=c/Math.pow(2,g);return x}function x(e,t,r,o){return d(g(e),t,r,o)}function g(e){var t=(e=(0,i.get)(e)).getExtent();if(!t){var o=180*i.METERS_PER_UNIT[r.default.DEGREES]/e.getMetersPerUnit();t=(0,n.createOrUpdate)(-o,-o,o,o)}return t}
},{"./extent/Corner.js":"urGY","./tilegrid/TileGrid.js":"dpZ6","./proj/Units.js":"yZx6","./tilegrid/common.js":"mOEX","./proj.js":"Diht","./extent.js":"QDir","./size.js":"TAHd"}],"JECm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var t=c(require("../events/Event.js")),e=c(require("./Source.js")),i=c(require("../TileCache.js")),r=c(require("../TileState.js")),o=require("../util.js"),n=require("../proj.js"),u=require("../tilecoord.js"),a=require("../tilegrid.js"),l=require("../size.js");function c(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&(0,l.toSize)(o.getTileSize(o.getMinZoom()),[256,256]),r.tileCache=new i.default(e.cacheSize||0),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return p(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,o){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var a,l,c,p=!0,s=i.minX;s<=i.maxX;++s)for(var h=i.minY;h<=i.maxY;++h)l=(0,u.getKeyZXY)(e,s,h),c=!1,n.containsKey(l)&&(c=(a=n.get(l)).getState()===r.default.LOADED)&&(c=!1!==o(a)),c||(p=!1);return p},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,r,n){return(0,o.abstract)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:(0,a.getForProjection)(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!(0,n.equivalent)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),n=(0,l.toSize)(r.getTileSize(t),this.tmpSize);return 1==o?n:(0,l.scale)(n,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=(0,a.wrapX)(r,t,i)),(0,u.withinExtentAndZ)(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,e,i,r){},e}(e.default),h=function(t){function e(e,i){var r=t.call(this,e)||this;return r.tile=i,r}return p(e,t),e}(t.default);exports.TileSourceEvent=h;var f=s;exports.default=f;
},{"../events/Event.js":"fKNg","./Source.js":"H38a","../TileCache.js":"YFDe","../TileState.js":"u3kG","../util.js":"KniQ","../proj.js":"Diht","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../size.js":"TAHd"}],"p1vZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.nullTileUrlFunction=i,exports.expandUrl=u;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,i=/\{-y\}/g;return function(u,c,l){return u?e.replace(n,u[0].toString()).replace(o,u[1].toString()).replace(a,u[2].toString()).replace(i,function(){var e=u[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()-u[2]-1).toString()}):void 0}}function o(r,e){for(var t=r.length,o=new Array(t),i=0;i<t;++i)o[i]=n(r[i],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var i=(0,t.hash)(n),u=(0,e.modulo)(i,r.length);return r[u](n,o,a)}}}function i(r,e,t){}function u(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n=t[1].charCodeAt(0),o=t[2].charCodeAt(0),a=void 0;for(a=n;a<=o;++a)e.push(r.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r)){for(var i=parseInt(t[2],10),u=parseInt(t[1],10);u<=i;u++)e.push(r.replace(t[0],u.toString()));return e}return e.push(r),e}
},{"./asserts.js":"fLG6","./math.js":"B96G","./tilecoord.js":"faTr"}],"uv9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./TileEventType.js")),e=u(require("./Tile.js")),i=s(require("../TileState.js")),n=require("../tileurlfunction.js"),r=require("../tilecoord.js"),o=require("../util.js");function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=n?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(l){function u(t){var e=l.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return e.generateTileUrlFunction_=e.tileUrlFunction===u.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction.bind(e)),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return a(u,l),u.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},u.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},u.prototype.getUrls=function(){return this.urls},u.prototype.handleTileChange=function(n){var r,l=n.target,u=(0,o.getUid)(l),s=l.getState();s==i.default.LOADING?(this.tileLoadingKeys_[u]=!0,r=t.default.TILELOADSTART):u in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[u],r=s==i.default.ERROR?t.default.TILELOADERROR:s==i.default.LOADED?t.default.TILELOADEND:void 0),null!=r&&this.dispatchEvent(new e.TileSourceEvent(r,l))},u.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},u.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},u.prototype.setUrl=function(t){var e=(0,n.expandUrl)(t);this.urls=e,this.setUrls(e)},u.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,n.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)},u.prototype.tileUrlFunction=function(t,e,i){},u.prototype.useTile=function(t,e,i){var n=(0,r.getKeyZXY)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},u}(e.default),p=c;exports.default=p;
},{"./TileEventType.js":"KXhD","./Tile.js":"JECm","../TileState.js":"u3kG","../tileurlfunction.js":"p1vZ","../tilecoord.js":"faTr","../util.js":"KniQ"}],"udAI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../events/EventType.js")),t=p(require("../ImageTile.js")),i=p(require("../reproj/Tile.js")),r=p(require("../TileCache.js")),o=p(require("../TileState.js")),n=p(require("./UrlTile.js")),c=require("../reproj/common.js"),s=require("./common.js"),l=require("../proj.js"),a=require("../tilecoord.js"),h=require("../tilegrid.js"),u=require("../util.js");function p(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),E=function(n){function p(e){var i=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:g,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:t.default,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.contextOptions_=!1===e.imageSmoothing?s.IMAGE_SMOOTHING_DISABLED:void 0,i.renderReprojectionEdges_=!1,i}return d(p,n),p.prototype.canExpireCache=function(){if(!c.ENABLE_RASTER_REPROJECTION)return n.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},p.prototype.expireCache=function(e,t){if(c.ENABLE_RASTER_REPROJECTION){var i=this.getTileCacheForProjection(e);for(var r in this.tileCache.expireCache(this.tileCache==i?t:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[r];o.expireCache(o==i?t:{})}}else n.prototype.expireCache.call(this,e,t)},p.prototype.getContextOptions=function(){return this.contextOptions_},p.prototype.getGutterForProjection=function(e){return c.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e)?0:this.getGutter()},p.prototype.getGutter=function(){return 0},p.prototype.getKey=function(){return n.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},p.prototype.getOpaque=function(e){return!(c.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e))&&n.prototype.getOpaque.call(this,e)},p.prototype.getTileGridForProjection=function(e){if(!c.ENABLE_RASTER_REPROJECTION)return n.prototype.getTileGridForProjection.call(this,e);var t=this.getProjection();if(!this.tileGrid||t&&!(0,l.equivalent)(t,e)){var i=(0,u.getUid)(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,h.getForProjection)(e)),this.tileGridForProjection[i]}return this.tileGrid},p.prototype.getTileCacheForProjection=function(e){if(!c.ENABLE_RASTER_REPROJECTION)return n.prototype.getTileCacheForProjection.call(this,e);var t=this.getProjection();if(!t||(0,l.equivalent)(t,e))return this.tileCache;var i=(0,u.getUid)(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new r.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},p.prototype.createTile_=function(t,i,r,n,c,s){var l=[t,i,r],a=this.getTileCoordForTileUrlFunction(l,c),h=a?this.tileUrlFunction(a,n,c):void 0,u=new this.tileClass(l,void 0!==h?o.default.IDLE:o.default.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=s,u.addEventListener(e.default.CHANGE,this.handleTileChange.bind(this)),u},p.prototype.getTile=function(e,t,r,o,n){var s=this.getProjection();if(c.ENABLE_RASTER_REPROJECTION&&s&&n&&!(0,l.equivalent)(s,n)){var h=this.getTileCacheForProjection(n),u=[e,t,r],p=void 0,d=(0,a.getKey)(u);h.containsKey(d)&&(p=h.get(d));var E=this.getKey();if(p&&p.key==E)return p;var g=this.getTileGridForProjection(s),j=this.getTileGridForProjection(n),f=this.getTileCoordForTileUrlFunction(u,n),T=new i.default(s,g,n,j,u,f,this.getTilePixelRatio(o),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return T.key=E,p?(T.interimTile=p,T.refreshInterimChain(),h.replace(d,T)):h.set(d,T),T}return this.getTileInternal(e,t,r,o,s||n)},p.prototype.getTileInternal=function(e,t,i,r,n){var c=null,s=(0,a.getKeyZXY)(e,t,i),l=this.getKey();if(this.tileCache.containsKey(s)){if((c=this.tileCache.get(s)).key!=l){var h=c;c=this.createTile_(e,t,i,r,n,l),h.getState()==o.default.IDLE?c.interimTile=h.interimTile:c.interimTile=h,c.refreshInterimChain(),this.tileCache.replace(s,c)}}else c=this.createTile_(e,t,i,r,n,l),this.tileCache.set(s,c);return c},p.prototype.setRenderReprojectionEdges=function(e){if(c.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},p.prototype.setTileGridForProjection=function(e,t){if(c.ENABLE_RASTER_REPROJECTION){var i=(0,l.get)(e);if(i){var r=(0,u.getUid)(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}},p}(n.default);function g(e,t){e.getImage().src=t}var j=E;exports.default=j;
},{"../events/EventType.js":"C8cu","../ImageTile.js":"TOsW","../reproj/Tile.js":"WlOd","../TileCache.js":"YFDe","../TileState.js":"u3kG","./UrlTile.js":"uv9E","../reproj/common.js":"fF5X","./common.js":"a8mu","../proj.js":"Diht","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../util.js":"KniQ"}],"knlU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./TileImage.js")),o=require("../tilegrid.js");function i(t){return t&&t.__esModule?t:{default:t}}var e=function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),r=function(t){function i(i){var e=i||{},r=void 0!==e.projection?e.projection:"EPSG:3857",n=void 0!==e.tileGrid?e.tileGrid:(0,o.createXYZ)({extent:(0,o.extentFromProjection)(r),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});return t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,opaque:e.opaque,projection:r,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this}return e(i,t),i}(t.default),n=r;exports.default=n;
},{"./TileImage.js":"udAI","../tilegrid.js":"ExRx"}],"Rmo4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ATTRIBUTION=void 0;var t=o(require("./XYZ.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(o,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])})(o,r)};return function(o,r){function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),e='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';exports.ATTRIBUTION=e;var n=function(t){function o(o){var r,n=o||{};r=void 0!==n.attributions?n.attributions:[e];var i=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",a=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:i,imageSmoothing:n.imageSmoothing,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:a,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return r(o,t),o}(t.default),i=n;exports.default=i;
},{"./XYZ.js":"knlU"}],"SU9K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonp=t;var e=require("./util.js");function t(t,n,o,i){var c=document.createElement("script"),r="olc_"+(0,e.getUid)(n);function a(){delete window[r],c.parentNode.removeChild(c)}c.async=!0,c.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+r;var d=setTimeout(function(){a(),o&&o()},1e4);window[r]=function(e){clearTimeout(d),a(),n(e)},document.getElementsByTagName("head")[0].appendChild(c)}
},{"./util.js":"KniQ"}],"KSjo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quadKey=l,exports.default=void 0;var e=u(require("./State.js")),t=u(require("./TileImage.js")),r=require("../extent.js"),i=require("../tileurlfunction.js"),o=require("../tilecoord.js"),a=require("../tilegrid.js"),n=require("../proj.js"),s=require("../net.js");function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function l(e){var t,r,i=e[0],o=new Array(i),a=1<<i-1;for(t=0;t<i;++t)r=48,e[1]&a&&(r+=1),e[2]&a&&(r+=2),o[t]=String.fromCharCode(r),a>>=1;return o.join("")}var d='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>',m=function(t){function u(r){var i=this,o=void 0!==r.hidpi&&r.hidpi;(i=t.call(this,{cacheSize:r.cacheSize,crossOrigin:"anonymous",imageSmoothing:r.imageSmoothing,opaque:!0,projection:(0,n.get)("EPSG:3857"),reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:e.default.LOADING,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:o?2:1,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition})||this).hidpi_=o,i.culture_=void 0!==r.culture?r.culture:"en-us",i.maxZoom_=void 0!==r.maxZoom?r.maxZoom:-1,i.apiKey_=r.key,i.imagerySet_=r.imagerySet;var a="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+i.apiKey_+"&c="+i.culture_;return(0,s.jsonp)(a,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i}return c(u,t),u.prototype.getApiKey=function(){return this.apiKey_},u.prototype.getImagerySet=function(){return this.imagerySet_},u.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var s=t.resourceSets[0].resources[0],u=-1==this.maxZoom_?s.zoomMax:this.maxZoom_,c=this.getProjection(),m=(0,a.extentFromProjection)(c),p=this.hidpi_?2:1,h=s.imageWidth==s.imageHeight?s.imageWidth/p:[s.imageWidth/p,s.imageHeight/p],g=(0,a.createXYZ)({extent:m,minZoom:s.zoomMin,maxZoom:u,tileSize:h});this.tileGrid=g;var f=this.culture_,v=this.hidpi_;if(this.tileUrlFunction=(0,i.createFromTileUrlFunctions)(s.imageUrlSubdomains.map(function(e){var t=[0,0,0],r=s.imageUrl.replace("{subdomain}",e).replace("{culture}",f);return function(e,i,a){if(e){(0,o.createOrUpdate)(e[0],e[1],e[2],t);var n=r;return v&&(n+="&dpi=d1&device=mobile"),n.replace("{quadkey}",l(t))}}})),s.imageryProviders){var y=(0,n.getTransformFromProjections)((0,n.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(e){var t=[],i=e.viewState,o=this.getTileGrid(),a=o.getZForResolution(i.resolution,this.zDirection),n=o.getTileCoordForCoordAndZ(i.center,a)[0];return s.imageryProviders.map(function(i){for(var o=!1,a=i.coverageAreas,s=0,u=a.length;s<u;++s){var c=a[s];if(n>=c.zoomMin&&n<=c.zoomMax){var l=c.bbox,d=[l[1],l[0],l[3],l[2]],m=(0,r.applyTransform)(d,y);if((0,r.intersects)(m,e.extent)){o=!0;break}}}o&&t.push(i.attribution)}),t.push(d),t}.bind(this))}this.setState(e.default.READY)}else this.setState(e.default.ERROR)},u}(t.default),p=m;exports.default=p;
},{"./State.js":"iC8j","./TileImage.js":"udAI","../extent.js":"QDir","../tileurlfunction.js":"p1vZ","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../proj.js":"Diht","../net.js":"SU9K"}],"mXwm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};exports.default=e;
},{}],"n7G7":[function(require,module,exports) {
"use strict";function e(e,n){var o=[];Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&o.push(e+"="+encodeURIComponent(n[e]))});var r=o.join("&");return(e=-1===(e=e.replace(/[?&]$/,"")).indexOf("?")?e+"?":e+"&")+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendParams=e;
},{}],"IcO7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=g(require("./TileImage.js")),r=g(require("./WMSServerType.js")),i=require("../uri.js"),o=require("../asserts.js"),s=require("../obj.js"),a=require("../extent.js"),n=require("../size.js"),u=require("../reproj.js"),p=require("../string.js"),h=require("../proj.js"),l=require("../math.js"),_=require("../tilecoord.js");function g(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),S=function(e){function g(t){var r=this,i=t||{},o=i.params||{},s=!("TRANSPARENT"in o)||o.TRANSPARENT;return(r=e.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:!s,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition})||this).gutter_=void 0!==i.gutter?i.gutter:0,r.params_=o,r.v13_=!0,r.serverType_=i.serverType,r.hidpi_=void 0===i.hidpi||i.hidpi,r.tmpExtent_=(0,a.createEmpty)(),r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return c(g,e),g.prototype.getFeatureInfoUrl=function(e,r,i,o){var p=(0,h.get)(i),l=this.getProjection(),_=this.getTileGrid();_||(_=this.getTileGridForProjection(p));var g=_.getZForResolution(r,this.zDirection),c=_.getTileCoordForCoordAndZ(e,g);if(!(_.getResolutions().length<=c[0])){var S=_.getResolution(c[0]),f=_.getTileCoordExtent(c,this.tmpExtent_),d=(0,n.toSize)(_.getTileSize(c[0]),this.tmpSize),E=this.gutter_;0!==E&&(d=(0,n.buffer)(d,E,this.tmpSize),f=(0,a.buffer)(f,S*E,f)),l&&l!==p&&(S=(0,u.calculateSourceResolution)(l,p,e,S),f=(0,h.transformExtent)(f,p,l),e=(0,h.transform)(e,p,l));var R={SERVICE:"WMS",VERSION:t.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,s.assign)(R,this.params_,o);var T=Math.floor((e[0]-f[0])/S),v=Math.floor((f[3]-e[1])/S);return R[this.v13_?"I":"X"]=T,R[this.v13_?"J":"Y"]=v,this.getRequestUrl_(c,d,f,1,l||p,R)}},g.prototype.getLegendUrl=function(e,r){if(void 0!==this.urls[0]){var o={SERVICE:"WMS",VERSION:t.DEFAULT_WMS_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===r||void 0===r.LAYER){var a=this.params_.LAYERS;if(!(!Array.isArray(a)||1===a.length))return;o.LAYER=a}if(void 0!==e){var n=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=e*n*39.37*(25.4/.28)}return(0,s.assign)(o,r),(0,i.appendParams)(this.urls[0],o)}},g.prototype.getGutter=function(){return this.gutter_},g.prototype.getParams=function(){return this.params_},g.prototype.getRequestUrl_=function(t,e,s,a,n,u){var p=this.urls;if(p){if(u.WIDTH=e[0],u.HEIGHT=e[1],u[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(u.STYLES=""),1!=a)switch(this.serverType_){case r.default.GEOSERVER:var h=90*a+.5|0;"FORMAT_OPTIONS"in u?u.FORMAT_OPTIONS+=";dpi:"+h:u.FORMAT_OPTIONS="dpi:"+h;break;case r.default.MAPSERVER:u.MAP_RESOLUTION=90*a;break;case r.default.CARMENTA_SERVER:case r.default.QGIS:u.DPI=90*a;break;default:(0,o.assert)(!1,52)}var g,c=n.getAxisOrientation(),S=s;if(this.v13_&&"ne"==c.substr(0,2)){var f=void 0;f=s[0],S[0]=s[1],S[1]=f,f=s[2],S[2]=s[3],S[3]=f}if(u.BBOX=S.join(","),1==p.length)g=p[0];else g=p[(0,l.modulo)((0,_.hash)(t),p.length)];return(0,i.appendParams)(g,u)}},g.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},g.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},g.prototype.updateParams=function(t){(0,s.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},g.prototype.updateV13_=function(){var e=this.params_.VERSION||t.DEFAULT_WMS_VERSION;this.v13_=(0,p.compareVersions)(e,"1.3")>=0},g.prototype.tileUrlFunction=function(e,r,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=e[0])){1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var u=o.getResolution(e[0]),p=o.getTileCoordExtent(e,this.tmpExtent_),h=(0,n.toSize)(o.getTileSize(e[0]),this.tmpSize),l=this.gutter_;0!==l&&(h=(0,n.buffer)(h,l,this.tmpSize),p=(0,a.buffer)(p,u*l,p)),1!=r&&(h=(0,n.scale)(h,r,this.tmpSize));var _={SERVICE:"WMS",VERSION:t.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return(0,s.assign)(_,this.params_),this.getRequestUrl_(e,h,p,r,i,_)}},g}(e.default),f=S;exports.default=f;
},{"./common.js":"a8mu","./TileImage.js":"udAI","./WMSServerType.js":"mXwm","../uri.js":"n7G7","../asserts.js":"fLG6","../obj.js":"mH6q","../extent.js":"QDir","../size.js":"TAHd","../reproj.js":"U255","../string.js":"AiCK","../proj.js":"Diht","../math.js":"B96G","../tilecoord.js":"faTr"}],"HvLT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../events/EventType.js")),t=o(require("./Geometry.js")),r=o(require("./GeometryType.js")),i=require("../extent.js"),n=require("../events.js");function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),a=function(t){function o(e){var r=t.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return s(o,t),o.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(n.unlistenByKey),this.changeEventsKeys_.length=0},o.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,r=this.geometries_.length;t<r;++t)this.changeEventsKeys_.push((0,n.listen)(this.geometries_[t],e.default.CHANGE,this.changed,this))},o.prototype.clone=function(){var e=new o(null);return e.setGeometries(this.geometries_),e},o.prototype.closestPointXY=function(e,t,r,n){if(n<(0,i.closestSquaredDistanceXY)(this.getExtent(),e,t))return n;for(var o=this.geometries_,s=0,a=o.length;s<a;++s)n=o[s].closestPointXY(e,t,r,n);return n},o.prototype.containsXY=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)if(r[i].containsXY(e,t))return!0;return!1},o.prototype.computeExtent=function(e){(0,i.createOrUpdateEmpty)(e);for(var t=this.geometries_,r=0,n=t.length;r<n;++r)(0,i.extend)(e,t[r].getExtent());return e},o.prototype.getGeometries=function(){return u(this.geometries_)},o.prototype.getGeometriesArray=function(){return this.geometries_},o.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e},o.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,i=!1,n=0,s=r.length;n<s;++n){var a=r[n],u=a.getSimplifiedGeometry(e);t.push(u),u!==a&&(i=!0)}if(i){var h=new o(null);return h.setGeometriesArray(t),h}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},o.prototype.getType=function(){return r.default.GEOMETRY_COLLECTION},o.prototype.intersectsExtent=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1},o.prototype.isEmpty=function(){return 0===this.geometries_.length},o.prototype.rotate=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].rotate(e,t);this.changed()},o.prototype.scale=function(e,t,r){var n=r;n||(n=(0,i.getCenter)(this.getExtent()));for(var o=this.geometries_,s=0,a=o.length;s<a;++s)o[s].scale(e,t,n);this.changed()},o.prototype.setGeometries=function(e){this.setGeometriesArray(u(e))},o.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},o.prototype.applyTransform=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()},o.prototype.translate=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].translate(e,t);this.changed()},o.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},o}(t.default);function u(e){for(var t=[],r=0,i=e.length;r<i;++r)t.push(e[r].clone());return t}var h=a;exports.default=h;
},{"../events/EventType.js":"C8cu","./Geometry.js":"F8sI","./GeometryType.js":"lmV0","../extent.js":"QDir","../events.js":"UqnM"}],"Kylu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformGeometryWithOptions=u,exports.transformExtentWithOptions=c,exports.default=void 0;var t=n(require("../proj/Units.js")),e=require("../util.js"),r=require("../obj.js"),o=require("../proj.js");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function n(){this.dataProjection=null,this.defaultFeatureProjection=null}return n.prototype.getReadOptions=function(e,r){var n;if(r){var a=r.dataProjection?(0,o.get)(r.dataProjection):this.readProjection(e);r.extent&&a&&a.getUnits()===t.default.TILE_PIXELS&&(a=(0,o.get)(a)).setWorldExtent(r.extent),n={dataProjection:a,featureProjection:r.featureProjection}}return this.adaptOptions(n)},n.prototype.adaptOptions=function(t){return(0,r.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},n.prototype.getType=function(){return(0,e.abstract)()},n.prototype.readFeature=function(t,r){return(0,e.abstract)()},n.prototype.readFeatures=function(t,r){return(0,e.abstract)()},n.prototype.readGeometry=function(t,r){return(0,e.abstract)()},n.prototype.readProjection=function(t){return(0,e.abstract)()},n.prototype.writeFeature=function(t,r){return(0,e.abstract)()},n.prototype.writeFeatures=function(t,r){return(0,e.abstract)()},n.prototype.writeGeometry=function(t,r){return(0,e.abstract)()},n}(),i=a;function u(t,e,r){var n,a=r?(0,o.get)(r.featureProjection):null,i=r?(0,o.get)(r.dataProjection):null;if(n=a&&i&&!(0,o.equivalent)(a,i)?(e?t.clone():t).transform(e?a:i,e?i:a):t,e&&r&&void 0!==r.decimals){var u=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*u)/u;return t})}return n}function c(t,e){var r=e?(0,o.get)(e.featureProjection):null,n=e?(0,o.get)(e.dataProjection):null;return r&&n&&!(0,o.equivalent)(r,n)?(0,o.transformExtent)(t,n,r):t}exports.default=i;
},{"../proj/Units.js":"yZx6","../util.js":"KniQ","../obj.js":"mH6q","../proj.js":"Diht"}],"RA7M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Feature.js")),e=o(require("./FormatType.js")),r=require("../util.js");function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),u=function(t){function o(){return t.call(this)||this}return n(o,t),o.prototype.getType=function(){return e.default.JSON},o.prototype.readFeature=function(t,e){return this.readFeatureFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readFeatureFromObject=function(t,e){return(0,r.abstract)()},o.prototype.readFeaturesFromObject=function(t,e){return(0,r.abstract)()},o.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readGeometryFromObject=function(t,e){return(0,r.abstract)()},o.prototype.readProjection=function(t){return this.readProjectionFromObject(i(t))},o.prototype.readProjectionFromObject=function(t){return(0,r.abstract)()},o.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},o.prototype.writeFeatureObject=function(t,e){return(0,r.abstract)()},o.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},o.prototype.writeFeaturesObject=function(t,e){return(0,r.abstract)()},o.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},o.prototype.writeGeometryObject=function(t,e){return(0,r.abstract)()},o}(t.default);function i(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var a=u;exports.default=a;
},{"./Feature.js":"Kylu","./FormatType.js":"AbO3","../util.js":"KniQ"}],"qBlb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("../Feature.js")),t=y(require("../geom/GeometryCollection.js")),r=y(require("../geom/GeometryType.js")),o=y(require("./JSONFeature.js")),n=y(require("../geom/LineString.js")),a=y(require("../geom/MultiLineString.js")),i=y(require("../geom/MultiPoint.js")),u=y(require("../geom/MultiPolygon.js")),s=y(require("../geom/Point.js")),c=y(require("../geom/Polygon.js")),p=require("../asserts.js"),d=require("../obj.js"),f=require("../proj.js"),l=require("./Feature.js");function y(e){return e&&e.__esModule?e:{default:e}}var m=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),g=function(t){function r(e){var r=this,o=e||{};return(r=t.call(this)||this).dataProjection=(0,f.get)(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(r.defaultFeatureProjection=(0,f.get)(o.featureProjection)),r.geometryName_=o.geometryName,r.extractGeometryName_=o.extractGeometryName,r}return m(r,t),r.prototype.readFeatureFromObject=function(t,r){var o=null,n=O((o="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,r),a=new e.default;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&a.setGeometryName(o.geometry_name),a.setGeometry(n),"id"in o&&a.setId(o.id),o.properties&&a.setProperties(o.properties,!0),a},r.prototype.readFeaturesFromObject=function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,a=o.length;n<a;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r},r.prototype.readGeometryFromObject=function(e,t){return O(e,t)},r.prototype.readProjectionFromObject=function(e){var t,r=e.crs;return r?"name"==r.type?t=(0,f.get)(r.properties.name):"EPSG"===r.type?t=(0,f.get)("EPSG:"+r.properties.code):(0,p.assert)(!1,36):t=this.dataProjection,t},r.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(r.id=o),!e.hasProperties())return r;var n=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=v(a,t),delete n[e.getGeometryName()]),(0,d.isEmpty)(n)||(r.properties=n),r},r.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}},r.prototype.writeGeometryObject=function(e,t){return v(e,this.adaptOptions(t))},r}(o.default);function O(e,t){if(!e)return null;var o;switch(e.type){case r.default.POINT:o=P(e);break;case r.default.LINE_STRING:o=G(e);break;case r.default.POLYGON:o=h(e);break;case r.default.MULTI_POINT:o=N(e);break;case r.default.MULTI_LINE_STRING:o=_(e);break;case r.default.MULTI_POLYGON:o=b(e);break;case r.default.GEOMETRY_COLLECTION:o=j(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,l.transformGeometryWithOptions)(o,!1,t)}function j(e,r){var o=e.geometries.map(function(e){return O(e,r)});return new t.default(o)}function P(e){return new s.default(e.coordinates)}function G(e){return new n.default(e.coordinates)}function _(e){return new a.default(e.coordinates)}function N(e){return new i.default(e.coordinates)}function b(e){return new u.default(e.coordinates)}function h(e){return new c.default(e.coordinates)}function v(e,t){var o,n=(e=(0,l.transformGeometryWithOptions)(e,!0,t)).getType();switch(n){case r.default.POINT:o=C(e,t);break;case r.default.LINE_STRING:o=L(e,t);break;case r.default.POLYGON:o=E(e,t);break;case r.default.MULTI_POINT:o=w(e,t);break;case r.default.MULTI_LINE_STRING:o=F(e,t);break;case r.default.MULTI_POLYGON:o=T(e,t);break;case r.default.GEOMETRY_COLLECTION:o=I(e,t);break;case r.default.CIRCLE:o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return o}function I(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){var r=(0,d.assign)({},t);return delete r.featureProjection,v(e,r)})}}function L(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function F(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function w(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function T(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function C(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function E(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var M=g;exports.default=M;
},{"../Feature.js":"mYW9","../geom/GeometryCollection.js":"HvLT","../geom/GeometryType.js":"lmV0","./JSONFeature.js":"RA7M","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","../asserts.js":"fLG6","../obj.js":"mH6q","../proj.js":"Diht","./Feature.js":"Kylu"}],"KA2S":[function(require,module,exports) {
var define;
var t,r=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"")}catch(P){u=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype),a=new G(n||[]);return i._invoke=function(t,r,e){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var u=f(t,r,e);if("normal"===u.type){if(n=e.done?y:s,u.arg===v)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=y,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(P){return{type:"throw",arg:P}}}t.wrap=h;var l="suspendedStart",s="suspendedYield",p="executing",y="completed",v={};function d(){}function g(){}function m(){}var w={};w[i]=function(){return this};var L=Object.getPrototypeOf,x=L&&L(L(N([])));x&&x!==e&&n.call(x,i)&&(w=x);var b=m.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(r){u(t,r,function(t){return this._invoke(r,t)})})}function _(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?r.resolve(l.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(l).then(function(t){h.value=t,a(h)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:r,done:!0}}return g.prototype=b.constructor=m,m.constructor=g,g.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},E(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(b),u(b,c,"Generator"),b[i]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}
},{}],"nx4R":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"yffp":[function(require,module,exports) {
var process = require("process");
var e=require("process"),n=function(e){e=e||{},this.Promise=e.Promise||Promise,this.queues=Object.create(null),this.domains=Object.create(null),this.domainReentrant=e.domainReentrant||!1,this.timeout=e.timeout||n.DEFAULT_TIMEOUT,this.maxPending=e.maxPending||n.DEFAULT_MAX_PENDING};n.DEFAULT_TIMEOUT=0,n.DEFAULT_MAX_PENDING=1e3,n.prototype.acquire=function(n,t,i,u){if(Array.isArray(n))return this._acquireBatch(n,t,i,u);if("function"!=typeof t)throw new Error("You must pass a function to execute");var o=null,r=null,s=null;"function"!=typeof i&&(u=i,i=null,s=new this.Promise(function(e,n){o=e,r=n})),u=u||{};var c=!1,a=null,f=this,l=function(e,t,u){e&&(0===f.queues[n].length&&delete f.queues[n],delete f.domains[n]),c||(s?t?r(t):o(u):"function"==typeof i&&i(t,u),c=!0),e&&f.queues[n]&&f.queues[n].length>0&&f.queues[n].shift()()},m=function(i){if(c)return l(i);if(a&&(clearTimeout(a),a=null),i&&(f.domains[n]=e.domain),1===t.length){var u=!1;t(function(e,n){u||(u=!0,l(i,e,n))})}else f._promiseTry(function(){return t()}).then(function(e){l(i,void 0,e)},function(e){l(i,e)})};if(e.domain&&(m=e.domain.bind(m)),f.queues[n])if(f.domainReentrant&&e.domain&&e.domain===f.domains[n])m(!1);else if(f.queues[n].length>=f.maxPending)l(!1,new Error("Too much pending tasks"));else{var h=function(){m(!0)};u.skipQueue?f.queues[n].unshift(h):f.queues[n].push(h);var d=u.timeout||f.timeout;d&&(a=setTimeout(function(){a=null,l(!1,new Error("async-lock timed out"))},d))}else f.queues[n]=[],m(!0);return s||void 0},n.prototype._acquireBatch=function(e,n,t,i){"function"!=typeof t&&(i=t,t=null);var u=this,o=n;if(e.reverse().forEach(function(e){o=function(e,n){return function(t){u.acquire(e,n,t,i)}}(e,o)}),"function"!=typeof t)return new this.Promise(function(e,n){1===o.length?o(function(t,i){t?n(t):e(i)}):e(o())});o(t)},n.prototype.isBusy=function(e){return e?!!this.queues[e]:Object.keys(this.queues).length>0},n.prototype._promiseTry=function(e){try{return this.Promise.resolve(e())}catch(n){return this.Promise.reject(n)}},module.exports=n;
},{"process":"nx4R"}],"WflA":[function(require,module,exports) {
"use strict";module.exports=require("./lib");
},{"./lib":"yffp"}],"oxwV":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"Gvp3":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"jJYq":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"pRlI":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"wYDm":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"Gvp3","ieee754":"jJYq","isarray":"pRlI","buffer":"wYDm"}],"gIYa":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function o(r,e){for(var o in r)e[o]=r[o]}function n(r,o,n){return e(r,o,n)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(o(r,exports),exports.Buffer=n),n.prototype=Object.create(e.prototype),o(e,n),n.from=function(r,o,n){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,o,n)},n.alloc=function(r,o,n){if("number"!=typeof r)throw new TypeError("Argument must be a number");var t=e(r);return void 0!==o?"string"==typeof n?t.fill(o,n):t.fill(o):t.fill(0),t},n.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"wYDm"}],"yzxE":[function(require,module,exports) {

var t=require("safe-buffer").Buffer;function i(i,e){this._block=t.alloc(i),this._finalSize=e,this._blockSize=i,this._len=0}i.prototype.update=function(i,e){"string"==typeof i&&(e=e||"utf8",i=t.from(i,e));for(var s=this._block,o=this._blockSize,l=i.length,h=this._len,r=0;r<l;){for(var _=h%o,n=Math.min(l-r,o-_),c=0;c<n;c++)s[_+c]=i[r+c];r+=n,(h+=n)%o==0&&this._update(s)}return this._len+=l,this},i.prototype.digest=function(t){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var e=8*this._len;if(e<=4294967295)this._block.writeUInt32BE(e,this._blockSize-4);else{var s=(4294967295&e)>>>0,o=(e-s)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var l=this._hash();return t?l.toString(t):l},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=i;
},{"safe-buffer":"gIYa"}],"iGWE":[function(require,module,exports) {

var t=require("inherits"),i=require("./hash"),r=require("safe-buffer").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],e=new Array(80);function h(){this.init(),this._w=e,i.call(this,64,56)}function n(t){return t<<1|t>>>31}function _(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function o(t,i,r,s){return 0===t?i&r|~i&s:2===t?i&r|i&s|r&s:i^r^s}t(h,i),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var i=this._w,r=0|this._a,e=0|this._b,h=0|this._c,a=0|this._d,f=0|this._e,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<80;++c)i[c]=n(i[c-3]^i[c-8]^i[c-14]^i[c-16]);for(var d=0;d<80;++d){var p=~~(d/20),w=_(r)+o(p,e,h,a)+f+i[d]+s[p]|0;f=a,a=h,h=u(e),e=r,r=w}this._a=r+this._a|0,this._b=e+this._b|0,this._c=h+this._c|0,this._d=a+this._d|0,this._e=f+this._e|0},h.prototype._hash=function(){var t=r.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=h;
},{"inherits":"oxwV","./hash":"yzxE","safe-buffer":"gIYa"}],"fZgm":[function(require,module,exports) {
var define;
var r,n;!function(t){"undefined"==typeof DO_NOT_EXPORT_CRC?"object"==typeof exports?t(exports):"function"==typeof r&&r.amd?r(function(){var r={};return t(r),r}):t(n={}):t(n={})}(function(r){r.version="1.2.0";var n=function(){for(var r=0,n=new Array(256),t=0;256!=t;++t)r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=t)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1,n[t]=r;return"undefined"!=typeof Int32Array?new Int32Array(n):n}();r.table=n,r.bstr=function(r,t){for(var e=-1^t,o=r.length-1,f=0;f<o;)e=(e=e>>>8^n[255&(e^r.charCodeAt(f++))])>>>8^n[255&(e^r.charCodeAt(f++))];return f===o&&(e=e>>>8^n[255&(e^r.charCodeAt(f))]),-1^e},r.buf=function(r,t){if(r.length>1e4)return function(r,t){for(var e=-1^t,o=r.length-7,f=0;f<o;)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])];for(;f<o+7;)e=e>>>8^n[255&(e^r[f++])];return-1^e}(r,t);for(var e=-1^t,o=r.length-3,f=0;f<o;)e=(e=(e=(e=e>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])])>>>8^n[255&(e^r[f++])];for(;f<o+3;)e=e>>>8^n[255&(e^r[f++])];return-1^e},r.str=function(r,t){for(var e,o,f=-1^t,u=0,a=r.length;u<a;)(e=r.charCodeAt(u++))<128?f=f>>>8^n[255&(f^e)]:e<2048?f=(f=f>>>8^n[255&(f^(192|e>>6&31))])>>>8^n[255&(f^(128|63&e))]:e>=55296&&e<57344?(e=64+(1023&e),o=1023&r.charCodeAt(u++),f=(f=(f=(f=f>>>8^n[255&(f^(240|e>>8&7))])>>>8^n[255&(f^(128|e>>2&63))])>>>8^n[255&(f^(128|o>>6&15|(3&e)<<4))])>>>8^n[255&(f^(128|63&o))]):f=(f=(f=f>>>8^n[255&(f^(224|e>>12&15))])>>>8^n[255&(f^(128|e>>6&63))])>>>8^n[255&(f^(128|63&e))];return-1^f}});
},{}],"czUR":[function(require,module,exports) {
"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function t(r,t){return Object.prototype.hasOwnProperty.call(r,t)}exports.assign=function(r){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)t(n,a)&&(r[a]=n[a])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var e={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)r.set(t.subarray(e,e+n),a);else for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},n={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,e)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,n))},exports.setTyped(r);
},{}],"t6RP":[function(require,module,exports) {
"use strict";var e=require("../utils/common"),t=4,n=0,_=1,r=2;function a(e){for(var t=e.length;--t>=0;)e[t]=0}var i=0,l=1,d=2,f=3,o=258,b=29,s=256,u=s+1+b,c=30,p=19,h=2*u+1,v=15,y=16,x=7,g=256,m=16,w=17,A=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=512,B=new Array(2*(u+2));a(B);var C=new Array(2*c);a(C);var D=new Array(j);a(D);var E=new Array(o-f+1);a(E);var F=new Array(b);a(F);var G,H,I,J=new Array(c);function K(e,t,n,_,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=_,this.max_length=r,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?D[e]:D[256+(e>>>7)]}function N(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,n){e.bi_valid>y-n?(e.bi_buf|=t<<e.bi_valid&65535,N(e,e.bi_buf),e.bi_buf=t>>y-e.bi_valid,e.bi_valid+=n-y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function P(e,t,n){O(e,n[2*t],n[2*t+1])}function Q(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function R(e){16===e.bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function T(e,t){var n,_,r,a,i,l,d=t.dyn_tree,f=t.max_code,o=t.stat_desc.static_tree,b=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,c=t.stat_desc.max_length,p=0;for(a=0;a<=v;a++)e.bl_count[a]=0;for(d[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<h;n++)(a=d[2*d[2*(_=e.heap[n])+1]+1]+1)>c&&(a=c,p++),d[2*_+1]=a,_>f||(e.bl_count[a]++,i=0,_>=u&&(i=s[_-u]),l=d[2*_],e.opt_len+=l*(a+i),b&&(e.static_len+=l*(o[2*_+1]+i)));if(0!==p){do{for(a=c-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(a=c;0!==a;a--)for(_=e.bl_count[a];0!==_;)(r=e.heap[--n])>f||(d[2*r+1]!==a&&(e.opt_len+=(a-d[2*r+1])*d[2*r],d[2*r+1]=a),_--)}}function U(e,t,n){var _,r,a=new Array(v+1),i=0;for(_=1;_<=v;_++)a[_]=i=i+n[_-1]<<1;for(r=0;r<=t;r++){var l=e[2*r+1];0!==l&&(e[2*r]=Q(a[l]++,l))}}function V(){var e,t,n,_,r,a=new Array(v+1);for(n=0,_=0;_<b-1;_++)for(F[_]=n,e=0;e<1<<k[_];e++)E[n++]=_;for(E[n-1]=_,r=0,_=0;_<16;_++)for(J[_]=r,e=0;e<1<<q[_];e++)D[r++]=_;for(r>>=7;_<c;_++)for(J[_]=r<<7,e=0;e<1<<q[_]-7;e++)D[256+r++]=_;for(t=0;t<=v;t++)a[t]=0;for(e=0;e<=143;)B[2*e+1]=8,e++,a[8]++;for(;e<=255;)B[2*e+1]=9,e++,a[9]++;for(;e<=279;)B[2*e+1]=7,e++,a[7]++;for(;e<=287;)B[2*e+1]=8,e++,a[8]++;for(U(B,u+1,a),e=0;e<c;e++)C[2*e+1]=5,C[2*e]=Q(e,5);G=new K(B,k,s+1,u,v),H=new K(C,q,0,c,v),I=new K(new Array(0),z,0,p,x)}function W(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<c;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function X(e){e.bi_valid>8?N(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(t,n,_,r){X(t),r&&(N(t,_),N(t,~_)),e.arraySet(t.pending_buf,t.window,n,_,t.pending),t.pending+=_}function Z(e,t,n,_){var r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&_[t]<=_[n]}function $(e,t,n){for(var _=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&Z(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Z(t,_,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=_}function ee(e,t,n){var _,r,a,i,l=0;if(0!==e.last_lit)do{_=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],r=e.pending_buf[e.l_buf+l],l++,0===_?P(e,r,t):(P(e,(a=E[r])+s+1,t),0!==(i=k[a])&&O(e,r-=F[a],i),P(e,a=M(--_),n),0!==(i=q[a])&&O(e,_-=J[a],i))}while(l<e.last_lit);P(e,g,t)}function te(e,t){var n,_,r,a=t.dyn_tree,i=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.elems,f=-1;for(e.heap_len=0,e.heap_max=h,n=0;n<d;n++)0!==a[2*n]?(e.heap[++e.heap_len]=f=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=f<2?++f:0)]=1,e.depth[r]=0,e.opt_len--,l&&(e.static_len-=i[2*r+1]);for(t.max_code=f,n=e.heap_len>>1;n>=1;n--)$(e,a,n);r=d;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$(e,a,1),_=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=_,a[2*r]=a[2*n]+a[2*_],e.depth[r]=(e.depth[n]>=e.depth[_]?e.depth[n]:e.depth[_])+1,a[2*n+1]=a[2*_+1]=r,e.heap[1]=r++,$(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],T(e,t),U(a,f,e.bl_count)}function ne(e,t,n){var _,r,a=-1,i=t[1],l=0,d=7,f=4;for(0===i&&(d=138,f=3),t[2*(n+1)+1]=65535,_=0;_<=n;_++)r=i,i=t[2*(_+1)+1],++l<d&&r===i||(l<f?e.bl_tree[2*r]+=l:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[2*m]++):l<=10?e.bl_tree[2*w]++:e.bl_tree[2*A]++,l=0,a=r,0===i?(d=138,f=3):r===i?(d=6,f=3):(d=7,f=4))}function _e(e,t,n){var _,r,a=-1,i=t[1],l=0,d=7,f=4;for(0===i&&(d=138,f=3),_=0;_<=n;_++)if(r=i,i=t[2*(_+1)+1],!(++l<d&&r===i)){if(l<f)do{P(e,r,e.bl_tree)}while(0!=--l);else 0!==r?(r!==a&&(P(e,r,e.bl_tree),l--),P(e,m,e.bl_tree),O(e,l-3,2)):l<=10?(P(e,w,e.bl_tree),O(e,l-3,3)):(P(e,A,e.bl_tree),O(e,l-11,7));l=0,a=r,0===i?(d=138,f=3):r===i?(d=6,f=3):(d=7,f=4)}}function re(e){var t;for(ne(e,e.dyn_ltree,e.l_desc.max_code),ne(e,e.dyn_dtree,e.d_desc.max_code),te(e,e.bl_desc),t=p-1;t>=3&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function ae(e,t,n,_){var r;for(O(e,t-257,5),O(e,n-1,5),O(e,_-4,4),r=0;r<_;r++)O(e,e.bl_tree[2*S[r]+1],3);_e(e,e.dyn_ltree,t-1),_e(e,e.dyn_dtree,n-1)}function ie(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return n;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return _;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return _;return n}a(J);var le=!1;function de(e){le||(V(),le=!0),e.l_desc=new L(e.dyn_ltree,G),e.d_desc=new L(e.dyn_dtree,H),e.bl_desc=new L(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,W(e)}function fe(e,t,n,_){O(e,(i<<1)+(_?1:0),3),Y(e,t,n,!0)}function oe(e){O(e,l<<1,3),P(e,g,B),R(e)}function be(e,n,_,a){var i,f,o=0;e.level>0?(e.strm.data_type===r&&(e.strm.data_type=ie(e)),te(e,e.l_desc),te(e,e.d_desc),o=re(e),i=e.opt_len+3+7>>>3,(f=e.static_len+3+7>>>3)<=i&&(i=f)):i=f=_+5,_+4<=i&&-1!==n?fe(e,n,_,a):e.strategy===t||f===i?(O(e,(l<<1)+(a?1:0),3),ee(e,B,C)):(O(e,(d<<1)+(a?1:0),3),ae(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),ee(e,e.dyn_ltree,e.dyn_dtree)),W(e),a&&X(e)}function se(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(E[n]+s+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1}exports._tr_init=de,exports._tr_stored_block=fe,exports._tr_flush_block=be,exports._tr_tally=se,exports._tr_align=oe;
},{"../utils/common":"czUR"}],"CRrX":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(var u=65535&e|0,i=e>>>16&65535|0,n=0;0!==o;){o-=n=o>2e3?2e3:o;do{i=i+(u=u+r[t++]|0)|0}while(--n);u%=65521,i%=65521}return u|i<<16|0}module.exports=e;
},{}],"CwDA":[function(require,module,exports) {
"use strict";function r(){for(var r,o=[],t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;o[t]=r}return o}var o=r();function t(r,t,n,u){var a=o,e=u+n;r^=-1;for(var f=u;f<e;f++)r=r>>>8^a[255&(r^t[f])];return-1^r}module.exports=t;
},{}],"gN2D":[function(require,module,exports) {
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};
},{}],"ytoJ":[function(require,module,exports) {
"use strict";var t,a=require("../utils/common"),e=require("./trees"),s=require("./adler32"),i=require("./crc32"),r=require("./messages"),n=0,h=1,l=3,_=4,d=5,o=0,u=1,g=-2,f=-3,c=-5,p=-1,m=1,w=2,v=3,k=4,z=0,b=2,x=8,y=9,B=15,S=8,q=29,I=256,A=I+1+q,C=30,R=19,j=2*A+1,D=15,E=3,H=258,K=H+E+1,N=32,F=42,G=69,J=73,L=91,M=103,O=113,P=666,Q=1,T=2,U=3,V=4,W=3;function X(t,a){return t.msg=r[a],a}function Y(t){return(t<<1)-(t>4?9:0)}function Z(t){for(var a=t.length;--a>=0;)t[a]=0}function $(t){var e=t.state,s=e.pending;s>t.avail_out&&(s=t.avail_out),0!==s&&(a.arraySet(t.output,e.pending_buf,e.pending_out,s,t.next_out),t.next_out+=s,e.pending_out+=s,t.total_out+=s,t.avail_out-=s,e.pending-=s,0===e.pending&&(e.pending_out=0))}function tt(t,a){e._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,a),t.block_start=t.strstart,$(t.strm)}function at(t,a){t.pending_buf[t.pending++]=a}function et(t,a){t.pending_buf[t.pending++]=a>>>8&255,t.pending_buf[t.pending++]=255&a}function st(t,e,r,n){var h=t.avail_in;return h>n&&(h=n),0===h?0:(t.avail_in-=h,a.arraySet(e,t.input,t.next_in,h,r),1===t.state.wrap?t.adler=s(t.adler,e,h,r):2===t.state.wrap&&(t.adler=i(t.adler,e,h,r)),t.next_in+=h,t.total_in+=h,h)}function it(t,a){var e,s,i=t.max_chain_length,r=t.strstart,n=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-K?t.strstart-(t.w_size-K):0,_=t.window,d=t.w_mask,o=t.prev,u=t.strstart+H,g=_[r+n-1],f=_[r+n];t.prev_length>=t.good_match&&(i>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(e=a)+n]===f&&_[e+n-1]===g&&_[e]===_[r]&&_[++e]===_[r+1]){r+=2,e++;do{}while(_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&r<u);if(s=H-(u-r),r=u-H,s>n){if(t.match_start=a,n=s,s>=h)break;g=_[r+n-1],f=_[r+n]}}}while((a=o[a&d])>l&&0!=--i);return n<=t.lookahead?n:t.lookahead}function rt(t){var e,s,i,r,n,h=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-K)){a.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=s=t.hash_size;do{i=t.head[--e],t.head[e]=i>=h?i-h:0}while(--s);e=s=h;do{i=t.prev[--e],t.prev[e]=i>=h?i-h:0}while(--s);r+=h}if(0===t.strm.avail_in)break;if(s=st(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=s,t.lookahead+t.insert>=E)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+E-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<E)););}while(t.lookahead<K&&0!==t.strm.avail_in)}function nt(t,a){var e=65535;for(e>t.pending_buf_size-5&&(e=t.pending_buf_size-5);;){if(t.lookahead<=1){if(rt(t),0===t.lookahead&&a===n)return Q;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+e;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,tt(t,!1),0===t.strm.avail_out))return Q;if(t.strstart-t.block_start>=t.w_size-K&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):(t.strstart>t.block_start&&(tt(t,!1),t.strm.avail_out),Q)}function ht(t,a){for(var s,i;;){if(t.lookahead<K){if(rt(t),t.lookahead<K&&a===n)return Q;if(0===t.lookahead)break}if(s=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==s&&t.strstart-s<=t.w_size-K&&(t.match_length=it(t,s)),t.match_length>=E)if(i=e._tr_tally(t,t.strstart-t.match_start,t.match_length-E),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=E){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=t.strstart<E-1?t.strstart:E-1,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function lt(t,a){for(var s,i,r;;){if(t.lookahead<K){if(rt(t),t.lookahead<K&&a===n)return Q;if(0===t.lookahead)break}if(s=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=E-1,0!==s&&t.prev_length<t.max_lazy_match&&t.strstart-s<=t.w_size-K&&(t.match_length=it(t,s),t.match_length<=5&&(t.strategy===m||t.match_length===E&&t.strstart-t.match_start>4096)&&(t.match_length=E-1)),t.prev_length>=E&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-E,i=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-E),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=E-1,t.strstart++,i&&(tt(t,!1),0===t.strm.avail_out))return Q}else if(t.match_available){if((i=e._tr_tally(t,0,t.window[t.strstart-1]))&&tt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Q}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<E-1?t.strstart:E-1,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function _t(t,a){for(var s,i,r,h,l=t.window;;){if(t.lookahead<=H){if(rt(t),t.lookahead<=H&&a===n)return Q;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=E&&t.strstart>0&&(i=l[r=t.strstart-1])===l[++r]&&i===l[++r]&&i===l[++r]){h=t.strstart+H;do{}while(i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&r<h);t.match_length=H-(h-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=E?(s=e._tr_tally(t,1,t.match_length-E),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(s=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),s&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function dt(t,a){for(var s;;){if(0===t.lookahead&&(rt(t),0===t.lookahead)){if(a===n)return Q;break}if(t.match_length=0,s=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,s&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function ot(t,a,e,s,i){this.good_length=t,this.max_lazy=a,this.nice_length=e,this.max_chain=s,this.func=i}function ut(a){a.window_size=2*a.w_size,Z(a.head),a.max_lazy_match=t[a.level].max_lazy,a.good_match=t[a.level].good_length,a.nice_match=t[a.level].nice_length,a.max_chain_length=t[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=E-1,a.match_available=0,a.ins_h=0}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*j),this.dyn_dtree=new a.Buf16(2*(2*C+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*A+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*A+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ft(t){var a;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=b,(a=t.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?F:O,t.adler=2===a.wrap?0:1,a.last_flush=n,e._tr_init(a),o):X(t,g)}function ct(t){var a=ft(t);return a===o&&ut(t.state),a}function pt(t,a){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=a,o):g}function mt(t,e,s,i,r,n){if(!t)return g;var h=1;if(e===p&&(e=6),i<0?(h=0,i=-i):i>15&&(h=2,i-=16),r<1||r>y||s!==x||i<8||i>15||e<0||e>9||n<0||n>k)return X(t,g);8===i&&(i=9);var l=new gt;return t.state=l,l.strm=t,l.wrap=h,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+E-1)/E),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=n,l.method=s,ct(t)}function wt(t,a){return mt(t,a,x,B,S,z)}function vt(a,s){var r,f,p,m;if(!a||!a.state||s>d||s<0)return a?X(a,g):g;if(f=a.state,!a.output||!a.input&&0!==a.avail_in||f.status===P&&s!==_)return X(a,0===a.avail_out?c:g);if(f.strm=a,r=f.last_flush,f.last_flush=s,f.status===F)if(2===f.wrap)a.adler=0,at(f,31),at(f,139),at(f,8),f.gzhead?(at(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),at(f,255&f.gzhead.time),at(f,f.gzhead.time>>8&255),at(f,f.gzhead.time>>16&255),at(f,f.gzhead.time>>24&255),at(f,9===f.level?2:f.strategy>=w||f.level<2?4:0),at(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(at(f,255&f.gzhead.extra.length),at(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(a.adler=i(a.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=G):(at(f,0),at(f,0),at(f,0),at(f,0),at(f,0),at(f,9===f.level?2:f.strategy>=w||f.level<2?4:0),at(f,W),f.status=O);else{var k=x+(f.w_bits-8<<4)<<8;k|=(f.strategy>=w||f.level<2?0:f.level<6?1:6===f.level?2:3)<<6,0!==f.strstart&&(k|=N),k+=31-k%31,f.status=O,et(f,k),0!==f.strstart&&(et(f,a.adler>>>16),et(f,65535&a.adler)),a.adler=1}if(f.status===G)if(f.gzhead.extra){for(p=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending!==f.pending_buf_size));)at(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=J)}else f.status=J;if(f.status===J)if(f.gzhead.name){p=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending===f.pending_buf_size)){m=1;break}m=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,at(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),0===m&&(f.gzindex=0,f.status=L)}else f.status=L;if(f.status===L)if(f.gzhead.comment){p=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending===f.pending_buf_size)){m=1;break}m=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,at(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),0===m&&(f.status=M)}else f.status=M;if(f.status===M&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&$(a),f.pending+2<=f.pending_buf_size&&(at(f,255&a.adler),at(f,a.adler>>8&255),a.adler=0,f.status=O)):f.status=O),0!==f.pending){if($(a),0===a.avail_out)return f.last_flush=-1,o}else if(0===a.avail_in&&Y(s)<=Y(r)&&s!==_)return X(a,c);if(f.status===P&&0!==a.avail_in)return X(a,c);if(0!==a.avail_in||0!==f.lookahead||s!==n&&f.status!==P){var z=f.strategy===w?dt(f,s):f.strategy===v?_t(f,s):t[f.level].func(f,s);if(z!==U&&z!==V||(f.status=P),z===Q||z===U)return 0===a.avail_out&&(f.last_flush=-1),o;if(z===T&&(s===h?e._tr_align(f):s!==d&&(e._tr_stored_block(f,0,0,!1),s===l&&(Z(f.head),0===f.lookahead&&(f.strstart=0,f.block_start=0,f.insert=0))),$(a),0===a.avail_out))return f.last_flush=-1,o}return s!==_?o:f.wrap<=0?u:(2===f.wrap?(at(f,255&a.adler),at(f,a.adler>>8&255),at(f,a.adler>>16&255),at(f,a.adler>>24&255),at(f,255&a.total_in),at(f,a.total_in>>8&255),at(f,a.total_in>>16&255),at(f,a.total_in>>24&255)):(et(f,a.adler>>>16),et(f,65535&a.adler)),$(a),f.wrap>0&&(f.wrap=-f.wrap),0!==f.pending?o:u)}function kt(t){var a;return t&&t.state?(a=t.state.status)!==F&&a!==G&&a!==J&&a!==L&&a!==M&&a!==O&&a!==P?X(t,g):(t.state=null,a===O?X(t,f):o):g}function zt(t,e){var i,r,n,h,l,_,d,u,f=e.length;if(!t||!t.state)return g;if(2===(h=(i=t.state).wrap)||1===h&&i.status!==F||i.lookahead)return g;for(1===h&&(t.adler=s(t.adler,e,f,0)),i.wrap=0,f>=i.w_size&&(0===h&&(Z(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new a.Buf8(i.w_size),a.arraySet(u,e,f-i.w_size,i.w_size,0),e=u,f=i.w_size),l=t.avail_in,_=t.next_in,d=t.input,t.avail_in=f,t.next_in=0,t.input=e,rt(i);i.lookahead>=E;){r=i.strstart,n=i.lookahead-(E-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+E-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--n);i.strstart=r,i.lookahead=E-1,rt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=E-1,i.match_available=0,t.next_in=_,t.input=d,t.avail_in=l,i.wrap=h,o}t=[new ot(0,0,0,0,nt),new ot(4,4,8,4,ht),new ot(4,5,16,8,ht),new ot(4,6,32,32,ht),new ot(4,4,16,16,lt),new ot(8,16,32,32,lt),new ot(8,16,128,128,lt),new ot(8,32,128,256,lt),new ot(32,128,258,1024,lt),new ot(32,258,258,4096,lt)],exports.deflateInit=wt,exports.deflateInit2=mt,exports.deflateReset=ct,exports.deflateResetKeep=ft,exports.deflateSetHeader=pt,exports.deflate=vt,exports.deflateEnd=kt,exports.deflateSetDictionary=zt,exports.deflateInfo="pako deflate (from Nodeca project)";
},{"../utils/common":"czUR","./trees":"t6RP","./adler32":"CRrX","./crc32":"CwDA","./messages":"gN2D"}],"UO2g":[function(require,module,exports) {
"use strict";var r=require("./common"),n=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch(u){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){t=!1}for(var e=new r.Buf8(256),o=0;o<256;o++)e[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function f(e,o){if(o<65534&&(e.subarray&&t||!e.subarray&&n))return String.fromCharCode.apply(null,r.shrinkBuf(e,o));for(var f="",u=0;u<o;u++)f+=String.fromCharCode(e[u]);return f}e[254]=e[254]=1,exports.string2buf=function(n){var t,e,o,f,u,a=n.length,i=0;for(f=0;f<a;f++)55296==(64512&(e=n.charCodeAt(f)))&&f+1<a&&56320==(64512&(o=n.charCodeAt(f+1)))&&(e=65536+(e-55296<<10)+(o-56320),f++),i+=e<128?1:e<2048?2:e<65536?3:4;for(t=new r.Buf8(i),u=0,f=0;u<i;f++)55296==(64512&(e=n.charCodeAt(f)))&&f+1<a&&56320==(64512&(o=n.charCodeAt(f+1)))&&(e=65536+(e-55296<<10)+(o-56320),f++),e<128?t[u++]=e:e<2048?(t[u++]=192|e>>>6,t[u++]=128|63&e):e<65536?(t[u++]=224|e>>>12,t[u++]=128|e>>>6&63,t[u++]=128|63&e):(t[u++]=240|e>>>18,t[u++]=128|e>>>12&63,t[u++]=128|e>>>6&63,t[u++]=128|63&e);return t},exports.buf2binstring=function(r){return f(r,r.length)},exports.binstring2buf=function(n){for(var t=new r.Buf8(n.length),e=0,o=t.length;e<o;e++)t[e]=n.charCodeAt(e);return t},exports.buf2string=function(r,n){var t,o,u,a,i=n||r.length,h=new Array(2*i);for(o=0,t=0;t<i;)if((u=r[t++])<128)h[o++]=u;else if((a=e[u])>4)h[o++]=65533,t+=a-1;else{for(u&=2===a?31:3===a?15:7;a>1&&t<i;)u=u<<6|63&r[t++],a--;a>1?h[o++]=65533:u<65536?h[o++]=u:(u-=65536,h[o++]=55296|u>>10&1023,h[o++]=56320|1023&u)}return f(h,o)},exports.utf8border=function(r,n){var t;for((n=n||r.length)>r.length&&(n=r.length),t=n-1;t>=0&&128==(192&r[t]);)t--;return t<0?n:0===t?n:t+e[r[t]]>n?t:n};
},{"./common":"czUR"}],"XKOj":[function(require,module,exports) {
"use strict";function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=t;
},{}],"LwLr":[function(require,module,exports) {
"use strict";var t=require("./zlib/deflate"),i=require("./utils/common"),e=require("./utils/strings"),n=require("./zlib/messages"),r=require("./zlib/zstream"),s=Object.prototype.toString,o=0,a=4,u=0,h=1,d=2,l=-1,f=0,p=8;function w(o){if(!(this instanceof w))return new w(o);this.options=i.assign({level:l,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},o||{});var a=this.options;a.raw&&a.windowBits>0?a.windowBits=-a.windowBits:a.gzip&&a.windowBits>0&&a.windowBits<16&&(a.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var h=t.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(h!==u)throw new Error(n[h]);if(a.header&&t.deflateSetHeader(this.strm,a.header),a.dictionary){var d;if(d="string"==typeof a.dictionary?e.string2buf(a.dictionary):"[object ArrayBuffer]"===s.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary,(h=t.deflateSetDictionary(this.strm,d))!==u)throw new Error(n[h]);this._dict_set=!0}}function c(t,i){var e=new w(i);if(e.push(t,!0),e.err)throw e.msg||n[e.err];return e.result}function m(t,i){return(i=i||{}).raw=!0,c(t,i)}function g(t,i){return(i=i||{}).gzip=!0,c(t,i)}w.prototype.push=function(n,r){var l,f,p=this.strm,w=this.options.chunkSize;if(this.ended)return!1;f=r===~~r?r:!0===r?a:o,"string"==typeof n?p.input=e.string2buf(n):"[object ArrayBuffer]"===s.call(n)?p.input=new Uint8Array(n):p.input=n,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(w),p.next_out=0,p.avail_out=w),(l=t.deflate(p,f))!==h&&l!==u)return this.onEnd(l),this.ended=!0,!1;0!==p.avail_out&&(0!==p.avail_in||f!==a&&f!==d)||("string"===this.options.to?this.onData(e.buf2binstring(i.shrinkBuf(p.output,p.next_out))):this.onData(i.shrinkBuf(p.output,p.next_out)))}while((p.avail_in>0||0===p.avail_out)&&l!==h);return f===a?(l=t.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===u):f!==d||(this.onEnd(u),p.avail_out=0,!0)},w.prototype.onData=function(t){this.chunks.push(t)},w.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Deflate=w,exports.deflate=c,exports.deflateRaw=m,exports.gzip=g;
},{"./zlib/deflate":"ytoJ","./utils/common":"czUR","./utils/strings":"UO2g","./zlib/messages":"gN2D","./zlib/zstream":"XKOj"}],"Hbr3":[function(require,module,exports) {
"use strict";var i=30,e=12;module.exports=function(o,a){var t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,p,z,j,q,y,A,B;t=o.state,d=o.next_in,A=o.input,n=d+(o.avail_in-5),l=o.next_out,B=o.output,s=l-(a-o.avail_out),f=l+(o.avail_out-257),r=t.dmax,b=t.wsize,c=t.whave,u=t.wnext,v=t.window,m=t.hold,w=t.bits,h=t.lencode,k=t.distcode,_=(1<<t.lenbits)-1,x=(1<<t.distbits)-1;i:do{w<15&&(m+=A[d++]<<w,w+=8,m+=A[d++]<<w,w+=8),g=h[m&_];e:for(;;){if(m>>>=p=g>>>24,w-=p,0===(p=g>>>16&255))B[l++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=h[(65535&g)+(m&(1<<p)-1)];continue e}if(32&p){t.mode=e;break i}o.msg="invalid literal/length code",t.mode=i;break i}z=65535&g,(p&=15)&&(w<p&&(m+=A[d++]<<w,w+=8),z+=m&(1<<p)-1,m>>>=p,w-=p),w<15&&(m+=A[d++]<<w,w+=8,m+=A[d++]<<w,w+=8),g=k[m&x];o:for(;;){if(m>>>=p=g>>>24,w-=p,!(16&(p=g>>>16&255))){if(0==(64&p)){g=k[(65535&g)+(m&(1<<p)-1)];continue o}o.msg="invalid distance code",t.mode=i;break i}if(j=65535&g,w<(p&=15)&&(m+=A[d++]<<w,(w+=8)<p&&(m+=A[d++]<<w,w+=8)),(j+=m&(1<<p)-1)>r){o.msg="invalid distance too far back",t.mode=i;break i}if(m>>>=p,w-=p,j>(p=l-s)){if((p=j-p)>c&&t.sane){o.msg="invalid distance too far back",t.mode=i;break i}if(q=0,y=v,0===u){if(q+=b-p,p<z){z-=p;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}}else if(u<p){if(q+=b+u-p,(p-=u)<z){z-=p;do{B[l++]=v[q++]}while(--p);if(q=0,u<z){z-=p=u;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}}}else if(q+=u-p,p<z){z-=p;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}for(;z>2;)B[l++]=y[q++],B[l++]=y[q++],B[l++]=y[q++],z-=3;z&&(B[l++]=y[q++],z>1&&(B[l++]=y[q++]))}else{q=l-j;do{B[l++]=B[q++],B[l++]=B[q++],B[l++]=B[q++],z-=3}while(z>2);z&&(B[l++]=B[q++],z>1&&(B[l++]=B[q++]))}break}}break}}while(d<n&&l<f);d-=z=w>>3,m&=(1<<(w-=z<<3))-1,o.next_in=d,o.next_out=l,o.avail_in=d<n?n-d+5:5-(d-n),o.avail_out=l<f?f-l+257:257-(l-f),t.hold=m,t.bits=w};
},{}],"jhci":[function(require,module,exports) {
"use strict";var r=require("../utils/common"),f=15,i=852,o=592,e=0,u=1,t=2,n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(a,c,m,w,d,v,B,h){var k,p,q,x,g,j,y,z,A,C=h.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new r.Buf16(f+1),Q=new r.Buf16(f+1),R=null,S=0;for(D=0;D<=f;D++)P[D]=0;for(E=0;E<w;E++)P[c[m+E]]++;for(H=C,G=f;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return d[v++]=20971520,d[v++]=20971520,h.bits=1,0;for(F=1;F<G&&0===P[F];F++);for(H<F&&(H=F),K=1,D=1;D<=f;D++)if(K<<=1,(K-=P[D])<0)return-1;if(K>0&&(a===e||1!==G))return-1;for(Q[1]=0,D=1;D<f;D++)Q[D+1]=Q[D]+P[D];for(E=0;E<w;E++)0!==c[m+E]&&(B[Q[c[m+E]]++]=E);if(a===e?(N=R=B,j=19):a===u?(N=n,O-=257,R=l,S-=257,j=256):(N=s,R=b,j=-1),M=0,E=0,D=F,g=v,I=H,J=0,q=-1,x=(L=1<<H)-1,a===u&&L>i||a===t&&L>o)return 1;for(;;){y=D-J,B[E]<j?(z=0,A=B[E]):B[E]>j?(z=R[S+B[E]],A=N[O+B[E]]):(z=96,A=0),k=1<<D-J,F=p=1<<I;do{d[g+(M>>J)+(p-=k)]=y<<24|z<<16|A|0}while(0!==p);for(k=1<<D-1;M&k;)k>>=1;if(0!==k?(M&=k-1,M+=k):M=0,E++,0==--P[D]){if(D===G)break;D=c[m+B[E]]}if(D>H&&(M&x)!==q){for(0===J&&(J=H),g+=F,K=1<<(I=D-J);I+J<G&&!((K-=P[I+J])<=0);)I++,K<<=1;if(L+=1<<I,a===u&&L>i||a===t&&L>o)return 1;d[q=M&x]=H<<24|I<<16|g-v|0}}return 0!==M&&(d[g+M]=D-J<<24|64<<16|0),h.bits=H,0};
},{"../utils/common":"czUR"}],"NU6N":[function(require,module,exports) {
"use strict";var e=require("../utils/common"),a=require("./adler32"),t=require("./crc32"),i=require("./inffast"),s=require("./inftrees"),n=0,r=1,o=2,d=4,l=5,f=6,c=0,h=1,k=2,b=-2,m=-3,w=-4,u=-5,g=8,v=1,x=2,p=3,_=4,y=5,z=6,B=7,S=8,q=9,C=10,I=11,R=12,j=13,A=14,D=15,E=16,G=17,H=18,K=19,N=20,F=21,J=22,L=23,M=24,O=25,P=26,Q=27,T=28,U=29,V=30,W=31,X=32,Y=852,Z=592,$=15,ee=$;function ae(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ie(a){var t;return a&&a.state?(t=a.state,a.total_in=a.total_out=t.total=0,a.msg="",t.wrap&&(a.adler=1&t.wrap),t.mode=v,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new e.Buf32(Y),t.distcode=t.distdyn=new e.Buf32(Z),t.sane=1,t.back=-1,c):b}function se(e){var a;return e&&e.state?((a=e.state).wsize=0,a.whave=0,a.wnext=0,ie(e)):b}function ne(e,a){var t,i;return e&&e.state?(i=e.state,a<0?(t=0,a=-a):(t=1+(a>>4),a<48&&(a&=15)),a&&(a<8||a>15)?b:(null!==i.window&&i.wbits!==a&&(i.window=null),i.wrap=t,i.wbits=a,se(e))):b}function re(e,a){var t,i;return e?(i=new te,e.state=i,i.window=null,(t=ne(e,a))!==c&&(e.state=null),t):b}function oe(e){return re(e,ee)}var de,le,fe=!0;function ce(a){if(fe){var t;for(de=new e.Buf32(512),le=new e.Buf32(32),t=0;t<144;)a.lens[t++]=8;for(;t<256;)a.lens[t++]=9;for(;t<280;)a.lens[t++]=7;for(;t<288;)a.lens[t++]=8;for(s(r,a.lens,0,288,de,0,a.work,{bits:9}),t=0;t<32;)a.lens[t++]=5;s(o,a.lens,0,32,le,0,a.work,{bits:5}),fe=!1}a.lencode=de,a.lenbits=9,a.distcode=le,a.distbits=5}function he(a,t,i,s){var n,r=a.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new e.Buf8(r.wsize)),s>=r.wsize?(e.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((n=r.wsize-r.wnext)>s&&(n=s),e.arraySet(r.window,t,i-s,n,r.wnext),(s-=n)?(e.arraySet(r.window,t,i-s,s,0),r.wnext=s,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function ke(Y,Z){var $,ee,te,ie,se,ne,re,oe,de,le,fe,ke,be,me,we,ue,ge,ve,xe,pe,_e,ye,ze,Be,Se=0,qe=new e.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&0!==Y.avail_in)return b;($=Y.state).mode===R&&($.mode=j),se=Y.next_out,te=Y.output,re=Y.avail_out,ie=Y.next_in,ee=Y.input,ne=Y.avail_in,oe=$.hold,de=$.bits,le=ne,fe=re,ye=c;e:for(;;)switch($.mode){case v:if(0===$.wrap){$.mode=j;break}for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(2&$.wrap&&35615===oe){$.check=0,qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0),oe=0,de=0,$.mode=x;break}if($.flags=0,$.head&&($.head.done=!1),!(1&$.wrap)||(((255&oe)<<8)+(oe>>8))%31){Y.msg="incorrect header check",$.mode=V;break}if((15&oe)!==g){Y.msg="unknown compression method",$.mode=V;break}if(de-=4,_e=8+(15&(oe>>>=4)),0===$.wbits)$.wbits=_e;else if(_e>$.wbits){Y.msg="invalid window size",$.mode=V;break}$.dmax=1<<_e,Y.adler=$.check=1,$.mode=512&oe?C:R,oe=0,de=0;break;case x:for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if($.flags=oe,(255&$.flags)!==g){Y.msg="unknown compression method",$.mode=V;break}if(57344&$.flags){Y.msg="unknown header flags set",$.mode=V;break}$.head&&($.head.text=oe>>8&1),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0,$.mode=p;case p:for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.head&&($.head.time=oe),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,qe[2]=oe>>>16&255,qe[3]=oe>>>24&255,$.check=t($.check,qe,4,0)),oe=0,de=0,$.mode=_;case _:for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.head&&($.head.xflags=255&oe,$.head.os=oe>>8),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0,$.mode=y;case y:if(1024&$.flags){for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.length=oe,$.head&&($.head.extra_len=oe),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0}else $.head&&($.head.extra=null);$.mode=z;case z:if(1024&$.flags&&((ke=$.length)>ne&&(ke=ne),ke&&($.head&&(_e=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),e.arraySet($.head.extra,ee,ie,ke,_e)),512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,$.length-=ke),$.length))break e;$.length=0,$.mode=B;case B:if(2048&$.flags){if(0===ne)break e;ke=0;do{_e=ee[ie+ke++],$.head&&_e&&$.length<65536&&($.head.name+=String.fromCharCode(_e))}while(_e&&ke<ne);if(512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,_e)break e}else $.head&&($.head.name=null);$.length=0,$.mode=S;case S:if(4096&$.flags){if(0===ne)break e;ke=0;do{_e=ee[ie+ke++],$.head&&_e&&$.length<65536&&($.head.comment+=String.fromCharCode(_e))}while(_e&&ke<ne);if(512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,_e)break e}else $.head&&($.head.comment=null);$.mode=q;case q:if(512&$.flags){for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe!==(65535&$.check)){Y.msg="header crc mismatch",$.mode=V;break}oe=0,de=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),Y.adler=$.check=0,$.mode=R;break;case C:for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}Y.adler=$.check=ae(oe),oe=0,de=0,$.mode=I;case I:if(0===$.havedict)return Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,k;Y.adler=$.check=1,$.mode=R;case R:if(Z===l||Z===f)break e;case j:if($.last){oe>>>=7&de,de-=7&de,$.mode=Q;break}for(;de<3;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}switch($.last=1&oe,de-=1,3&(oe>>>=1)){case 0:$.mode=A;break;case 1:if(ce($),$.mode=N,Z===f){oe>>>=2,de-=2;break e}break;case 2:$.mode=G;break;case 3:Y.msg="invalid block type",$.mode=V}oe>>>=2,de-=2;break;case A:for(oe>>>=7&de,de-=7&de;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if((65535&oe)!=(oe>>>16^65535)){Y.msg="invalid stored block lengths",$.mode=V;break}if($.length=65535&oe,oe=0,de=0,$.mode=D,Z===f)break e;case D:$.mode=E;case E:if(ke=$.length){if(ke>ne&&(ke=ne),ke>re&&(ke=re),0===ke)break e;e.arraySet(te,ee,ie,ke,se),ne-=ke,ie+=ke,re-=ke,se+=ke,$.length-=ke;break}$.mode=R;break;case G:for(;de<14;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if($.nlen=257+(31&oe),oe>>>=5,de-=5,$.ndist=1+(31&oe),oe>>>=5,de-=5,$.ncode=4+(15&oe),oe>>>=4,de-=4,$.nlen>286||$.ndist>30){Y.msg="too many length or distance symbols",$.mode=V;break}$.have=0,$.mode=H;case H:for(;$.have<$.ncode;){for(;de<3;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.lens[Ce[$.have++]]=7&oe,oe>>>=3,de-=3}for(;$.have<19;)$.lens[Ce[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,ze={bits:$.lenbits},ye=s(n,$.lens,0,19,$.lencode,0,$.work,ze),$.lenbits=ze.bits,ye){Y.msg="invalid code lengths set",$.mode=V;break}$.have=0,$.mode=K;case K:for(;$.have<$.nlen+$.ndist;){for(;ue=(Se=$.lencode[oe&(1<<$.lenbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(ge<16)oe>>>=we,de-=we,$.lens[$.have++]=ge;else{if(16===ge){for(Be=we+2;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe>>>=we,de-=we,0===$.have){Y.msg="invalid bit length repeat",$.mode=V;break}_e=$.lens[$.have-1],ke=3+(3&oe),oe>>>=2,de-=2}else if(17===ge){for(Be=we+3;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}de-=we,_e=0,ke=3+(7&(oe>>>=we)),oe>>>=3,de-=3}else{for(Be=we+7;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}de-=we,_e=0,ke=11+(127&(oe>>>=we)),oe>>>=7,de-=7}if($.have+ke>$.nlen+$.ndist){Y.msg="invalid bit length repeat",$.mode=V;break}for(;ke--;)$.lens[$.have++]=_e}}if($.mode===V)break;if(0===$.lens[256]){Y.msg="invalid code -- missing end-of-block",$.mode=V;break}if($.lenbits=9,ze={bits:$.lenbits},ye=s(r,$.lens,0,$.nlen,$.lencode,0,$.work,ze),$.lenbits=ze.bits,ye){Y.msg="invalid literal/lengths set",$.mode=V;break}if($.distbits=6,$.distcode=$.distdyn,ze={bits:$.distbits},ye=s(o,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,ze),$.distbits=ze.bits,ye){Y.msg="invalid distances set",$.mode=V;break}if($.mode=N,Z===f)break e;case N:$.mode=F;case F:if(ne>=6&&re>=258){Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,i(Y,fe),se=Y.next_out,te=Y.output,re=Y.avail_out,ie=Y.next_in,ee=Y.input,ne=Y.avail_in,oe=$.hold,de=$.bits,$.mode===R&&($.back=-1);break}for($.back=0;ue=(Se=$.lencode[oe&(1<<$.lenbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(ue&&0==(240&ue)){for(ve=we,xe=ue,pe=ge;ue=(Se=$.lencode[pe+((oe&(1<<ve+xe)-1)>>ve)])>>>16&255,ge=65535&Se,!(ve+(we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}oe>>>=ve,de-=ve,$.back+=ve}if(oe>>>=we,de-=we,$.back+=we,$.length=ge,0===ue){$.mode=P;break}if(32&ue){$.back=-1,$.mode=R;break}if(64&ue){Y.msg="invalid literal/length code",$.mode=V;break}$.extra=15&ue,$.mode=J;case J:if($.extra){for(Be=$.extra;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.length+=oe&(1<<$.extra)-1,oe>>>=$.extra,de-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=L;case L:for(;ue=(Se=$.distcode[oe&(1<<$.distbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(0==(240&ue)){for(ve=we,xe=ue,pe=ge;ue=(Se=$.distcode[pe+((oe&(1<<ve+xe)-1)>>ve)])>>>16&255,ge=65535&Se,!(ve+(we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}oe>>>=ve,de-=ve,$.back+=ve}if(oe>>>=we,de-=we,$.back+=we,64&ue){Y.msg="invalid distance code",$.mode=V;break}$.offset=ge,$.extra=15&ue,$.mode=M;case M:if($.extra){for(Be=$.extra;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.offset+=oe&(1<<$.extra)-1,oe>>>=$.extra,de-=$.extra,$.back+=$.extra}if($.offset>$.dmax){Y.msg="invalid distance too far back",$.mode=V;break}$.mode=O;case O:if(0===re)break e;if(ke=fe-re,$.offset>ke){if((ke=$.offset-ke)>$.whave&&$.sane){Y.msg="invalid distance too far back",$.mode=V;break}ke>$.wnext?(ke-=$.wnext,be=$.wsize-ke):be=$.wnext-ke,ke>$.length&&(ke=$.length),me=$.window}else me=te,be=se-$.offset,ke=$.length;ke>re&&(ke=re),re-=ke,$.length-=ke;do{te[se++]=me[be++]}while(--ke);0===$.length&&($.mode=F);break;case P:if(0===re)break e;te[se++]=$.length,re--,$.mode=F;break;case Q:if($.wrap){for(;de<32;){if(0===ne)break e;ne--,oe|=ee[ie++]<<de,de+=8}if(fe-=re,Y.total_out+=fe,$.total+=fe,fe&&(Y.adler=$.check=$.flags?t($.check,te,fe,se-fe):a($.check,te,fe,se-fe)),fe=re,($.flags?oe:ae(oe))!==$.check){Y.msg="incorrect data check",$.mode=V;break}oe=0,de=0}$.mode=T;case T:if($.wrap&&$.flags){for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe!==(4294967295&$.total)){Y.msg="incorrect length check",$.mode=V;break}oe=0,de=0}$.mode=U;case U:ye=h;break e;case V:ye=m;break e;case W:return w;case X:default:return b}return Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,($.wsize||fe!==Y.avail_out&&$.mode<V&&($.mode<Q||Z!==d))&&he(Y,Y.output,Y.next_out,fe-Y.avail_out)?($.mode=W,w):(le-=Y.avail_in,fe-=Y.avail_out,Y.total_in+=le,Y.total_out+=fe,$.total+=fe,$.wrap&&fe&&(Y.adler=$.check=$.flags?t($.check,te,fe,Y.next_out-fe):a($.check,te,fe,Y.next_out-fe)),Y.data_type=$.bits+($.last?64:0)+($.mode===R?128:0)+($.mode===N||$.mode===D?256:0),(0===le&&0===fe||Z===d)&&ye===c&&(ye=u),ye)}function be(e){if(!e||!e.state)return b;var a=e.state;return a.window&&(a.window=null),e.state=null,c}function me(e,a){var t;return e&&e.state?0==(2&(t=e.state).wrap)?b:(t.head=a,a.done=!1,c):b}function we(e,t){var i,s=t.length;return e&&e.state?0!==(i=e.state).wrap&&i.mode!==I?b:i.mode===I&&a(1,t,s,0)!==i.check?m:he(e,t,s,s)?(i.mode=W,w):(i.havedict=1,c):b}exports.inflateReset=se,exports.inflateReset2=ne,exports.inflateResetKeep=ie,exports.inflateInit=oe,exports.inflateInit2=re,exports.inflate=ke,exports.inflateEnd=be,exports.inflateGetHeader=me,exports.inflateSetDictionary=we,exports.inflateInfo="pako inflate (from Nodeca project)";
},{"../utils/common":"czUR","./adler32":"CRrX","./crc32":"CwDA","./inffast":"Hbr3","./inftrees":"jhci"}],"w4f7":[function(require,module,exports) {
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};
},{}],"pJu6":[function(require,module,exports) {
"use strict";function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=t;
},{}],"SX0I":[function(require,module,exports) {
"use strict";var t=require("./zlib/inflate"),i=require("./utils/common"),n=require("./utils/strings"),r=require("./zlib/constants"),s=require("./zlib/messages"),o=require("./zlib/zstream"),e=require("./zlib/gzheader"),a=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},h||{});var _=this.options;_.raw&&_.windowBits>=0&&_.windowBits<16&&(_.windowBits=-_.windowBits,0===_.windowBits&&(_.windowBits=-15)),!(_.windowBits>=0&&_.windowBits<16)||h&&h.windowBits||(_.windowBits+=32),_.windowBits>15&&_.windowBits<48&&0==(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var w=t.inflateInit2(this.strm,_.windowBits);if(w!==r.Z_OK)throw new Error(s[w]);if(this.header=new e,t.inflateGetHeader(this.strm,this.header),_.dictionary&&("string"==typeof _.dictionary?_.dictionary=n.string2buf(_.dictionary):"[object ArrayBuffer]"===a.call(_.dictionary)&&(_.dictionary=new Uint8Array(_.dictionary)),_.raw&&(w=t.inflateSetDictionary(this.strm,_.dictionary))!==r.Z_OK))throw new Error(s[w])}function h(t,i){var n=new u(i);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}function _(t,i){return(i=i||{}).raw=!0,h(t,i)}u.prototype.push=function(s,o){var e,u,h,_,w,d=this.strm,l=this.options.chunkSize,f=this.options.dictionary,p=!1;if(this.ended)return!1;u=o===~~o?o:!0===o?r.Z_FINISH:r.Z_NO_FLUSH,"string"==typeof s?d.input=n.binstring2buf(s):"[object ArrayBuffer]"===a.call(s)?d.input=new Uint8Array(s):d.input=s,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(l),d.next_out=0,d.avail_out=l),(e=t.inflate(d,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&f&&(e=t.inflateSetDictionary(this.strm,f)),e===r.Z_BUF_ERROR&&!0===p&&(e=r.Z_OK,p=!1),e!==r.Z_STREAM_END&&e!==r.Z_OK)return this.onEnd(e),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&e!==r.Z_STREAM_END&&(0!==d.avail_in||u!==r.Z_FINISH&&u!==r.Z_SYNC_FLUSH)||("string"===this.options.to?(h=n.utf8border(d.output,d.next_out),_=d.next_out-h,w=n.buf2string(d.output,h),d.next_out=_,d.avail_out=l-_,_&&i.arraySet(d.output,d.output,h,_,0),this.onData(w)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(p=!0)}while((d.avail_in>0||0===d.avail_out)&&e!==r.Z_STREAM_END);return e===r.Z_STREAM_END&&(u=r.Z_FINISH),u===r.Z_FINISH?(e=t.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===r.Z_OK):u!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),d.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===r.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=u,exports.inflate=h,exports.inflateRaw=_,exports.ungzip=h;
},{"./zlib/inflate":"NU6N","./utils/common":"czUR","./utils/strings":"UO2g","./zlib/constants":"w4f7","./zlib/messages":"gN2D","./zlib/zstream":"XKOj","./zlib/gzheader":"pJu6"}],"VwsR":[function(require,module,exports) {
"use strict";var e=require("./lib/utils/common").assign,i=require("./lib/deflate"),r=require("./lib/inflate"),l=require("./lib/zlib/constants"),s={};e(s,i,r,l),module.exports=s;
},{"./lib/utils/common":"czUR","./lib/deflate":"LwLr","./lib/inflate":"SX0I","./lib/zlib/constants":"w4f7"}],"uWrb":[function(require,module,exports) {

var process = require("process");
var t=require("process");function e(t){return Array.isArray(t)?t:[t]}const r="",n=" ",s="\\",i=/^\s+$/,c=/^\\!/,o=/^\\#/,a=/\r?\n/g,h=/^\.*\/|^\.+$/,u="/",d="undefined"!=typeof Symbol?Symbol.for("node-ignore"):"node-ignore",l=(t,e,r)=>Object.defineProperty(t,e,{value:r}),g=/([0-z])-([0-z])/g,_=t=>t.replace(g,(t,e,r)=>e.charCodeAt(0)<=r.charCodeAt(0)?t:""),p=t=>{const{length:e}=t;return t.slice(0,e-e%2)},f=[[/\\?\s+$/,t=>0===t.indexOf("\\")?" ":""],[/\\\s/g,()=>" "],[/[\\$.|*+(){^]/g,t=>"\\".concat(t)],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(t,e)=>"".concat(e,"[^\\/]*")],[/\\\\\\(?=[$.|*+(){^])/g,()=>"\\"],[/\\\\/g,()=>"\\"],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,s)=>"\\"===e?"\\[".concat(r).concat(p(n)).concat(s):"]"===s&&n.length%2==0?"[".concat(_(r)).concat(n,"]"):"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?"".concat(t,"$"):"".concat(t,"(?=$|\\/$)")],[/(\^|\\\/)?\\\*$/,(t,e)=>{const r=e?"".concat(e,"[^/]+"):"[^/]*";return"".concat(r,"(?=$|\\/$)")}]],$=Object.create(null),v=(t,e,r)=>{const n=$[t];if(n)return n;const s=f.reduce((e,r)=>e.replace(r[0],r[1].bind(t)),t);return $[t]=r?new RegExp(s,"i"):new RegExp(s)},b=t=>"string"==typeof t,y=t=>t&&b(t)&&!i.test(t)&&0!==t.indexOf("#"),O=t=>t.split(a);class C{constructor(t,e,r,n){this.origin=t,this.pattern=e,this.negative=r,this.regex=n}}const x=(t,e)=>{const r=t;let n=!1;0===t.indexOf("!")&&(n=!0,t=t.substr(1)),t=t.replace(c,"!").replace(o,"#");const s=v(t,0,e);return new C(r,t,n,s)},m=(t,e)=>{throw new e(t)},w=(t,e,r)=>{if(!b(t))return r("path must be a string, but got `".concat(e,"`"),TypeError);if(!t)return r("path must not be empty",TypeError);if(w.isNotRelative(t)){return r("path should be a ".concat("`path.relative()`d",' string, but got "').concat(e,'"'),RangeError)}return!0},E=t=>h.test(t);w.isNotRelative=E,w.convert=(t=>t);class R{constructor({ignorecase:t=!0}={}){this._rules=[],this._ignorecase=t,l(this,d,!0),this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[d])return this._rules=this._rules.concat(t._rules),void(this._added=!0);if(y(t)){const e=x(t,this._ignorecase);this._added=!0,this._rules.push(e)}}add(t){return this._added=!1,e(b(t)?O(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,e){let r=!1,n=!1;return this._rules.forEach(s=>{const{negative:i}=s;n===i&&r!==n||i&&!r&&!n&&!e||s.regex.test(t)&&(r=!i,n=i)}),{ignored:r,unignored:n}}_test(t,e,r,n){const s=t&&w.convert(t);return w(s,t,m),this._t(s,e,r,n)}_t(t,e,r,n){if(t in e)return e[t];if(n||(n=t.split(u)),n.pop(),!n.length)return e[t]=this._testOne(t,r);const s=this._t(n.join(u)+u,e,r,n);return e[t]=s.ignored?s:this._testOne(t,r)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return e(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}}const j=t=>new R(t),P=()=>!1,A=t=>w(t&&w.convert(t),t,P);if(j.isPathValid=A,j.default=j,module.exports=j,void 0!==t&&(t.env,"win32"===t.platform)){const t=t=>/^\\\\\?\\/.test(t)||/["<>|\u0000-\u001F]+/u.test(t)?t:t.replace(/\\/g,"/");w.convert=t;const e=/^[a-z]:\//i;w.isNotRelative=(t=>e.test(t)||E(t))}
},{"process":"nx4R"}],"WsXn":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}var r=function(t,r){return function(){for(var n=this,o=arguments.length,e=new Array(o),u=0;u<o;u++)e[u]=arguments[u];return new(0,r.promiseModule)(function(o,u){r.multiArgs?e.push(function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];r.errorFirst?n[0]?u(n):(n.shift(),o(n)):o(n)}):r.errorFirst?e.push(function(t,r){t?u(t):o(r)}):e.push(o),t.apply(n,e)})}};module.exports=function(n,o){o=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},o);var e=t(n);if(null===n||"object"!==e&&"function"!==e)throw new TypeError("Expected `input` to be a `Function` or `Object`, got `".concat(null===n?"null":e,"`"));var u,i=function(t){var r=function(r){return"string"==typeof r?t===r:r.test(t)};return o.include?o.include.some(r):!o.exclude.some(r)};for(var c in u="function"===e?function(){for(var t=arguments.length,e=new Array(t),u=0;u<t;u++)e[u]=arguments[u];return o.excludeMain?n.apply(void 0,e):r(n,o).apply(this,e)}:Object.create(Object.getPrototypeOf(n)),n){var f=n[c];u[c]="function"==typeof f&&i(c)?r(f,o):f}return u};
},{}],"HFzr":[function(require,module,exports) {
"use strict";function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(r,n,t){return n=n instanceof RegExp?n:new RegExp(e(n),"g"),r.replace(n,t)}var n={clean:function(e){if("string"!=typeof e)throw new Error("Expected a string, received: "+e);return e=r(e,"./","/"),e=r(e,"..","."),e=r(e," ","-"),e=r(e,/^[~^:?*\\\-]/g,""),e=r(e,/[~^:?*\\]/g,"-"),e=r(e,/[~^:?*\\\-]$/g,""),e=r(e,"@{","-"),e=r(e,/\.$/g,""),e=r(e,/\/$/g,""),e=r(e,/\.lock$/g,"")}};module.exports=n;
},{}],"nXNU":[function(require,module,exports) {
module.exports=function(n,e){var t,r,o=n,u=e,l=o.length,f=u.length,c=!1,i=null,g=l+1,h=[],a=[],x=[],s="",w=function(n,e,t){return{x:n,y:e,k:t}},E=function(n,e){return{elem:n,t:e}},S=function(n,e,t){var r,c,i;for(r=e>t?h[n-1+g]:h[n+1+g],c=(i=Math.max(e,t))-n;c<l&&i<f&&o[c]===u[i];)++c,++i;return h[n+g]=a.length,a[a.length]=new w(c,i,r),i};return l>=f&&(t=o,r=l,o=u,u=t,l=f,f=r,c=!0,g=l+1),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return i},getlcs:function(){return s},getses:function(){return x},compose:function(){var n,e,t,r,y,d,m,v;for(n=f-l,e=l+f+3,t={},m=0;m<e;++m)t[m]=-1,h[m]=-1;r=-1;do{for(v=-++r;v<=n-1;++v)t[v+g]=S(v,t[v-1+g]+1,t[v+1+g]);for(v=n+r;v>=n+1;--v)t[v+g]=S(v,t[v-1+g]+1,t[v+1+g]);t[n+g]=S(n,t[n-1+g]+1,t[n+1+g])}while(t[n+g]!==f);for(i=n+2*r,y=h[n+g],d=[];-1!==y;)d[d.length]=new w(a[y].x,a[y].y,null),y=a[y].k;!function(n){var e,t,r;for(e=t=0,r=n.length-1;r>=0;--r)for(;e<n[r].x||t<n[r].y;)n[r].y-n[r].x>t-e?(x[x.length]=new E(u[t],c?-1:1),++t):n[r].y-n[r].x<t-e?(x[x.length]=new E(o[e],c?1:-1),++e):(x[x.length]=new E(o[e],0),s+=o[e],++e,++t)}(d)}}};
},{}],"P8MV":[function(require,module,exports) {
var n=require("./onp");function e(e,i){var r=new n(e,i);r.compose();for(var l,t,f=r.getses(),a=e.length-1,h=i.length-1,u=f.length-1;u>=0;--u)f[u].t===r.SES_COMMON?(t?(t.chain={file1index:a,file2index:h,chain:null},t=t.chain):t=l={file1index:a,file2index:h,chain:null},a--,h--):f[u].t===r.SES_DELETE?a--:f[u].t===r.SES_ADD&&h--;var o={file1index:-1,file2index:-1,chain:null};return t?(t.chain=o,l):o}function i(n,i){for(var r=[],l=n.length,t=i.length,f=e(n,i);null!==f;f=f.chain){var a=l-f.file1index-1,h=t-f.file2index-1;l=f.file1index,t=f.file2index,(a||h)&&r.push({file1:[l+1,a],file2:[t+1,h]})}return r.reverse(),r}function r(n,e,r){var l,t=i(e,n),f=i(e,r),a=[];function h(n,e){a.push([n.file1[0],e,n.file1[1],n.file2[0],n.file2[1]])}for(l=0;l<t.length;l++)h(t[l],0);for(l=0;l<f.length;l++)h(f[l],2);a.sort(function(n,e){return n[0]-e[0]});var u=[],o=0;function c(n){n>o&&(u.push([1,o,n-o]),o=n)}for(var s=0;s<a.length;s++){for(var v=s,g=a[s],x=g[0],d=x+g[2];s<a.length-1;){var p=a[s+1],m=p[0];if(m>d)break;d=Math.max(d,m+p[2]),s++}if(c(x),v==s)g[4]>0&&u.push([g[1],g[3],g[4]]);else{var M={0:[n.length,-1,e.length,-1],2:[r.length,-1,e.length,-1]};for(l=v;l<=s;l++){var E=M[(g=a[l])[1]],S=g[0],b=S+g[2],D=g[3],I=D+g[4];E[0]=Math.min(D,E[0]),E[1]=Math.max(I,E[1]),E[2]=Math.min(S,E[2]),E[3]=Math.max(b,E[3])}var _=M[0][0]+(x-M[0][2]),k=M[0][1]+(d-M[0][3]),O=M[2][0]+(x-M[2][2]),q=M[2][1]+(d-M[2][3]);u.push([-1,_,k-_,x,d-x,O,q-O])}o=d}return c(e.length),u}function l(n,e,i){var l=[],t=[n,e,i],f=r(n,e,i),a=[];function h(){a.length&&l.push({ok:a}),a=[]}function u(n){for(var e=0;e<n.length;e++)a.push(n[e])}function o(e){if(e[2]!=e[6])return!0;for(var r=e[1],l=e[5],t=0;t<e[2];t++)if(n[t+r]!=i[t+l])return!0;return!1}for(var c=0;c<f.length;c++){var s=f[c],v=s[0];-1==v?o(s)?(h(),l.push({conflict:{a:n.slice(s[1],s[1]+s[2]),aIndex:s[1],o:e.slice(s[3],s[3]+s[4]),oIndex:s[3],b:i.slice(s[5],s[5]+s[6]),bIndex:s[5]}})):u(t[0].slice(s[1],s[1]+s[2])):u(t[v].slice(s[1],s[1]+s[2]))}return h(),l}module.exports=l;
},{"./onp":"nXNU"}],"oKjG":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.STAGE=_e,exports.TREE=_r,exports.WORKDIR=Sr,exports.add=Hr,exports.addNote=pn,exports.addRemote=mn,exports.annotatedTag=bn,exports.branch=Rn,exports.checkout=Un,exports.clone=Ba,exports.commit=Na,exports.currentBranch=Ua,exports.deleteBranch=Ha,exports.deleteRef=Ga,exports.deleteRemote=$a,exports.deleteTag=Ya,exports.expandOid=ai,exports.expandRef=si,exports.fastForward=yi,exports.fetch=_i,exports.findMergeBase=Si,exports.findRoot=Oi,exports.getConfig=Bi,exports.getConfigAll=Ui,exports.getRemoteInfo=Mi,exports.getRemoteInfo2=zi,exports.hashBlob=Ki,exports.indexPack=Zi,exports.init=Ji,exports.isDescendent=ts,exports.listBranches=ns,exports.listFiles=os,exports.listNotes=ls,exports.listRemotes=vs,exports.listServerRefs=Rs,exports.listTags=Es,exports.log=Ns,exports.merge=Us,exports.packObjects=Ws,exports.pull=Ks,exports.push=nu,exports.readBlob=ou,exports.readCommit=pu,exports.readNote=mu,exports.readObject=vu,exports.readTag=wu,exports.readTree=Ru,exports.remove=Eu,exports.removeNote=Au,exports.renameBranch=Cu,exports.resetIndex=Tu,exports.resolveRef=Fu,exports.setConfig=zu,exports.status=Wu,exports.statusMatrix=Zu,exports.tag=Ju,exports.version=Qu,exports.walk=ec,exports.writeBlob=rc,exports.writeCommit=sc,exports.writeObject=cc,exports.writeRef=fc,exports.writeTag=hc,exports.writeTree=gc,exports.Errors=exports.default=void 0;var t=o(require("async-lock")),r=o(require("sha.js/sha1.js")),n=o(require("crc-32")),a=o(require("pako")),i=o(require("ignore")),s=o(require("pify")),u=o(require("clean-git-ref")),c=o(require("diff3"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return j(e)||v(e)||_(e)||R()}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l=regeneratorRuntime.mark(Pn);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){return x(e)||v(e)||_(e)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function x(e){if(Array.isArray(e))return E(e)}function b(e,t,r,n,a,i,s){try{var u=e[i](s),c=u.value}catch(o){return void r(o)}u.done?t(c):Promise.resolve(c).then(n,a)}function k(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){b(i,n,a,s,u,"next",e)}function u(e){b(i,n,a,s,u,"throw",e)}s(void 0)})}}function w(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function y(e,t){return j(e)||S(e,t)||_(e,t)||R()}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}}function j(e){if(Array.isArray(e))return e}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,r){return t&&O(e.prototype,t),r&&O(e,r),e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function C(e){var t=M();return function(){var r,n=z(e);if(t){var a=z(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return N(this,r)}}function N(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){var t="function"==typeof Map?new Map:void 0;return(U=function(e){if(null===e||!F(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return T(e,arguments,z(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),H(r,e)})(e)}function T(e,t,r){return(T=M()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&H(a,r.prototype),a}).apply(null,arguments)}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function F(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){B(r,U(Error));var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,e)).caller="",n}return I(r,[{key:"toJSON",value:function(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}},{key:"fromJSON",value:function(e){var t=new r(e.message);return t.code=e.code,t.data=e.data,t.caller=e.caller,t.stack=e.stack,t}},{key:"isIsomorphicGitError",get:function(){return!0}}]),r}(),W=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,"An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ".concat(e))).code=n.name=r.code,n.data={message:e},n}return r}();W.code="InternalError";var q=function(){function e(t){A(this,e),this.buffer=t,this._start=0}return I(e,[{key:"eof",value:function(){return this._start>=this.buffer.length}},{key:"tell",value:function(){return this._start}},{key:"seek",value:function(e){this._start=e}},{key:"slice",value:function(e){var t=this.buffer.slice(this._start,this._start+e);return this._start+=e,t}},{key:"toString",value:function(e,t){var r=this.buffer.toString(e,this._start,this._start+t);return this._start+=t,r}},{key:"write",value:function(e,t,r){var n=this.buffer.write(e,this._start,t,r);return this._start+=t,n}},{key:"copy",value:function(e,t,r){var n=e.copy(this.buffer,this._start,t,r);return this._start+=n,n}},{key:"readUInt8",value:function(){var e=this.buffer.readUInt8(this._start);return this._start+=1,e}},{key:"writeUInt8",value:function(e){var t=this.buffer.writeUInt8(e,this._start);return this._start+=1,t}},{key:"readUInt16BE",value:function(){var e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}},{key:"writeUInt16BE",value:function(e){var t=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,t}},{key:"readUInt32BE",value:function(){var e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}},{key:"writeUInt32BE",value:function(e){var t=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,t}}]),e}();function K(e,t){return-(e<t)||+(e>t)}function $(e,t){return K(e.path,t.path)}function L(e){var t=e>0?e>>12:0;4!==t&&8!==t&&10!==t&&14!==t&&(t=8);var r=511&e;return r=73&r?493:420,8!==t&&(r=0),(t<<12)+r}var V=Math.pow(2,32);function Z(e,t,r,n){if(void 0!==e&&void 0!==t)return[e,t];void 0===r&&(r=n.valueOf());var a=Math.floor(r/1e3);return[a,1e6*(r-1e3*a)]}function Y(e){var t=y(Z(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),2),r=t[0],n=t[1],a=y(Z(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime),2),i=a[0],s=a[1];return{ctimeSeconds:r%V,ctimeNanoseconds:n%V,mtimeSeconds:i%V,mtimeNanoseconds:s%V,dev:e.dev%V,ino:e.ino%V,mode:L(e.mode%V),uid:e.uid%V,gid:e.gid%V,size:e.size>-1?e.size%V:0}}function J(e){var t,r="",n=w(new Uint8Array(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;a<16&&(r+="0"),r+=a.toString(16)}}catch(i){n.e(i)}finally{n.f()}return r}var X=null;function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==X){e.next=4;break}return e.next=3,ae();case 3:X=e.sent;case 4:return e.abrupt("return",X?re(t):te(t));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e){return(new r.default).update(e).digest("hex")}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=k(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.digest("SHA-1",t);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(){return ie.apply(this,arguments)}function ie(){return(ie=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re(new Uint8Array([]));case 3:if("da39a3ee5e6b4b0d3255bfef95601890afd80709"!==e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function se(e){return{assumeValid:Boolean(32768&e),extended:Boolean(16384&e),stage:(12288&e)>>12,nameLength:4095&e}}function ue(t){var r=t.flags;return r.extended=!1,r.nameLength=Math.min(e.from(t.path).length,4095),(r.assumeValid?32768:0)+(r.extended?16384:0)+((3&r.stage)<<12)+(4095&r.nameLength)}var ce=function(){function t(e){A(this,t),this._dirty=!1,this._entries=e||new Map}return I(t,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=w(this.entries),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"insert",value:function(t){var r=t.filepath,n=t.stats,a=t.oid;n=Y(n);var i=e.from(r),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:r,oid:a,flags:{assumeValid:!1,extended:!1,stage:0,nameLength:i.length<4095?i.length:4095}};this._entries.set(s.path,s),this._dirty=!0}},{key:"delete",value:function(e){var t=e.filepath;if(this._entries.has(t))this._entries.delete(t);else{var r,n=w(this._entries.keys());try{for(n.s();!(r=n.n()).done;){var a=r.value;a.startsWith(t+"/")&&this._entries.delete(a)}}catch(i){n.e(i)}finally{n.f()}}this._dirty=!0}},{key:"clear",value:function(){this._entries.clear(),this._dirty=!0}},{key:"render",value:function(){return this.entries.map(function(e){return"".concat(e.mode.toString(8)," ").concat(e.oid,"    ").concat(e.path)}).join("\n")}},{key:"toObject",value:function(){var t=k(regeneratorRuntime.mark(function t(){var r,n,a,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.alloc(12),(n=new q(r)).write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entries.length),a=e.concat(this.entries.map(function(t){var r=e.from(t.path),n=8*Math.ceil((62+r.length+1)/8),a=e.alloc(n),i=new q(a),s=Y(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(ue(t)),i.write(t.path,r.length,"utf8"),a})),i=e.concat([r,a]),t.next=9,Q(i);case 9:return s=t.sent,t.abrupt("return",e.concat([i,e.from(s,"hex")]));case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"entries",get:function(){return m(this._entries.values()).sort($)}},{key:"entriesMap",get:function(){return this._entries}}],[{key:"from",value:function(){var r=k(regeneratorRuntime.mark(function r(n){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.isBuffer(n)){r.next=4;break}return r.abrupt("return",t.fromBuffer(n));case 4:if(null!==n){r.next=8;break}return r.abrupt("return",new t(null));case 8:throw new W("invalid type passed to GitIndex.from");case 9:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},{key:"fromBuffer",value:function(){var e=k(regeneratorRuntime.mark(function e(r){var n,a,i,s,u,c,o,f,p,d,l,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(r.slice(0,-20));case 2:if(n=e.sent,(a=r.slice(-20).toString("hex"))===n){e.next=6;break}throw new W("Invalid checksum in GitIndex buffer: expected ".concat(a," but saw ").concat(n));case 6:if(i=new q(r),s=new Map,"DIRC"===(u=i.toString("utf8",4))){e.next=11;break}throw new W("Inavlid dircache magic file number: ".concat(u));case 11:if(2===(c=i.readUInt32BE())){e.next=14;break}throw new W("Unsupported dircache version: ".concat(c));case 14:o=i.readUInt32BE(),f=0;case 16:if(i.eof()||!(f<o)){e.next=51;break}if((p={}).ctimeSeconds=i.readUInt32BE(),p.ctimeNanoseconds=i.readUInt32BE(),p.mtimeSeconds=i.readUInt32BE(),p.mtimeNanoseconds=i.readUInt32BE(),p.dev=i.readUInt32BE(),p.ino=i.readUInt32BE(),p.mode=i.readUInt32BE(),p.uid=i.readUInt32BE(),p.gid=i.readUInt32BE(),p.size=i.readUInt32BE(),p.oid=i.slice(20).toString("hex"),d=i.readUInt16BE(),p.flags=se(d),!((l=r.indexOf(0,i.tell()+1)-i.tell())<1)){e.next=34;break}throw new W("Got a path length of: ".concat(l));case 34:p.path=i.toString("utf8",l),0===(h=8-(i.tell()-12)%8)&&(h=8);case 37:if(!h--){e.next=47;break}if(0===(m=i.readUInt8())){e.next=43;break}throw new W("Expected 1-8 null characters but got '".concat(m,"' after ").concat(p.path));case 43:if(!i.eof()){e.next=45;break}throw new W("Unexpected end of file");case 45:e.next=37;break;case 47:s.set(p.path,p),f++,e.next=16;break;case 51:return e.abrupt("return",new t(s));case 52:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}();function oe(e,t){var r=Y(e),n=Y(t);return r.mode!==n.mode||r.mtimeSeconds!==n.mtimeSeconds||r.ctimeSeconds!==n.ctimeSeconds||r.uid!==n.uid||r.gid!==n.gid||r.ino!==n.ino||r.size!==n.size}var fe=null,pe=Symbol("IndexCache");function de(){return{map:new Map,stats:new Map}}function le(e,t,r){return he.apply(this,arguments)}function he(){return(he=k(regeneratorRuntime.mark(function e(t,r,n){var a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.lstat(r);case 2:return a=e.sent,e.next=5,t.read(r);case 5:return i=e.sent,e.next=8,ce.from(i);case 8:s=e.sent,n.map.set(r,s),n.stats.set(r,a);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e,t,r){return ge.apply(this,arguments)}function ge(){return(ge=k(regeneratorRuntime.mark(function e(t,r,n){var a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=n.stats.get(r))){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,t.lstat(r);case 5:if(i=e.sent,null!==a){e.next=8;break}return e.abrupt("return",!1);case 8:if(null!==i){e.next=10;break}return e.abrupt("return",!1);case 10:return e.abrupt("return",oe(a,i));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ve=function(){function e(){A(this,e)}return I(e,null,[{key:"acquire",value:function(){var e=k(regeneratorRuntime.mark(function e(r,n){var a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.fs,i=r.gitdir,(s=r.cache)[pe]||(s[pe]=de()),u="".concat(i,"/index"),null===fe&&(fe=new t.default({maxPending:1/0})),e.next=6,fe.acquire(u,k(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(a,u,s[pe]);case 2:if(!e.sent){e.next=5;break}return e.next=5,le(a,u,s[pe]);case 5:return t=s[pe].map.get(u),e.next=8,n(t);case 8:if(c=e.sent,!t._dirty){e.next=22;break}return e.next=12,t.toObject();case 12:return r=e.sent,e.next=15,a.write(u,r);case 15:return e.t0=s[pe].stats,e.t1=u,e.next=19,a.lstat(u);case 19:e.t2=e.sent,e.t0.set.call(e.t0,e.t1,e.t2),t._dirty=!1;case 22:case"end":return e.stop()}},e)})));case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function xe(e){var t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function be(e){var t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return-1===t?".":0===t?"/":e.slice(0,t)}function ke(e){var t=new Map,r=function e(r){if(!t.has(r)){var n={type:"tree",fullpath:r,basename:xe(r),metadata:{},children:[]};t.set(r,n),n.parent=e(be(r)),n.parent&&n.parent!==n&&n.parent.children.push(n)}return t.get(r)},n=function(e,n){if(!t.has(e)){var a={type:"blob",fullpath:e,basename:xe(e),metadata:n,parent:r(be(e)),children:[]};a.parent&&a.parent.children.push(a),t.set(e,a)}return t.get(e)};r(".");var a,i=w(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;n(s.path,s)}}catch(u){i.e(u)}finally{i.f()}return t}function we(e){switch(e){case 16384:return"tree";case 33188:case 33261:case 40960:return"blob";case 57344:return"commit"}throw new W("Unexpected GitTree entry mode: ".concat(e.toString(8)))}var ye=function(){function e(t){var r=t.fs,n=t.gitdir,a=t.cache;A(this,e),this.treePromise=ve.acquire({fs:r,gitdir:n,cache:a},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ke(t.entries));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var i=this;this.ConstructEntry=function(){function e(t){A(this,e),this._fullpath=t,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}return I(e,[{key:"type",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.type(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"mode",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.mode(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stat",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.stat(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"content",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.content(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"oid",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.oid(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}()}return I(e,[{key:"readdir",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._fullpath,e.next=3,this.treePromise;case 3:if(n=e.sent,a=n.get(r)){e.next=7;break}return e.abrupt("return",null);case 7:if("blob"!==a.type){e.next=9;break}return e.abrupt("return",null);case 9:if("tree"===a.type){e.next=11;break}throw new Error("ENOTDIR: not a directory, scandir '".concat(r,"'"));case 11:return(i=a.children.map(function(e){return e.fullpath})).sort(K),e.abrupt("return",i);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"type",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._type){e.next=3;break}return e.next=3,t.stat();case 3:return e.abrupt("return",t._type);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"mode",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._mode){e.next=3;break}return e.next=3,t.stat();case 3:return e.abrupt("return",t._mode);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"stat",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._stat){e.next=11;break}return e.next=3,this.treePromise;case 3:if(r=e.sent,n=r.get(t._fullpath)){e.next=7;break}throw new Error("ENOENT: no such file or directory, lstat '".concat(t._fullpath,"'"));case 7:a="tree"===n.type?{}:Y(n.metadata),t._type="tree"===n.type?"tree":we(a.mode),t._mode=a.mode,"tree"===n.type?t._stat=void 0:t._stat=a;case 11:return e.abrupt("return",t._stat);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"content",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"oid",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._oid){e.next=6;break}return e.next=3,this.treePromise;case 3:r=e.sent,n=r.get(t._fullpath),t._oid=n.metadata.oid;case 6:return e.abrupt("return",t._oid);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Re=Symbol("GitWalkSymbol");function _e(){var e=Object.create(null);return Object.defineProperty(e,Re,{value:function(e){var t=e.fs,r=e.gitdir,n=e.cache;return new ye({fs:t,gitdir:r,cache:n})}}),Object.freeze(e),e}var Ee=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,"Could not find ".concat(e,"."))).code=n.name=r.code,n.data={what:e},n}return r}();Ee.code="NotFoundError";var Se=function(e){B(r,G);var t=C(r);function r(e,n,a,i){var s;return A(this,r),(s=t.call(this,"Object ".concat(e," ").concat(i?"at ".concat(i):"","was anticipated to be a ").concat(a," but it is a ").concat(n,"."))).code=s.name=r.code,s.data={oid:e,actual:n,expected:a,filepath:i},s}return r}();Se.code="ObjectTypeError";var je=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,'Expected a 40-char hex object id but saw "'.concat(e,'".'))).code=n.name=r.code,n.data={value:e},n}return r}();je.code="InvalidOidError";var Pe=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,'Could not find a fetch refspec for remote "'.concat(e,'". Make sure the config file has an entry like the following:\n[remote "').concat(e,'"]\n\tfetch = +refs/heads/*:refs/remotes/origin/*\n'))).code=n.name=r.code,n.data={remote:e},n}return r}();Pe.code="NoRefspecError";var Ae=function(){function e(t){var r=this;if(A(this,e),this.refs=new Map,this.parsedConfig=[],t){var n=null;this.parsedConfig=t.trim().split("\n").map(function(e){if(/^\s*#/.test(e))return{line:e,comment:!0};var t=e.indexOf(" ");if(e.startsWith("^")){var a=e.slice(1);return r.refs.set(n+"^{}",a),{line:e,ref:n,peeled:a}}var i=e.slice(0,t);return n=e.slice(t+1),r.refs.set(n,i),{line:e,ref:n,oid:i}})}return this}return I(e,[{key:"delete",value:function(e){this.parsedConfig=this.parsedConfig.filter(function(t){return t.ref!==e}),this.refs.delete(e)}},{key:"toString",value:function(){return this.parsedConfig.map(function(e){return e.line}).join("\n")+"\n"}}],[{key:"from",value:function(t){return new e(t)}}]),e}(),Oe=function(){function e(t){var r=t.remotePath,n=t.localPath,a=t.force,i=t.matchPrefix;A(this,e),Object.assign(this,{remotePath:r,localPath:n,force:a,matchPrefix:i})}return I(e,[{key:"translate",value:function(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}},{key:"reverseTranslate",value:function(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}}],[{key:"from",value:function(t){var r=y(t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),5),n=r[0],a=r[1],i=r[2],s=r[3],u="+"===n,c="*"===i;if(c!==("*"===r[4]))throw new W("Invalid refspec");return new e({remotePath:a,localPath:s,force:u,matchPrefix:c})}}]),e}(),Ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];A(this,e),this.rules=t}return I(e,[{key:"add",value:function(e){var t=Oe.from(e);this.rules.push(t)}},{key:"translate",value:function(e){var t,r=[],n=w(this.rules);try{for(n.s();!(t=n.n()).done;){var a,i=t.value,s=w(e);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=i.translate(u);c&&r.push([u,c])}}catch(o){s.e(o)}finally{s.f()}}}catch(o){n.e(o)}finally{n.f()}return r}},{key:"translateOne",value:function(e){var t,r=null,n=w(this.rules);try{for(n.s();!(t=n.n()).done;){var a=t.value.translate(e);a&&(r=a)}}catch(i){n.e(i)}finally{n.f()}return r}},{key:"localNamespaces",value:function(){return this.rules.filter(function(e){return e.matchPrefix}).map(function(e){return e.localPath.replace(/\/$/,"")})}}],[{key:"from",value:function(t){var r,n=[],a=w(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.push(Oe.from(i))}}catch(s){a.e(s)}finally{a.f()}return new e(n)}}]),e}();function Be(e,t){var r=e.replace(/\^\{\}$/,""),n=t.replace(/\^\{\}$/,""),a=-(r<n)||+(r>n);return 0===a?e.endsWith("^{}")?1:-1:a}function Ce(e){return e.replace(/\/\.\//g,"/").replace(/\/{2,}/g,"/").replace(/^\/\.$/,"/").replace(/^\.\/$/,".").replace(/^\.\//,"").replace(/\/\.$/,"").replace(/(.+)\/$/,"$1").replace(/^$/,".")}function Ne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ce(t.map(Ce).join("/"))}var De=function(e){e=e.toLowerCase();var t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1048576),e.endsWith("g")&&(t*=1073741824),t},Ue=function(e){if("true"===(e=e.trim().toLowerCase())||"yes"===e||"on"===e)return!0;if("false"===e||"no"===e||"off"===e)return!1;throw Error("Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ".concat(e))},Te={core:{filemode:Ue,bare:Ue,logallrefupdates:Ue,symlinks:Ue,ignorecase:Ue,bigFileThreshold:De}},Me=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,Fe=/^[A-Za-z0-9-.]+$/,He=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,ze=/^[A-Za-z][A-Za-z-]*$/,Ge=/^(.*?)( *[#;].*)$/,We=function(e){var t=Me.exec(e);if(null!=t){var r=y(t.slice(1),2);return[r[0],r[1]]}return null},qe=function(e){var t=He.exec(e);if(null!=t){var r=y(t.slice(1),2),n=r[0],a=r[1],i=Ke(void 0===a?"true":a);return[n,Le(i)]}return null},Ke=function(e){var t=Ge.exec(e);if(null==t)return e;var r=y(t.slice(1),2),n=r[0],a=r[1];return $e(n)&&$e(a)?"".concat(n).concat(a):n},$e=function(e){return(e.match(/(?:^|[^\\])"/g)||[]).length%2!=0},Le=function(e){return e.split("").reduce(function(e,t,r,n){var a='"'===t&&"\\"!==n[r-1],i="\\"===t&&'"'===n[r+1];return a||i?e:e+t},"")},Ve=function(e){return null!=e?e.toLowerCase():null},Ze=function(e,t,r){return[Ve(e),t,Ve(r)].filter(function(e){return null!=e}).join(".")},Ye=function(e,t){return e.reduce(function(e,r,n){return t(r)?n:e},-1)},Je=function(){function e(t){A(this,e);var r=null,n=null;this.parsedConfig=t.split("\n").map(function(e){var t=null,a=null,i=e.trim(),s=We(i),u=null!=s;if(u){var c=y(s,2);r=c[0],n=c[1]}else{var o=qe(i);if(null!=o){var f=y(o,2);t=f[0],a=f[1]}}var p=Ze(r,n,t);return{line:e,isSection:u,section:r,subsection:n,name:t,value:a,path:p}})}return I(e,[{key:"get",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]&&a[1],n=this.parsedConfig.filter(function(e){return e.path===t.toLowerCase()}).map(function(e){var t=e.section,r=e.name,n=e.value,a=Te[t]&&Te[t][r];return a?a(n):n}),e.abrupt("return",r?n:n.pop());case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getall",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get(t,!0));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSubsections",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.parsedConfig.filter(function(e){return e.section===t&&e.isSection}).map(function(e){return e.subsection}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteSection",value:function(){var e=k(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.parsedConfig=this.parsedConfig.filter(function(e){return!(e.section===t&&e.subsection===r)});case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"append",value:function(){var e=k(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.set(t,r,!0));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=k(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,u,c,o,f,p,d,l,h,m,g=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=g.length>2&&void 0!==g[2]&&g[2],a=Ye(this.parsedConfig,function(e){return e.path===t.toLowerCase()}),null==r?-1!==a&&this.parsedConfig.splice(a,1):-1!==a?(i=this.parsedConfig[a],s=Object.assign({},i,{value:r,modified:!0}),n?this.parsedConfig.splice(a+1,0,s):this.parsedConfig[a]=s):(u=t.split(".").slice(0,-1).join(".").toLowerCase(),c=this.parsedConfig.findIndex(function(e){return e.path===u}),o=u.split("."),f=y(o,2),p=f[0],d=f[1],l=t.split(".").pop(),h={section:p,subsection:d,name:l,value:r,modified:!0,path:Ze(p,d,l)},Fe.test(p)&&ze.test(l)&&(c>=0?this.parsedConfig.splice(c+1,0,h):(m={section:p,subsection:d,modified:!0,path:Ze(p,d,null)},this.parsedConfig.push(m,h))));case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return this.parsedConfig.map(function(e){var t=e.line,r=e.section,n=e.subsection,a=e.name,i=e.value,s=e.modified;return void 0!==s&&s?null!=a&&null!=i?"\t".concat(a," = ").concat(i):null!=n?"[".concat(r,' "').concat(n,'"]'):"[".concat(r,"]"):t}).join("\n")}}],[{key:"from",value:function(t){return new e(t)}}]),e}(),Xe=function(){function e(){A(this,e)}return I(e,null,[{key:"get",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,e.next=3,r.read("".concat(n,"/config"),{encoding:"utf8"});case 3:return a=e.sent,e.abrupt("return",Je.from(a));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.config,e.next=3,r.write("".concat(n,"/config"),a.toString(),{encoding:"utf8"});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qe=function(e){return["".concat(e),"refs/".concat(e),"refs/tags/".concat(e),"refs/heads/".concat(e),"refs/remotes/".concat(e),"refs/remotes/".concat(e,"/HEAD")]},et=["config","description","index","shallow","commondir"],tt=function(){function e(){A(this,e)}return I(e,null,[{key:"updateRemoteRefs",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l,h,g,v,x,b,k,R,_,E,S,j,P,A,O,I,B,C,N,D,U,T,M,F,H,z,G,W,q,K,$,L,V,Z,Y,J,X;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r.fs,a=r.gitdir,i=r.remote,s=r.refs,u=r.symrefs,c=r.tags,o=r.refspecs,f=void 0===o?void 0:o,p=r.prune,d=void 0!==p&&p,l=r.pruneTags,h=void 0!==l&&l,g=w(s.values()),t.prev=2,g.s();case 4:if((v=g.n()).done){t.next=10;break}if((x=v.value).match(/[0-9a-f]{40}/)){t.next=8;break}throw new je(x);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),g.e(t.t0);case 15:return t.prev=15,g.f(),t.finish(15);case 18:return t.next=20,Xe.get({fs:n,gitdir:a});case 20:if(b=t.sent,f){t.next=28;break}return t.next=24,b.getall("remote.".concat(i,".fetch"));case 24:if(0!==(f=t.sent).length){t.next=27;break}throw new Pe(i);case 27:f.unshift("+HEAD:refs/remotes/".concat(i,"/HEAD"));case 28:if(k=Ie.from(f),R=new Map,!h){t.next=36;break}return t.next=33,e.listRefs({fs:n,gitdir:a,filepath:"refs/tags"});case 33:return _=t.sent,t.next=36,e.deleteRefs({fs:n,gitdir:a,refs:_.map(function(e){return"refs/tags/".concat(e)})});case 36:if(!c){t.next=58;break}E=w(s.keys()),t.prev=38,E.s();case 40:if((S=E.n()).done){t.next=50;break}if(!(j=S.value).startsWith("refs/tags")||j.endsWith("^{}")){t.next=48;break}return t.next=45,e.exists({fs:n,gitdir:a,ref:j});case 45:if(t.sent){t.next=48;break}P=s.get(j+"^{}")||s.get(j),R.set(j,P);case 48:t.next=40;break;case 50:t.next=55;break;case 52:t.prev=52,t.t1=t.catch(38),E.e(t.t1);case 55:return t.prev=55,E.f(),t.finish(55);case 58:A=k.translate(m(s.keys())),O=w(A);try{for(O.s();!(I=O.n()).done;)B=y(I.value,2),C=B[0],N=B[1],D=s.get(C),R.set(N,D)}catch(Q){O.e(Q)}finally{O.f()}U=k.translate(m(u.keys())),T=w(U);try{for(T.s();!(M=T.n()).done;)F=y(M.value,2),H=F[0],z=F[1],G=u.get(H),(W=k.translateOne(G))&&R.set(z,"ref: ".concat(W))}catch(Q){T.e(Q)}finally{T.f()}if(q=[],!d){t.next=85;break}K=w(k.localNamespaces()),t.prev=67,L=regeneratorRuntime.mark(function t(){var r,i,s,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=$.value,t.next=3,e.listRefs({fs:n,gitdir:a,filepath:r});case 3:i=t.sent.map(function(e){return"".concat(r,"/").concat(e)}),s=w(i);try{for(s.s();!(u=s.n()).done;)c=u.value,R.has(c)||q.push(c)}catch(Q){s.e(Q)}finally{s.f()}case 6:case"end":return t.stop()}},t)}),K.s();case 70:if(($=K.n()).done){t.next=74;break}return t.delegateYield(L(),"t2",72);case 72:t.next=70;break;case 74:t.next=79;break;case 76:t.prev=76,t.t3=t.catch(67),K.e(t.t3);case 79:return t.prev=79,K.f(),t.finish(79);case 82:if(!(q.length>0)){t.next=85;break}return t.next=85,e.deleteRefs({fs:n,gitdir:a,refs:q});case 85:V=w(R),t.prev=86,V.s();case 88:if((Z=V.n()).done){t.next=94;break}return Y=y(Z.value,2),J=Y[0],X=Y[1],t.next=92,n.write(Ne(a,J),"".concat(X.trim(),"\n"),"utf8");case 92:t.next=88;break;case 94:t.next=99;break;case 96:t.prev=96,t.t4=t.catch(86),V.e(t.t4);case 99:return t.prev=99,V.f(),t.finish(99);case 102:return t.abrupt("return",{pruned:q});case 103:case"end":return t.stop()}},t,null,[[2,12,15,18],[38,52,55,58],[67,76,79,82],[86,96,99,102]])}));return function(e){return t.apply(this,arguments)}}()},{key:"writeRef",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.gitdir,a=t.ref,(i=t.value).match(/[0-9a-f]{40}/)){e.next=3;break}throw new je(i);case 3:return e.next=5,r.write(Ne(n,a),"".concat(i.trim(),"\n"),"utf8");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"writeSymbolicRef",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.ref,i=t.value,e.next=3,r.write(Ne(n,a),"ref: "+"".concat(i.trim(),"\n"),"utf8");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteRef",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.fs,a=r.gitdir,i=r.ref,t.abrupt("return",e.deleteRefs({fs:n,gitdir:a,refs:[i]}));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"deleteRefs",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.refs,e.next=3,Promise.all(a.map(function(e){return r.rm(Ne(n,e))}));case 3:return e.next=5,r.read("".concat(n,"/packed-refs"),{encoding:"utf8"});case 5:i=e.sent,s=Ae.from(i),u=s.refs.size,c=w(a);try{for(c.s();!(o=c.n()).done;)f=o.value,s.refs.has(f)&&s.delete(f)}catch(p){c.e(p)}finally{c.f()}if(!(s.refs.size<u)){e.next=14;break}return i=s.toString(),e.next=14,r.write("".concat(n,"/packed-refs"),i,{encoding:"utf8"});case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"resolve",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fs,a=r.gitdir,i=r.ref,s=r.depth,void 0===(u=void 0===s?void 0:s)){t.next=5;break}if(-1!==--u){t.next=5;break}return t.abrupt("return",i);case 5:if(!i.startsWith("ref: ")){t.next=8;break}return i=i.slice("ref: ".length),t.abrupt("return",e.resolve({fs:n,gitdir:a,ref:i,depth:u}));case 8:if(40!==i.length||!/[0-9a-f]{40}/.test(i)){t.next=10;break}return t.abrupt("return",i);case 10:return t.next=12,e.packedRefs({fs:n,gitdir:a});case 12:o=t.sent,f=Qe(i).filter(function(e){return!et.includes(e)}),p=w(f),t.prev=15,p.s();case 17:if((d=p.n()).done){t.next=29;break}return l=d.value,t.next=21,n.read("".concat(a,"/").concat(l),{encoding:"utf8"});case 21:if(t.t0=t.sent,t.t0){t.next=24;break}t.t0=o.get(l);case 24:if(!(c=t.t0)){t.next=27;break}return t.abrupt("return",e.resolve({fs:n,gitdir:a,ref:c.trim(),depth:u}));case 27:t.next=17;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(15),p.e(t.t1);case 34:return t.prev=34,p.f(),t.finish(34);case 37:throw new Ee(i);case 38:case"end":return t.stop()}},t,null,[[15,31,34,37]])}));return function(e){return t.apply(this,arguments)}}()},{key:"exists",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.fs,a=r.gitdir,i=r.ref,t.prev=1,t.next=4,e.expand({fs:n,gitdir:a,ref:i});case 4:return t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,null,[[1,7]])}));return function(e){return t.apply(this,arguments)}}()},{key:"expand",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fs,a=r.gitdir,40!==(i=r.ref).length||!/[0-9a-f]{40}/.test(i)){t.next=3;break}return t.abrupt("return",i);case 3:return t.next=5,e.packedRefs({fs:n,gitdir:a});case 5:s=t.sent,u=Qe(i),c=w(u),t.prev=8,c.s();case 10:if((o=c.n()).done){t.next=20;break}return f=o.value,t.next=14,n.exists("".concat(a,"/").concat(f));case 14:if(!t.sent){t.next=16;break}return t.abrupt("return",f);case 16:if(!s.has(f)){t.next=18;break}return t.abrupt("return",f);case 18:t.next=10;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(8),c.e(t.t0);case 25:return t.prev=25,c.f(),t.finish(25);case 28:throw new Ee(i);case 29:case"end":return t.stop()}},t,null,[[8,22,25,28]])}));return function(e){return t.apply(this,arguments)}}()},{key:"expandAgainstMap",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.ref,n=t.map,a=Qe(r),i=w(a),e.prev=3,i.s();case 5:if((s=i.n()).done){e.next=13;break}return u=s.value,e.next=9,n.has(u);case 9:if(!e.sent){e.next=11;break}return e.abrupt("return",u);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),i.e(e.t0);case 18:return e.prev=18,i.f(),e.finish(18);case 21:throw new Ee(r);case 22:case"end":return e.stop()}},e,null,[[3,15,18,21]])}));return function(t){return e.apply(this,arguments)}}()},{key:"resolveAgainstMap",value:function(t){var r=t.ref,n=t.fullref,a=void 0===n?r:n,i=t.depth,s=void 0===i?void 0:i,u=t.map;if(void 0!==s&&-1===--s)return{fullref:a,oid:r};if(r.startsWith("ref: "))return r=r.slice("ref: ".length),e.resolveAgainstMap({ref:r,fullref:a,depth:s,map:u});if(40===r.length&&/[0-9a-f]{40}/.test(r))return{fullref:a,oid:r};var c,o=w(Qe(r));try{for(o.s();!(c=o.n()).done;){var f=c.value,p=u.get(f);if(p)return e.resolveAgainstMap({ref:p.trim(),fullref:f,depth:s,map:u})}}catch(d){o.e(d)}finally{o.f()}throw new Ee(r)}},{key:"packedRefs",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,e.next=3,r.read("".concat(n,"/packed-refs"),{encoding:"utf8"});case 3:return a=e.sent,i=Ae.from(a),e.abrupt("return",i.refs);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"listRefs",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.fs,a=r.gitdir,i=r.filepath,s=e.packedRefs({fs:n,gitdir:a}),u=null,t.prev=3,t.next=6,n.readdirDeep("".concat(a,"/").concat(i));case 6:u=(u=t.sent).map(function(e){return e.replace("".concat(a,"/").concat(i,"/"),"")}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),u=[];case 13:return t.t1=w,t.next=16,s;case 16:t.t2=t.sent.keys(),c=(0,t.t1)(t.t2);try{for(c.s();!(o=c.n()).done;)(f=o.value).startsWith(i)&&(f=f.replace(i+"/",""),u.includes(f)||u.push(f))}catch(p){c.e(p)}finally{c.f()}return u.sort(Be),t.abrupt("return",u);case 21:case"end":return t.stop()}},t,null,[[3,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"listBranches",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fs,a=r.gitdir,!(i=r.remote)){t.next=5;break}return t.abrupt("return",e.listRefs({fs:n,gitdir:a,filepath:"refs/remotes/".concat(i)}));case 5:return t.abrupt("return",e.listRefs({fs:n,gitdir:a,filepath:"refs/heads"}));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"listTags",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.fs,a=r.gitdir,t.next=3,e.listRefs({fs:n,gitdir:a,filepath:"refs/tags"});case 3:return i=t.sent,t.abrupt("return",i.filter(function(e){return!e.endsWith("^{}")}));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}();function rt(e,t){return K(nt(e),nt(t))}function nt(e){return"040000"===e.mode?e.path+"/":e.path}function at(e){switch(e){case"040000":return"tree";case"100644":case"100755":case"120000":return"blob";case"160000":return"commit"}throw new W("Unexpected GitTree entry mode: ".concat(e))}function it(e){for(var t=[],r=0;r<e.length;){var n=e.indexOf(32,r);if(-1===n)throw new W("GitTree: Error parsing buffer at byte location ".concat(r,": Could not find the next space character."));var a=e.indexOf(0,r);if(-1===a)throw new W("GitTree: Error parsing buffer at byte location ".concat(r,": Could not find the next null character."));var i=e.slice(r,n).toString("utf8");"40000"===i&&(i="040000");var s=at(i),u=e.slice(n+1,a).toString("utf8"),c=e.slice(a+1,a+21).toString("hex");r=a+21,t.push({mode:i,path:u,oid:c,type:s})}return t}function st(e){if("number"==typeof e&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new W("Could not understand file mode: ".concat(e))}function ut(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=st(e.mode),e.type||(e.type=at(e.mode)),e}var ct=function(){function t(r){if(A(this,t),e.isBuffer(r))this._entries=it(r);else{if(!Array.isArray(r))throw new W("invalid type passed to GitTree constructor");this._entries=r.map(ut)}this._entries.sort($)}return I(t,[{key:"render",value:function(){return this._entries.map(function(e){return"".concat(e.mode," ").concat(e.type," ").concat(e.oid,"    ").concat(e.path)}).join("\n")}},{key:"toObject",value:function(){var t=m(this._entries);return t.sort(rt),e.concat(t.map(function(t){var r=e.from(t.mode.replace(/^0/,"")),n=e.from(" "),a=e.from(t.path,"utf8"),i=e.from([0]),s=e.from(t.oid,"hex");return e.concat([r,n,a,i,s])}))}},{key:"entries",value:function(){return this._entries}},{key:Symbol.iterator,value:regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=w(this._entries),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})}],[{key:"from",value:function(e){return new t(e)}}]),t}(),ot=function(){function t(){A(this,t)}return I(t,null,[{key:"wrap",value:function(t){var r=t.type,n=t.object;return e.concat([e.from("".concat(r," ").concat(n.byteLength.toString(),"\0")),e.from(n)])}},{key:"unwrap",value:function(t){var r=t.indexOf(32),n=t.indexOf(0),a=t.slice(0,r).toString("utf8"),i=t.slice(r+1,n).toString("utf8"),s=t.length-(n+1);if(parseInt(i)!==s)throw new W("Length mismatch: expected ".concat(i," bytes but got ").concat(s," instead."));return{type:a,object:e.from(t.slice(n+1))}}}]),t}();function ft(e){return pt.apply(this,arguments)}function pt(){return(pt=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.oid,i="objects/".concat(a.slice(0,2),"/").concat(a.slice(2)),e.next=4,r.read("".concat(n,"/").concat(i));case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",{object:s,format:"deflated",source:i});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dt(t,r){var n=new q(t),a=lt(n);if(a!==r.byteLength)throw new W("applyDelta expected source buffer to be ".concat(a," bytes but the provided buffer was ").concat(r.length," bytes"));var i,s=lt(n),u=mt(n,r);if(u.byteLength===s)i=u;else{i=e.alloc(s);var c=new q(i);for(c.copy(u);!n.eof();)c.copy(mt(n,r));var o=c.tell();if(s!==o)throw new W("applyDelta expected target buffer to be ".concat(s," bytes but the resulting buffer was ").concat(o," bytes"))}return i}function lt(e){var t=0,r=0,n=null;do{t|=(127&(n=e.readUInt8()))<<r,r+=7}while(128&n);return t}function ht(e,t,r){for(var n=0,a=0;r--;)1&t&&(n|=e.readUInt8()<<a),t>>=1,a+=8;return n}function mt(e,t){var r=e.readUInt8();if(128&r){var n=ht(e,15&r,4),a=ht(e,(112&r)>>4,3);return 0===a&&(a=65536),t.slice(n,n+a)}return e.slice(r)}function gt(e){var t=[e];return h({next:function(){return Promise.resolve({done:0===t.length,value:t.pop()})},return:function(){return t=[],{}}},Symbol.asyncIterator,function(){return this})}function vt(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:gt(e)}var xt=function(){function t(e){A(this,t),this.stream=vt(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}return I(t,[{key:"eof",value:function(){return this._ended&&this.cursor===this.buffer.length}},{key:"tell",value:function(){return this._discardedBytes+this.cursor}},{key:"byte",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.eof()){e.next=2;break}return e.abrupt("return");case 2:if(this.started){e.next=5;break}return e.next=5,this._init();case 5:if(this.cursor!==this.buffer.length){e.next=10;break}return e.next=8,this._loadnext();case 8:if(!this._ended){e.next=10;break}return e.abrupt("return");case 10:return this._moveCursor(1),e.abrupt("return",this.buffer[this.undoCursor]);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"chunk",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.eof()){e.next=2;break}return e.abrupt("return");case 2:if(this.started){e.next=5;break}return e.next=5,this._init();case 5:if(this.cursor!==this.buffer.length){e.next=10;break}return e.next=8,this._loadnext();case 8:if(!this._ended){e.next=10;break}return e.abrupt("return");case 10:return this._moveCursor(this.buffer.length),e.abrupt("return",this.buffer.slice(this.undoCursor,this.cursor));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.eof()){e.next=2;break}return e.abrupt("return");case 2:if(this.started){e.next=5;break}return e.next=5,this._init();case 5:if(!(this.cursor+t>this.buffer.length)){e.next=9;break}return this._trim(),e.next=9,this._accumulate(t);case 9:return this._moveCursor(t),e.abrupt("return",this.buffer.slice(this.undoCursor,this.cursor));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"skip",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.eof()){e.next=2;break}return e.abrupt("return");case 2:if(this.started){e.next=5;break}return e.next=5,this._init();case 5:if(!(this.cursor+t>this.buffer.length)){e.next=9;break}return this._trim(),e.next=9,this._accumulate(t);case 9:this._moveCursor(t);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"undo",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.cursor=this.undoCursor;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_next",value:function(){var t=k(regeneratorRuntime.mark(function t(){var r,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.started=!0,t.next=3,this.stream.next();case 3:return r=t.sent,n=r.done,a=r.value,n&&(this._ended=!0),a&&(a=e.from(a)),t.abrupt("return",a);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_trim",value:function(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}},{key:"_moveCursor",value:function(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}},{key:"_accumulate",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._ended){t.next=2;break}return t.abrupt("return");case 2:n=[this.buffer];case 3:if(!(this.cursor+r>bt(n))){t.next=12;break}return t.next=6,this._next();case 6:if(a=t.sent,!this._ended){t.next=9;break}return t.abrupt("break",12);case 9:n.push(a),t.next=3;break;case 12:this.buffer=e.concat(n);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_loadnext",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,e.next=5,this._next();case 5:this.buffer=e.sent;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_init",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._next();case 2:this.buffer=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}();function bt(e){return e.reduce(function(e,t){return e+t.length},0)}function kt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=k(regeneratorRuntime.mark(function e(t,r){var n,i,s,u,c,o,f,p,d,l,h,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new xt(t),e.next=3,n.read(4);case 3:if("PACK"===(i=(i=e.sent).toString("utf8"))){e.next=7;break}throw new W("Invalid PACK header '".concat(i,"'"));case 7:return e.next=9,n.read(4);case 9:if(2===(s=(s=e.sent).readUInt32BE(0))){e.next=13;break}throw new W("Invalid packfile version: ".concat(s));case 13:return e.next=15,n.read(4);case 15:if(!((u=(u=e.sent).readUInt32BE(0))<1)){e.next=19;break}return e.abrupt("return");case 19:if(n.eof()||!u--){e.next=52;break}return c=n.tell(),e.next=23,yt(n);case 23:o=e.sent,f=o.type,p=o.length,d=o.ofs,l=o.reference,h=new a.default.Inflate;case 29:if(h.result){e.next=50;break}return e.next=32,n.chunk();case 32:if(m=e.sent,!n.ended){e.next=35;break}return e.abrupt("break",50);case 35:if(h.push(m,!1),!h.err){e.next=38;break}throw new W("Pako error: ".concat(h.msg));case 38:if(!h.result){e.next=48;break}if(h.result.length===p){e.next=41;break}throw new W("Inflated object size is different from that stated in packfile.");case 41:return e.next=43,n.undo();case 43:return e.next=45,n.read(m.length-h.strm.avail_in);case 45:return g=n.tell(),e.next=48,r({data:h.result,type:f,num:u,offset:c,end:g,reference:l,ofs:d});case 48:e.next=29;break;case 50:e.next=19;break;case 52:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.byte();case 2:if(n=t.sent,a=n>>4&7,i=15&n,!(128&n)){t.next=13;break}s=4;case 7:return t.next=9,r.byte();case 9:n=t.sent,i|=(127&n)<<s,s+=7;case 12:if(128&n){t.next=7;break}case 13:if(6!==a){t.next=25;break}o=0,u=0,f=[];case 17:return t.next=19,r.byte();case 19:n=t.sent,u|=(127&n)<<o,o+=7,f.push(n);case 23:if(128&n){t.next=17;break}case 24:c=e.from(f);case 25:if(7!==a){t.next=30;break}return t.next=28,r.read(20);case 28:p=t.sent,c=p;case 30:return t.abrupt("return",{type:a,length:i,ofs:u,reference:c});case 31:case"end":return t.stop()}},t)}))).apply(this,arguments)}var _t=!1;function Et(e){return St.apply(this,arguments)}function St(){return(St=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===_t&&(_t=At()),e.abrupt("return",_t?jt(t):a.default.inflate(t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jt(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new DecompressionStream("deflate"),n=new Blob([t]).stream().pipeThrough(r),e.t0=Uint8Array,e.next=5,new Response(n).arrayBuffer();case 5:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){try{if(new DecompressionStream("deflate"))return!0}catch(e){}return!1}function Ot(e){var t=[],r=0,n=0;do{var a=127&(r=e.readUInt8());t.push(a),n=128&r}while(n);return t.reduce(function(e,t){return e+1<<7|t},-1)}function It(e,t){var r=t,n=4,a=null;do{r|=(127&(a=e.readUInt8()))<<n,n+=7}while(128&a);return r}var Bt=function(){function t(e){A(this,t),Object.assign(this,e),this.offsetCache={}}return I(t,[{key:"toBuffer",value:function(){var t=k(regeneratorRuntime.mark(function t(){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,y,R,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],(n=function(t,n){r.push(e.from(t,n))})("ff744f63","hex"),n("00000002","hex"),a=new q(e.alloc(1024)),i=0;i<256;i++){s=0,u=w(this.hashes);try{for(u.s();!(c=u.n()).done;)o=c.value,parseInt(o.slice(0,2),16)<=i&&s++}catch(E){u.e(E)}finally{u.f()}a.writeUInt32BE(s)}r.push(a.buffer),f=w(this.hashes);try{for(f.s();!(p=f.n()).done;)d=p.value,n(d,"hex")}catch(E){f.e(E)}finally{f.f()}l=new q(e.alloc(4*this.hashes.length)),h=w(this.hashes);try{for(h.s();!(m=h.n()).done;)g=m.value,l.writeUInt32BE(this.crcs[g])}catch(E){h.e(E)}finally{h.f()}r.push(l.buffer),v=new q(e.alloc(4*this.hashes.length)),x=w(this.hashes);try{for(x.s();!(b=x.n()).done;)k=b.value,v.writeUInt32BE(this.offsets.get(k))}catch(E){x.e(E)}finally{x.f()}return r.push(v.buffer),n(this.packfileSha,"hex"),y=e.concat(r),t.next=21,Q(y);case 21:return R=t.sent,(_=e.alloc(20)).write(R,"hex"),t.abrupt("return",e.concat([y,_]));case 25:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"load",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.pack,this.pack=r;case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unload",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.pack=null;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.oid,this.offsets.get(r)){e.next=8;break}if(!this.getExternalRefDelta){e.next=7;break}return this.externalReadDepth++,e.abrupt("return",this.getExternalRefDelta(r));case 7:throw new W("Could not read object ".concat(r," from packfile"));case 8:return n=this.offsets.get(r),e.abrupt("return",this.readSlice({start:n}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readSlice",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.start,!this.offsetCache[n]){t.next=3;break}return t.abrupt("return",Object.assign({},this.offsetCache[n]));case 3:if(this.readDepth++,a={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"},this.pack){t.next=7;break}throw new W("Tried to read from a GitPackIndex with no packfile loaded into memory");case 7:return t.next=9,this.pack;case 9:if(i=t.sent.slice(n),s=new q(i),u=s.readUInt8(),void 0!==(o=a[c=112&u])){t.next=16;break}throw new W("Unrecognized type: 0b"+c.toString(2));case 16:if(p=f=15&u,128&u&&(p=It(s,f)),d=null,l=null,"ofs_delta"!==o){t.next=30;break}return h=Ot(s),m=n-h,t.next=27,this.readSlice({start:m});case 27:g=t.sent,d=g.object,o=g.type;case 30:if("ref_delta"!==o){t.next=37;break}return v=s.slice(20).toString("hex"),t.next=34,this.read({oid:v});case 34:x=t.sent,d=x.object,o=x.type;case 37:return b=i.slice(s.tell()),t.t0=e,t.next=41,Et(b);case 41:if(t.t1=t.sent,(l=t.t0.from.call(t.t0,t.t1)).byteLength===p){t.next=45;break}throw new W("Packfile told us object would have length ".concat(p," but it had length ").concat(l.byteLength));case 45:return d&&(l=e.from(dt(l,d))),this.readDepth>3&&(this.offsetCache[n]={type:o,object:l}),t.abrupt("return",{type:o,format:"content",object:l});case 48:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],[{key:"fromIdx",value:function(){var e=k(regeneratorRuntime.mark(function e(r){var n,a,i,s,u,c,o,f,p,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.idx,a=r.getExternalRefDelta,i=new q(n),"ff744f63"===i.slice(4).toString("hex")){e.next=5;break}return e.abrupt("return");case 5:if(2===(s=i.readUInt32BE())){e.next=8;break}throw new W("Unable to read version ".concat(s," packfile IDX. (Only version 2 supported)"));case 8:if(!(n.byteLength>2147483648)){e.next=10;break}throw new W("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");case 10:for(i.seek(i.tell()+1020),u=i.readUInt32BE(),c=[],o=0;o<u;o++)f=i.slice(20).toString("hex"),c[o]=f;for(i.seek(i.tell()+4*u),p=new Map,d=0;d<u;d++)p.set(c[d],i.readUInt32BE());return l=i.slice(20).toString("hex"),e.abrupt("return",new t({hashes:c,crcs:{},offsets:p,packfileSha:l,getExternalRefDelta:a}));case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"fromPack",value:function(){var e=k(regeneratorRuntime.mark(function e(r){var a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,R,_,E,S,j,P,A,O,I,B,C,N,D,U;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.pack,i=r.getExternalRefDelta,s=r.onProgress,u={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},c={},o=a.slice(-20).toString("hex"),f=[],p={},d=new Map,l=null,h=null,e.next=11,kt([a],function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data,r=t.type,t.reference,n=t.offset,a=t.num,null===l&&(l=a),(i=Math.floor(100*(l-a)/l))===h){e.next=7;break}if(!s){e.next=7;break}return e.next=7,s({phase:"Receiving objects",loaded:l-a,total:l});case 7:h=i,["commit","tree","blob","tag"].includes(r=u[r])?c[n]={type:r,offset:n}:"ofs-delta"===r?c[n]={type:r,offset:n}:"ref-delta"===r&&(c[n]={type:r,offset:n});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 11:m=Object.keys(c).map(Number),g=w(m.entries());try{for(g.s();!(v=g.n()).done;)x=y(v.value,2),b=x[0],R=x[1],_=b+1===m.length?a.byteLength-20:m[b+1],E=c[R],S=n.default.buf(a.slice(R,_))>>>0,E.end=_,E.crc=S}catch(T){g.e(T)}finally{g.f()}j=new t({pack:Promise.resolve(a),packfileSha:o,crcs:p,hashes:f,offsets:d,getExternalRefDelta:i}),h=null,P=0,A=[0,0,0,0,0,0,0,0,0,0,0,0],e.t0=regeneratorRuntime.keys(c);case 19:if((e.t1=e.t0()).done){e.next=54;break}if(O=e.t1.value,O=Number(O),(I=Math.floor(100*P++/l))===h){e.next=27;break}if(!s){e.next=27;break}return e.next=27,s({phase:"Resolving deltas",loaded:P,total:l});case 27:if(h=I,!(B=c[O]).oid){e.next=31;break}return e.abrupt("continue",19);case 31:return e.prev=31,j.readDepth=0,j.externalReadDepth=0,e.next=36,j.readSlice({start:O});case 36:return C=e.sent,N=C.type,D=C.object,A[j.readDepth]+=1,e.next=42,Q(ot.wrap({type:N,object:D}));case 42:U=e.sent,B.oid=U,f.push(U),d.set(U,O),p[U]=B.crc,e.next=52;break;case 49:return e.prev=49,e.t2=e.catch(31),e.abrupt("continue",19);case 52:e.next=19;break;case 54:return f.sort(),e.abrupt("return",j);case 56:case"end":return e.stop()}},e,null,[[31,49]])}));return function(t){return e.apply(this,arguments)}}()}]),t}(),Ct=Symbol("PackfileCache");function Nt(e){return Dt.apply(this,arguments)}function Dt(){return(Dt=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.filename,a=t.getExternalRefDelta,t.emitter,t.emitterPrefix,e.next=3,r.read(n);case 3:return i=e.sent,e.abrupt("return",Bt.fromIdx({idx:i,getExternalRefDelta:a}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ut(e){var t=e.fs,r=e.cache,n=e.filename,a=e.getExternalRefDelta,i=e.emitter,s=e.emitterPrefix;r[Ct]||(r[Ct]=new Map);var u=r[Ct].get(n);return u||(u=Nt({fs:t,filename:n,getExternalRefDelta:a,emitter:i,emitterPrefix:s}),r[Ct].set(n,u)),u}function Tt(e){return Mt.apply(this,arguments)}function Mt(){return(Mt=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.format,void 0===s?"content":s,u=t.getExternalRefDelta,e.next=3,r.readdir(Ne(a,"objects/pack"));case 3:c=(c=e.sent).filter(function(e){return e.endsWith(".idx")}),o=w(c),e.prev=6,o.s();case 8:if((f=o.n()).done){e.next=26;break}return p=f.value,d="".concat(a,"/objects/pack/").concat(p),e.next=13,Ut({fs:r,cache:n,filename:d,getExternalRefDelta:u});case 13:if(!(l=e.sent).error){e.next=16;break}throw new W(l.error);case 16:if(!l.offsets.has(i)){e.next=24;break}return l.pack||(h=d.replace(/idx$/,"pack"),l.pack=r.read(h)),e.next=20,l.read({oid:i,getExternalRefDelta:u});case 20:return(m=e.sent).format="content",m.source="objects/pack/".concat(p.replace(/idx$/,"pack")),e.abrupt("return",m);case 24:e.next=8;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(6),o.e(e.t0);case 31:return e.prev=31,o.f(),e.finish(31);case 34:return e.abrupt("return",null);case 35:case"end":return e.stop()}},e,null,[[6,28,31,34]])}))).apply(this,arguments)}function Ft(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fs,a=r.cache,i=r.gitdir,s=r.oid,u=r.format,c=void 0===u?"content":u,o=function(e){return Ft({fs:n,cache:a,gitdir:i,oid:e})},"4b825dc642cb6eb9a060e54bf8d69288fbee4904"===s&&(f={format:"wrapped",object:e.from("tree 0\0")}),f){t.next=7;break}return t.next=6,ft({fs:n,gitdir:i,oid:s});case 6:f=t.sent;case 7:if(f){t.next=11;break}return t.next=10,Tt({fs:n,cache:a,gitdir:i,oid:s,getExternalRefDelta:o});case 10:f=t.sent;case 11:if(f){t.next=13;break}throw new Ee(s);case 13:if("deflated"!==c){t.next=15;break}return t.abrupt("return",f);case 15:t.t0=f.format,t.next="deflated"===t.t0?18:"wrapped"===t.t0?24:"content"===t.t0?35:38;break;case 18:return t.t1=e,t.next=21,Et(f.object);case 21:t.t2=t.sent,f.object=t.t1.from.call(t.t1,t.t2),f.format="wrapped";case 24:if("wrapped"!==c||"wrapped"!==f.format){t.next=26;break}return t.abrupt("return",f);case 26:return t.next=28,Q(f.object);case 28:if((p=t.sent)===s){t.next=31;break}throw new W("SHA check failed! Expected ".concat(s,", computed ").concat(p));case 31:d=ot.unwrap(f.object),l=d.object,h=d.type,f.type=h,f.object=l,f.format="content";case 35:if("content"!==c){t.next=37;break}return t.abrupt("return",f);case 37:return t.abrupt("break",39);case 38:throw new W('invalid format "'.concat(f.format,'"'));case 39:case"end":return t.stop()}},t)}))).apply(this,arguments)}var zt=function(e){B(r,G);var t=C(r);function r(e,n){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return A(this,r),(a=t.call(this,"Failed to create ".concat(e," at ").concat(n," because it already exists.").concat(i?" (Hint: use 'force: true' parameter to overwrite existing ".concat(e,".)"):""))).code=a.name=r.code,a.data={noun:e,where:n,canForce:i},a}return r}();zt.code="AlreadyExistsError";var Gt=function(e){B(r,G);var t=C(r);function r(e,n,a){var i;return A(this,r),(i=t.call(this,"Found multiple ".concat(e,' matching "').concat(n,'" (').concat(a.join(", "),"). Use a longer abbreviation length to disambiguate them."))).code=i.name=r.code,i.data={nouns:e,short:n,matches:a},i}return r}();Gt.code="AmbiguousError";var Wt=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,"Your local changes to the following files would be overwritten by checkout: ".concat(e.join(", ")))).code=n.name=r.code,n.data={filepaths:e},n}return r}();Wt.code="CheckoutConflictError";var qt=function(e){B(r,G);var t=C(r);function r(e,n){var a;return A(this,r),(a=t.call(this,'Failed to checkout "'.concat(e,'" because commit ').concat(n," is not available locally. Do a git fetch to make the branch available locally."))).code=a.name=r.code,a.data={ref:e,oid:n},a}return r}();qt.code="CommitNotFetchedError";var Kt=function(e){B(r,G);var t=C(r);function r(){var e;return A(this,r),(e=t.call(this,"Empty response from git server.")).code=e.name=r.code,e.data={},e}return r}();Kt.code="EmptyServerResponseError";var $t=function(e){B(r,G);var t=C(r);function r(){var e;return A(this,r),(e=t.call(this,"A simple fast-forward merge was not possible.")).code=e.name=r.code,e.data={},e}return r}();$t.code="FastForwardError";var Lt=function(e){B(r,G);var t=C(r);function r(e,n){var a;return A(this,r),(a=t.call(this,"One or more branches were not updated: ".concat(e))).code=a.name=r.code,a.data={prettyDetails:e,result:n},a}return r}();Lt.code="GitPushError";var Vt=function(e){B(r,G);var t=C(r);function r(e,n,a){var i;return A(this,r),(i=t.call(this,"HTTP Error: ".concat(e," ").concat(n))).code=i.name=r.code,i.data={statusCode:e,statusMessage:n,response:a},i}return r}();Vt.code="HttpError";var Zt=function(e){B(r,G);var t=C(r);function r(e){var n;A(this,r);var a="invalid filepath";return"leading-slash"!==e&&"trailing-slash"!==e||(a='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.'),(n=t.call(this,a)).code=n.name=r.code,n.data={reason:e},n}return r}();Zt.code="InvalidFilepathError";var Yt=function(e){B(r,G);var t=C(r);function r(e,n){var a;return A(this,r),(a=t.call(this,'"'.concat(e,'" would be an invalid git reference. (Hint: a valid alternative would be "').concat(n,'".)'))).code=a.name=r.code,a.data={ref:e,suggestion:n},a}return r}();Yt.code="InvalidRefNameError";var Jt=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,"Maximum search depth of ".concat(e," exceeded."))).code=n.name=r.code,n.data={depth:e},n}return r}();Jt.code="MaxDepthError";var Xt=function(e){B(r,G);var t=C(r);function r(){var e;return A(this,r),(e=t.call(this,"Merges with conflicts are not supported yet.")).code=e.name=r.code,e.data={},e}return r}();Xt.code="MergeNotSupportedError";var Qt=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,"No name was provided for ".concat(e," in the argument or in the .git/config file."))).code=n.name=r.code,n.data={role:e},n}return r}();Qt.code="MissingNameError";var er=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,'The function requires a "'.concat(e,'" parameter but none was provided.'))).code=n.name=r.code,n.data={parameter:e},n}return r}();er.code="MissingParameterError";var tr=function(e){B(r,G);var t=C(r);function r(e,n){var a;return A(this,r),(a=t.call(this,'Expected "'.concat(e,'" but received "').concat(n,'".'))).code=a.name=r.code,a.data={expected:e,actual:n},a}return r}();tr.code="ParseError";var rr=function(e){B(r,G);var t=C(r);function r(e){var n;A(this,r);var a="";return"not-fast-forward"===e?a=" because it was not a simple fast-forward":"tag-exists"===e&&(a=" because tag already exists"),(n=t.call(this,"Push rejected".concat(a,'. Use "force: true" to override.'))).code=n.name=r.code,n.data={reason:e},n}return r}();rr.code="PushRejectedError";var nr=function(e){B(r,G);var t=C(r);function r(e,n){var a;return A(this,r),(a=t.call(this,'Remote does not support the "'.concat(e,'" so the "').concat(n,'" parameter cannot be used.'))).code=a.name=r.code,a.data={capability:e,parameter:n},a}return r}();nr.code="RemoteCapabilityError";var ar=function(e){B(r,G);var t=C(r);function r(e,n){var a;return A(this,r),(a=t.call(this,'Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: '.concat(e))).code=a.name=r.code,a.data={preview:e,response:n},a}return r}();ar.code="SmartHttpError";var ir=function(e){B(r,G);var t=C(r);function r(e,n,a){var i;return A(this,r),(i=t.call(this,'Git remote "'.concat(e,'" uses an unrecognized transport protocol: "').concat(n,'"'))).code=i.name=r.code,i.data={url:e,transport:n,suggestion:a},i}return r}();ir.code="UnknownTransportError";var sr=function(e){B(r,G);var t=C(r);function r(e){var n;return A(this,r),(n=t.call(this,'Cannot parse remote URL: "'.concat(e,'"'))).code=n.name=r.code,n.data={url:e},n}return r}();sr.code="UrlParseError";var ur=function(e){B(r,G);var t=C(r);function r(){var e;return A(this,r),(e=t.call(this,"The operation was canceled.")).code=e.name=r.code,e.data={},e}return r}();ur.code="UserCanceledError";var cr=Object.freeze({__proto__:null,AlreadyExistsError:zt,AmbiguousError:Gt,CheckoutConflictError:Wt,CommitNotFetchedError:qt,EmptyServerResponseError:Kt,FastForwardError:$t,GitPushError:Lt,HttpError:Vt,InternalError:W,InvalidFilepathError:Zt,InvalidOidError:je,InvalidRefNameError:Yt,MaxDepthError:Jt,MergeNotSupportedError:Xt,MissingNameError:Qt,MissingParameterError:er,NoRefspecError:Pe,NotFoundError:Ee,ObjectTypeError:Se,ParseError:tr,PushRejectedError:rr,RemoteCapabilityError:nr,SmartHttpError:ar,UnknownTransportError:ir,UrlParseError:sr,UserCanceledError:ur});function or(e){var t=e.name,r=e.email,n=e.timestamp,a=e.timezoneOffset;return a=fr(a),"".concat(t," <").concat(r,"> ").concat(n," ").concat(a)}function fr(e){var t=pr(dr(e));e=Math.abs(e);var r=Math.floor(e/60);e-=60*r;var n=String(r),a=String(e);return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),(-1===t?"-":"+")+n+a}function pr(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function dr(e){return 0===e?e:-e}function lr(e){return e=(e=(e=e.replace(/\r/g,"")).replace(/^\n+/,"")).replace(/\n+$/,"")+"\n"}function hr(e){var t=y(e.match(/^(.*) <(.*)> (.*) (.*)$/),5),r=t[1],n=t[2],a=t[3],i=t[4];return{name:r,email:n,timestamp:Number(a),timezoneOffset:mr(i)}}function mr(e){var t=y(e.match(/(\+|-)(\d\d)(\d\d)/),4),r=t[1],n=t[2],a=t[3];return gr(a=("+"===r?1:-1)*(60*Number(n)+Number(a)))}function gr(e){return 0===e?e:-e}exports.Errors=cr;var vr=function(){function t(r){if(A(this,t),"string"==typeof r)this._tag=r;else if(e.isBuffer(r))this._tag=r.toString("utf8");else{if("object"!==P(r))throw new W("invalid type passed to GitAnnotatedTag constructor");this._tag=t.render(r)}}return I(t,[{key:"justHeaders",value:function(){return this._tag.slice(0,this._tag.indexOf("\n\n"))}},{key:"message",value:function(){var e=this.withoutSignature();return e.slice(e.indexOf("\n\n")+2)}},{key:"parse",value:function(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}},{key:"render",value:function(){return this._tag}},{key:"headers",value:function(){var e,t=this.justHeaders().split("\n"),r=[],n=w(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;" "===a[0]?r[r.length-1]+="\n"+a.slice(1):r.push(a)}}catch(p){n.e(p)}finally{n.f()}for(var i={},s=0,u=r;s<u.length;s++){var c=u[s],o=c.slice(0,c.indexOf(" ")),f=c.slice(c.indexOf(" ")+1);Array.isArray(i[o])?i[o].push(f):i[o]=f}return i.tagger&&(i.tagger=hr(i.tagger)),i.committer&&(i.committer=hr(i.committer)),i}},{key:"withoutSignature",value:function(){var e=lr(this._tag);return-1===e.indexOf("\n-----BEGIN PGP SIGNATURE-----")?e:e.slice(0,e.lastIndexOf("\n-----BEGIN PGP SIGNATURE-----"))}},{key:"gpgsig",value:function(){if(-1!==this._tag.indexOf("\n-----BEGIN PGP SIGNATURE-----"))return lr(this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+"-----END PGP SIGNATURE-----".length))}},{key:"payload",value:function(){return this.withoutSignature()+"\n"}},{key:"toObject",value:function(){return e.from(this._tag,"utf8")}}],[{key:"from",value:function(e){return new t(e)}},{key:"render",value:function(e){return"object ".concat(e.object,"\ntype ").concat(e.type,"\ntag ").concat(e.tag,"\ntagger ").concat(or(e.tagger),"\n\n").concat(e.message,"\n").concat(e.gpgsig?e.gpgsig:"")}},{key:"sign",value:function(){var e=k(regeneratorRuntime.mark(function e(r,n,a){var i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.payload(),e.next=3,n({payload:i,secretKey:a});case 3:return s=e.sent,u=lr(u=s.signature),c=i+u,e.abrupt("return",t.from(c));case 8:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}()}]),t}();function xr(e){return e.trim().split("\n").map(function(e){return" "+e}).join("\n")+"\n"}function br(e){return e.split("\n").map(function(e){return e.replace(/^ /,"")}).join("\n")}var kr=function(){function t(r){if(A(this,t),"string"==typeof r)this._commit=r;else if(e.isBuffer(r))this._commit=r.toString("utf8");else{if("object"!==P(r))throw new W("invalid type passed to GitCommit constructor");this._commit=t.render(r)}}return I(t,[{key:"toObject",value:function(){return e.from(this._commit,"utf8")}},{key:"headers",value:function(){return this.parseHeaders()}},{key:"message",value:function(){return t.justMessage(this._commit)}},{key:"parse",value:function(){return Object.assign({message:this.message()},this.headers())}},{key:"parseHeaders",value:function(){var e,r=[],n=w(t.justHeaders(this._commit).split("\n"));try{for(n.s();!(e=n.n()).done;){var a=e.value;" "===a[0]?r[r.length-1]+="\n"+a.slice(1):r.push(a)}}catch(p){n.e(p)}finally{n.f()}for(var i={parent:[]},s=0,u=r;s<u.length;s++){var c=u[s],o=c.slice(0,c.indexOf(" ")),f=c.slice(c.indexOf(" ")+1);Array.isArray(i[o])?i[o].push(f):i[o]=f}return i.author&&(i.author=hr(i.author)),i.committer&&(i.committer=hr(i.committer)),i}},{key:"render",value:function(){return this._commit}},{key:"withoutSignature",value:function(){var e=lr(this._commit);return-1===e.indexOf("\ngpgsig")?e:lr(e.slice(0,e.indexOf("\ngpgsig"))+"\n"+e.slice(e.indexOf("-----END PGP SIGNATURE-----\n")+"-----END PGP SIGNATURE-----\n".length))}},{key:"isolateSignature",value:function(){return br(this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+"-----END PGP SIGNATURE-----".length))}}],[{key:"fromPayloadSignature",value:function(e){var r=e.payload,n=e.signature,a=t.justHeaders(r),i=t.justMessage(r);return new t(lr(a+"\ngpgsig"+xr(n)+"\n"+i))}},{key:"from",value:function(e){return new t(e)}},{key:"justMessage",value:function(e){return lr(e.slice(e.indexOf("\n\n")+2))}},{key:"justHeaders",value:function(e){return e.slice(0,e.indexOf("\n\n"))}},{key:"renderHeaders",value:function(e){var t="";if(e.tree?t+="tree ".concat(e.tree,"\n"):t+="tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904\n",e.parent){if(void 0===e.parent.length)throw new W("commit 'parent' property should be an array");var r,n=w(e.parent);try{for(n.s();!(r=n.n()).done;){var a=r.value;t+="parent ".concat(a,"\n")}}catch(u){n.e(u)}finally{n.f()}}var i=e.author;t+="author ".concat(or(i),"\n");var s=e.committer||e.author;return t+="committer ".concat(or(s),"\n"),e.gpgsig&&(t+="gpgsig"+xr(e.gpgsig)),t}},{key:"render",value:function(e){return t.renderHeaders(e)+"\n"+lr(e.message)}},{key:"sign",value:function(){var e=k(regeneratorRuntime.mark(function e(r,n,a){var i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.withoutSignature(),s=t.justMessage(r._commit),e.next=4,n({payload:i,secretKey:a});case 4:return u=e.sent,c=lr(c=u.signature),o=t.justHeaders(r._commit),f=o+"\ngpgsig"+xr(c)+"\n"+s,e.abrupt("return",t.from(f));case 10:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}()}]),t}();function wr(e){return yr.apply(this,arguments)}function yr(){return(yr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.gitdir,"4b825dc642cb6eb9a060e54bf8d69288fbee4904"!==(i=t.oid)){e.next=3;break}return e.abrupt("return",{tree:ct.from([]),oid:i});case 3:return e.next=5,Ft({fs:r,cache:n,gitdir:a,oid:i});case 5:if(s=e.sent,u=s.type,c=s.object,"tag"!==u){e.next=11;break}return i=vr.from(c).parse().object,e.abrupt("return",wr({fs:r,cache:n,gitdir:a,oid:i}));case 11:if("commit"!==u){e.next=14;break}return i=kr.from(c).parse().tree,e.abrupt("return",wr({fs:r,cache:n,gitdir:a,oid:i}));case 14:if("tree"===u){e.next=16;break}throw new Se(i,u,"tree");case 16:return e.abrupt("return",{tree:ct.from(c),oid:i});case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Rr=function(){function e(t){var r=this,n=t.fs,a=t.gitdir,i=t.ref,s=t.cache;A(this,e),this.fs=n,this.cache=s,this.gitdir=a,this.mapPromise=k(regeneratorRuntime.mark(function e(){var t,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Map,e.prev=1,e.next=4,tt.resolve({fs:n,gitdir:a,ref:i});case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0 instanceof Ee&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904");case 10:return e.next=12,wr({fs:n,cache:r.cache,gitdir:a,oid:s});case 12:return(u=e.sent).type="tree",u.mode="40000",t.set(".",u),e.abrupt("return",t);case 17:case"end":return e.stop()}},e,null,[[1,7]])}))();var u=this;this.ConstructEntry=function(){function e(t){A(this,e),this._fullpath=t,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}return I(e,[{key:"type",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.type(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"mode",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.mode(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stat",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.stat(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"content",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.content(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"oid",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.oid(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}()}return I(e,[{key:"readdir",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._fullpath,n=this.fs,a=this.cache,i=this.gitdir,e.next=4,this.mapPromise;case 4:if(s=e.sent,u=s.get(r)){e.next=8;break}throw new Error("No obj for ".concat(r));case 8:if(c=u.oid){e.next=11;break}throw new Error("No oid for obj ".concat(JSON.stringify(u)));case 11:if("tree"===u.type){e.next=13;break}return e.abrupt("return",null);case 13:return e.next=15,Ft({fs:n,cache:a,gitdir:i,oid:c});case 15:if(o=e.sent,f=o.type,p=o.object,f===u.type){e.next=20;break}throw new Se(c,f,u.type);case 20:d=ct.from(p),l=w(d);try{for(l.s();!(h=l.n()).done;)m=h.value,s.set(Ne(r,m.path),m)}catch(g){l.e(g)}finally{l.f()}return e.abrupt("return",d.entries().map(function(e){return Ne(r,e.path)}));case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"type",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._type){e.next=6;break}return e.next=3,this.mapPromise;case 3:r=e.sent,n=r.get(t._fullpath),a=n.type,t._type=a;case 6:return e.abrupt("return",t._type);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"mode",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._mode){e.next=6;break}return e.next=3,this.mapPromise;case 3:r=e.sent,n=r.get(t._fullpath),a=n.mode,t._mode=L(parseInt(a,8));case 6:return e.abrupt("return",t._mode);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"stat",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"content",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._content){e.next=13;break}return e.next=3,this.mapPromise;case 3:return r=e.sent,n=this.fs,a=this.cache,i=this.gitdir,s=r.get(t._fullpath),u=s.oid,e.next=9,Ft({fs:n,cache:a,gitdir:i,oid:u});case 9:c=e.sent,o=c.type,f=c.object,t._content="blob"!==o?void 0:new Uint8Array(f);case 13:return e.abrupt("return",t._content);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"oid",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._oid){e.next=6;break}return e.next=3,this.mapPromise;case 3:r=e.sent,n=r.get(t._fullpath),t._oid=n.oid;case 6:return e.abrupt("return",t._oid);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function _r(e){var t=e.ref,r=void 0===t?"HEAD":t,n=Object.create(null);return Object.defineProperty(n,Re,{value:function(e){var t=e.fs,n=e.gitdir,a=e.cache;return new Rr({fs:t,gitdir:n,ref:r,cache:a})}}),Object.freeze(n),n}var Er=function(){function e(t){var r=t.fs,n=t.dir,a=t.gitdir,i=t.cache;A(this,e),this.fs=r,this.cache=i,this.dir=n,this.gitdir=a;var s=this;this.ConstructEntry=function(){function e(t){A(this,e),this._fullpath=t,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}return I(e,[{key:"type",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.type(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"mode",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.mode(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stat",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.stat(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"content",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.content(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"oid",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.oid(this));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}()}return I(e,[{key:"readdir",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._fullpath,n=this.fs,a=this.dir,e.next=4,n.readdir(Ne(a,r));case 4:if(null!==(i=e.sent)){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",i.map(function(e){return Ne(r,e)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"type",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._type){e.next=3;break}return e.next=3,t.stat();case 3:return e.abrupt("return",t._type);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"mode",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._mode){e.next=3;break}return e.next=3,t.stat();case 3:return e.abrupt("return",t._mode);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"stat",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._stat){e.next=14;break}return r=this.fs,n=this.dir,e.next=4,r.lstat("".concat(n,"/").concat(t._fullpath));case 4:if(a=e.sent){e.next=7;break}throw new Error("ENOENT: no such file or directory, lstat '".concat(t._fullpath,"'"));case 7:"blob"!==(i=a.isDirectory()?"tree":"blob")||a.isFile()||a.isSymbolicLink()||(i="special"),t._type=i,a=Y(a),t._mode=a.mode,-1===a.size&&t._actualSize&&(a.size=t._actualSize),t._stat=a;case 14:return e.abrupt("return",t._stat);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"content",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._content){e.next=15;break}return r=this.fs,n=this.dir,e.next=4,t.type();case 4:if(e.t0=e.sent,"tree"!==e.t0){e.next=9;break}t._content=void 0,e.next=15;break;case 9:return e.next=11,r.read("".concat(n,"/").concat(t._fullpath));case 11:a=e.sent,t._actualSize=a.length,t._stat&&-1===t._stat.size&&(t._stat.size=t._actualSize),t._content=new Uint8Array(a);case 15:return e.abrupt("return",t._content);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"oid",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t._oid){e.next=5;break}return r=this.fs,n=this.gitdir,a=this.cache,e.next=4,ve.acquire({fs:r,gitdir:n,cache:a},function(){var e=k(regeneratorRuntime.mark(function e(r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.entriesMap.get(t._fullpath),e.next=3,t.stat();case 3:if(a=e.sent,n&&!oe(a,n)){e.next=25;break}return e.next=7,t.content();case 7:if(void 0!==e.sent){e.next=12;break}i=void 0,e.next=23;break;case 12:return e.t0=Q,e.t1=ot,e.next=16,t.content();case 16:return e.t2=e.sent,e.t3={type:"blob",object:e.t2},e.t4=e.t1.wrap.call(e.t1,e.t3),e.next=21,(0,e.t0)(e.t4);case 21:i=e.sent,n&&i===n.oid&&r.insert({filepath:t._fullpath,stats:a,oid:i});case 23:e.next=26;break;case 25:i=n.oid;case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:t._oid=i;case 5:return e.abrupt("return",t._oid);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function Sr(){var e=Object.create(null);return Object.defineProperty(e,Re,{value:function(e){var t=e.fs,r=e.dir,n=e.gitdir,a=e.cache;return new Er({fs:t,dir:r,gitdir:n,cache:a})}}),Object.freeze(e),e}var jr=function(){function e(){A(this,e)}return I(e,null,[{key:"isIgnored",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,s,u,c,o,f,p,d,l,h,m,g,v,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.dir,a=t.gitdir,void 0===a?Ne(n,".git"):a,".git"!==xe(s=t.filepath)){e.next=3;break}return e.abrupt("return",!0);case 3:if("."!==s){e.next=5;break}return e.abrupt("return",!1);case 5:for(u=[{gitignore:Ne(n,".gitignore"),filepath:s}],c=s.split("/"),o=1;o<c.length;o++)f=c.slice(0,o).join("/"),p=c.slice(o).join("/"),u.push({gitignore:Ne(n,f,".gitignore"),filepath:p});d=!1,l=0,h=u;case 10:if(!(l<h.length)){e.next=31;break}return m=h[l],g=void 0,e.prev=13,e.next=16,r.read(m.gitignore,"utf8");case 16:g=e.sent,e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(13),"NOENT"!==e.t0.code){e.next=23;break}return e.abrupt("continue",28);case 23:if(v=(0,i.default)().add(g),"."===(x=be(m.filepath))||!v.ignores(x)){e.next=27;break}return e.abrupt("return",!0);case 27:d=d?!v.test(m.filepath).unignored:v.test(m.filepath).ignored;case 28:l++,e.next=10;break;case 31:return e.abrupt("return",d);case 32:case"end":return e.stop()}},e,null,[[13,19]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Pr=function(){function t(e){if(A(this,t),void 0!==e._original_unwrapped_fs)return e;var r=Object.getOwnPropertyDescriptor(e,"promises");r&&r.enumerable?(this._readFile=e.promises.readFile.bind(e.promises),this._writeFile=e.promises.writeFile.bind(e.promises),this._mkdir=e.promises.mkdir.bind(e.promises),this._rmdir=e.promises.rmdir.bind(e.promises),this._unlink=e.promises.unlink.bind(e.promises),this._stat=e.promises.stat.bind(e.promises),this._lstat=e.promises.lstat.bind(e.promises),this._readdir=e.promises.readdir.bind(e.promises),this._readlink=e.promises.readlink.bind(e.promises),this._symlink=e.promises.symlink.bind(e.promises)):(this._readFile=(0,s.default)(e.readFile.bind(e)),this._writeFile=(0,s.default)(e.writeFile.bind(e)),this._mkdir=(0,s.default)(e.mkdir.bind(e)),this._rmdir=(0,s.default)(e.rmdir.bind(e)),this._unlink=(0,s.default)(e.unlink.bind(e)),this._stat=(0,s.default)(e.stat.bind(e)),this._lstat=(0,s.default)(e.lstat.bind(e)),this._readdir=(0,s.default)(e.readdir.bind(e)),this._readlink=(0,s.default)(e.readlink.bind(e)),this._symlink=(0,s.default)(e.symlink.bind(e))),this._original_unwrapped_fs=e}return I(t,[{key:"exists",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:{},e.prev=1,e.next=4,this._stat(t);case 4:return e.abrupt("return",!0);case 7:if(e.prev=7,e.t0=e.catch(1),"ENOENT"!==e.t0.code&&"ENOTDIR"!==e.t0.code){e.next=13;break}return e.abrupt("return",!1);case 13:throw console.log('Unhandled error in "FileSystem.exists()" function',e.t0),e.t0;case 15:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.prev=1,t.next=4,this._readFile(r,n);case 4:return"string"!=typeof(a=t.sent)&&(a=e.from(a)),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},{key:"write",value:function(){var e=k(regeneratorRuntime.mark(function e(t,r){var n,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.prev=1,e.next=4,this._writeFile(t,r,n);case 4:return e.abrupt("return");case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this.mkdir(be(t));case 11:return e.next=13,this._writeFile(t,r,n);case 13:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"mkdir",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]&&a[1],e.prev=1,e.next=4,this._mkdir(t);case 4:return e.abrupt("return");case 7:if(e.prev=7,e.t0=e.catch(1),null!==e.t0){e.next=11;break}return e.abrupt("return");case 11:if("EEXIST"!==e.t0.code){e.next=13;break}return e.abrupt("return");case 13:if(!r){e.next=15;break}throw e.t0;case 15:if("ENOENT"!==e.t0.code){e.next=23;break}if("."!==(n=be(t))&&"/"!==n&&n!==t){e.next=19;break}throw e.t0;case 19:return e.next=21,this.mkdir(n);case 21:return e.next=23,this.mkdir(t,!0);case 23:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"rm",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._unlink(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"ENOENT"===e.t0.code){e.next=9;break}throw e.t0;case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"rmdir",value:function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._rmdir(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"ENOENT"===e.t0.code){e.next=9;break}throw e.t0;case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"readdir",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._readdir(t);case 3:return(r=e.sent).sort(K),e.abrupt("return",r);case 8:if(e.prev=8,e.t0=e.catch(0),"ENOTDIR"!==e.t0.code){e.next=12;break}return e.abrupt("return",null);case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"readdirDeep",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readdir(t);case 2:return r=e.sent,e.next=5,Promise.all(r.map(function(){var e=k(regeneratorRuntime.mark(function e(r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t+"/"+r,e.next=3,a._stat(n);case 3:if(!e.sent.isDirectory()){e.next=7;break}e.t0=a.readdirDeep(n),e.next=8;break;case 7:e.t0=n;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:return n=e.sent,e.abrupt("return",n.reduce(function(e,t){return e.concat(t)},[]));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"lstat",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._lstat(t);case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),"ENOENT"!==e.t0.code){e.next=11;break}return e.abrupt("return",null);case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"readlink",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{encoding:"buffer"},e.prev=1,e.abrupt("return",this._readlink(t,r));case 5:if(e.prev=5,e.t0=e.catch(1),"ENOENT"!==e.t0.code){e.next=9;break}return e.abrupt("return",null);case 9:throw e.t0;case 10:case"end":return e.stop()}},e,this,[[1,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"writelink",value:function(){var e=k(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._symlink(r.toString("utf8"),t));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}]),t}();function Ar(e){return Or.apply(this,arguments)}function Or(){return(Or=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.gitdir,a=t.object,i=t.format,s=t.oid,"deflated"===i){e.next=3;break}throw new W("GitObjectStoreLoose expects objects to write to be in deflated format");case 3:return u="objects/".concat(s.slice(0,2),"/").concat(s.slice(2)),c="".concat(n,"/").concat(u),e.next=7,r.exists(c);case 7:if(e.sent){e.next=10;break}return e.next=10,r.write(c,a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ir=null;function Br(e){return Cr.apply(this,arguments)}function Cr(){return(Cr=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===Ir&&(Ir=Ur()),e.abrupt("return",Ir?Nr(t):a.default.deflate(t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nr(e){return Dr.apply(this,arguments)}function Dr(){return(Dr=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new CompressionStream("deflate"),n=new Blob([t]).stream().pipeThrough(r),e.t0=Uint8Array,e.next=5,new Response(n).arrayBuffer();case 5:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ur(){try{if(new CompressionStream("deflate"))return!0}catch(e){}return!1}function Tr(e){return Mr.apply(this,arguments)}function Mr(){return(Mr=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fs,a=r.gitdir,i=r.type,s=r.object,u=r.format,c=void 0===u?"content":u,o=r.oid,f=void 0===o?void 0:o,p=r.dryRun,d=void 0!==p&&p,"deflated"===c){t.next=11;break}return"wrapped"!==c&&(s=ot.wrap({type:i,object:s})),t.next=5,Q(s);case 5:return f=t.sent,t.t0=e,t.next=9,Br(s);case 9:t.t1=t.sent,s=t.t0.from.call(t.t0,t.t1);case 11:if(d){t.next=14;break}return t.next=14,Ar({fs:n,gitdir:a,object:s,format:"deflated",oid:f});case 14:return t.abrupt("return",f);case 15:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Fr(e,t){if(void 0===t)throw new er(e)}function Hr(e){return zr.apply(this,arguments)}function zr(){return(zr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.filepath,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("dir",n),Fr("gitdir",i),Fr("filepath",s),o=new Pr(r),e.next=9,ve.acquire({fs:o,gitdir:i,cache:c},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr({dir:n,gitdir:i,fs:o,filepath:s,index:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.add",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function Gr(e){return Wr.apply(this,arguments)}function Wr(){return(Wr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dir,n=t.gitdir,a=t.fs,i=t.filepath,s=t.index,e.next=3,jr.isIgnored({fs:a,dir:r,gitdir:n,filepath:i});case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,a.lstat(Ne(r,i));case 8:if(u=e.sent){e.next=11;break}throw new Ee(i);case 11:if(!u.isDirectory()){e.next=20;break}return e.next=14,a.readdir(Ne(r,i));case 14:return c=e.sent,o=c.map(function(e){return Gr({dir:r,gitdir:n,fs:a,filepath:Ne(i,e),index:s})}),e.next=18,Promise.all(o);case 18:e.next=36;break;case 20:if(!u.isSymbolicLink()){e.next=26;break}return e.next=23,a.readlink(Ne(r,i));case 23:e.t0=e.sent,e.next=29;break;case 26:return e.next=28,a.read(Ne(r,i));case 28:e.t0=e.sent;case 29:if(null!==(f=e.t0)){e.next=32;break}throw new Ee(i);case 32:return e.next=34,Tr({fs:a,gitdir:n,type:"blob",object:f});case 34:p=e.sent,s.insert({filepath:i,stats:u,oid:p});case 36:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qr(e){return Kr.apply(this,arguments)}function Kr(){return(Kr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.onSign,i=t.gitdir,s=t.message,u=t.author,c=t.committer,o=t.signingKey,f=t.dryRun,p=void 0!==f&&f,d=t.noUpdateBranch,l=void 0!==d&&d,h=t.ref,m=t.parent,g=t.tree,h){e.next=5;break}return e.next=4,tt.resolve({fs:r,gitdir:i,ref:"HEAD",depth:2});case 4:h=e.sent;case 5:return e.abrupt("return",ve.acquire({fs:r,gitdir:i,cache:n},function(){var e=k(regeneratorRuntime.mark(function e(t){var n,f,d,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ke(t.entries),f=n.get("."),g){e.next=6;break}return e.next=5,$r({fs:r,gitdir:i,inode:f,dryRun:p});case 5:g=e.sent;case 6:if(m){e.next=17;break}return e.prev=7,e.next=10,tt.resolve({fs:r,gitdir:i,ref:h});case 10:e.t0=e.sent,m=[e.t0],e.next=17;break;case 14:e.prev=14,e.t1=e.catch(7),m=[];case 17:if(d=kr.from({tree:g,parent:m,author:u,committer:c,message:s}),!o){e.next=22;break}return e.next=21,kr.sign(d,a,o);case 21:d=e.sent;case 22:return e.next=24,Tr({fs:r,gitdir:i,type:"commit",object:d.toObject(),dryRun:p});case 24:if(v=e.sent,l||p){e.next=28;break}return e.next=28,tt.writeRef({fs:r,gitdir:i,ref:h,value:v});case 28:return e.abrupt("return",v);case 29:case"end":return e.stop()}},e,null,[[7,14]])}));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $r(e){return Lr.apply(this,arguments)}function Lr(){return(Lr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.fs,n=t.gitdir,a=t.inode,i=t.dryRun,s=a.children,u=w(s),e.prev=3,u.s();case 5:if((c=u.n()).done){e.next=14;break}if("tree"!==(o=c.value).type){e.next=12;break}return o.metadata.mode="040000",e.next=11,$r({fs:r,gitdir:n,inode:o,dryRun:i});case 11:o.metadata.oid=e.sent;case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),u.e(e.t0);case 19:return e.prev=19,u.f(),e.finish(19);case 22:return f=s.map(function(e){return{mode:e.metadata.mode,path:e.basename,oid:e.metadata.oid,type:e.type}}),p=ct.from(f),e.next=26,Tr({fs:r,gitdir:n,type:"tree",object:p.toObject(),dryRun:i});case 26:return d=e.sent,e.abrupt("return",d);case 28:case"end":return e.stop()}},e,null,[[3,16,19,22]])}))).apply(this,arguments)}function Vr(e){return Zr.apply(this,arguments)}function Zr(){return(Zr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,!(s=t.filepath).startsWith("/")){e.next=5;break}throw new Zt("leading-slash");case 5:if(!s.endsWith("/")){e.next=7;break}throw new Zt("trailing-slash");case 7:return u=i,e.next=10,wr({fs:r,cache:n,gitdir:a,oid:i});case 10:if(c=e.sent,o=c.tree,""!==s){e.next=16;break}i=c.oid,e.next=20;break;case 16:return f=s.split("/"),e.next=19,Yr({fs:r,cache:n,gitdir:a,tree:o,pathArray:f,oid:u,filepath:s});case 19:i=e.sent;case 20:return e.abrupt("return",i);case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yr(e){return Jr.apply(this,arguments)}function Jr(){return(Jr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.fs,n=t.cache,a=t.gitdir,i=t.tree,s=t.pathArray,u=t.oid,c=t.filepath,o=s.shift(),f=w(i),e.prev=3,f.s();case 5:if((p=f.n()).done){e.next=23;break}if((d=p.value).path!==o){e.next=21;break}if(0!==s.length){e.next=12;break}return e.abrupt("return",d.oid);case 12:return e.next=14,Ft({fs:r,cache:n,gitdir:a,oid:d.oid});case 14:if(l=e.sent,h=l.type,m=l.object,"tree"===h){e.next=19;break}throw new Se(u,h,"blob",c);case 19:return i=ct.from(m),e.abrupt("return",Yr({fs:r,cache:n,gitdir:a,tree:i,pathArray:s,oid:u,filepath:c}));case 21:e.next=5;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(3),f.e(e.t0);case 28:return e.prev=28,f.f(),e.finish(28);case 31:throw new Ee('file or directory found at "'.concat(u,":").concat(c,'"'));case 32:case"end":return e.stop()}},e,null,[[3,25,28,31]])}))).apply(this,arguments)}function Xr(e){return Qr.apply(this,arguments)}function Qr(){return(Qr=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.filepath,void 0===(u=void 0===s?void 0:s)){e.next=5;break}return e.next=4,Vr({fs:r,cache:n,gitdir:a,oid:i,filepath:u});case 4:i=e.sent;case 5:return e.next=7,wr({fs:r,cache:n,gitdir:a,oid:i});case 7:return c=e.sent,o=c.tree,f=c.oid,p={oid:f,tree:o.entries()},e.abrupt("return",p);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function en(e){return tn.apply(this,arguments)}function tn(){return(tn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.tree,i=ct.from(a).toObject(),e.next=4,Tr({fs:r,gitdir:n,type:"tree",object:i,format:"content"});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e){return nn.apply(this,arguments)}function nn(){return(nn=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.fs,a=r.cache,i=r.onSign,s=r.gitdir,u=r.ref,c=r.oid,o=r.note,f=r.force,p=r.author,d=r.committer,l=r.signingKey,t.prev=1,t.next=4,tt.resolve({gitdir:s,fs:n,ref:u});case 4:h=t.sent,t.next=11;break;case 7:if(t.prev=7,t.t0=t.catch(1),t.t0 instanceof Ee){t.next=11;break}throw t.t0;case 11:return t.next=13,Xr({fs:n,cache:a,gitdir:s,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"});case 13:if(m=t.sent,g=m.tree,!f){t.next=19;break}g=g.filter(function(e){return e.path!==c}),t.next=36;break;case 19:v=w(g),t.prev=20,v.s();case 22:if((x=v.n()).done){t.next=28;break}if(x.value.path!==c){t.next=26;break}throw new zt("note",c);case 26:t.next=22;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(20),v.e(t.t1);case 33:return t.prev=33,v.f(),t.finish(33);case 36:return"string"==typeof o&&(o=e.from(o,"utf8")),t.next=39,Tr({fs:n,gitdir:s,type:"blob",object:o,format:"content"});case 39:return b=t.sent,g.push({mode:"100644",path:c,oid:b,type:"blob"}),t.next=43,en({fs:n,gitdir:s,tree:g});case 43:return k=t.sent,t.next=46,qr({fs:n,cache:a,onSign:i,gitdir:s,ref:u,tree:k,parent:h&&[h],message:"Note added by 'isomorphic-git addNote'\n",author:p,committer:d,signingKey:l});case 46:return y=t.sent,t.abrupt("return",y);case 48:case"end":return t.stop()}},t,null,[[1,7],[20,30,33,36]])}))).apply(this,arguments)}function an(e){return sn.apply(this,arguments)}function sn(){return(sn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.path,e.next=3,Xe.get({fs:r,gitdir:n});case 3:return i=e.sent,e.abrupt("return",i.get(a));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function un(e){return cn.apply(this,arguments)}function cn(){return(cn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.gitdir,a=t.author,s=(i=void 0===a?{}:a).name,u=i.email,c=i.timestamp,o=i.timezoneOffset,e.t0=s,e.t0){e.next=7;break}return e.next=6,an({fs:r,gitdir:n,path:"user.name"});case 6:e.t0=e.sent;case 7:if(s=e.t0,e.t2=u,e.t2){e.next=13;break}return e.next=12,an({fs:r,gitdir:n,path:"user.email"});case 12:e.t2=e.sent;case 13:if(e.t1=e.t2,e.t1){e.next=16;break}e.t1="";case 16:if(u=e.t1,void 0!==s){e.next=19;break}return e.abrupt("return",void 0);case 19:return c=null!=c?c:Math.floor(Date.now()/1e3),o=null!=o?o:new Date(1e3*c).getTimezoneOffset(),e.abrupt("return",{name:s,email:u,timestamp:c,timezoneOffset:o});case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(e){return fn.apply(this,arguments)}function fn(){return(fn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.author,i=t.committer,i=Object.assign({},i||a),a&&(i.timestamp=i.timestamp||a.timestamp,i.timezoneOffset=i.timezoneOffset||a.timezoneOffset),e.next=5,un({fs:r,gitdir:n,author:i});case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(e){return dn.apply(this,arguments)}function dn(){return(dn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.onSign,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.ref,c=void 0===u?"refs/notes/commits":u,o=t.oid,f=t.note,p=t.force,d=t.author,l=t.committer,h=t.signingKey,m=t.cache,g=void 0===m?{}:m,e.prev=1,Fr("fs",r),Fr("gitdir",s),Fr("oid",o),Fr("note",f),h&&Fr("onSign",n),v=new Pr(r),e.next=10,un({fs:v,gitdir:s,author:d});case 10:if(x=e.sent){e.next=13;break}throw new Qt("author");case 13:return e.next=15,on({fs:v,gitdir:s,author:x,committer:l});case 15:if(b=e.sent){e.next=18;break}throw new Qt("committer");case 18:return e.next=20,rn({fs:new Pr(v),cache:g,onSign:n,gitdir:s,ref:c,oid:o,note:f,force:p,author:x,committer:b,signingKey:h});case 20:return e.abrupt("return",e.sent);case 23:throw e.prev=23,e.t0=e.catch(1),e.t0.caller="git.addNote",e.t0;case 27:case"end":return e.stop()}},e,null,[[1,23]])}))).apply(this,arguments)}function ln(e){return hn.apply(this,arguments)}function hn(){return(hn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.gitdir,a=t.remote,i=t.url,s=t.force,a===u.default.clean(a)){e.next=3;break}throw new Yt(a,u.default.clean(a));case 3:return e.next=5,Xe.get({fs:r,gitdir:n});case 5:if(c=e.sent,s){e.next=17;break}return e.next=9,c.getSubsections("remote");case 9:if(!e.sent.includes(a)){e.next=17;break}return e.t0=i,e.next=14,c.get("remote.".concat(a,".url"));case 14:if(e.t1=e.sent,e.t0===e.t1){e.next=17;break}throw new zt("remote",a);case 17:return e.next=19,c.set("remote.".concat(a,".url"),i);case 19:return e.next=21,c.set("remote.".concat(a,".fetch"),"+refs/heads/*:refs/remotes/".concat(a,"/*"));case 21:return e.next=23,Xe.save({fs:r,gitdir:n,config:c});case 23:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(e){return gn.apply(this,arguments)}function gn(){return(gn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.remote,u=t.url,c=t.force,o=void 0!==c&&c,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("remote",s),Fr("url",u),e.next=8,ln({fs:new Pr(r),gitdir:i,remote:s,url:u,force:o});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.addRemote",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function vn(e){return xn.apply(this,arguments)}function xn(){return(xn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.onSign,i=t.gitdir,s=t.ref,u=t.tagger,c=t.message,o=void 0===c?s:c,f=t.gpgsig,p=t.object,d=t.signingKey,l=t.force,h=void 0!==l&&l,s=s.startsWith("refs/tags/")?s:"refs/tags/".concat(s),e.t0=!h,!e.t0){e.next=7;break}return e.next=6,tt.exists({fs:r,gitdir:i,ref:s});case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=9;break}throw new zt("tag",s);case 9:return e.next=11,tt.resolve({fs:r,gitdir:i,ref:p||"HEAD"});case 11:return m=e.sent,e.next=14,Ft({fs:r,cache:n,gitdir:i,oid:m});case 14:if(g=e.sent,v=g.type,x=vr.from({object:m,type:v,tag:s.replace("refs/tags/",""),tagger:u,message:o,gpgsig:f}),!d){e.next=21;break}return e.next=20,vr.sign(x,a,d);case 20:x=e.sent;case 21:return e.next=23,Tr({fs:r,gitdir:i,type:"tag",object:x.toObject()});case 23:return b=e.sent,e.next=26,tt.writeRef({fs:r,gitdir:i,ref:s,value:b});case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bn(e){return kn.apply(this,arguments)}function kn(){return(kn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.onSign,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.ref,c=t.tagger,o=t.message,f=void 0===o?u:o,p=t.gpgsig,d=t.object,l=t.signingKey,h=t.force,m=void 0!==h&&h,g=t.cache,v=void 0===g?{}:g,e.prev=1,Fr("fs",r),Fr("gitdir",s),Fr("ref",u),l&&Fr("onSign",n),x=new Pr(r),e.next=9,un({fs:x,gitdir:s,author:c});case 9:if(b=e.sent){e.next=12;break}throw new Qt("tagger");case 12:return e.next=14,vn({fs:x,cache:v,onSign:n,gitdir:s,ref:u,tagger:b,message:f,gpgsig:p,object:d,signingKey:l,force:m});case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e.catch(1),e.t0.caller="git.annotatedTag",e.t0;case 21:case"end":return e.stop()}},e,null,[[1,17]])}))).apply(this,arguments)}function wn(e){return yn.apply(this,arguments)}function yn(){return(yn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.gitdir,a=t.ref,i=t.checkout,s=void 0!==i&&i,a===u.default.clean(a)){e.next=3;break}throw new Yt(a,u.default.clean(a));case 3:return c="refs/heads/".concat(a),e.next=6,tt.exists({fs:r,gitdir:n,ref:c});case 6:if(!e.sent){e.next=9;break}throw new zt("branch",a,!1);case 9:return e.prev=9,e.next=12,tt.resolve({fs:r,gitdir:n,ref:"HEAD"});case 12:o=e.sent,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(9);case 17:if(!o){e.next=20;break}return e.next=20,tt.writeRef({fs:r,gitdir:n,ref:c,value:o});case 20:if(!s){e.next=23;break}return e.next=23,tt.writeSymbolicRef({fs:r,gitdir:n,ref:"HEAD",value:c});case 23:case"end":return e.stop()}},e,null,[[9,15]])}))).apply(this,arguments)}function Rn(e){return _n.apply(this,arguments)}function _n(){return(_n=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=t.checkout,c=void 0!==u&&u,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",s),e.next=7,wn({fs:new Pr(r),gitdir:i,ref:s,checkout:c});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.branch",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function En(e,t){var r=t-e;return Array.from({length:r},function(t,r){return e+r})}var Sn=void 0===Array.prototype.flat?function(e){return e.reduce(function(e,t){return e.concat(t)},[])}:function(e){return e.flat()},jn=function(){function e(){A(this,e),this.value=null}return I(e,[{key:"consider",value:function(e){null!=e&&(null===this.value?this.value=e:e<this.value&&(this.value=e))}},{key:"reset",value:function(){this.value=null}}]),e}();function Pn(e){var t,r,n,a,i,s,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(t=new jn,n=[],a=e.length,i=0;i<a;i++)n[i]=e[i].next().value,void 0!==n[i]&&t.consider(n[i]);if(null!==t.value){c.next=6;break}return c.abrupt("return");case 6:for(s=[],r=t.value,t.reset(),u=0;u<a;u++)void 0!==n[u]&&n[u]===r?(s[u]=n[u],n[u]=e[u].next().value):s[u]=null,void 0!==n[u]&&t.consider(n[u]);return c.next=13,s;case 13:if(null!==t.value){c.next=15;break}return c.abrupt("return");case 15:c.next=6;break;case 17:case"end":return c.stop()}},l)}function An(e){return On.apply(this,arguments)}function On(){return(On=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,g,v,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.dir,i=t.gitdir,s=t.trees,u=t.map,c=void 0===u?function(){var e=k(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r);case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}():u,o=t.reduce,f=void 0===o?function(){var e=k(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sn(r),void 0!==t&&n.unshift(t),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}():o,p=t.iterate,d=void 0===p?function(e,t){return Promise.all(m(t).map(e))}:p,l=s.map(function(e){return e[Re]({fs:r,dir:a,gitdir:i,cache:n})}),h=new Array(l.length).fill("."),g=En(0,l.length),v=function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.map(function(e){t[e]=t[e]&&new l[e].ConstructEntry(t[e])}),e.next=3,Promise.all(g.map(function(e){return t[e]?l[e].readdir(t[e]):[]}));case 3:return r=e.sent,n=r.map(function(e){return null===e?[]:e}).map(function(e){return e[Symbol.iterator]()}),e.abrupt("return",{entries:t,children:Pn(n)});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return r=e.sent,n=r.entries,a=r.children,i=n.find(function(e){return e&&e._fullpath})._fullpath,e.next=8,c(i,n);case 8:if(null===(s=e.sent)){e.next=15;break}return e.next=12,d(x,a);case 12:return u=(u=e.sent).filter(function(e){return void 0!==e}),e.abrupt("return",f(s,u));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",x(h));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var In=function(e,t){return"."===e||null==t||0===t.length||"."===t||(t.length>=e.length?t.startsWith(e):e.startsWith(t))};function Bn(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,R,_,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.onProgress,i=t.dir,s=t.gitdir,u=t.remote,c=t.ref,o=t.filepaths,f=t.noCheckout,p=t.noUpdateHead,d=t.dryRun,l=t.force,e.prev=1,e.next=4,tt.resolve({fs:r,gitdir:s,ref:c});case 4:h=e.sent,e.next=26;break;case 7:if(e.prev=7,e.t0=e.catch(1),"HEAD"!==c){e.next=11;break}throw e.t0;case 11:return m="".concat(u,"/").concat(c),e.next=14,tt.resolve({fs:r,gitdir:s,ref:m});case 14:return h=e.sent,e.next=17,Xe.get({fs:r,gitdir:s});case 17:return g=e.sent,e.next=20,g.set("branch.".concat(c,".remote"),u);case 20:return e.next=22,g.set("branch.".concat(c,".merge"),"refs/heads/".concat(c));case 22:return e.next=24,Xe.save({fs:r,gitdir:s,config:g});case 24:return e.next=26,tt.writeRef({fs:r,gitdir:s,ref:"refs/heads/".concat(c),value:h});case 26:if(f){e.next=58;break}return e.prev=27,e.next=30,Nn({fs:r,cache:n,onProgress:a,dir:i,gitdir:s,ref:c,force:l,filepaths:o});case 30:v=e.sent,e.next=40;break;case 33:if(e.prev=33,e.t1=e.catch(27),!(e.t1 instanceof Ee&&e.t1.data.what===h)){e.next=39;break}throw new qt(c,h);case 39:throw e.t1;case 40:if(!((x=v.filter(function(e){return"conflict"===y(e,1)[0]}).map(function(e){var t=y(e,2);t[0];return t[1]})).length>0)){e.next=43;break}throw new Wt(x);case 43:if(!((b=v.filter(function(e){return"error"===y(e,1)[0]}).map(function(e){var t=y(e,2);t[0];return t[1]})).length>0)){e.next=46;break}throw new W(b.join(", "));case 46:if(!d){e.next=48;break}return e.abrupt("return");case 48:return R=0,_=v.length,e.next=52,ve.acquire({fs:r,gitdir:s,cache:n},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(v.filter(function(e){var t=y(e,1)[0];return"delete"===t||"delete-index"===t}).map(function(){var e=k(regeneratorRuntime.mark(function e(n){var s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=y(n,2),u=s[0],c=s[1],o="".concat(i,"/").concat(c),"delete"!==u){e.next=5;break}return e.next=5,r.rm(o);case 5:if(t.delete({filepath:c}),!a){e.next=9;break}return e.next=9,a({phase:"Updating workdir",loaded:++R,total:_});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 52:return e.next=54,ve.acquire({fs:r,gitdir:s,cache:n},function(){var e=k(regeneratorRuntime.mark(function e(t){var n,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=w(v),e.prev=1,n.s();case 3:if((s=n.n()).done){e.next=25;break}if(u=y(s.value,2),c=u[0],o=u[1],"rmdir"!==c&&"rmdir-index"!==c){e.next=23;break}return f="".concat(i,"/").concat(o),e.prev=7,"rmdir-index"===c&&t.delete({filepath:o}),e.next=11,r.rmdir(f);case 11:if(!a){e.next=14;break}return e.next=14,a({phase:"Updating workdir",loaded:++R,total:_});case 14:e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(7),"ENOTEMPTY"!==e.t0.code){e.next=22;break}console.log("Did not delete ".concat(o," because directory is not empty")),e.next=23;break;case 22:throw e.t0;case 23:e.next=3;break;case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(1),n.e(e.t1);case 30:return e.prev=30,n.f(),e.finish(30);case 33:case"end":return e.stop()}},e,null,[[1,27,30,33],[7,16]])}));return function(t){return e.apply(this,arguments)}}());case 54:return e.next=56,Promise.all(v.filter(function(e){var t=y(e,1)[0];return"mkdir"===t||"mkdir-index"===t}).map(function(){var e=k(regeneratorRuntime.mark(function e(t){var n,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=y(t,2),n[0],s=n[1],u="".concat(i,"/").concat(s),e.next=4,r.mkdir(u);case 4:if(!a){e.next=7;break}return e.next=7,a({phase:"Updating workdir",loaded:++R,total:_});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 56:return e.next=58,ve.acquire({fs:r,gitdir:s,cache:n},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(v.filter(function(e){var t=y(e,1)[0];return"create"===t||"create-index"===t||"update"===t||"mkdir-index"===t}).map(function(){var e=k(regeneratorRuntime.mark(function e(u){var c,o,f,p,d,l,h,m,g,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=y(u,5),o=c[0],f=c[1],p=c[2],d=c[3],l=c[4],h="".concat(i,"/").concat(f),e.prev=2,"create-index"===o||"mkdir-index"===o){e.next=27;break}return e.next=6,Ft({fs:r,cache:n,gitdir:s,oid:p});case 6:if(m=e.sent,g=m.object,!l){e.next=11;break}return e.next=11,r.rm(h);case 11:if(33188!==d){e.next=16;break}return e.next=14,r.write(h,g);case 14:e.next=27;break;case 16:if(33261!==d){e.next=21;break}return e.next=19,r.write(h,g,{mode:511});case 19:e.next=27;break;case 21:if(40960!==d){e.next=26;break}return e.next=24,r.writelink(h,g);case 24:e.next=27;break;case 26:throw new W("Invalid mode 0o".concat(d.toString(8)," detected in blob ").concat(p));case 27:return e.next=29,r.lstat(h);case 29:if(v=e.sent,33261===d&&(v.mode=493),"mkdir-index"===o&&(v.mode=57344),t.insert({filepath:f,stats:v,oid:p}),!a){e.next=36;break}return e.next=36,a({phase:"Updating workdir",loaded:++R,total:_});case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(2),console.log(e.t0);case 41:case"end":return e.stop()}},e,null,[[2,38]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 58:if(p){e.next=69;break}return e.next=61,tt.expand({fs:r,gitdir:s,ref:c});case 61:if(!(E=e.sent).startsWith("refs/heads")){e.next=67;break}return e.next=65,tt.writeSymbolicRef({fs:r,gitdir:s,ref:"HEAD",value:E});case 65:e.next=69;break;case 67:return e.next=69,tt.writeRef({fs:r,gitdir:s,ref:"HEAD",value:h});case 69:case"end":return e.stop()}},e,null,[[1,7],[27,33]])}))).apply(this,arguments)}function Nn(e){return Dn.apply(this,arguments)}function Dn(){return(Dn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.onProgress,i=t.dir,s=t.gitdir,u=t.ref,c=t.force,o=t.filepaths,f=0,e.abrupt("return",An({fs:r,cache:n,dir:i,gitdir:s,trees:[_r({ref:u}),Sr(),_e()],map:function(){var e=k(regeneratorRuntime.mark(function e(t,r){var n,i,s,u,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y(r,3),i=n[0],s=n[1],u=n[2],"."!==t){e.next=3;break}return e.abrupt("return");case 3:if(!o||o.some(function(e){return In(t,e)})){e.next=5;break}return e.abrupt("return",null);case 5:if(!a){e.next=8;break}return e.next=8,a({phase:"Analyzing workdir",loaded:++f});case 8:p=[!!u,!!i,!!s].map(Number).join(""),e.t0=p,e.next="000"===e.t0?12:"001"===e.t0?13:"010"===e.t0?16:"011"===e.t0?44:"100"===e.t0?117:"101"===e.t0?118:"110"===e.t0?146:"111"===e.t0?146:289;break;case 12:return e.abrupt("return");case 13:if(!(c&&o&&o.includes(t))){e.next=15;break}return e.abrupt("return",["delete",t]);case 15:return e.abrupt("return");case 16:return e.next=18,i.type();case 18:e.t1=e.sent,e.next="tree"===e.t1?21:"blob"===e.t1?22:"commit"===e.t1?30:38;break;case 21:return e.abrupt("return",["mkdir",t]);case 22:return e.t2=t,e.next=25,i.oid();case 25:return e.t3=e.sent,e.next=28,i.mode();case 28:return e.t4=e.sent,e.abrupt("return",["create",e.t2,e.t3,e.t4]);case 30:return e.t5=t,e.next=33,i.oid();case 33:return e.t6=e.sent,e.next=36,i.mode();case 36:return e.t7=e.sent,e.abrupt("return",["mkdir-index",e.t5,e.t6,e.t7]);case 38:return e.t8="new entry Unhandled type ",e.next=41,i.type();case 41:return e.t9=e.sent,e.t10=e.t8.concat.call(e.t8,e.t9),e.abrupt("return",["error",e.t10]);case 44:return e.t13="",e.next=47,i.type();case 47:return e.t14=e.sent,e.t12=e.t13.concat.call(e.t13,e.t14,"-"),e.next=51,s.type();case 51:e.t15=e.sent,e.t11=e.t12.concat.call(e.t12,e.t15),e.next="tree-tree"===e.t11?55:"tree-blob"===e.t11?56:"blob-tree"===e.t11?56:"blob-blob"===e.t11?57:"commit-tree"===e.t11?114:"commit-blob"===e.t11?115:116;break;case 55:return e.abrupt("return");case 56:return e.abrupt("return",["conflict",t]);case 57:return e.next=59,i.oid();case 59:return e.t16=e.sent,e.next=62,s.oid();case 62:if(e.t17=e.sent,e.t16===e.t17){e.next=85;break}if(!c){e.next=82;break}return e.t18=t,e.next=68,i.oid();case 68:return e.t19=e.sent,e.next=71,i.mode();case 71:return e.t20=e.sent,e.next=74,i.mode();case 74:return e.t21=e.sent,e.next=77,s.mode();case 77:return e.t22=e.sent,e.t23=e.t21!==e.t22,e.abrupt("return",["update",e.t18,e.t19,e.t20,e.t23]);case 82:return e.abrupt("return",["conflict",t]);case 83:e.next=114;break;case 85:return e.next=87,i.mode();case 87:return e.t24=e.sent,e.next=90,s.mode();case 90:if(e.t25=e.sent,e.t24===e.t25){e.next=106;break}if(!c){e.next=103;break}return e.t26=t,e.next=96,i.oid();case 96:return e.t27=e.sent,e.next=99,i.mode();case 99:return e.t28=e.sent,e.abrupt("return",["update",e.t26,e.t27,e.t28,!0]);case 103:return e.abrupt("return",["conflict",t]);case 104:e.next=114;break;case 106:return e.t29=t,e.next=109,i.oid();case 109:return e.t30=e.sent,e.next=112,i.mode();case 112:return e.t31=e.sent,e.abrupt("return",["create-index",e.t29,e.t30,e.t31]);case 114:return e.abrupt("return");case 115:return e.abrupt("return",["conflict",t]);case 116:return e.abrupt("return",["error","new entry Unhandled type ".concat(i.type)]);case 117:return e.abrupt("return",["delete-index",t]);case 118:return e.next=120,u.type();case 120:e.t32=e.sent,e.next="tree"===e.t32?123:"blob"===e.t32?124:"commit"===e.t32?139:140;break;case 123:return e.abrupt("return",["rmdir",t]);case 124:return e.next=126,u.oid();case 126:return e.t33=e.sent,e.next=129,s.oid();case 129:if(e.t34=e.sent,e.t33===e.t34){e.next=138;break}if(!c){e.next=135;break}return e.abrupt("return",["delete",t]);case 135:return e.abrupt("return",["conflict",t]);case 136:e.next=139;break;case 138:return e.abrupt("return",["delete",t]);case 139:return e.abrupt("return",["rmdir-index",t]);case 140:return e.t35="delete entry Unhandled type ",e.next=143,u.type();case 143:return e.t36=e.sent,e.t37=e.t35.concat.call(e.t35,e.t36),e.abrupt("return",["error",e.t37]);case 146:return e.t40="",e.next=149,u.type();case 149:return e.t41=e.sent,e.t39=e.t40.concat.call(e.t40,e.t41,"-"),e.next=153,i.type();case 153:e.t42=e.sent,e.t38=e.t39.concat.call(e.t39,e.t42),e.next="tree-tree"===e.t38?157:"blob-blob"===e.t38?158:"tree-blob"===e.t38?265:"blob-tree"===e.t38?270:"commit-commit"===e.t38?271:279;break;case 157:return e.abrupt("return");case 158:return e.next=160,u.oid();case 160:return e.t45=e.sent,e.next=163,i.oid();case 163:if(e.t46=e.sent,e.t44=e.t45===e.t46,!e.t44){e.next=173;break}return e.next=168,u.mode();case 168:return e.t47=e.sent,e.next=171,i.mode();case 171:e.t48=e.sent,e.t44=e.t47===e.t48;case 173:if(e.t43=e.t44,!e.t43){e.next=176;break}e.t43=!c;case 176:if(!e.t43){e.next=178;break}return e.abrupt("return");case 178:if(!s){e.next=216;break}return e.next=181,s.oid();case 181:return e.t50=e.sent,e.next=184,u.oid();case 184:if(e.t51=e.sent,e.t49=e.t50!==e.t51,!e.t49){e.next=194;break}return e.next=189,s.oid();case 189:return e.t52=e.sent,e.next=192,i.oid();case 192:e.t53=e.sent,e.t49=e.t52!==e.t53;case 194:if(!e.t49){e.next=214;break}if(!c){e.next=213;break}return e.t54=t,e.next=199,i.oid();case 199:return e.t55=e.sent,e.next=202,i.mode();case 202:return e.t56=e.sent,e.next=205,i.mode();case 205:return e.t57=e.sent,e.next=208,s.mode();case 208:return e.t58=e.sent,e.t59=e.t57!==e.t58,e.abrupt("return",["update",e.t54,e.t55,e.t56,e.t59]);case 213:return e.abrupt("return",["conflict",t]);case 214:e.next=232;break;case 216:if(!c){e.next=232;break}return e.t60=t,e.next=220,i.oid();case 220:return e.t61=e.sent,e.next=223,i.mode();case 223:return e.t62=e.sent,e.next=226,i.mode();case 226:return e.t63=e.sent,e.next=229,u.mode();case 229:return e.t64=e.sent,e.t65=e.t63!==e.t64,e.abrupt("return",["update",e.t60,e.t61,e.t62,e.t65]);case 232:return e.next=234,i.mode();case 234:return e.t66=e.sent,e.next=237,u.mode();case 237:if(e.t67=e.sent,e.t66===e.t67){e.next=247;break}return e.t68=t,e.next=242,i.oid();case 242:return e.t69=e.sent,e.next=245,i.mode();case 245:return e.t70=e.sent,e.abrupt("return",["update",e.t68,e.t69,e.t70,!0]);case 247:return e.next=249,i.oid();case 249:return e.t71=e.sent,e.next=252,u.oid();case 252:if(e.t72=e.sent,e.t71===e.t72){e.next=264;break}return e.t73=t,e.next=257,i.oid();case 257:return e.t74=e.sent,e.next=260,i.mode();case 260:return e.t75=e.sent,e.abrupt("return",["update",e.t73,e.t74,e.t75,!1]);case 264:return e.abrupt("return");case 265:return e.t76=t,e.next=268,i.oid();case 268:return e.t77=e.sent,e.abrupt("return",["update-dir-to-blob",e.t76,e.t77]);case 270:return e.abrupt("return",["update-blob-to-tree",t]);case 271:return e.t78=t,e.next=274,i.oid();case 274:return e.t79=e.sent,e.next=277,i.mode();case 277:return e.t80=e.sent,e.abrupt("return",["mkdir-index",e.t78,e.t79,e.t80]);case 279:return e.t82="update entry Unhandled type ",e.next=282,u.type();case 282:return e.t83=e.sent,e.t81=e.t82.concat.call(e.t82,e.t83,"-"),e.next=286,i.type();case 286:return e.t84=e.sent,e.t85=e.t81.concat.call(e.t81,e.t84),e.abrupt("return",["error",e.t85]);case 289:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),reduce:function(){var e=k(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sn(r),t){e.next=5;break}return e.abrupt("return",r);case 5:if(!t||"rmdir"!==t[0]){e.next=10;break}return r.push(t),e.abrupt("return",r);case 10:return r.unshift(t),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Un(e){return Tn.apply(this,arguments)}function Tn(){return(Tn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.onProgress,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.remote,c=void 0===u?"origin":u,o=t.ref,f=t.filepaths,p=t.noCheckout,d=void 0!==p&&p,l=t.noUpdateHead,h=void 0===l?void 0===o:l,m=t.dryRun,g=void 0!==m&&m,v=t.force,x=void 0!==v&&v,b=t.cache,k=void 0===b?{}:b,e.prev=1,Fr("fs",r),Fr("dir",a),Fr("gitdir",s),w=o||"HEAD",e.next=8,Bn({fs:new Pr(r),cache:k,onProgress:n,dir:a,gitdir:s,remote:c,ref:w,filepaths:f,noCheckout:d,noUpdateHead:h,dryRun:g,force:x});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.checkout",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}var Mn=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Fn(e){var t=Mn.exec(e);return t?"remotes/"===t[1]&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}function Hn(e){return zn.apply(this,arguments)}function zn(){return(zn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.fullname,i=void 0!==a&&a,s=t.test,u=void 0!==s&&s,e.next=3,tt.resolve({fs:r,gitdir:n,ref:"HEAD",depth:2});case 3:if(c=e.sent,!u){e.next=13;break}return e.prev=5,e.next=8,tt.resolve({fs:r,gitdir:n,ref:c});case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(5),e.abrupt("return");case 13:if(c.startsWith("refs/")){e.next=15;break}return e.abrupt("return");case 15:return e.abrupt("return",i?c:Fn(c));case 16:case"end":return e.stop()}},e,null,[[5,10]])}))).apply(this,arguments)}function Gn(e){return e=(e=e.replace(/^git@([^:]+):/,"https://$1/")).replace(/^ssh:\/\//,"https://")}function Wn(t){var r=t.username,n=void 0===r?"":r,a=t.password,i=void 0===a?"":a;return"Basic ".concat(e.from("".concat(n,":").concat(i)).toString("base64"))}function qn(e,t){return Kn.apply(this,arguments)}function Kn(){return(Kn=k(regeneratorRuntime.mark(function e(t,r){var n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=vt(t);case 1:return e.next=4,n.next();case 4:if(a=e.sent,i=a.value,s=a.done,!i){e.next=10;break}return e.next=10,r(i);case 10:if(!s){e.next=12;break}return e.abrupt("break",14);case 12:e.next=1;break;case 14:n.return&&n.return();case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $n(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,n=[],e.next=4,qn(t,function(e){n.push(e),r+=e.byteLength});case 4:for(a=new Uint8Array(r),i=0,s=0,u=n;s<u.length;s++)c=u[s],a.set(c,i),i+=c.byteLength;return e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vn(e){var t=e.match(/^https?:\/\/([^/]+)@/);if(null==t)return{url:e,auth:{}};var r=y((t=t[1]).split(":"),2),n=r[0],a=r[1];return{url:e=e.replace("".concat(t,"@"),""),auth:{username:n,password:a}}}function Zn(e,t){var r=t.toString(16);return"0".repeat(e-r.length)+r}var Yn=function(){function t(){A(this,t)}return I(t,null,[{key:"flush",value:function(){return e.from("0000","utf8")}},{key:"delim",value:function(){return e.from("0001","utf8")}},{key:"encode",value:function(t){"string"==typeof t&&(t=e.from(t));var r=Zn(4,t.length+4);return e.concat([e.from(r,"utf8"),t])}},{key:"streamReader",value:function(e){var t=new xt(e);return function(){var e=k(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.read(4);case 3:if(null!=(r=e.sent)){e.next=6;break}return e.abrupt("return",!0);case 6:if(0!==(r=parseInt(r.toString("utf8"),16))){e.next=9;break}return e.abrupt("return",null);case 9:if(1!==r){e.next=11;break}return e.abrupt("return",null);case 11:return e.next=13,t.read(r-4);case 13:if(null!=(n=e.sent)){e.next=16;break}return e.abrupt("return",!0);case 16:return e.abrupt("return",n);case 19:return e.prev=19,e.t0=e.catch(0),console.log("error",e.t0),e.abrupt("return",!0);case 23:case"end":return e.stop()}},e,null,[[0,19]])}));return function(){return e.apply(this,arguments)}}()}}]),t}();function Jn(e){return Xn.apply(this,arguments)}function Xn(){return(Xn=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={};case 1:return e.next=4,t();case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("break",14);case 7:if(null!==n){e.next=9;break}return e.abrupt("continue",1);case 9:n=n.toString("utf8").replace(/\n$/,""),(a=n.indexOf("="))>-1?(i=n.slice(0,a),s=n.slice(a+1),r[i]=s):r[n]=!0,e.next=1;break;case 14:return e.abrupt("return",{protocolVersion:2,capabilities2:r});case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qn(e,t){return ea.apply(this,arguments)}function ea(){return(ea=k(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,R,_,E,S,j;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.service,a=new Set,i=new Map,s=new Map,u=Yn.streamReader(t),e.next=7,u();case 7:c=e.sent;case 8:if(null!==c){e.next=14;break}return e.next=11,u();case 11:c=e.sent,e.next=8;break;case 14:if(!0!==c){e.next=16;break}throw new Kt;case 16:if(c.toString("utf8").replace(/\n$/,"")==="# service=".concat(n)){e.next=18;break}throw new tr("# service=".concat(n,"\\n"),c.toString("utf8"));case 18:return e.next=20,u();case 20:o=e.sent;case 21:if(null!==o){e.next=27;break}return e.next=24,u();case 24:o=e.sent,e.next=21;break;case 27:if(!0!==o){e.next=29;break}return e.abrupt("return",{capabilities:a,refs:i,symrefs:s});case 29:if(!(o=o.toString("utf8")).includes("version 2")){e.next=32;break}return e.abrupt("return",Jn(u));case 32:f=ta(o,"\0","\\x00"),p=y(f,2),d=p[0],p[1].split(" ").map(function(e){return a.add(e)}),l=ta(d," "," "),h=y(l,2),m=h[0],g=h[1],i.set(g,m);case 36:return e.next=39,u();case 39:if(!0!==(v=e.sent)){e.next=42;break}return e.abrupt("break",45);case 42:null!==v&&(x=ta(v.toString("utf8")," "," "),b=y(x,2),k=b[0],R=b[1],i.set(R,k)),e.next=36;break;case 45:_=w(a);try{for(_.s();!(E=_.n()).done;)(S=E.value).startsWith("symref=")&&3===(j=S.match(/symref=([^:]+):(.*)/)).length&&s.set(j[1],j[2])}catch(P){_.e(P)}finally{_.f()}return e.abrupt("return",{protocolVersion:1,capabilities:a,refs:i,symrefs:s});case 48:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ta(e,t,r){var n=e.trim().split(t);if(2!==n.length)throw new tr("Two strings separated by '".concat(r,"'"),e.toString("utf8"));return n}var ra=function(e,t){return e.endsWith("?")?"".concat(e).concat(t):"".concat(e,"/").concat(t.replace(/^https?:\/\//,""))},na=function(e,t){(t.username||t.password)&&(e.Authorization=Wn(t)),t.headers&&Object.assign(e,t.headers)},aa=function(){var t=k(regeneratorRuntime.mark(function t(r){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=e,t.next=4,$n(r.body);case 4:return t.t1=t.sent,n=t.t0.from.call(t.t0,t.t1),a=n.toString("utf8"),i=a.length<256?a:a.slice(0,256)+"...",t.abrupt("return",{preview:i,response:a,data:n});case 11:return t.prev=11,t.t2=t.catch(0),t.abrupt("return",{});case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e){return t.apply(this,arguments)}}(),ia=function(){function e(){A(this,e)}return I(e,null,[{key:"capabilities",value:function(){var e=k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["discover","connect"]);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"discover",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,l,h,m,g,v,x,b,k,w,y,R,_,E,S,j,P;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.http,n=t.onProgress,a=t.onAuth,i=t.onAuthSuccess,s=t.onAuthFailure,u=t.corsProxy,c=t.service,o=t.url,f=t.headers,p=t.protocolVersion,l=Vn(o),h=l.url,m=l.auth,g=u?ra(u,h):h,(m.username||m.password)&&(f.Authorization=Wn(m)),2===p&&(f["Git-Protocol"]="version=2"),b=!1;case 6:return e.next=8,r.request({onProgress:n,method:"GET",url:"".concat(g,"/info/refs?service=").concat(c),headers:f});case 8:if(v=e.sent,x=!1,401!==v.statusCode&&203!==v.statusCode){e.next=23;break}if(!(k=b?s:a)){e.next=21;break}return e.next=15,k(h,d(d({},m),{},{headers:d({},f)}));case 15:if(!(m=e.sent)||!m.cancel){e.next=20;break}throw new ur;case 20:m&&(na(f,m),b=!0,x=!0);case 21:e.next=26;break;case 23:if(200!==v.statusCode||!b||!i){e.next=26;break}return e.next=26,i(h,m);case 26:if(x){e.next=6;break}case 27:if(200===v.statusCode){e.next=33;break}return e.next=30,aa(v);case 30:throw w=e.sent,y=w.response,new Vt(v.statusCode,v.statusMessage,y);case 33:if(v.headers["content-type"]!=="application/x-".concat(c,"-advertisement")){e.next=41;break}return e.next=36,Qn(v.body,{service:c});case 36:return(R=e.sent).auth=m,e.abrupt("return",R);case 41:return e.next=43,aa(v);case 43:return _=e.sent,E=_.preview,S=_.response,j=_.data,e.prev=47,e.next=50,Qn([j],{service:c});case 50:return(P=e.sent).auth=m,e.abrupt("return",P);case 55:throw e.prev=55,e.t0=e.catch(47),new ar(E,S);case 58:case"end":return e.stop()}},e,null,[[47,55]])}));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.http,n=t.onProgress,a=t.corsProxy,i=t.service,s=t.url,u=t.auth,c=t.body,o=t.headers,(f=Vn(s))&&(s=f.url),a&&(s=ra(a,s)),o["content-type"]="application/x-".concat(i,"-request"),o.accept="application/x-".concat(i,"-result"),na(o,u),e.next=9,r.request({onProgress:n,method:"POST",url:"".concat(s,"/").concat(i),body:c,headers:o});case 9:if(200===(p=e.sent).statusCode){e.next=13;break}throw d=aa(p),l=d.response,new Vt(p.statusCode,p.statusMessage,l);case 13:return e.abrupt("return",p);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function sa(e){var t=e.url;if(t.startsWith("git@"))return{transport:"ssh",address:t};var r=t.match(/(\w+)(:\/\/|::)(.*)/);return null!==r?"://"===r[2]?{transport:r[1],address:r[0]}:"::"===r[2]?{transport:r[1],address:r[3]}:void 0:void 0}var ua=function(){function e(){A(this,e)}return I(e,null,[{key:"getRemoteHelperFor",value:function(e){var t=e.url,r=new Map;r.set("http",ia),r.set("https",ia);var n=sa({url:t});if(!n)throw new sr(t);if(r.has(n.transport))return r.get(n.transport);throw new ir(t,n.transport,"ssh"===n.transport?Gn(t):void 0)}}]),e}(),ca=null,oa=function(){function e(){A(this,e)}return I(e,null,[{key:"read",value:function(){var e=k(regeneratorRuntime.mark(function e(r){var n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.fs,a=r.gitdir,null===ca&&(ca=new t.default),i=Ne(a,"shallow"),s=new Set,e.next=6,ca.acquire(i,k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.read(i,{encoding:"utf8"});case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",s);case 5:if(""!==t.trim()){e.next=7;break}return e.abrupt("return",s);case 7:t.trim().split("\n").map(function(e){return s.add(e)});case 8:case"end":return e.stop()}},e)})));case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=k(regeneratorRuntime.mark(function e(r){var n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.fs,a=r.gitdir,i=r.oids,null===ca&&(ca=new t.default),s=Ne(a,"shallow"),!(i.size>0)){e.next=9;break}return u=m(i).join("\n")+"\n",e.next=7,ca.acquire(s,k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.write(s,u,{encoding:"utf8"});case 2:case"end":return e.stop()}},e)})));case 7:e.next=11;break;case 9:return e.next=11,ca.acquire(s,k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.rm(s);case 2:case"end":return e.stop()}},e)})));case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function fa(e){return pa.apply(this,arguments)}function pa(){return(pa=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.oid,i="objects/".concat(a.slice(0,2),"/").concat(a.slice(2)),e.abrupt("return",r.exists("".concat(n,"/").concat(i)));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function da(e){return la.apply(this,arguments)}function la(){return(la=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.getExternalRefDelta,e.next=3,r.readdir(Ne(a,"objects/pack"));case 3:u=(u=e.sent).filter(function(e){return e.endsWith(".idx")}),c=w(u),e.prev=6,c.s();case 8:if((o=c.n()).done){e.next=20;break}return f=o.value,p="".concat(a,"/objects/pack/").concat(f),e.next=13,Ut({fs:r,cache:n,filename:p,getExternalRefDelta:s});case 13:if(!(d=e.sent).error){e.next=16;break}throw new W(d.error);case 16:if(!d.offsets.has(i)){e.next=18;break}return e.abrupt("return",!0);case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),c.e(e.t0);case 25:return e.prev=25,c.f(),e.finish(25);case 28:return e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,null,[[6,22,25,28]])}))).apply(this,arguments)}function ha(e){return ma.apply(this,arguments)}function ma(){return(ma=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.format,void 0===s?"content":s,u=function(e){return Ft({fs:r,cache:n,gitdir:a,oid:e})},e.next=4,fa({fs:r,gitdir:a,oid:i});case 4:if(c=e.sent){e.next=9;break}return e.next=8,da({fs:r,cache:n,gitdir:a,oid:i,getExternalRefDelta:u});case 8:c=e.sent;case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ga(e){return"5041434b0000000200000000"===e.slice(0,12).toString("hex")}function va(e,t){var r=e.map(function(e){return e.split("=",1)[0]});return t.filter(function(e){var t=e.split("=",1)[0];return r.includes(t)})}var xa={name:"isomorphic-git",version:"1.8.0",agent:"git/isomorphic-git@1.8.0"},ba=function(){function e(){A(this,e),this._queue=[]}return I(e,[{key:"write",value:function(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){var t=this._waiting;this._waiting=null,t({value:e})}else this._queue.push(e)}},{key:"end",value:function(){if(this._ended=!0,this._waiting){var e=this._waiting;this._waiting=null,e({done:!0})}}},{key:"destroy",value:function(e){this._ended=!0,this.error=e}},{key:"next",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._queue.length>0)){e.next=2;break}return e.abrupt("return",{value:this._queue.shift()});case 2:if(!this._ended){e.next=4;break}return e.abrupt("return",{done:!0});case 4:if(!this._waiting){e.next=6;break}throw Error("You cannot call read until the previous call to read has returned!");case 6:return e.abrupt("return",new Promise(function(e){t._waiting=e}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();function ka(e){var t=e.indexOf("\r"),r=e.indexOf("\n");return-1===t&&-1===r?-1:-1===t?r+1:-1===r?t+1:r===t+1?r+1:Math.min(t,r)+1}function wa(e){var t=new ba,r="";return k(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,qn(e,function(e){for(e=e.toString("utf8"),r+=e;;){var n=ka(r);if(-1===n)break;t.write(r.slice(0,n)),r=r.slice(n)}});case 2:r.length>0&&t.write(r),t.end();case 4:case"end":return n.stop()}},n)}))(),t}var ya=function(){function e(){A(this,e)}return I(e,null,[{key:"demux",value:function(e){var t=Yn.streamReader(e),r=new ba,n=new ba,a=new ba,i=function(){var e=k(regeneratorRuntime.mark(function e(){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(null!==(s=e.sent)){e.next=5;break}return e.abrupt("return",i());case 5:if(!0!==s){e.next=10;break}return r.end(),a.end(),n.end(),e.abrupt("return");case 10:e.t0=s[0],e.next=1===e.t0?13:2===e.t0?15:3===e.t0?17:21;break;case 13:return n.write(s.slice(1)),e.abrupt("break",22);case 15:return a.write(s.slice(1)),e.abrupt("break",22);case 17:return u=s.slice(1),a.write(u),n.destroy(new Error(u.toString("utf8"))),e.abrupt("return");case 21:r.write(s.slice(0));case 22:i();case 23:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return i(),{packetlines:r,packfile:n,progress:a}}}]),e}();function Ra(e){return _a.apply(this,arguments)}function _a(){return(_a=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ya.demux(t),n=r.packetlines,a=r.packfile,i=r.progress,s=[],u=[],c=[],o=!1,f=!1,e.abrupt("return",new Promise(function(e,t){qn(n,function(r){var n=r.toString("utf8").trim();if(n.startsWith("shallow")){var p=n.slice(-41).trim();40!==p.length&&t(new je(p)),s.push(p)}else if(n.startsWith("unshallow")){var d=n.slice(-41).trim();40!==d.length&&t(new je(d)),u.push(d)}else if(n.startsWith("ACK")){var l=y(n.split(" "),3),h=l[1],m=l[2];c.push({oid:h,status:m}),m||(f=!0)}else n.startsWith("NAK")&&(o=!0,f=!0);f&&e({shallows:s,unshallows:u,acks:c,nak:o,packfile:a,progress:i})})}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ea(e){var t=e.capabilities,r=void 0===t?[]:t,n=e.wants,a=void 0===n?[]:n,i=e.haves,s=void 0===i?[]:i,u=e.shallows,c=void 0===u?[]:u,o=e.depth,f=void 0===o?null:o,p=e.since,d=void 0===p?null:p,l=e.exclude,h=void 0===l?[]:l,g=[];a=m(new Set(a));var v,x=" ".concat(r.join(" ")),b=w(a);try{for(b.s();!(v=b.n()).done;){var k=v.value;g.push(Yn.encode("want ".concat(k).concat(x,"\n"))),x=""}}catch(I){b.e(I)}finally{b.f()}var y,R=w(c);try{for(R.s();!(y=R.n()).done;){var _=y.value;g.push(Yn.encode("shallow ".concat(_,"\n")))}}catch(I){R.e(I)}finally{R.f()}null!==f&&g.push(Yn.encode("deepen ".concat(f,"\n"))),null!==d&&g.push(Yn.encode("deepen-since ".concat(Math.floor(d.valueOf()/1e3),"\n")));var E,S=w(h);try{for(S.s();!(E=S.n()).done;){var j=E.value;g.push(Yn.encode("deepen-not ".concat(j,"\n")))}}catch(I){S.e(I)}finally{S.f()}g.push(Yn.flush());var P,A=w(s);try{for(A.s();!(P=A.n()).done;){var O=P.value;g.push(Yn.encode("have ".concat(O,"\n")))}}catch(I){A.e(I)}finally{A.f()}return g.push(Yn.encode("done\n")),g}function Sa(e){return ja.apply(this,arguments)}function ja(){return(ja=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l,h,g,v,x,b,R,_,E,S,j,P,A,O,I,B,C,N,D,U,T,M,F,H,z,G,W,q,K,$,L,V,Z,Y,J,X,Q,ee,te,re,ne,ae,ie,se,ue,ce,oe,fe,pe,de,le,he,me,ge,ve,xe,be,ke,we,ye,Re,_e,Ee,Se,je,Pe,Ae,Oe,Ie,Be,Ce,De,Ue,Te,Me,Fe,He,ze,Ge,We,qe,Ke,$e,Le,Ve;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fs,a=r.cache,i=r.http,s=r.onProgress,u=r.onMessage,c=r.onAuth,o=r.onAuthSuccess,f=r.onAuthFailure,p=r.gitdir,d=r.ref,l=r.remoteRef,h=r.remote,g=r.url,v=r.corsProxy,x=r.depth,b=void 0===x?null:x,R=r.since,_=void 0===R?null:R,E=r.exclude,S=void 0===E?[]:E,j=r.relative,P=void 0!==j&&j,A=r.tags,O=void 0!==A&&A,I=r.singleBranch,B=void 0!==I&&I,C=r.headers,N=void 0===C?{}:C,D=r.prune,U=void 0!==D&&D,T=r.pruneTags,M=void 0!==T&&T,t.t0=d,t.t0){t.next=6;break}return t.next=5,Hn({fs:n,gitdir:p,test:!0});case 5:t.t0=t.sent;case 6:return F=t.t0,t.next=9,Xe.get({fs:n,gitdir:p});case 9:if(H=t.sent,t.t2=h,t.t2){t.next=18;break}if(t.t3=F,!t.t3){t.next=17;break}return t.next=16,H.get("branch.".concat(F,".remote"));case 16:t.t3=t.sent;case 17:t.t2=t.t3;case 18:if(t.t1=t.t2,t.t1){t.next=21;break}t.t1="origin";case 21:if(z=t.t1,t.t4=g,t.t4){t.next=27;break}return t.next=26,H.get("remote.".concat(z,".url"));case 26:t.t4=t.sent;case 27:if(void 0!==(G=t.t4)){t.next=30;break}throw new er("remote OR url");case 30:if(t.t7=l,t.t7){t.next=38;break}if(t.t8=F,!t.t8){t.next=37;break}return t.next=36,H.get("branch.".concat(F,".merge"));case 36:t.t8=t.sent;case 37:t.t7=t.t8;case 38:if(t.t6=t.t7,t.t6){t.next=41;break}t.t6=d;case 41:if(t.t5=t.t6,t.t5){t.next=44;break}t.t5="HEAD";case 44:if(W=t.t5,void 0!==v){t.next=49;break}return t.next=48,H.get("http.corsProxy");case 48:v=t.sent;case 49:return q=ua.getRemoteHelperFor({url:G}),t.next=52,q.discover({http:i,onAuth:c,onAuthSuccess:o,onAuthFailure:f,corsProxy:v,service:"git-upload-pack",url:G,headers:N,protocolVersion:1});case 52:if(K=t.sent,$=K.auth,0!==(L=K.refs).size){t.next=57;break}return t.abrupt("return",{defaultBranch:null,fetchHead:null,fetchHeadDescription:null});case 57:if(null===b||K.capabilities.has("shallow")){t.next=59;break}throw new nr("shallow","depth");case 59:if(null===_||K.capabilities.has("deepen-since")){t.next=61;break}throw new nr("deepen-since","since");case 61:if(!(S.length>0)||K.capabilities.has("deepen-not")){t.next=63;break}throw new nr("deepen-not","exclude");case 63:if(!0!==P||K.capabilities.has("deepen-relative")){t.next=65;break}throw new nr("deepen-relative","relative");case 65:V=tt.resolveAgainstMap({ref:W,map:L}),Z=V.oid,Y=V.fullref,J=w(L.keys()),t.prev=67,J.s();case 69:if((X=J.n()).done){t.next=76;break}if(!((Q=X.value)===Y||"HEAD"===Q||Q.startsWith("refs/heads/")||O&&Q.startsWith("refs/tags/"))){t.next=73;break}return t.abrupt("continue",74);case 73:L.delete(Q);case 74:t.next=69;break;case 76:t.next=81;break;case 78:t.prev=78,t.t9=t.catch(67),J.e(t.t9);case 81:return t.prev=81,J.f(),t.finish(81);case 84:if(ee=va(m(K.capabilities),["multi_ack_detailed","no-done","side-band-64k","ofs-delta","agent=".concat(xa.agent)]),P&&ee.push("deepen-relative"),te=B?[Z]:L.values(),!B){t.next=91;break}t.t10=[F],t.next=94;break;case 91:return t.next=93,tt.listRefs({fs:n,gitdir:p,filepath:"refs"});case 93:t.t10=t.sent;case 94:re=t.t10,ne=[],ae=w(re),t.prev=97,ae.s();case 99:if((ie=ae.n()).done){t.next=118;break}return se=ie.value,t.prev=101,t.next=104,tt.expand({fs:n,gitdir:p,ref:se});case 104:return se=t.sent,t.next=107,tt.resolve({fs:n,gitdir:p,ref:se});case 107:return ue=t.sent,t.next=110,ha({fs:n,cache:a,gitdir:p,oid:ue});case 110:if(!t.sent){t.next=112;break}ne.push(ue);case 112:t.next=116;break;case 114:t.prev=114,t.t11=t.catch(101);case 116:t.next=99;break;case 118:t.next=123;break;case 120:t.prev=120,t.t12=t.catch(97),ae.e(t.t12);case 123:return t.prev=123,ae.f(),t.finish(123);case 126:return ne=m(new Set(ne)),t.next=129,oa.read({fs:n,gitdir:p});case 129:return ce=t.sent,oe=K.capabilities.has("shallow")?m(ce):[],fe=Ea({capabilities:ee,wants:te,haves:ne,shallows:oe,depth:b,since:_,exclude:S}),t.t13=e,t.next=135,$n(fe);case 135:return t.t14=t.sent,pe=t.t13.from.call(t.t13,t.t14),t.next=139,q.connect({http:i,onProgress:s,corsProxy:v,service:"git-upload-pack",url:G,auth:$,body:[pe],headers:N});case 139:return de=t.sent,t.next=142,Ra(de.body);case 142:le=t.sent,de.headers&&(le.headers=de.headers),he=w(le.shallows),t.prev=145,he.s();case 147:if((me=he.n()).done){t.next=168;break}if(ge=me.value,ce.has(ge)){t.next=166;break}return t.prev=150,t.next=153,Ft({fs:n,cache:a,gitdir:p,oid:ge});case 153:return ve=t.sent,xe=ve.object,be=new kr(xe),t.next=158,Promise.all(be.headers().parent.map(function(e){return ha({fs:n,cache:a,gitdir:p,oid:e})}));case 158:ke=t.sent,0===ke.length||ke.every(function(e){return e})||ce.add(ge),t.next=166;break;case 163:t.prev=163,t.t15=t.catch(150),ce.add(ge);case 166:t.next=147;break;case 168:t.next=173;break;case 170:t.prev=170,t.t16=t.catch(145),he.e(t.t16);case 173:return t.prev=173,he.f(),t.finish(173);case 176:we=w(le.unshallows);try{for(we.s();!(ye=we.n()).done;)Re=ye.value,ce.delete(Re)}catch(Ze){we.e(Ze)}finally{we.f()}return t.next=180,oa.write({fs:n,gitdir:p,oids:ce});case 180:if(!B){t.next=202;break}_e=new Map([[Y,Z]]),Ee=new Map,Se=10,je=Y;case 185:if(!Se--){t.next=193;break}if(void 0!==(Pe=K.symrefs.get(je))){t.next=189;break}return t.abrupt("break",193);case 189:Ee.set(je,Pe),je=Pe,t.next=185;break;case 193:return(Ae=L.get(je))&&_e.set(je,Ae),t.next=197,tt.updateRemoteRefs({fs:n,gitdir:p,remote:z,refs:_e,symrefs:Ee,tags:O,prune:U});case 197:Oe=t.sent,Ie=Oe.pruned,U&&(le.pruned=Ie),t.next=207;break;case 202:return t.next=204,tt.updateRemoteRefs({fs:n,gitdir:p,remote:z,refs:L,symrefs:K.symrefs,tags:O,prune:U,pruneTags:M});case 204:Be=t.sent,Ce=Be.pruned,U&&(le.pruned=Ce);case 207:if(le.HEAD=K.symrefs.get("HEAD"),void 0!==le.HEAD){t.next=228;break}De=tt.resolveAgainstMap({ref:"HEAD",map:L}),Ue=De.oid,Te=w(L.entries()),t.prev=211,Te.s();case 213:if((Me=Te.n()).done){t.next=220;break}if(Fe=y(Me.value,2),He=Fe[0],ze=Fe[1],"HEAD"===He||ze!==Ue){t.next=218;break}return le.HEAD=He,t.abrupt("break",220);case 218:t.next=213;break;case 220:t.next=225;break;case 222:t.prev=222,t.t17=t.catch(211),Te.e(t.t17);case 225:return t.prev=225,Te.f(),t.finish(225);case 228:return Ge=Y.startsWith("refs/tags")?"tag":"branch",le.FETCH_HEAD={oid:Z,description:"".concat(Ge," '").concat(Fn(Y),"' of ").concat(G)},(s||u)&&qn(wa(le.progress),function(){var e=k(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return e.next=3,u(t);case 3:if(!s){e.next=8;break}if(!(r=t.match(/([^:]*).*\((\d+?)\/(\d+?)\)/))){e.next=8;break}return e.next=8,s({phase:r[1].trim(),loaded:parseInt(r[2],10),total:parseInt(r[3],10)});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),t.t18=e,t.next=234,$n(le.packfile);case 234:if(t.t19=t.sent,We=t.t18.from.call(t.t18,t.t19),qe=We.slice(-20).toString("hex"),Ke={defaultBranch:le.HEAD,fetchHead:le.FETCH_HEAD.oid,fetchHeadDescription:le.FETCH_HEAD.description},le.headers&&(Ke.headers=le.headers),U&&(Ke.pruned=le.pruned),""===qe||ga(We)){t.next=256;break}return Ke.packfile="objects/pack/pack-".concat(qe,".pack"),$e=Ne(p,Ke.packfile),t.next=245,n.write($e,We);case 245:return Le=function(e){return Ft({fs:n,cache:a,gitdir:p,oid:e})},t.next=248,Bt.fromPack({pack:We,getExternalRefDelta:Le,onProgress:s});case 248:return Ve=t.sent,t.t20=n,t.t21=$e.replace(/\.pack$/,".idx"),t.next=253,Ve.toBuffer();case 253:return t.t22=t.sent,t.next=256,t.t20.write.call(t.t20,t.t21,t.t22);case 256:return t.abrupt("return",Ke);case 257:case"end":return t.stop()}},t,null,[[67,78,81,84],[97,120,123,126],[101,114],[145,170,173,176],[150,163],[211,222,225,228]])}))).apply(this,arguments)}function Pa(e){return Aa.apply(this,arguments)}function Aa(){return(Aa=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.bare,a=void 0!==n&&n,i=t.dir,s=t.gitdir,u=void 0===s?a?i:Ne(i,".git"):s,c=t.defaultBranch,o=void 0===c?"master":c,e.next=3,r.exists(u+"/config");case 3:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:f=(f=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"]).map(function(e){return u+"/"+e}),p=w(f),e.prev=8,p.s();case 10:if((d=p.n()).done){e.next=16;break}return l=d.value,e.next=14,r.mkdir(l);case 14:e.next=10;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),p.e(e.t0);case 21:return e.prev=21,p.f(),e.finish(21);case 24:return e.next=26,r.write(u+"/config","[core]\n\trepositoryformatversion = 0\n\tfilemode = false\n"+"\tbare = ".concat(a,"\n")+(a?"":"\tlogallrefupdates = true\n")+"\tsymlinks = false\n\tignorecase = true\n");case 26:return e.next=28,r.write(u+"/HEAD","ref: refs/heads/".concat(o,"\n"));case 28:case"end":return e.stop()}},e,null,[[8,18,21,24]])}))).apply(this,arguments)}function Oa(e){return Ia.apply(this,arguments)}function Ia(){return(Ia=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y,R,_,E,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.http,i=t.onProgress,s=t.onMessage,u=t.onAuth,c=t.onAuthSuccess,o=t.onAuthFailure,f=t.dir,p=t.gitdir,d=t.url,l=t.corsProxy,h=t.ref,m=t.remote,g=t.depth,v=t.since,x=t.exclude,b=t.relative,k=t.singleBranch,w=t.noCheckout,y=t.noTags,R=t.headers,e.next=3,Pa({fs:r,gitdir:p});case 3:return e.next=5,ln({fs:r,gitdir:p,remote:m,url:d,force:!1});case 5:if(!l){e.next=13;break}return e.next=8,Xe.get({fs:r,gitdir:p});case 8:return _=e.sent,e.next=11,_.set("http.corsProxy",l);case 11:return e.next=13,Xe.save({fs:r,gitdir:p,config:_});case 13:return e.next=15,Sa({fs:r,cache:n,http:a,onProgress:i,onMessage:s,onAuth:u,onAuthSuccess:c,onAuthFailure:o,gitdir:p,ref:h,remote:m,depth:g,since:v,exclude:x,relative:b,singleBranch:k,headers:R,tags:!y});case 15:if(E=e.sent,S=E.defaultBranch,null!==E.fetchHead){e.next=20;break}return e.abrupt("return");case 20:return h=(h=h||S).replace("refs/heads/",""),e.next=24,Bn({fs:r,cache:n,onProgress:i,dir:f,gitdir:p,ref:h,remote:m,noCheckout:w});case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ba(e){return Ca.apply(this,arguments)}function Ca(){return(Ca=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y,R,_,E,S,j,P,A,O,I,B,C,N,D,U;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.http,a=t.onProgress,i=t.onMessage,s=t.onAuth,u=t.onAuthSuccess,c=t.onAuthFailure,o=t.dir,f=t.gitdir,p=void 0===f?Ne(o,".git"):f,d=t.url,l=t.corsProxy,h=void 0===l?void 0:l,m=t.ref,g=void 0===m?void 0:m,v=t.remote,x=void 0===v?"origin":v,b=t.depth,k=void 0===b?void 0:b,w=t.since,y=void 0===w?void 0:w,R=t.exclude,_=void 0===R?[]:R,E=t.relative,S=void 0!==E&&E,j=t.singleBranch,P=void 0!==j&&j,A=t.noCheckout,O=void 0!==A&&A,I=t.noTags,B=void 0!==I&&I,C=t.headers,N=void 0===C?{}:C,D=t.cache,U=void 0===D?{}:D,e.prev=1,Fr("fs",r),Fr("http",n),Fr("gitdir",p),O||Fr("dir",o),Fr("url",d),e.next=9,Oa({fs:new Pr(r),cache:U,http:n,onProgress:a,onMessage:i,onAuth:s,onAuthSuccess:u,onAuthFailure:c,dir:o,gitdir:p,url:d,corsProxy:h,ref:g,remote:x,depth:k,since:y,exclude:_,relative:S,singleBranch:P,noCheckout:O,noTags:B,headers:N});case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(1),e.t0.caller="git.clone",e.t0;case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Na(e){return Da.apply(this,arguments)}function Da(){return(Da=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.onSign,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.message,c=t.author,o=t.committer,f=t.signingKey,p=t.dryRun,d=void 0!==p&&p,l=t.noUpdateBranch,h=void 0!==l&&l,m=t.ref,g=t.parent,v=t.tree,x=t.cache,b=void 0===x?{}:x,e.prev=1,Fr("fs",r),Fr("message",u),f&&Fr("onSign",n),k=new Pr(r),e.next=8,un({fs:k,gitdir:s,author:c});case 8:if(w=e.sent){e.next=11;break}throw new Qt("author");case 11:return e.next=13,on({fs:k,gitdir:s,author:w,committer:o});case 13:if(y=e.sent){e.next=16;break}throw new Qt("committer");case 16:return e.next=18,qr({fs:k,cache:b,onSign:n,gitdir:s,message:u,author:w,committer:y,signingKey:f,dryRun:d,noUpdateBranch:h,ref:m,parent:g,tree:v});case 18:return e.abrupt("return",e.sent);case 21:throw e.prev=21,e.t0=e.catch(1),e.t0.caller="git.commit",e.t0;case 25:case"end":return e.stop()}},e,null,[[1,21]])}))).apply(this,arguments)}function Ua(e){return Ta.apply(this,arguments)}function Ta(){return(Ta=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.fullname,u=void 0!==s&&s,c=t.test,o=void 0!==c&&c,e.prev=1,Fr("fs",r),Fr("gitdir",i),e.next=6,Hn({fs:new Pr(r),gitdir:i,fullname:u,test:o});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.currentBranch",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function Ma(e){return Fa.apply(this,arguments)}function Fa(){return(Fa=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.ref,e.next=3,tt.exists({fs:r,gitdir:n,ref:a});case 3:if(e.sent){e.next=6;break}throw new Ee(a);case 6:return e.next=8,tt.expand({fs:r,gitdir:n,ref:a});case 8:return i=e.sent,e.next=11,Hn({fs:r,gitdir:n,fullname:!0});case 11:if(s=e.sent,i!==s){e.next=18;break}return e.next=15,tt.resolve({fs:r,gitdir:n,ref:i});case 15:return u=e.sent,e.next=18,tt.writeRef({fs:r,gitdir:n,ref:"HEAD",value:u});case 18:return e.next=20,tt.deleteRef({fs:r,gitdir:n,ref:i});case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ha(e){return za.apply(this,arguments)}function za(){return(za=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,e.prev=1,Fr("fs",r),Fr("ref",s),e.next=6,Ma({fs:new Pr(r),gitdir:i,ref:s});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.deleteBranch",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function Ga(e){return Wa.apply(this,arguments)}function Wa(){return(Wa=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,e.prev=1,Fr("fs",r),Fr("ref",s),e.next=6,tt.deleteRef({fs:new Pr(r),gitdir:i,ref:s});case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0.caller="git.deleteRef",e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function qa(e){return Ka.apply(this,arguments)}function Ka(){return(Ka=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.remote,e.next=3,Xe.get({fs:r,gitdir:n});case 3:return i=e.sent,e.next=6,i.deleteSection("remote",a);case 6:return e.next=8,Xe.save({fs:r,gitdir:n,config:i});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $a(e){return La.apply(this,arguments)}function La(){return(La=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.remote,e.prev=1,Fr("fs",r),Fr("remote",s),e.next=6,qa({fs:new Pr(r),gitdir:i,remote:s});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.deleteRemote",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function Va(e){return Za.apply(this,arguments)}function Za(){return(Za=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=(a=t.ref).startsWith("refs/tags/")?a:"refs/tags/".concat(a),e.next=4,tt.deleteRef({fs:r,gitdir:n,ref:a});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ya(e){return Ja.apply(this,arguments)}function Ja(){return(Ja=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,e.prev=1,Fr("fs",r),Fr("ref",s),e.next=6,Va({fs:new Pr(r),gitdir:i,ref:s});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.deleteTag",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function Xa(e){return Qa.apply(this,arguments)}function Qa(){return(Qa=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.oid,i=a.slice(0,2),e.next=4,r.readdir("".concat(n,"/objects/").concat(i));case 4:return s=e.sent,e.abrupt("return",s.map(function(e){return"".concat(i).concat(e)}).filter(function(e){return e.startsWith(a)}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ei(e){return ti.apply(this,arguments)}function ti(){return(ti=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.getExternalRefDelta,u=[],e.next=4,r.readdir(Ne(a,"objects/pack"));case 4:c=(c=e.sent).filter(function(e){return e.endsWith(".idx")}),o=w(c),e.prev=7,o.s();case 9:if((f=o.n()).done){e.next=21;break}return p=f.value,d="".concat(a,"/objects/pack/").concat(p),e.next=14,Ut({fs:r,cache:n,filename:d,getExternalRefDelta:s});case 14:if(!(l=e.sent).error){e.next=17;break}throw new W(l.error);case 17:h=w(l.offsets.keys());try{for(h.s();!(m=h.n()).done;)(g=m.value).startsWith(i)&&u.push(g)}catch(v){h.e(v)}finally{h.f()}case 19:e.next=9;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:return e.abrupt("return",u);case 30:case"end":return e.stop()}},e,null,[[7,23,26,29]])}))).apply(this,arguments)}function ri(e){return ni.apply(this,arguments)}function ni(){return(ni=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=function(e){return Ft({fs:r,cache:n,gitdir:a,oid:e})},e.next=4,Xa({fs:r,gitdir:a,oid:i});case 4:return u=e.sent,e.next=7,ei({fs:r,cache:n,gitdir:a,oid:i,getExternalRefDelta:s});case 7:if(c=e.sent,1!==(o=u.concat(c)).length){e.next=11;break}return e.abrupt("return",o[0]);case 11:if(!(o.length>1)){e.next=13;break}throw new Gt("oids",i,o);case 13:throw new Ee('an object matching "'.concat(i,'"'));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ai(e){return ii.apply(this,arguments)}function ii(){return(ii=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oid,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oid",s),e.next=7,ri({fs:new Pr(r),cache:c,gitdir:i,oid:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.expandOid",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function si(e){return ui.apply(this,arguments)}function ui(){return(ui=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",s),e.next=7,tt.expand({fs:new Pr(r),gitdir:i,ref:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.expandRef",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function ci(e){return oi.apply(this,arguments)}function oi(){return(oi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,g,v,x,b,k,y,R,_,E,S,j,P,A,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.fs,n=t.cache,a=t.gitdir,i=t.oids,s={},u=i.length,c=i.map(function(e,t){return{index:t,oid:e}});case 4:if(!c.length){e.next=42;break}o=new Set,f=w(c);try{for(f.s();!(p=f.n()).done;)d=p.value,l=d.oid,h=d.index,s[l]||(s[l]=new Set),s[l].add(h),s[l].size===u&&o.add(l)}catch(I){f.e(I)}finally{f.f()}if(!(o.size>0)){e.next=10;break}return e.abrupt("return",m(o));case 10:g=new Map,v=w(c),e.prev=12,v.s();case 14:if((x=v.n()).done){e.next=31;break}return b=x.value,k=b.oid,y=b.index,e.prev=16,e.next=19,Ft({fs:r,cache:n,gitdir:a,oid:k});case 19:R=e.sent,_=R.object,E=kr.from(_),S=E.parseHeaders(),j=S.parent,P=w(j);try{for(P.s();!(A=P.n()).done;)O=A.value,s[O]&&s[O].has(y)||g.set(O+":"+y,{oid:O,index:y})}catch(I){P.e(I)}finally{P.f()}e.next=29;break;case 27:e.prev=27,e.t0=e.catch(16);case 29:e.next=14;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(12),v.e(e.t1);case 36:return e.prev=36,v.f(),e.finish(36);case 39:c=Array.from(g.values()),e.next=4;break;case 42:return e.abrupt("return",[]);case 43:case"end":return e.stop()}},e,null,[[12,33,36,39],[16,27]])}))).apply(this,arguments)}var fi=/^.*(\r?\n|$)/gm;function pi(e){var t,r=e.ourContent,n=e.baseContent,a=e.theirContent,i=e.ourName,s=void 0===i?"ours":i,u=e.baseName,o=void 0===u?"base":u,f=e.theirName,p=void 0===f?"theirs":f,d=e.format,l=void 0===d?"diff":d,h=e.markerSize,m=void 0===h?7:h,g=r.match(fi),v=n.match(fi),x=a.match(fi),b="",k=!0,y=w((0,c.default)(g,v,x));try{for(y.s();!(t=y.n()).done;){var R=t.value;R.ok&&(b+=R.ok.join("")),R.conflict&&(k=!1,b+="".concat("<".repeat(m)," ").concat(s,"\n"),b+=R.conflict.a.join(""),"diff3"===l&&(b+="".concat("|".repeat(m)," ").concat(o,"\n"),b+=R.conflict.o.join("")),b+="".concat("=".repeat(m),"\n"),b+=R.conflict.b.join(""),b+="".concat(">".repeat(m)," ").concat(p,"\n"))}}catch(_){y.e(_)}finally{y.f()}return{cleanMerge:k,mergedText:b}}function di(e){return li.apply(this,arguments)}function li(){return(li=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ourOid,u=t.baseOid,c=t.theirOid,o=t.ourName,f=void 0===o?"ours":o,p=t.baseName,d=void 0===p?"base":p,l=t.theirName,h=void 0===l?"theirs":l,m=t.dryRun,g=void 0!==m&&m,v=_r({ref:s}),x=_r({ref:u}),b=_r({ref:c}),e.next=6,An({fs:r,dir:n,gitdir:i,trees:[v,x,b],map:function(){var e=k(regeneratorRuntime.mark(function e(t,n){var a,s,u,c,o,p,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=y(n,3),s=a[0],u=a[1],c=a[2],o=xe(t),e.next=4,hi(s,u);case 4:return p=e.sent,e.next=7,hi(c,u);case 7:l=e.sent,e.t0="".concat(p,"-").concat(l),e.next="false-false"===e.t0?11:"false-true"===e.t0?22:"true-false"===e.t0?38:"true-true"===e.t0?54:75;break;case 11:return e.next=13,u.mode();case 13:return e.t1=e.sent,e.t2=o,e.next=17,u.oid();case 17:return e.t3=e.sent,e.next=20,u.type();case 20:return e.t4=e.sent,e.abrupt("return",{mode:e.t1,path:e.t2,oid:e.t3,type:e.t4});case 22:if(!c){e.next=36;break}return e.next=25,c.mode();case 25:return e.t6=e.sent,e.t7=o,e.next=29,c.oid();case 29:return e.t8=e.sent,e.next=32,c.type();case 32:e.t9=e.sent,e.t5={mode:e.t6,path:e.t7,oid:e.t8,type:e.t9},e.next=37;break;case 36:e.t5=void 0;case 37:return e.abrupt("return",e.t5);case 38:if(!s){e.next=52;break}return e.next=41,s.mode();case 41:return e.t11=e.sent,e.t12=o,e.next=45,s.oid();case 45:return e.t13=e.sent,e.next=48,s.type();case 48:e.t14=e.sent,e.t10={mode:e.t11,path:e.t12,oid:e.t13,type:e.t14},e.next=53;break;case 52:e.t10=void 0;case 53:return e.abrupt("return",e.t10);case 54:if(e.t17=s&&u&&c,!e.t17){e.next=60;break}return e.next=58,s.type();case 58:e.t18=e.sent,e.t17="blob"===e.t18;case 60:if(e.t16=e.t17,!e.t16){e.next=66;break}return e.next=64,u.type();case 64:e.t19=e.sent,e.t16="blob"===e.t19;case 66:if(e.t15=e.t16,!e.t15){e.next=72;break}return e.next=70,c.type();case 70:e.t20=e.sent,e.t15="blob"===e.t20;case 72:if(!e.t15){e.next=74;break}return e.abrupt("return",gi({fs:r,gitdir:i,path:o,ours:s,base:u,theirs:c,ourName:f,baseName:d,theirName:h}));case 74:throw new Xt;case 75:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),reduce:function(){var e=k(regeneratorRuntime.mark(function e(t,n){var a,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.filter(Boolean),!t||"tree"!==t.type||0!==a.length){e.next=3;break}return e.abrupt("return");case 3:if(!(a.length>0)){e.next=10;break}return s=new ct(a),u=s.toObject(),e.next=8,Tr({fs:r,gitdir:i,type:"tree",object:u,dryRun:g});case 8:c=e.sent,t.oid=c;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()});case 6:return w=e.sent,e.abrupt("return",w.oid);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=k(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t||r){e.next=2;break}return e.abrupt("return",!1);case 2:if(!t||r){e.next=4;break}return e.abrupt("return",!0);case 4:if(t||!r){e.next=6;break}return e.abrupt("return",!0);case 6:return e.next=8,t.type();case 8:if(e.t1=e.sent,e.t0="tree"===e.t1,!e.t0){e.next=15;break}return e.next=13,r.type();case 13:e.t2=e.sent,e.t0="tree"===e.t2;case 15:if(!e.t0){e.next=17;break}return e.abrupt("return",!1);case 17:return e.next=19,t.type();case 19:return e.t5=e.sent,e.next=22,r.type();case 22:if(e.t6=e.sent,e.t4=e.t5===e.t6,!e.t4){e.next=32;break}return e.next=27,t.mode();case 27:return e.t7=e.sent,e.next=30,r.mode();case 30:e.t8=e.sent,e.t4=e.t7===e.t8;case 32:if(e.t3=e.t4,!e.t3){e.next=41;break}return e.next=36,t.oid();case 36:return e.t9=e.sent,e.next=39,r.oid();case 39:e.t10=e.sent,e.t3=e.t9===e.t10;case 41:if(!e.t3){e.next=43;break}return e.abrupt("return",!1);case 43:return e.abrupt("return",!0);case 44:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gi(e){return vi.apply(this,arguments)}function vi(){return(vi=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.fs,a=r.gitdir,i=r.path,s=r.ours,u=r.base,c=r.theirs,o=r.ourName,f=r.theirName,p=r.baseName,d=r.format,l=r.markerSize,h=r.dryRun,m="blob",t.next=4,u.mode();case 4:return t.t0=t.sent,t.next=7,s.mode();case 7:if(t.t1=t.sent,t.t0!==t.t1){t.next=14;break}return t.next=11,c.mode();case 11:t.t2=t.sent,t.next=17;break;case 14:return t.next=16,s.mode();case 16:t.t2=t.sent;case 17:return g=t.t2,t.next=20,s.oid();case 20:return t.t3=t.sent,t.next=23,c.oid();case 23:if(t.t4=t.sent,t.t3!==t.t4){t.next=32;break}return t.t5=g,t.t6=i,t.next=29,s.oid();case 29:return t.t7=t.sent,t.t8=m,t.abrupt("return",{mode:t.t5,path:t.t6,oid:t.t7,type:t.t8});case 32:return t.next=34,s.oid();case 34:return t.t9=t.sent,t.next=37,u.oid();case 37:if(t.t10=t.sent,t.t9!==t.t10){t.next=46;break}return t.t11=g,t.t12=i,t.next=43,c.oid();case 43:return t.t13=t.sent,t.t14=m,t.abrupt("return",{mode:t.t11,path:t.t12,oid:t.t13,type:t.t14});case 46:return t.next=48,c.oid();case 48:return t.t15=t.sent,t.next=51,u.oid();case 51:if(t.t16=t.sent,t.t15!==t.t16){t.next=60;break}return t.t17=g,t.t18=i,t.next=57,s.oid();case 57:return t.t19=t.sent,t.t20=m,t.abrupt("return",{mode:t.t17,path:t.t18,oid:t.t19,type:t.t20});case 60:return t.t21=pi,t.t22=e,t.next=64,s.content();case 64:return t.t23=t.sent,t.t24=t.t22.from.call(t.t22,t.t23).toString("utf8"),t.t25=e,t.next=69,u.content();case 69:return t.t26=t.sent,t.t27=t.t25.from.call(t.t25,t.t26).toString("utf8"),t.t28=e,t.next=74,c.content();case 74:if(t.t29=t.sent,t.t30=t.t28.from.call(t.t28,t.t29).toString("utf8"),t.t31=o,t.t32=f,t.t33=p,t.t34=d,t.t35=l,t.t36={ourContent:t.t24,baseContent:t.t27,theirContent:t.t30,ourName:t.t31,theirName:t.t32,baseName:t.t33,format:t.t34,markerSize:t.t35},v=(0,t.t21)(t.t36),x=v.mergedText,v.cleanMerge){t.next=87;break}throw new Xt;case 87:return t.next=89,Tr({fs:n,gitdir:a,type:"blob",object:e.from(x,"utf8"),dryRun:h});case 89:return b=t.sent,t.abrupt("return",{mode:g,path:i,oid:b,type:m});case 91:case"end":return t.stop()}},t)}))).apply(this,arguments)}function xi(e){return bi.apply(this,arguments)}function bi(){return(bi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.gitdir,i=t.ours,s=t.theirs,u=t.fastForwardOnly,c=void 0!==u&&u,o=t.dryRun,f=void 0!==o&&o,p=t.noUpdateBranch,d=void 0!==p&&p,l=t.message,h=t.author,m=t.committer,g=t.signingKey,void 0!==i){e.next=5;break}return e.next=4,Hn({fs:r,gitdir:a,fullname:!0});case 4:i=e.sent;case 5:return e.next=7,tt.expand({fs:r,gitdir:a,ref:i});case 7:return i=e.sent,e.next=10,tt.expand({fs:r,gitdir:a,ref:s});case 10:return s=e.sent,e.next=13,tt.resolve({fs:r,gitdir:a,ref:i});case 13:return v=e.sent,e.next=16,tt.resolve({fs:r,gitdir:a,ref:s});case 16:return x=e.sent,e.next=19,ci({fs:r,cache:n,gitdir:a,oids:[v,x]});case 19:if(1===(b=e.sent).length){e.next=22;break}throw new Xt;case 22:if((k=b[0])!==x){e.next=25;break}return e.abrupt("return",{oid:v,alreadyMerged:!0});case 25:if(k!==v){e.next=32;break}if(f||d){e.next=29;break}return e.next=29,tt.writeRef({fs:r,gitdir:a,ref:i,value:x});case 29:return e.abrupt("return",{oid:x,fastForward:!0});case 32:if(!c){e.next=34;break}throw new $t;case 34:return e.next=36,di({fs:r,gitdir:a,ourOid:v,theirOid:x,baseOid:k,ourName:i,baseName:"base",theirName:s,dryRun:f});case 36:return w=e.sent,l||(l="Merge branch '".concat(Fn(s),"' into ").concat(Fn(i))),e.next=40,qr({fs:r,cache:n,gitdir:a,message:l,ref:i,tree:w,parent:[v,x],author:h,committer:m,signingKey:g,dryRun:f,noUpdateBranch:d});case 40:return y=e.sent,e.abrupt("return",{oid:y,tree:w,mergeCommit:!0});case 42:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ki(e){return wi.apply(this,arguments)}function wi(){return(wi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y,R,_,E,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.http,i=t.onProgress,s=t.onMessage,u=t.onAuth,c=t.onAuthSuccess,o=t.onAuthFailure,f=t.dir,p=t.gitdir,d=t.ref,l=t.url,h=t.remote,m=t.remoteRef,g=t.fastForwardOnly,v=t.corsProxy,x=t.singleBranch,b=t.headers,k=t.author,w=t.committer,y=t.signingKey,e.prev=1,d){e.next=9;break}return e.next=5,Hn({fs:r,gitdir:p});case 5:if(R=e.sent){e.next=8;break}throw new er("ref");case 8:d=R;case 9:return e.next=11,Sa({fs:r,cache:n,http:a,onProgress:i,onMessage:s,onAuth:u,onAuthSuccess:c,onAuthFailure:o,gitdir:p,corsProxy:v,ref:d,url:l,remote:h,remoteRef:m,singleBranch:x,headers:b});case 11:return _=e.sent,E=_.fetchHead,S=_.fetchHeadDescription,e.next=16,xi({fs:r,cache:n,gitdir:p,ours:d,theirs:E,fastForwardOnly:g,message:"Merge ".concat(S),author:k,committer:w,signingKey:y,dryRun:!1,noUpdateBranch:!1});case 16:return e.next=18,Bn({fs:r,cache:n,onProgress:i,dir:f,gitdir:p,ref:d,remote:h,noCheckout:!1});case 18:e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(1),e.t0.caller="git.pull",e.t0;case 24:case"end":return e.stop()}},e,null,[[1,20]])}))).apply(this,arguments)}function yi(e){return Ri.apply(this,arguments)}function Ri(){return(Ri=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.http,a=t.onProgress,i=t.onMessage,s=t.onAuth,u=t.onAuthSuccess,c=t.onAuthFailure,o=t.dir,f=t.gitdir,p=void 0===f?Ne(o,".git"):f,d=t.ref,l=t.url,h=t.remote,m=t.remoteRef,g=t.corsProxy,v=t.singleBranch,x=t.headers,b=void 0===x?{}:x,k=t.cache,w=void 0===k?{}:k,e.prev=1,Fr("fs",r),Fr("http",n),Fr("gitdir",p),y={name:"",email:"",timestamp:Date.now(),timezoneOffset:0},e.next=8,ki({fs:new Pr(r),cache:w,http:n,onProgress:a,onMessage:i,onAuth:s,onAuthSuccess:u,onAuthFailure:c,dir:o,gitdir:p,ref:d,url:l,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:y,committer:y});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.fastForward",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function _i(e){return Ei.apply(this,arguments)}function Ei(){return(Ei=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y,R,_,E,S,j,P,A,O,I,B,C,N,D,U;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.http,a=t.onProgress,i=t.onMessage,s=t.onAuth,u=t.onAuthSuccess,c=t.onAuthFailure,o=t.dir,f=t.gitdir,p=void 0===f?Ne(o,".git"):f,d=t.ref,l=t.remote,h=t.remoteRef,m=t.url,g=t.corsProxy,v=t.depth,x=void 0===v?null:v,b=t.since,k=void 0===b?null:b,w=t.exclude,y=void 0===w?[]:w,R=t.relative,_=void 0!==R&&R,E=t.tags,S=void 0!==E&&E,j=t.singleBranch,P=void 0!==j&&j,A=t.headers,O=void 0===A?{}:A,I=t.prune,B=void 0!==I&&I,C=t.pruneTags,N=void 0!==C&&C,D=t.cache,U=void 0===D?{}:D,e.prev=1,Fr("fs",r),Fr("http",n),Fr("gitdir",p),e.next=7,Sa({fs:new Pr(r),cache:U,http:n,onProgress:a,onMessage:i,onAuth:s,onAuthSuccess:u,onAuthFailure:c,gitdir:p,ref:d,remote:l,remoteRef:h,url:m,corsProxy:g,depth:x,since:k,exclude:y,relative:_,tags:S,singleBranch:P,headers:O,prune:B,pruneTags:N});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.fetch",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Si(e){return ji.apply(this,arguments)}function ji(){return(ji=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oids,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oids",s),e.next=7,ci({fs:new Pr(r),cache:c,gitdir:i,oids:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.findMergeBase",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Pi(e){return Ai.apply(this,arguments)}function Ai(){return(Ai=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.filepath,e.next=3,r.exists(Ne(n,".git"));case 3:if(!e.sent){e.next=7;break}return e.abrupt("return",n);case 7:if((a=be(n))!==n){e.next=10;break}throw new Ee("git root for ".concat(n));case 10:return e.abrupt("return",Pi({fs:r,filepath:a}));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oi(e){return Ii.apply(this,arguments)}function Ii(){return(Ii=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.filepath,e.prev=1,Fr("fs",r),Fr("filepath",n),e.next=6,Pi({fs:new Pr(r),filepath:n});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.findRoot",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function Bi(e){return Ci.apply(this,arguments)}function Ci(){return(Ci=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.path,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("path",s),e.next=7,an({fs:new Pr(r),gitdir:i,path:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.getConfig",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Ni(e){return Di.apply(this,arguments)}function Di(){return(Di=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.path,e.next=3,Xe.get({fs:r,gitdir:n});case 3:return i=e.sent,e.abrupt("return",i.getall(a));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ui(e){return Ti.apply(this,arguments)}function Ti(){return(Ti=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.path,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("path",s),e.next=7,Ni({fs:new Pr(r),gitdir:i,path:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.getConfigAll",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Mi(e){return Fi.apply(this,arguments)}function Fi(){return(Fi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,g,v,x,b,k,R,_,E,S,j,P,A,O,I,B,C,N,D,U,T,M,F;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.http,n=t.onAuth,a=t.onAuthSuccess,i=t.onAuthFailure,s=t.corsProxy,u=t.url,c=t.headers,o=void 0===c?{}:c,f=t.forPush,p=void 0!==f&&f,e.prev=1,Fr("http",r),Fr("url",u),d=ua.getRemoteHelperFor({url:u}),e.next=7,d.discover({http:r,onAuth:n,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:p?"git-receive-pack":"git-upload-pack",url:u,headers:o,protocolVersion:1});case 7:l=e.sent,h={capabilities:m(l.capabilities)},g=w(l.refs);try{for(g.s();!(v=g.n()).done;){x=y(v.value,2),b=x[0],k=x[1],R=b.split("/"),_=R.pop(),E=h,S=w(R);try{for(S.s();!(j=S.n()).done;)P=j.value,E[P]=E[P]||{},E=E[P]}catch(H){S.e(H)}finally{S.f()}E[_]=k}}catch(H){g.e(H)}finally{g.f()}A=w(l.symrefs);try{for(A.s();!(O=A.n()).done;){I=y(O.value,2),B=I[0],C=I[1],N=B.split("/"),D=N.pop(),U=h,T=w(N);try{for(T.s();!(M=T.n()).done;)F=M.value,U[F]=U[F]||{},U=U[F]}catch(H){T.e(H)}finally{T.f()}U[D]=C}}catch(H){A.e(H)}finally{A.f()}return e.abrupt("return",h);case 16:throw e.prev=16,e.t0=e.catch(1),e.t0.caller="git.getRemoteInfo",e.t0;case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function Hi(e,t,r,n){var a,i=[],s=w(e.refs);try{for(s.s();!(a=s.n()).done;){var u=y(a.value,2),c=u[0],o=u[1];if(!t||c.startsWith(t))if(c.endsWith("^{}"))n&&function(){var e=c.replace("^{}",""),t=i[i.length-1],r=t.ref===e?t:i.find(function(t){return t.ref===e});if(void 0===r)throw new Error("I did not expect this to happen");r.peeled=o}();else{var f={ref:c,oid:o};r&&e.symrefs.has(c)&&(f.target=e.symrefs.get(c)),i.push(f)}}}catch(p){s.e(p)}finally{s.f()}return i}function zi(e){return Gi.apply(this,arguments)}function Gi(){return(Gi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,R,_,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.http,n=t.onAuth,a=t.onAuthSuccess,i=t.onAuthFailure,s=t.corsProxy,u=t.url,c=t.headers,o=void 0===c?{}:c,f=t.forPush,p=void 0!==f&&f,d=t.protocolVersion,l=void 0===d?2:d,e.prev=1,Fr("http",r),Fr("url",u),h=ua.getRemoteHelperFor({url:u}),e.next=7,h.discover({http:r,onAuth:n,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:p?"git-receive-pack":"git-upload-pack",url:u,headers:o,protocolVersion:l});case 7:if(2!==(m=e.sent).protocolVersion){e.next=10;break}return e.abrupt("return",{protocolVersion:m.protocolVersion,capabilities:m.capabilities2});case 10:g={},v=w(m.capabilities);try{for(v.s();!(x=v.n()).done;)b=x.value,k=b.split("="),R=y(k,2),_=R[0],E=R[1],g[_]=E||!0}catch(S){v.e(S)}finally{v.f()}return e.abrupt("return",{protocolVersion:1,capabilities:g,refs:Hi(m,void 0,!0,!0)});case 16:throw e.prev=16,e.t0=e.catch(1),e.t0.caller="git.getRemoteInfo2",e.t0;case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function Wi(e){return qi.apply(this,arguments)}function qi(){return(qi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,n=t.object,a=t.format,i=void 0===a?"content":a,s=t.oid,u=void 0===s?void 0:s,"deflated"===i){e.next=6;break}return"wrapped"!==i&&(n=ot.wrap({type:r,object:n})),e.next=5,Q(n);case 5:u=e.sent;case 6:return e.abrupt("return",{oid:u,object:n});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ki(e){return $i.apply(this,arguments)}function $i(){return($i=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.object,t.prev=1,Fr("object",n),n="string"==typeof n?e.from(n,"utf8"):e.from(n),a="blob",t.next=7,Wi({type:"blob",format:"content",object:n});case 7:return i=t.sent,s=i.oid,u=i.object,t.abrupt("return",{oid:s,type:a,object:new Uint8Array(u),format:"wrapped"});case 13:throw t.prev=13,t.t0=t.catch(1),t.t0.caller="git.hashBlob",t.t0;case 17:case"end":return t.stop()}},t,null,[[1,13]])}))).apply(this,arguments)}function Li(e){return Vi.apply(this,arguments)}function Vi(){return(Vi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.onProgress,i=t.dir,s=t.gitdir,u=t.filepath,e.prev=1,u=Ne(i,u),e.next=5,r.read(u);case 5:return c=e.sent,o=function(e){return Ft({fs:r,cache:n,gitdir:s,oid:e})},e.next=9,Bt.fromPack({pack:c,getExternalRefDelta:o,onProgress:a});case 9:return f=e.sent,e.t0=r,e.t1=u.replace(/\.pack$/,".idx"),e.next=14,f.toBuffer();case 14:return e.t2=e.sent,e.next=17,e.t0.write.call(e.t0,e.t1,e.t2);case 17:return e.abrupt("return",{oids:m(f.hashes)});case 20:throw e.prev=20,e.t3=e.catch(1),e.t3.caller="git.indexPack",e.t3;case 24:case"end":return e.stop()}},e,null,[[1,20]])}))).apply(this,arguments)}function Zi(e){return Yi.apply(this,arguments)}function Yi(){return(Yi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.onProgress,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.filepath,c=t.cache,o=void 0===c?{}:c,e.prev=1,Fr("fs",r),Fr("dir",a),Fr("gitdir",a),Fr("filepath",u),e.next=8,Li({fs:new Pr(r),cache:o,onProgress:n,dir:a,gitdir:s,filepath:u});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.indexPack",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function Ji(e){return Xi.apply(this,arguments)}function Xi(){return(Xi=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.bare,a=void 0!==n&&n,i=t.dir,s=t.gitdir,u=void 0===s?a?i:Ne(i,".git"):s,c=t.defaultBranch,o=void 0===c?"master":c,e.prev=1,Fr("fs",r),Fr("gitdir",u),a||Fr("dir",i),e.next=7,Pa({fs:new Pr(r),bare:a,dir:i,gitdir:u,defaultBranch:o});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.init",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Qi(e){return es.apply(this,arguments)}function es(){return(es=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.ancestor,u=t.depth,e.next=3,oa.read({fs:r,gitdir:a});case 3:if(c=e.sent,i){e.next=6;break}throw new er("oid");case 6:if(s){e.next=8;break}throw new er("ancestor");case 8:if(i!==s){e.next=10;break}return e.abrupt("return",!1);case 10:o=[i],f=new Set,p=0;case 13:if(!o.length){e.next=45;break}if(p++!==u){e.next=16;break}throw new Jt(u);case 16:return d=o.shift(),e.next=19,Ft({fs:r,cache:n,gitdir:a,oid:d});case 19:if(l=e.sent,h=l.type,m=l.object,"commit"===h){e.next=24;break}throw new Se(d,h,"commit");case 24:g=kr.from(m).parse(),v=w(g.parent),e.prev=26,v.s();case 28:if((x=v.n()).done){e.next=34;break}if(x.value!==s){e.next=32;break}return e.abrupt("return",!0);case 32:e.next=28;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(26),v.e(e.t0);case 39:return e.prev=39,v.f(),e.finish(39);case 42:if(!c.has(d)){b=w(g.parent);try{for(b.s();!(k=b.n()).done;)y=k.value,f.has(y)||(o.push(y),f.add(y))}catch(R){b.e(R)}finally{b.f()}}e.next=13;break;case 45:return e.abrupt("return",!1);case 46:case"end":return e.stop()}},e,null,[[26,36,39,42]])}))).apply(this,arguments)}function ts(e){return rs.apply(this,arguments)}function rs(){return(rs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oid,u=t.ancestor,c=t.depth,o=void 0===c?-1:c,f=t.cache,p=void 0===f?{}:f,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oid",s),Fr("ancestor",u),e.next=8,Qi({fs:new Pr(r),cache:p,gitdir:i,oid:s,ancestor:u,depth:o});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.isDescendent",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function ns(e){return as.apply(this,arguments)}function as(){return(as=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.remote,e.prev=1,Fr("fs",r),Fr("gitdir",i),e.abrupt("return",tt.listBranches({fs:new Pr(r),gitdir:i,remote:s}));case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.caller="git.listBranches",e.t0;case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function is(e){return ss.apply(this,arguments)}function ss(){return(ss=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.gitdir,a=t.ref,i=t.cache,!a){e.next=11;break}return e.next=4,tt.resolve({gitdir:n,fs:r,ref:a});case 4:return s=e.sent,u=[],e.next=8,us({fs:r,cache:i,gitdir:n,oid:s,filenames:u,prefix:""});case 8:return e.abrupt("return",u);case 11:return e.abrupt("return",ve.acquire({fs:r,gitdir:n,cache:i},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.entries.map(function(e){return e.path}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function us(e){return cs.apply(this,arguments)}function cs(){return(cs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.filenames,u=t.prefix,e.next=3,Xr({fs:r,cache:n,gitdir:a,oid:i});case 3:c=e.sent,o=c.tree,f=w(o),e.prev=6,f.s();case 8:if((p=f.n()).done){e.next=18;break}if("tree"!==(d=p.value).type){e.next=15;break}return e.next=13,us({fs:r,cache:n,gitdir:a,oid:d.oid,filenames:s,prefix:Ne(u,d.path)});case 13:e.next=16;break;case 15:s.push(Ne(u,d.path));case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),f.e(e.t0);case 23:return e.prev=23,f.f(),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[6,20,23,26]])}))).apply(this,arguments)}function os(e){return fs.apply(this,arguments)}function fs(){return(fs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("gitdir",i),e.next=6,is({fs:new Pr(r),cache:c,gitdir:i,ref:s});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.listFiles",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function ps(e){return ds.apply(this,arguments)}function ds(){return(ds=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.ref,e.prev=1,e.next=4,tt.resolve({gitdir:a,fs:r,ref:i});case 4:s=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(e.t0 instanceof Ee)){e.next=11;break}return e.abrupt("return",[]);case 11:return e.next=13,Xr({fs:r,cache:n,gitdir:a,oid:s});case 13:return u=e.sent,c=u.tree.map(function(e){return{target:e.path,note:e.oid}}),e.abrupt("return",c);case 16:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function ls(e){return hs.apply(this,arguments)}function hs(){return(hs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=void 0===s?"refs/notes/commits":s,c=t.cache,o=void 0===c?{}:c,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",u),e.next=7,ps({fs:new Pr(r),cache:o,gitdir:i,ref:u});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.listNotes",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function ms(e){return gs.apply(this,arguments)}function gs(){return(gs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,e.next=3,Xe.get({fs:r,gitdir:n});case 3:return a=e.sent,e.next=6,a.getSubsections("remote");case 6:return i=e.sent,s=Promise.all(i.map(function(){var e=k(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get("remote.".concat(t,".url"));case 2:return r=e.sent,e.abrupt("return",{remote:t,url:r});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())),e.abrupt("return",s);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vs(e){return xs.apply(this,arguments)}function xs(){return(xs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,e.prev=1,Fr("fs",r),Fr("gitdir",i),e.next=6,ms({fs:new Pr(r),gitdir:i});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.listRemotes",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function bs(e){return ks.apply(this,arguments)}function ks(){return(ks=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,p,d,l,h,m,g,v,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=Yn.streamReader(t),n=[];case 2:return e.next=5,r();case 5:if(!0!==(a=e.sent)){e.next=8;break}return e.abrupt("break",18);case 8:if(null!==a){e.next=10;break}return e.abrupt("continue",2);case 10:a=a.toString("utf8").replace(/\n$/,""),i=a.split(" "),s=f(i),u=s[0],c=s[1],o=s.slice(2),p={ref:c,oid:u},d=w(o);try{for(d.s();!(l=d.n()).done;)h=l.value,m=h.split(":"),g=y(m,2),v=g[0],x=g[1],"symref-target"===v?p.target=x:"peeled"===v&&(p.peeled=x)}catch(b){d.e(b)}finally{d.f()}n.push(p),e.next=2;break;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ws(e){return ys.apply(this,arguments)}function ys(){return(ys=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.prefix,n=t.symrefs,a=t.peelTags,(i=[]).push(Yn.encode("command=ls-refs\n")),i.push(Yn.encode("agent=".concat(xa.agent,"\n"))),(a||n||r)&&i.push(Yn.delim()),a&&i.push(Yn.encode("peel")),n&&i.push(Yn.encode("symrefs")),r&&i.push(Yn.encode("ref-prefix ".concat(r))),i.push(Yn.flush()),e.abrupt("return",i);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rs(e){return _s.apply(this,arguments)}function _s(){return(_s=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.http,n=t.onAuth,a=t.onAuthSuccess,i=t.onAuthFailure,s=t.corsProxy,u=t.url,c=t.headers,o=void 0===c?{}:c,f=t.forPush,p=void 0!==f&&f,d=t.protocolVersion,l=void 0===d?2:d,h=t.prefix,m=t.symrefs,g=t.peelTags,e.prev=1,Fr("http",r),Fr("url",u),e.next=6,ia.discover({http:r,onAuth:n,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:p?"git-receive-pack":"git-upload-pack",url:u,headers:o,protocolVersion:l});case 6:if(1!==(v=e.sent).protocolVersion){e.next=9;break}return e.abrupt("return",Hi(v,h,m,g));case 9:return e.next=11,ws({prefix:h,symrefs:m,peelTags:g});case 11:return x=e.sent,e.next=14,ia.connect({http:r,auth:v.auth,headers:o,corsProxy:s,service:p?"git-receive-pack":"git-upload-pack",url:u,body:x});case 14:return b=e.sent,e.abrupt("return",bs(b.body));case 18:throw e.prev=18,e.t0=e.catch(1),e.t0.caller="git.listServerRefs",e.t0;case 22:case"end":return e.stop()}},e,null,[[1,18]])}))).apply(this,arguments)}function Es(e){return Ss.apply(this,arguments)}function Ss(){return(Ss=k(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,e.prev=1,Fr("fs",r),Fr("gitdir",i),e.abrupt("return",tt.listTags({fs:new Pr(r),gitdir:i}));case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.caller="git.listTags",e.t0;case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function js(e){return Ps.apply(this,arguments)}function Ps(){return(Ps=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,e.next=3,Ft({fs:r,cache:n,gitdir:a,oid:i});case 3:if(s=e.sent,u=s.type,c=s.object,"tag"!==u){e.next=9;break}return i=vr.from(c).parse().object,e.abrupt("return",js({fs:r,cache:n,gitdir:a,oid:i}));case 9:if("commit"===u){e.next=11;break}throw new Se(i,u,"commit");case 11:return e.abrupt("return",{commit:kr.from(c),oid:i});case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function As(e){return Os.apply(this,arguments)}function Os(){return(Os=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,e.next=3,js({fs:r,cache:n,gitdir:a,oid:i});case 3:return s=e.sent,u=s.commit,c=s.oid,o={oid:c,commit:u.parse(),payload:u.withoutSignature()},e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Is(e,t){return e.committer.timestamp-t.committer.timestamp}function Bs(e){return Cs.apply(this,arguments)}function Cs(){return(Cs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.ref,s=t.depth,u=t.since,c=void 0===u?void 0:Math.floor(u.valueOf()/1e3),o=[],e.next=5,oa.read({fs:r,gitdir:a});case 5:return f=e.sent,e.next=8,tt.resolve({fs:r,gitdir:a,ref:i});case 8:return p=e.sent,e.next=11,As({fs:r,cache:n,gitdir:a,oid:p});case 11:e.t0=e.sent,d=[e.t0];case 13:if(l=d.pop(),!(void 0!==c&&l.commit.committer.timestamp<=c)){e.next=17;break}return e.abrupt("break",45);case 17:if(o.push(l),void 0===s||o.length!==s){e.next=20;break}return e.abrupt("break",45);case 20:if(f.has(l.oid)){e.next=40;break}h=w(l.commit.parent),e.prev=22,h.s();case 24:if((m=h.n()).done){e.next=32;break}return g=m.value,e.next=28,As({fs:r,cache:n,gitdir:a,oid:g});case 28:v=e.sent,d.map(function(e){return e.oid}).includes(v.oid)||d.push(v);case 30:e.next=24;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(22),h.e(e.t1);case 37:return e.prev=37,h.f(),e.finish(37);case 40:if(0!==d.length){e.next=42;break}return e.abrupt("break",45);case 42:d.sort(function(e,t){return Is(e.commit,t.commit)}),e.next=13;break;case 45:return e.abrupt("return",o);case 46:case"end":return e.stop()}},e,null,[[22,34,37,40]])}))).apply(this,arguments)}function Ns(e){return Ds.apply(this,arguments)}function Ds(){return(Ds=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=void 0===s?"HEAD":s,c=t.depth,o=t.since,f=t.cache,p=void 0===f?{}:f,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",u),e.next=7,Bs({fs:new Pr(r),cache:p,gitdir:i,ref:u,depth:c,since:o});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.log",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Us(e){return Ts.apply(this,arguments)}function Ts(){return(Ts=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y,R;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.onSign,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.ours,c=t.theirs,o=t.fastForwardOnly,f=void 0!==o&&o,p=t.dryRun,d=void 0!==p&&p,l=t.noUpdateBranch,h=void 0!==l&&l,m=t.message,g=t.author,v=t.committer,x=t.signingKey,b=t.cache,k=void 0===b?{}:b,e.prev=1,Fr("fs",r),x&&Fr("onSign",n),w=new Pr(r),e.next=7,un({fs:w,gitdir:s,author:g});case 7:if((y=e.sent)||f){e.next=10;break}throw new Qt("author");case 10:return e.next=12,on({fs:w,gitdir:s,author:y,committer:v});case 12:if((R=e.sent)||f){e.next=15;break}throw new Qt("committer");case 15:return e.next=17,xi({fs:w,cache:k,gitdir:s,ours:u,theirs:c,fastForwardOnly:f,dryRun:d,noUpdateBranch:h,message:m,author:y,committer:R,signingKey:x});case 17:return e.abrupt("return",e.sent);case 20:throw e.prev=20,e.t0=e.catch(1),e.t0.caller="git.merge",e.t0;case 24:case"end":return e.stop()}},e,null,[[1,20]])}))).apply(this,arguments)}var Ms={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};function Fs(e){return Hs.apply(this,arguments)}function Hs(){return(Hs=k(regeneratorRuntime.mark(function t(n){var a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,y,R;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h=function(){return(h=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=r.stype,a=r.object,i=Ms[n],s=a.length,u=s>15?128:0,c=15&s,s>>>=4,o=(u|i|c).toString(16),d(o,"hex");u;)d(Zn(2,o=(u=s>127?128:0)|127&s),"hex"),s>>>=7;return t.t0=d,t.t1=e,t.next=13,Br(a);case 13:t.t2=t.sent,t.t3=t.t1.from.call(t.t1,t.t2),(0,t.t0)(t.t3);case 16:case"end":return t.stop()}},t)}))).apply(this,arguments)},l=function(e){return h.apply(this,arguments)},d=function(t,r){var n=e.from(t,r);p.push(n),f.update(n)},a=n.fs,i=n.cache,s=n.dir,u=n.gitdir,c=void 0===u?Ne(s,".git"):u,o=n.oids,f=new r.default,p=[],d("PACK"),d("00000002","hex"),d(Zn(8,o.length),"hex"),m=w(o),t.prev=10,m.s();case 12:if((g=m.n()).done){t.next=23;break}return v=g.value,t.next=16,Ft({fs:a,cache:i,gitdir:c,oid:v});case 16:return x=t.sent,b=x.type,y=x.object,t.next=21,l({write:d,object:y,stype:b});case 21:t.next=12;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(10),m.e(t.t0);case 28:return t.prev=28,m.f(),t.finish(28);case 31:return R=f.digest(),p.push(R),t.abrupt("return",p);case 34:case"end":return t.stop()}},t,null,[[10,25,28,31]])}))).apply(this,arguments)}function zs(e){return Gs.apply(this,arguments)}function Gs(){return(Gs=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.fs,a=r.cache,i=r.gitdir,s=r.oids,u=r.write,t.next=3,Fs({fs:n,cache:a,gitdir:i,oids:s});case 3:return c=t.sent,t.t0=e,t.next=7,$n(c);case 7:if(t.t1=t.sent,o=t.t0.from.call(t.t0,t.t1),f=o.slice(-20).toString("hex"),p="pack-".concat(f,".pack"),!u){t.next=15;break}return t.next=14,n.write(Ne(i,"objects/pack/".concat(p)),o);case 14:return t.abrupt("return",{filename:p});case 15:return t.abrupt("return",{filename:p,packfile:new Uint8Array(o)});case 16:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Ws(e){return qs.apply(this,arguments)}function qs(){return(qs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oids,u=t.write,c=void 0!==u&&u,o=t.cache,f=void 0===o?{}:o,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oids",s),e.next=7,zs({fs:new Pr(r),cache:f,gitdir:i,oids:s,write:c});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.packObjects",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Ks(e){return $s.apply(this,arguments)}function $s(){return($s=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y,R,_,E,S,j,P,A;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.http,a=t.onProgress,i=t.onMessage,s=t.onAuth,u=t.onAuthSuccess,c=t.onAuthFailure,o=t.dir,f=t.gitdir,p=void 0===f?Ne(o,".git"):f,d=t.ref,l=t.url,h=t.remote,m=t.remoteRef,g=t.fastForwardOnly,v=void 0!==g&&g,x=t.corsProxy,b=t.singleBranch,k=t.headers,w=void 0===k?{}:k,y=t.author,R=t.committer,_=t.signingKey,E=t.cache,S=void 0===E?{}:E,e.prev=1,Fr("fs",r),Fr("gitdir",p),j=new Pr(r),e.next=7,un({fs:j,gitdir:p,author:y});case 7:if(P=e.sent){e.next=10;break}throw new Qt("author");case 10:return e.next=12,on({fs:j,gitdir:p,author:P,committer:R});case 12:if(A=e.sent){e.next=15;break}throw new Qt("committer");case 15:return e.next=17,ki({fs:j,cache:S,http:n,onProgress:a,onMessage:i,onAuth:s,onAuthSuccess:u,onAuthFailure:c,dir:o,gitdir:p,ref:d,url:l,remote:h,remoteRef:m,fastForwardOnly:v,corsProxy:x,singleBranch:b,headers:w,author:P,committer:A,signingKey:_});case 17:return e.abrupt("return",e.sent);case 20:throw e.prev=20,e.t0=e.catch(1),e.t0.caller="git.pull",e.t0;case 24:case"end":return e.stop()}},e,null,[[1,20]])}))).apply(this,arguments)}function Ls(e){return Vs.apply(this,arguments)}function Vs(){return(Vs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,y,R,_,E,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R=function(){return(R=k(regeneratorRuntime.mark(function e(t){var a,i,u,c,f,d,l,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.add(t),e.next=3,Ft({fs:r,cache:n,gitdir:s,oid:t});case 3:if(a=e.sent,i=a.type,u=a.object,"tag"!==i){e.next=10;break}return c=vr.from(u),f=c.headers().object,e.abrupt("return",y(f));case 10:if("commit"===i){e.next=12;break}throw new Se(t,i,"commit");case 12:if(o.has(t)){e.next=33;break}d=kr.from(u),l=d.headers().parent,h=w(l),e.prev=16,h.s();case 18:if((m=h.n()).done){e.next=25;break}if(t=m.value,p.has(t)||b.has(t)){e.next=23;break}return e.next=23,y(t);case 23:e.next=18;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(16),h.e(e.t0);case 30:return e.prev=30,h.f(),e.finish(30);case 33:case"end":return e.stop()}},e,null,[[16,27,30,33]])}))).apply(this,arguments)},y=function(e){return R.apply(this,arguments)},r=t.fs,n=t.cache,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.start,c=t.finish,e.next=5,oa.read({fs:r,gitdir:s});case 5:o=e.sent,f=new Set,p=new Set,d=w(u),e.prev=9,d.s();case 11:if((l=d.n()).done){e.next=20;break}return h=l.value,e.t0=f,e.next=16,tt.resolve({fs:r,gitdir:s,ref:h});case 16:e.t1=e.sent,e.t0.add.call(e.t0,e.t1);case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(9),d.e(e.t2);case 25:return e.prev=25,d.f(),e.finish(25);case 28:m=w(c),e.prev=29,m.s();case 31:if((g=m.n()).done){e.next=44;break}return v=g.value,e.prev=33,e.next=36,tt.resolve({fs:r,gitdir:s,ref:v});case 36:x=e.sent,p.add(x),e.next=42;break;case 40:e.prev=40,e.t3=e.catch(33);case 42:e.next=31;break;case 44:e.next=49;break;case 46:e.prev=46,e.t4=e.catch(29),m.e(e.t4);case 49:return e.prev=49,m.f(),e.finish(49);case 52:b=new Set,_=w(f),e.prev=54,_.s();case 56:if((E=_.n()).done){e.next=62;break}return S=E.value,e.next=60,y(S);case 60:e.next=56;break;case 62:e.next=67;break;case 64:e.prev=64,e.t5=e.catch(54),_.e(e.t5);case 67:return e.prev=67,_.f(),e.finish(67);case 70:return e.abrupt("return",b);case 71:case"end":return e.stop()}},e,null,[[9,22,25,28],[29,46,49,52],[33,40],[54,64,67,70]])}))).apply(this,arguments)}function Zs(e){return Ys.apply(this,arguments)}function Ys(){return(Ys=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:f=function(){return(f=k(regeneratorRuntime.mark(function e(t){var a,i,u,f,p,d,l,h,m,g,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.has(t)){e.next=2;break}return e.abrupt("return");case 2:return c.add(t),e.next=5,Ft({fs:r,cache:n,gitdir:s,oid:t});case 5:if(a=e.sent,i=a.type,u=a.object,"tag"!==i){e.next=15;break}return f=vr.from(u),p=f.headers().object,e.next=13,o(p);case 13:e.next=43;break;case 15:if("commit"!==i){e.next=22;break}return d=kr.from(u),l=d.headers().tree,e.next=20,o(l);case 20:e.next=43;break;case 22:if("tree"!==i){e.next=43;break}h=ct.from(u),m=w(h),e.prev=25,m.s();case 27:if((g=m.n()).done){e.next=35;break}if("blob"===(v=g.value).type&&c.add(v.oid),"tree"!==v.type){e.next=33;break}return e.next=33,o(v.oid);case 33:e.next=27;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(25),m.e(e.t0);case 40:return e.prev=40,m.f(),e.finish(40);case 43:case"end":return e.stop()}},e,null,[[25,37,40,43]])}))).apply(this,arguments)},o=function(e){return f.apply(this,arguments)},r=t.fs,n=t.cache,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.oids,c=new Set,p=w(u),e.prev=5,p.s();case 7:if((d=p.n()).done){e.next=13;break}return l=d.value,e.next=11,o(l);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),p.e(e.t0);case 18:return e.prev=18,p.f(),e.finish(18);case 21:return e.abrupt("return",c);case 22:case"end":return e.stop()}},e,null,[[5,15,18,21]])}))).apply(this,arguments)}function Js(e){return Xs.apply(this,arguments)}function Xs(){return(Xs=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n="",a=Yn.streamReader(t),e.next=5,a();case 5:i=e.sent;case 6:if(!0===i){e.next=13;break}return null!==i&&(n+=i.toString("utf8")+"\n"),e.next=10,a();case 10:i=e.sent,e.next=6;break;case 13:if(s=n.toString("utf8").split("\n"),(i=s.shift()).startsWith("unpack ")){e.next=17;break}throw new tr('unpack ok" or "unpack [error message]',i);case 17:r.ok="unpack ok"===i,r.ok||(r.error=i.slice("unpack ".length)),r.refs={},u=w(s),e.prev=21,u.s();case 23:if((c=u.n()).done){e.next=36;break}if(""!==(o=c.value).trim()){e.next=27;break}return e.abrupt("continue",34);case 27:f=o.slice(0,2),p=o.slice(3),-1===(d=p.indexOf(" "))&&(d=p.length),l=p.slice(0,d),h=p.slice(d+1),r.refs[l]={ok:"ok"===f,error:h};case 34:e.next=23;break;case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(21),u.e(e.t0);case 41:return e.prev=41,u.f(),e.finish(41);case 44:return e.abrupt("return",r);case 45:case"end":return e.stop()}},e,null,[[21,38,41,44]])}))).apply(this,arguments)}function Qs(e){return eu.apply(this,arguments)}function eu(){return(eu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.capabilities,n=void 0===r?[]:r,a=t.triplets,i=void 0===a?[]:a,s=[],u="\0 ".concat(n.join(" ")),c=w(i);try{for(c.s();!(o=c.n()).done;)f=o.value,s.push(Yn.encode("".concat(f.oldoid," ").concat(f.oid," ").concat(f.fullRef).concat(u,"\n"))),u=""}catch(p){c.e(p)}finally{c.f()}return s.push(Yn.flush()),e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tu(e){return ru.apply(this,arguments)}function ru(){return(ru=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,g,v,x,b,R,_,E,S,j,P,A,O,I,B,C,N,D,U,T,M,F,H,z,G,W,q,K,$,L,V,Z,Y,J,X,Q,ee,te,re,ne,ae,ie,se,ue,ce,oe,fe,pe;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.http,i=t.onProgress,s=t.onMessage,u=t.onAuth,c=t.onAuthSuccess,o=t.onAuthFailure,f=t.gitdir,p=t.ref,d=t.remoteRef,l=t.remote,h=t.url,g=t.force,v=void 0!==g&&g,x=t.delete,b=void 0!==x&&x,R=t.corsProxy,_=t.headers,E=void 0===_?{}:_,e.t0=p,e.t0){e.next=6;break}return e.next=5,Hn({fs:r,gitdir:f});case 5:e.t0=e.sent;case 6:if(void 0!==(S=e.t0)){e.next=9;break}throw new er("ref");case 9:return e.next=11,Xe.get({fs:r,gitdir:f});case 11:if(j=e.sent,e.t4=l,e.t4){e.next=17;break}return e.next=16,j.get("branch.".concat(S,".pushRemote"));case 16:e.t4=e.sent;case 17:if(e.t3=e.t4,e.t3){e.next=22;break}return e.next=21,j.get("remote.pushDefault");case 21:e.t3=e.sent;case 22:if(e.t2=e.t3,e.t2){e.next=27;break}return e.next=26,j.get("branch.".concat(S,".remote"));case 26:e.t2=e.sent;case 27:if(e.t1=e.t2,e.t1){e.next=30;break}e.t1="origin";case 30:if(l=e.t1,e.t6=h,e.t6){e.next=36;break}return e.next=35,j.get("remote.".concat(l,".pushurl"));case 35:e.t6=e.sent;case 36:if(e.t5=e.t6,e.t5){e.next=41;break}return e.next=40,j.get("remote.".concat(l,".url"));case 40:e.t5=e.sent;case 41:if(void 0!==(P=e.t5)){e.next=44;break}throw new er("remote OR url");case 44:if(e.t7=d,e.t7){e.next=49;break}return e.next=48,j.get("branch.".concat(S,".merge"));case 48:e.t7=e.sent;case 49:if(A=e.t7,void 0!==P){e.next=52;break}throw new er("remoteRef");case 52:if(void 0!==R){e.next=56;break}return e.next=55,j.get("http.corsProxy");case 55:R=e.sent;case 56:return e.next=58,tt.expand({fs:r,gitdir:f,ref:S});case 58:if(O=e.sent,!b){e.next=63;break}e.t8="0000000000000000000000000000000000000000",e.next=66;break;case 63:return e.next=65,tt.resolve({fs:r,gitdir:f,ref:O});case 65:e.t8=e.sent;case 66:return I=e.t8,B=ua.getRemoteHelperFor({url:P}),e.next=70,B.discover({http:a,onAuth:u,onAuthSuccess:c,onAuthFailure:o,corsProxy:R,service:"git-receive-pack",url:P,headers:E,protocolVersion:1});case 70:if(C=e.sent,N=C.auth,A){e.next=76;break}D=O,e.next=89;break;case 76:return e.prev=76,e.next=79,tt.expandAgainstMap({ref:A,map:C.refs});case 79:D=e.sent,e.next=89;break;case 82:if(e.prev=82,e.t9=e.catch(76),!(e.t9 instanceof Ee)){e.next=88;break}D=A.startsWith("refs/")?A:"refs/heads/".concat(A),e.next=89;break;case 88:throw e.t9;case 89:if(U=C.refs.get(D)||"0000000000000000000000000000000000000000",T=!C.capabilities.has("no-thin"),M=new Set,b){e.next=144;break}if(F=m(C.refs.values()),H=new Set,"0000000000000000000000000000000000000000"===U){e.next=105;break}return e.next=98,ci({fs:r,cache:n,gitdir:f,oids:[I,U]});case 98:z=e.sent,G=w(z);try{for(G.s();!(W=G.n()).done;)q=W.value,F.push(q)}catch(de){G.e(de)}finally{G.f()}if(!T){e.next=105;break}return e.next=104,Zs({fs:r,cache:n,gitdir:f,oids:z});case 104:H=e.sent;case 105:if(F.includes(I)){e.next=112;break}return e.next=108,Ls({fs:r,cache:n,gitdir:f,start:[I],finish:F});case 108:return K=e.sent,e.next=111,Zs({fs:r,cache:n,gitdir:f,oids:K});case 111:M=e.sent;case 112:if(!T){e.next=134;break}return e.prev=113,e.next=116,tt.resolve({fs:r,gitdir:f,ref:"refs/remotes/".concat(l,"/HEAD"),depth:2});case 116:return $=e.sent,e.next=119,tt.resolveAgainstMap({ref:$.replace("refs/remotes/".concat(l,"/"),""),fullref:$,map:C.refs});case 119:return L=e.sent,V=L.oid,Z=[V],e.t10=w,e.next=125,Zs({fs:r,cache:n,gitdir:f,oids:Z});case 125:e.t11=e.sent,Y=(0,e.t10)(e.t11);try{for(Y.s();!(J=Y.n()).done;)X=J.value,H.add(X)}catch(de){Y.e(de)}finally{Y.f()}e.next=132;break;case 130:e.prev=130,e.t12=e.catch(113);case 132:Q=w(H);try{for(Q.s();!(ee=Q.n()).done;)te=ee.value,M.delete(te)}catch(de){Q.e(de)}finally{Q.f()}case 134:if(v){e.next=144;break}if(!O.startsWith("refs/tags")||"0000000000000000000000000000000000000000"===U){e.next=137;break}throw new rr("tag-exists");case 137:if(e.t13="0000000000000000000000000000000000000000"!==I&&"0000000000000000000000000000000000000000"!==U,!e.t13){e.next=142;break}return e.next=141,Qi({fs:r,cache:n,gitdir:f,oid:I,ancestor:U,depth:-1});case 141:e.t13=!e.sent;case 142:if(!e.t13){e.next=144;break}throw new rr("not-fast-forward");case 144:return re=va(m(C.capabilities),["report-status","side-band-64k","agent=".concat(xa.agent)]),e.next=147,Qs({capabilities:re,triplets:[{oldoid:U,oid:I,fullRef:D}]});case 147:if(ne=e.sent,!b){e.next=152;break}e.t14=[],e.next=155;break;case 152:return e.next=154,Fs({fs:r,cache:n,gitdir:f,oids:m(M)});case 154:e.t14=e.sent;case 155:return ae=e.t14,e.next=158,B.connect({http:a,onProgress:i,corsProxy:R,service:"git-receive-pack",url:P,auth:N,headers:E,body:[].concat(m(ne),m(ae))});case 158:return ie=e.sent,e.next=161,ya.demux(ie.body);case 161:return se=e.sent,ue=se.packfile,ce=se.progress,s&&qn(wa(ce),function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=167,Js(ue);case 167:if(oe=e.sent,ie.headers&&(oe.headers=ie.headers),!(l&&oe.ok&&oe.refs[D].ok)){e.next=178;break}if(fe="refs/remotes/".concat(l,"/").concat(D.replace("refs/heads","")),!b){e.next=176;break}return e.next=174,tt.deleteRef({fs:r,gitdir:f,ref:fe});case 174:e.next=178;break;case 176:return e.next=178,tt.writeRef({fs:r,gitdir:f,ref:fe,value:I});case 178:if(!oe.ok||!Object.values(oe.refs).every(function(e){return e.ok})){e.next=182;break}return e.abrupt("return",oe);case 182:throw pe=Object.entries(oe.refs).filter(function(e){var t=y(e,2);t[0];return!t[1].ok}).map(function(e){var t=y(e,2),r=t[0],n=t[1];return"\n  - ".concat(r,": ").concat(n.error)}).join(""),new Lt(pe,oe);case 184:case"end":return e.stop()}},e,null,[[76,82],[113,130]])}))).apply(this,arguments)}function nu(e){return au.apply(this,arguments)}function au(){return(au=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,k,w,y,R,_,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.http,a=t.onProgress,i=t.onMessage,s=t.onAuth,u=t.onAuthSuccess,c=t.onAuthFailure,o=t.dir,f=t.gitdir,p=void 0===f?Ne(o,".git"):f,d=t.ref,l=t.remoteRef,h=t.remote,m=void 0===h?"origin":h,g=t.url,v=t.force,x=void 0!==v&&v,b=t.delete,k=void 0!==b&&b,w=t.corsProxy,y=t.headers,R=void 0===y?{}:y,_=t.cache,E=void 0===_?{}:_,e.prev=1,Fr("fs",r),Fr("http",n),Fr("gitdir",p),e.next=7,tu({fs:new Pr(r),cache:E,http:n,onProgress:a,onMessage:i,onAuth:s,onAuthSuccess:u,onAuthFailure:c,gitdir:p,ref:d,remoteRef:l,remote:m,url:g,force:x,delete:k,corsProxy:w,headers:R});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.push",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function iu(e){return su.apply(this,arguments)}function su(){return(su=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,e.next=3,Ft({fs:r,cache:n,gitdir:a,oid:i});case 3:if(s=e.sent,u=s.type,c=s.object,"tag"!==u){e.next=9;break}return i=vr.from(c).parse().object,e.abrupt("return",iu({fs:r,cache:n,gitdir:a,oid:i}));case 9:if("blob"===u){e.next=11;break}throw new Se(i,u,"blob");case 11:return e.abrupt("return",{oid:i,blob:new Uint8Array(c)});case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function uu(e){return cu.apply(this,arguments)}function cu(){return(cu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,s=t.filepath,void 0===(u=void 0===s?void 0:s)){e.next=5;break}return e.next=4,Vr({fs:r,cache:n,gitdir:a,oid:i,filepath:u});case 4:i=e.sent;case 5:return e.next=7,iu({fs:r,cache:n,gitdir:a,oid:i});case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ou(e){return fu.apply(this,arguments)}function fu(){return(fu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oid,u=t.filepath,c=t.cache,o=void 0===c?{}:c,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oid",s),e.next=7,uu({fs:new Pr(r),cache:o,gitdir:i,oid:s,filepath:u});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.readBlob",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function pu(e){return du.apply(this,arguments)}function du(){return(du=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oid,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oid",s),e.next=7,As({fs:new Pr(r),cache:c,gitdir:i,oid:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.readCommit",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function lu(e){return hu.apply(this,arguments)}function hu(){return(hu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.ref,s=void 0===i?"refs/notes/commits":i,u=t.oid,e.next=3,tt.resolve({gitdir:a,fs:r,ref:s});case 3:return c=e.sent,e.next=6,uu({fs:r,cache:n,gitdir:a,oid:c,filepath:u});case 6:return o=e.sent,f=o.blob,e.abrupt("return",f);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mu(e){return gu.apply(this,arguments)}function gu(){return(gu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=void 0===s?"refs/notes/commits":s,c=t.oid,o=t.cache,f=void 0===o?{}:o,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",u),Fr("oid",c),e.next=8,lu({fs:new Pr(r),cache:f,gitdir:i,ref:u,oid:c});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.readNote",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function vu(e){return xu.apply(this,arguments)}function xu(){return(xu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oid,u=t.format,c=void 0===u?"parsed":u,o=t.filepath,f=void 0===o?void 0:o,p=t.encoding,d=void 0===p?void 0:p,l=t.cache,h=void 0===l?{}:l,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oid",s),m=new Pr(r),void 0===f){e.next=10;break}return e.next=9,Vr({fs:m,cache:h,gitdir:i,oid:s,filepath:f});case 9:s=e.sent;case 10:return g="parsed"===c?"content":c,e.next=13,Ft({fs:m,cache:h,gitdir:i,oid:s,format:g});case 13:if((v=e.sent).oid=s,"parsed"!==c){e.next=31;break}v.format="parsed",e.t0=v.type,e.next="commit"===e.t0?20:"tree"===e.t0?22:"blob"===e.t0?24:"tag"===e.t0?26:28;break;case 20:return v.object=kr.from(v.object).parse(),e.abrupt("break",29);case 22:return v.object=ct.from(v.object).entries(),e.abrupt("break",29);case 24:return d?v.object=v.object.toString(d):(v.object=new Uint8Array(v.object),v.format="content"),e.abrupt("break",29);case 26:return v.object=vr.from(v.object).parse(),e.abrupt("break",29);case 28:throw new Se(v.oid,v.type,"blob|commit|tag|tree");case 29:e.next=32;break;case 31:"deflated"!==v.format&&"wrapped"!==v.format||(v.type=v.format);case 32:return e.abrupt("return",v);case 35:throw e.prev=35,e.t1=e.catch(1),e.t1.caller="git.readObject",e.t1;case 39:case"end":return e.stop()}},e,null,[[1,35]])}))).apply(this,arguments)}function bu(e){return ku.apply(this,arguments)}function ku(){return(ku=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,i=t.oid,e.next=3,Ft({fs:r,cache:n,gitdir:a,oid:i,format:"content"});case 3:if(s=e.sent,u=s.type,c=s.object,"tag"===u){e.next=8;break}throw new Se(i,u,"tag");case 8:return o=vr.from(c),f={oid:i,tag:o.parse(),payload:o.payload()},e.abrupt("return",f);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wu(e){return yu.apply(this,arguments)}function yu(){return(yu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oid,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oid",s),e.next=7,bu({fs:new Pr(r),cache:c,gitdir:i,oid:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.readTag",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Ru(e){return _u.apply(this,arguments)}function _u(){return(_u=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.oid,u=t.filepath,c=void 0===u?void 0:u,o=t.cache,f=void 0===o?{}:o,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("oid",s),e.next=7,Xr({fs:new Pr(r),cache:f,gitdir:i,oid:s,filepath:c});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.readTree",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Eu(e){return Su.apply(this,arguments)}function Su(){return(Su=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.filepath,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("filepath",s),e.next=7,ve.acquire({fs:new Pr(r),gitdir:i,cache:c},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.delete({filepath:s});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.caller="git.remove",e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function ju(e){return Pu.apply(this,arguments)}function Pu(){return(Pu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.onSign,i=t.gitdir,s=t.ref,u=void 0===s?"refs/notes/commits":s,c=t.oid,o=t.author,f=t.committer,p=t.signingKey,e.prev=1,e.next=4,tt.resolve({gitdir:i,fs:r,ref:u});case 4:d=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),e.t0 instanceof Ee){e.next=11;break}throw e.t0;case 11:return e.next=13,Xr({fs:r,gitdir:i,oid:d||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"});case 13:return l=e.sent,h=(h=l.tree).filter(function(e){return e.path!==c}),e.next=18,en({fs:r,gitdir:i,tree:h});case 18:return m=e.sent,e.next=21,qr({fs:r,cache:n,onSign:a,gitdir:i,ref:u,tree:m,parent:d&&[d],message:"Note removed by 'isomorphic-git removeNote'\n",author:o,committer:f,signingKey:p});case 21:return g=e.sent,e.abrupt("return",g);case 23:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function Au(e){return Ou.apply(this,arguments)}function Ou(){return(Ou=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.onSign,a=t.dir,i=t.gitdir,s=void 0===i?Ne(a,".git"):i,u=t.ref,c=void 0===u?"refs/notes/commits":u,o=t.oid,f=t.author,p=t.committer,d=t.signingKey,l=t.cache,h=void 0===l?{}:l,e.prev=1,Fr("fs",r),Fr("gitdir",s),Fr("oid",o),m=new Pr(r),e.next=8,un({fs:m,gitdir:s,author:f});case 8:if(g=e.sent){e.next=11;break}throw new Qt("author");case 11:return e.next=13,on({fs:m,gitdir:s,author:g,committer:p});case 13:if(v=e.sent){e.next=16;break}throw new Qt("committer");case 16:return e.next=18,ju({fs:m,cache:h,onSign:n,gitdir:s,ref:c,oid:o,author:g,committer:v,signingKey:d});case 18:return e.abrupt("return",e.sent);case 21:throw e.prev=21,e.t0=e.catch(1),e.t0.caller="git.removeNote",e.t0;case 25:case"end":return e.stop()}},e,null,[[1,21]])}))).apply(this,arguments)}function Iu(e){return Bu.apply(this,arguments)}function Bu(){return(Bu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.gitdir,a=t.oldref,i=t.ref,s=t.checkout,c=void 0!==s&&s,i===u.default.clean(i)){e.next=3;break}throw new Yt(i,u.default.clean(i));case 3:if(a===u.default.clean(a)){e.next=5;break}throw new Yt(a,u.default.clean(a));case 5:return o="refs/heads/".concat(a),f="refs/heads/".concat(i),e.next=9,tt.exists({fs:r,gitdir:n,ref:f});case 9:if(!e.sent){e.next=12;break}throw new zt("branch",i,!1);case 12:return e.next=14,tt.resolve({fs:r,gitdir:n,ref:o,depth:1});case 14:return p=e.sent,e.next=17,tt.writeRef({fs:r,gitdir:n,ref:f,value:p});case 17:return e.next=19,tt.deleteRef({fs:r,gitdir:n,ref:o});case 19:if(!c){e.next=22;break}return e.next=22,tt.writeSymbolicRef({fs:r,gitdir:n,ref:"HEAD",value:f});case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cu(e){return Nu.apply(this,arguments)}function Nu(){return(Nu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=t.oldref,c=t.checkout,o=void 0!==c&&c,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",s),Fr("oldref",u),e.next=8,Iu({fs:new Pr(r),gitdir:i,ref:s,oldref:u,checkout:o});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.renameBranch",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function Du(e){return Uu.apply(this,arguments)}function Uu(){return(Uu=k(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.gitdir,r=t.type,n=t.object,e.abrupt("return",Q(ot.wrap({type:r,object:n})));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tu(e){return Mu.apply(this,arguments)}function Mu(){return(Mu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.filepath,u=t.ref,c=void 0===u?"HEAD":u,o=t.cache,f=void 0===o?{}:o,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("filepath",s),Fr("ref",c),p=new Pr(r),e.next=9,tt.resolve({fs:p,gitdir:i,ref:c});case 9:return d=e.sent,e.prev=10,e.next=13,Vr({fs:p,cache:f,gitdir:i,oid:d,filepath:s});case 13:d=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),d=null;case 19:if(h={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0},e.t1=n,!e.t1){e.next=25;break}return e.next=24,p.read(Ne(n,s));case 24:e.t1=e.sent;case 25:if(!(m=e.t1)){e.next=34;break}return e.next=29,Du({gitdir:i,type:"blob",object:m});case 29:if(l=e.sent,d!==l){e.next=34;break}return e.next=33,p.lstat(Ne(n,s));case 33:h=e.sent;case 34:return e.next=36,ve.acquire({fs:p,gitdir:i,cache:f},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.delete({filepath:s}),d&&t.insert({filepath:s,stats:h,oid:d});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 36:e.next=42;break;case 38:throw e.prev=38,e.t2=e.catch(1),e.t2.caller="git.reset",e.t2;case 42:case"end":return e.stop()}},e,null,[[1,38],[10,16]])}))).apply(this,arguments)}function Fu(e){return Hu.apply(this,arguments)}function Hu(){return(Hu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=t.depth,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",s),e.next=7,tt.resolve({fs:new Pr(r),gitdir:i,ref:s,depth:u});case 7:return c=e.sent,e.abrupt("return",c);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.resolveRef",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function zu(e){return Gu.apply(this,arguments)}function Gu(){return(Gu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.path,u=t.value,c=t.append,o=void 0!==c&&c,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("path",s),f=new Pr(r),e.next=8,Xe.get({fs:f,gitdir:i});case 8:if(p=e.sent,!o){e.next=14;break}return e.next=12,p.append(s,u);case 12:e.next=16;break;case 14:return e.next=16,p.set(s,u);case 16:return e.next=18,Xe.save({fs:f,gitdir:i,config:p});case 18:e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(1),e.t0.caller="git.setConfig",e.t0;case 24:case"end":return e.stop()}},e,null,[[1,20]])}))).apply(this,arguments)}function Wu(e){return qu.apply(this,arguments)}function qu(){return(qu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h,m,g,v,x,b,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.filepath,u=t.cache,c=void 0===u?{}:u,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("filepath",s),o=new Pr(r),e.next=8,jr.isIgnored({fs:o,gitdir:i,dir:n,filepath:s});case 8:if(!e.sent){e.next=11;break}return e.abrupt("return","ignored");case 11:return e.next=13,Lu({fs:o,cache:c,gitdir:i});case 13:return f=e.sent,e.next=16,Ku({fs:o,cache:c,gitdir:i,tree:f,path:s});case 16:return p=e.sent,e.next=19,ve.acquire({fs:o,gitdir:i,cache:c},function(){var e=k(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=w(t),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}if((a=n.value).path!==s){e.next=7;break}return e.abrupt("return",a);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}},e,null,[[1,11,14,17]])}));return function(t){return e.apply(this,arguments)}}());case 19:return d=e.sent,e.next=22,o.lstat(Ne(n,s));case 22:if(l=e.sent,h=null!==p,m=null!==d,g=null!==l,v=function(){var e=k(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m||oe(d,l)){e.next=4;break}return e.abrupt("return",d.oid);case 4:return e.next=6,o.read(Ne(n,s));case 6:return t=e.sent,e.next=9,Du({gitdir:i,type:"blob",object:t});case 9:return r=e.sent,m&&d.oid===r&&-1!==l.size&&ve.acquire({fs:o,gitdir:i,cache:c},function(){var e=k(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.insert({filepath:s,stats:l,oid:r});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h||g||m){e.next=29;break}return e.abrupt("return","absent");case 29:if(h||g||!m){e.next=31;break}return e.abrupt("return","*absent");case 31:if(h||!g||m){e.next=33;break}return e.abrupt("return","*added");case 33:if(h||!g||!m){e.next=38;break}return e.next=36,v();case 36:return x=e.sent,e.abrupt("return",x===d.oid?"added":"*added");case 38:if(!h||g||m){e.next=40;break}return e.abrupt("return","deleted");case 40:if(!h||g||!m){e.next=42;break}return e.abrupt("return",(d.oid,"*deleted"));case 42:if(!h||!g||m){e.next=47;break}return e.next=45,v();case 45:return b=e.sent,e.abrupt("return",b===p?"*undeleted":"*undeletemodified");case 47:if(!(h&&g&&m)){e.next=56;break}return e.next=50,v();case 50:if((y=e.sent)!==p){e.next=55;break}return e.abrupt("return",y===d.oid?"unmodified":"*unmodified");case 55:return e.abrupt("return",y===d.oid?"modified":"*modified");case 56:e.next=62;break;case 58:throw e.prev=58,e.t0=e.catch(1),e.t0.caller="git.status",e.t0;case 62:case"end":return e.stop()}},e,null,[[1,58]])}))).apply(this,arguments)}function Ku(e){return $u.apply(this,arguments)}function $u(){return($u=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.fs,n=t.cache,a=t.gitdir,i=t.tree,"string"==typeof(s=t.path)&&(s=s.split("/")),u=s.shift(),c=w(i),e.prev=4,c.s();case 6:if((o=c.n()).done){e.next=23;break}if((f=o.value).path!==u){e.next=21;break}if(0!==s.length){e.next=11;break}return e.abrupt("return",f.oid);case 11:return e.next=13,Ft({fs:r,cache:n,gitdir:a,oid:f.oid});case 13:if(p=e.sent,d=p.type,l=p.object,"tree"!==d){e.next=19;break}return h=ct.from(l),e.abrupt("return",Ku({fs:r,cache:n,gitdir:a,tree:h,path:s}));case 19:if("blob"!==d){e.next=21;break}throw new Se(f.oid,d,"blob",s.join("/"));case 21:e.next=6;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(4),c.e(e.t0);case 28:return e.prev=28,c.f(),e.finish(28);case 31:return e.abrupt("return",null);case 32:case"end":return e.stop()}},e,null,[[4,25,28,31]])}))).apply(this,arguments)}function Lu(e){return Vu.apply(this,arguments)}function Vu(){return(Vu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.cache,a=t.gitdir,e.prev=1,e.next=4,tt.resolve({fs:r,gitdir:a,ref:"HEAD"});case 4:i=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(e.t0 instanceof Ee)){e.next=11;break}return e.abrupt("return",[]);case 11:return e.next=13,Xr({fs:r,cache:n,gitdir:a,oid:i});case 13:return s=e.sent,u=s.tree,e.abrupt("return",u);case 16:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function Zu(e){return Yu.apply(this,arguments)}function Yu(){return(Yu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=void 0===s?"HEAD":s,c=t.filepaths,o=void 0===c?["."]:c,f=t.filter,p=t.cache,d=void 0===p?{}:p,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",u),l=new Pr(r),e.next=8,An({fs:l,cache:d,dir:n,gitdir:i,trees:[_r({ref:u}),Sr(),_e()],map:function(){var e=k(regeneratorRuntime.mark(function e(t,r){var a,i,s,u,c,p,d,h,g,v,x,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y(r,3),i=a[0],s=a[1],u=a[2],i||u||!s){e.next=6;break}return e.next=4,jr.isIgnored({fs:l,dir:n,filepath:t});case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(o.some(function(e){return In(t,e)})){e.next=8;break}return e.abrupt("return",null);case 8:if(!f){e.next=11;break}if(f(t)){e.next=11;break}return e.abrupt("return");case 11:if(e.t0=i,!e.t0){e.next=16;break}return e.next=15,i.type();case 15:e.t0=e.sent;case 16:if("tree"!==(c=e.t0)&&"special"!==c){e.next=19;break}return e.abrupt("return");case 19:if("commit"!==c){e.next=21;break}return e.abrupt("return",null);case 21:if(e.t1=s,!e.t1){e.next=26;break}return e.next=25,s.type();case 25:e.t1=e.sent;case 26:if("tree"!==(p=e.t1)&&"special"!==p){e.next=29;break}return e.abrupt("return");case 29:if(e.t2=u,!e.t2){e.next=34;break}return e.next=33,u.type();case 33:e.t2=e.sent;case 34:if("commit"!==(d=e.t2)){e.next=37;break}return e.abrupt("return",null);case 37:if("tree"!==d&&"special"!==d){e.next=39;break}return e.abrupt("return");case 39:if(!i){e.next=45;break}return e.next=42,i.oid();case 42:e.t3=e.sent,e.next=46;break;case 45:e.t3=void 0;case 46:if(h=e.t3,!u){e.next=53;break}return e.next=50,u.oid();case 50:e.t4=e.sent,e.next=54;break;case 53:e.t4=void 0;case 54:if(g=e.t4,i||!s||u){e.next=59;break}v="42",e.next=63;break;case 59:if(!s){e.next=63;break}return e.next=62,s.oid();case 62:v=e.sent;case 63:return(b=(x=[void 0,h,v,g]).map(function(e){return x.indexOf(e)})).shift(),e.abrupt("return",[t].concat(m(b)));case 67:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.caller="git.statusMatrix",e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function Ju(e){return Xu.apply(this,arguments)}function Xu(){return(Xu=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,u=t.object,c=t.force,o=void 0!==c&&c,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",s),f=new Pr(r),void 0!==s){e.next=8;break}throw new er("ref");case 8:return s=s.startsWith("refs/tags/")?s:"refs/tags/".concat(s),e.next=11,tt.resolve({fs:f,gitdir:i,ref:u||"HEAD"});case 11:if(p=e.sent,e.t0=!o,!e.t0){e.next=17;break}return e.next=16,tt.exists({fs:f,gitdir:i,ref:s});case 16:e.t0=e.sent;case 17:if(!e.t0){e.next=19;break}throw new zt("tag",s);case 19:return e.next=21,tt.writeRef({fs:f,gitdir:i,ref:s,value:p});case 21:e.next=27;break;case 23:throw e.prev=23,e.t1=e.catch(1),e.t1.caller="git.tag",e.t1;case 27:case"end":return e.stop()}},e,null,[[1,23]])}))).apply(this,arguments)}function Qu(){try{return xa.version}catch(e){throw e.caller="git.version",e}}function ec(e){return tc.apply(this,arguments)}function tc(){return(tc=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,u,c,o,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.trees,u=t.map,c=t.reduce,o=t.iterate,f=t.cache,p=void 0===f?{}:f,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("trees",s),e.next=7,An({fs:new Pr(r),cache:p,dir:n,gitdir:i,trees:s,map:u,reduce:c,iterate:o});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.walk",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function rc(e){return nc.apply(this,arguments)}function nc(){return(nc=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.blob,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("blob",s),e.next=7,Tr({fs:new Pr(r),gitdir:i,type:"blob",object:s,format:"content"});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.writeBlob",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function ac(e){return ic.apply(this,arguments)}function ic(){return(ic=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.commit,i=kr.from(a).toObject(),e.next=4,Tr({fs:r,gitdir:n,type:"commit",object:i,format:"content"});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sc(e){return uc.apply(this,arguments)}function uc(){return(uc=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.commit,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("commit",s),e.next=7,ac({fs:new Pr(r),gitdir:i,commit:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.writeCommit",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function cc(e){return oc.apply(this,arguments)}function oc(){return(oc=k(regeneratorRuntime.mark(function t(r){var n,a,i,s,u,c,o,f,p,d,l,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fs,a=r.dir,i=r.gitdir,s=void 0===i?Ne(a,".git"):i,u=r.type,c=r.object,o=r.format,f=void 0===o?"parsed":o,p=r.oid,d=r.encoding,l=void 0===d?void 0:d,t.prev=1,h=new Pr(n),"parsed"!==f){t.next=17;break}t.t0=u,t.next="commit"===t.t0?7:"tree"===t.t0?9:"blob"===t.t0?11:"tag"===t.t0?13:15;break;case 7:return c=kr.from(c).toObject(),t.abrupt("break",16);case 9:return c=ct.from(c).toObject(),t.abrupt("break",16);case 11:return c=e.from(c,l),t.abrupt("break",16);case 13:return c=vr.from(c).toObject(),t.abrupt("break",16);case 15:throw new Se(p||"",u,"blob|commit|tag|tree");case 16:f="content";case 17:return t.next=19,Tr({fs:h,gitdir:s,type:u,object:c,oid:p,format:f});case 19:return p=t.sent,t.abrupt("return",p);case 23:throw t.prev=23,t.t1=t.catch(1),t.t1.caller="git.writeObject",t.t1;case 27:case"end":return t.stop()}},t,null,[[1,23]])}))).apply(this,arguments)}function fc(e){return pc.apply(this,arguments)}function pc(){return(pc=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,c,o,f,p,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.ref,c=t.value,o=t.force,f=void 0!==o&&o,p=t.symbolic,d=void 0!==p&&p,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("ref",s),Fr("value",c),l=new Pr(r),s===u.default.clean(s)){e.next=9;break}throw new Yt(s,u.default.clean(s));case 9:if(e.t0=!f,!e.t0){e.next=14;break}return e.next=13,tt.exists({fs:l,gitdir:i,ref:s});case 13:e.t0=e.sent;case 14:if(!e.t0){e.next=16;break}throw new zt("ref",s);case 16:if(!d){e.next=21;break}return e.next=19,tt.writeSymbolicRef({fs:l,gitdir:i,ref:s,value:c});case 19:e.next=26;break;case 21:return e.next=23,tt.resolve({fs:l,gitdir:i,ref:c});case 23:return c=e.sent,e.next=26,tt.writeRef({fs:l,gitdir:i,ref:s,value:c});case 26:e.next=32;break;case 28:throw e.prev=28,e.t1=e.catch(1),e.t1.caller="git.writeRef",e.t1;case 32:case"end":return e.stop()}},e,null,[[1,28]])}))).apply(this,arguments)}function dc(e){return lc.apply(this,arguments)}function lc(){return(lc=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.gitdir,a=t.tag,i=vr.from(a).toObject(),e.next=4,Tr({fs:r,gitdir:n,type:"tag",object:i,format:"content"});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hc(e){return mc.apply(this,arguments)}function mc(){return(mc=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.tag,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("tag",s),e.next=7,dc({fs:new Pr(r),gitdir:i,tag:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.writeTag",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function gc(e){return vc.apply(this,arguments)}function vc(){return(vc=k(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fs,n=t.dir,a=t.gitdir,i=void 0===a?Ne(n,".git"):a,s=t.tree,e.prev=1,Fr("fs",r),Fr("gitdir",i),Fr("tree",s),e.next=7,en({fs:new Pr(r),gitdir:i,tree:s});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0.caller="git.writeTree",e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}var xc={Errors:cr,STAGE:_e,TREE:_r,WORKDIR:Sr,add:Hr,addNote:pn,addRemote:mn,annotatedTag:bn,branch:Rn,checkout:Un,clone:Ba,commit:Na,getConfig:Bi,getConfigAll:Ui,setConfig:zu,currentBranch:Ua,deleteBranch:Ha,deleteRef:Ga,deleteRemote:$a,deleteTag:Ya,expandOid:ai,expandRef:si,fastForward:yi,fetch:_i,findMergeBase:Si,findRoot:Oi,getRemoteInfo:Mi,getRemoteInfo2:zi,hashBlob:Ki,indexPack:Zi,init:Ji,isDescendent:ts,listBranches:ns,listFiles:os,listNotes:ls,listRemotes:vs,listServerRefs:Rs,listTags:Es,log:Ns,merge:Us,packObjects:Ws,pull:Ks,push:nu,readBlob:ou,readCommit:pu,readNote:mu,readObject:vu,readTag:wu,readTree:Ru,remove:Eu,removeNote:Au,renameBranch:Cu,resetIndex:Tu,resolveRef:Fu,status:Wu,statusMatrix:Zu,tag:Ju,version:Qu,walk:ec,writeBlob:rc,writeCommit:sc,writeObject:cc,writeRef:fc,writeTag:hc,writeTree:gc},bc=xc;exports.default=bc;
},{"async-lock":"WflA","sha.js/sha1.js":"iGWE","crc-32":"fZgm","pako":"VwsR","ignore":"uWrb","pify":"WsXn","clean-git-ref":"HFzr","diff3":"P8MV","buffer":"wYDm"}],"h5hX":[function(require,module,exports) {
"use strict";function t(t){let e=[t];return{next:()=>Promise.resolve({done:0===e.length,value:e.pop()}),return:()=>(e=[],{}),[Symbol.asyncIterator](){return this}}}function e(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:t(e)}async function r(t,r){const o=e(t);for(;;){const{value:t,done:e}=await o.next();if(t&&await r(t),e)break}o.return&&o.return()}async function o(t){let e=0;const o=[];await r(t,t=>{o.push(t),e+=t.byteLength});const n=new Uint8Array(e);let a=0;for(const r of o)n.set(r,a),a+=r.byteLength;return n}function n(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next:()=>e.read(),return:()=>(e.releaseLock(),{}),[Symbol.asyncIterator](){return this}}}async function a({onProgress:t,url:e,method:r="GET",headers:a={},body:s}){s&&(s=await o(s));const u=await fetch(e,{method:r,headers:a,body:s}),y=u.body&&u.body.getReader?n(u.body):[new Uint8Array(await u.arrayBuffer())];a={};for(const[o,n]of u.headers.entries())a[o]=n;return{url:u.url,method:u.method,statusCode:u.status,statusMessage:u.statusText,body:y,headers:a}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.request=a,exports.default=void 0;var s={request:a},u=s;exports.default=u;
},{}],"JwGC":[function(require,module,exports) {
function t(t){var n,o;if("function"!=typeof t)throw new Error("expected a function but got "+t);return function(){return n?o:(n=!0,o=t.apply(this,arguments))}}module.exports=t;
},{}],"MAgB":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var global = arguments[3];
var e=require("buffer").Buffer,t=arguments[3];!function(t){function r(){}function n(e,t){if(e=void 0===e?"utf-8":e,t=void 0===t?{fatal:!1}:t,-1===i.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+e+"') is invalid.");if(t.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function o(e){for(var t=0,r=Math.min(65536,e.length+1),n=new Uint16Array(r),o=[],i=0;;){var f=t<e.length;if(!f||i>=r-1){if(o.push(String.fromCharCode.apply(null,n.subarray(0,i))),!f)return o.join("");e=e.subarray(t),i=t=0}if(0==(128&(f=e[t++])))n[i++]=f;else if(192==(224&f)){var a=63&e[t++];n[i++]=(31&f)<<6|a}else if(224==(240&f)){a=63&e[t++];var u=63&e[t++];n[i++]=(31&f)<<12|a<<6|u}else if(240==(248&f)){65535<(f=(7&f)<<18|(a=63&e[t++])<<12|(u=63&e[t++])<<6|63&e[t++])&&(f-=65536,n[i++]=f>>>10&1023|55296,f=56320|1023&f),n[i++]=f}}}if(t.TextEncoder&&t.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),r.prototype.encode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");t=0;for(var r=e.length,n=0,o=Math.max(32,r+(r>>>1)+7),i=new Uint8Array(o>>>3<<3);t<r;){var f=e.charCodeAt(t++);if(55296<=f&&56319>=f){if(t<r){var a=e.charCodeAt(t);56320==(64512&a)&&(++t,f=((1023&f)<<10)+(1023&a)+65536)}if(55296<=f&&56319>=f)continue}if(n+4>i.length&&(o+=8,o=(o*=1+t/e.length*2)>>>3<<3,(a=new Uint8Array(o)).set(i),i=a),0==(4294967168&f))i[n++]=f;else{if(0==(4294965248&f))i[n++]=f>>>6&31|192;else if(0==(4294901760&f))i[n++]=f>>>12&15|224,i[n++]=f>>>6&63|128;else{if(0!=(4292870144&f))continue;i[n++]=f>>>18&7|240,i[n++]=f>>>12&63|128,i[n++]=f>>>6&63|128}i[n++]=63&f|128}}return i.slice?i.slice(0,n):i.subarray(0,n)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var f=o;"function"==typeof e&&e.from?f=function(t){return e.from(t.buffer,t.byteOffset,t.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(f=function(e){var t=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=UTF-8"}));try{var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(),r.responseText}catch(n){return o(e)}finally{URL.revokeObjectURL(t)}}),n.prototype.decode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return e=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),f(e)},t.TextEncoder=r,t.TextDecoder=n}("undefined"!=typeof window?window:void 0!==t?t:this);
},{"buffer":"wYDm"}],"A23F":[function(require,module,exports) {
require("fast-text-encoding"),module.exports={encode:e=>(new TextEncoder).encode(e),decode:e=>(new TextDecoder).decode(e)};
},{"fast-text-encoding":"MAgB"}],"jrqd":[function(require,module,exports) {
function t(t,r,i){var n;return function(){if(!r)return t.apply(this,arguments);var u=this,e=arguments,o=i&&!n;return clearTimeout(n),n=setTimeout(function(){if(n=null,!o)return t.apply(u,e)},r),o?t.apply(this,arguments):void 0}}module.exports=t;
},{}],"wmTx":[function(require,module,exports) {
module.exports=class{constructor(i){this.type=i.type,this.mode=i.mode,this.size=i.size,this.ino=i.ino,this.mtimeMs=i.mtimeMs,this.ctimeMs=i.ctimeMs||i.mtimeMs,this.uid=1,this.gid=1,this.dev=1}isFile(){return"file"===this.type}isDirectory(){return"dir"===this.type}isSymbolicLink(){return"symlink"===this.type}};
},{}],"RLCP":[function(require,module,exports) {
function e(e){if(0===e.length)return".";let n=t(e);return n=n.reduce(u,[]),r(...n)}function n(...n){let t="";for(let o of n)t=o.startsWith("/")?o:e(r(t,o));return t}function r(...e){if(0===e.length)return"";let n=e.join("/");return n=n.replace(/\/{2,}/g,"/")}function t(e){if(0===e.length)return[];if("/"===e)return["/"];let n=e.split("/");return""===n[n.length-1]&&n.pop(),"/"===e[0]?n[0]="/":"."!==n[0]&&n.unshift("."),n}function o(e){const n=e.lastIndexOf("/");if(-1===n)throw new Error(`Cannot get dirname of "${e}"`);return 0===n?"/":e.slice(0,n)}function i(e){if("/"===e)throw new Error(`Cannot get basename of "${e}"`);const n=e.lastIndexOf("/");return-1===n?e:e.slice(n+1)}function u(e,n){if(0===e.length)return e.push(n),e;if("."===n)return e;if(".."===n){if(1===e.length){if("/"===e[0])throw new Error("Unable to normalize path - traverses above root directory");if("."===e[0])return e.push(n),e}return".."===e[e.length-1]?(e.push(".."),e):(e.pop(),e)}return e.push(n),e}module.exports={join:r,normalize:e,split:t,basename:i,dirname:o,resolve:n};
},{}],"E49j":[function(require,module,exports) {
function s(s){return class extends Error{constructor(...E){super(...E),this.code=s,this.message?this.message=s+": "+this.message:this.message=s}}}const E=s("EEXIST"),e=s("ENOENT"),T=s("ENOTDIR"),t=s("ENOTEMPTY"),r=s("ETIMEDOUT");module.exports={EEXIST:E,ENOENT:e,ENOTDIR:T,ENOTEMPTY:t,ETIMEDOUT:r};
},{}],"yLdG":[function(require,module,exports) {
const t=require("./path.js"),{EEXIST:e,ENOENT:n,ENOTDIR:o,ENOTEMPTY:i}=require("./errors.js"),s=0;module.exports=class{constructor(){}_makeRoot(t=new Map){return t.set(s,{mode:511,type:"dir",size:0,ino:0,mtimeMs:Date.now()}),t}activate(t=null){this._root=null===t?new Map([["/",this._makeRoot()]]):"string"==typeof t?new Map([["/",this._makeRoot(this.parse(t))]]):t}get activated(){return!!this._root}deactivate(){this._root=void 0}size(){return this._countInodes(this._root.get("/"))-1}_countInodes(t){let e=1;for(let[n,o]of t)n!==s&&(e+=this._countInodes(o));return e}autoinc(){return this._maxInode(this._root.get("/"))+1}_maxInode(t){let e=t.get(s).ino;for(let[n,o]of t)n!==s&&(e=Math.max(e,this._maxInode(o)));return e}print(t=this._root.get("/")){let e="";const n=(t,o)=>{for(let[i,r]of t){if(0===i)continue;let t=r.get(s),l=t.mode.toString(8);e+=`${"\t".repeat(o)}${i}\t${l}`,"file"===t.type?e+=`\t${t.size}\t${t.mtimeMs}\n`:(e+="\n",n(r,o+1))}};return n(t,0),e}parse(t){let e=0;function n(t){const n=++e,o=1===t.length?"dir":"file";let[i,r,l]=t;return i=parseInt(i,8),r=r?parseInt(r):0,l=l?parseInt(l):Date.now(),new Map([[s,{mode:i,type:o,size:r,mtimeMs:l,ino:n}]])}let o=t.trim().split("\n"),i=this._makeRoot(),r=[{indent:-1,node:i},{indent:0,node:null}];for(let s of o){let t=s.match(/^\t*/)[0].length;s=s.slice(t);let[e,...o]=s.split("\t"),i=n(o);if(t<=r[r.length-1].indent)for(;t<=r[r.length-1].indent;)r.pop();r.push({indent:t,node:i}),r[r.length-2].node.set(e,i)}return i}_lookup(e,o=!0){let i=this._root,r="/",l=t.split(e);for(let a=0;a<l.length;++a){let u=l[a];if(!(i=i.get(u)))throw new n(e);if(o||a<l.length-1){const e=i.get(s);if("symlink"===e.type){let n=t.resolve(r,e.target);i=this._lookup(n)}r=r?t.join(r,u):u}}return i}mkdir(n,{mode:o}){if("/"===n)throw new e;let i=this._lookup(t.dirname(n)),r=t.basename(n);if(i.has(r))throw new e;let l=new Map,a={mode:o,type:"dir",size:0,mtimeMs:Date.now(),ino:this.autoinc()};l.set(s,a),i.set(r,l)}rmdir(e){let n=this._lookup(e);if("dir"!==n.get(s).type)throw new o;if(n.size>1)throw new i;let r=this._lookup(t.dirname(e)),l=t.basename(e);r.delete(l)}readdir(t){let e=this._lookup(t);if("dir"!==e.get(s).type)throw new o;return[...e.keys()].filter(t=>"string"==typeof t)}writeStat(e,n,{mode:o}){let i;try{let t=this.stat(e);null==o&&(o=t.mode),i=t.ino}catch(h){}null==o&&(o=438),null==i&&(i=this.autoinc());let r=this._lookup(t.dirname(e)),l=t.basename(e),a={mode:o,type:"file",size:n,mtimeMs:Date.now(),ino:i},u=new Map;return u.set(s,a),r.set(l,u),a}unlink(e){let n=this._lookup(t.dirname(e)),o=t.basename(e);n.delete(o)}rename(e,n){let o=t.basename(n),i=this._lookup(e);this._lookup(t.dirname(n)).set(o,i),this.unlink(e)}stat(t){return this._lookup(t).get(s)}lstat(t){return this._lookup(t,!1).get(s)}readlink(t){return this._lookup(t,!1).get(s).target}symlink(e,n){let o,i;try{let t=this.stat(n);null===i&&(i=t.mode),o=t.ino}catch(h){}null==i&&(i=40960),null==o&&(o=this.autoinc());let r=this._lookup(t.dirname(n)),l=t.basename(n),a={mode:i,type:"symlink",target:e,size:0,mtimeMs:Date.now(),ino:o},u=new Map;return u.set(s,a),r.set(l,u),a}_du(t){let e=0;for(const[n,o]of t.entries())e+=n===s?o.size:this._du(o);return e}du(t){let e=this._lookup(t);return this._du(e)}};
},{"./path.js":"RLCP","./errors.js":"E49j"}],"K5SR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=o,exports.set=s,exports.update=n,exports.del=i,exports.clear=u,exports.keys=c,exports.close=h,exports.Store=void 0;class e{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbName=e,this._storeName=t,this._init()}_init(){this._dbp||(this._dbp=new Promise((e,t)=>{const r=indexedDB.open(this._dbName);r.onerror=(()=>t(r.error)),r.onsuccess=(()=>e(r.result)),r.onupgradeneeded=(()=>{r.result.createObjectStore(this._storeName)})}))}_withIDBStore(e,t){return this._init(),this._dbp.then(r=>new Promise((o,s)=>{const n=r.transaction(this.storeName,e);n.oncomplete=(()=>o()),n.onabort=n.onerror=(()=>s(n.error)),t(n.objectStore(this.storeName))}))}_close(){return this._init(),this._dbp.then(e=>{e.close(),this._dbp=void 0})}}let t;function r(){return t||(t=new e),t}function o(e,t=r()){let o;return t._withIDBStore("readwrite",t=>{o=t.get(e)}).then(()=>o.result)}function s(e,t,o=r()){return o._withIDBStore("readwrite",r=>{r.put(t,e)})}function n(e,t,o=r()){return o._withIDBStore("readwrite",r=>{const o=r.get(e);o.onsuccess=(()=>{r.put(t(o.result),e)})})}function i(e,t=r()){return t._withIDBStore("readwrite",t=>{t.delete(e)})}function u(e=r()){return e._withIDBStore("readwrite",e=>{e.clear()})}function c(e=r()){const t=[];return e._withIDBStore("readwrite",e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(()=>t)}function h(e=r()){return e._close()}exports.Store=e;
},{}],"tzoN":[function(require,module,exports) {
const e=require("@isomorphic-git/idb-keyval");module.exports=class{constructor(t,r){this._database=t,this._storename=r,this._store=new e.Store(this._database,this._storename)}saveSuperblock(t){return e.set("!root",t,this._store)}loadSuperblock(){return e.get("!root",this._store)}readFile(t){return e.get(t,this._store)}writeFile(t,r){return e.set(t,r,this._store)}unlink(t){return e.del(t,this._store)}wipe(){return e.clear(this._store)}close(){return e.close(this._store)}};
},{"@isomorphic-git/idb-keyval":"K5SR"}],"M0ih":[function(require,module,exports) {
module.exports=class{constructor(t){this._url=t}loadSuperblock(){return fetch(this._url+"/.superblock.txt").then(t=>t.ok?t.text():null)}async readFile(t){const r=await fetch(this._url+t);if(200===r.status)return r.arrayBuffer();throw new Error("ENOENT")}async sizeFile(t){const r=await fetch(this._url+t,{method:"HEAD"});if(200===r.status)return r.headers.get("content-length");throw new Error("ENOENT")}};
},{}],"Yl89":[function(require,module,exports) {
const t=require("@isomorphic-git/idb-keyval"),e=t=>new Promise(e=>setTimeout(e,t));module.exports=class{constructor(e,i){this._id=Math.random(),this._database=e,this._storename=i,this._store=new t.Store(this._database,this._storename),this._lock=null}async has({margin:t=2e3}={}){if(this._lock&&this._lock.holder===this._id){const e=Date.now();return this._lock.expires>e+t||await this.renew()}return!1}async renew({ttl:e=5e3}={}){let i;return await t.update("lock",t=>{const r=Date.now()+e;return i=t&&t.holder===this._id,this._lock=i?{holder:this._id,expires:r}:t,this._lock},this._store),i}async acquire({ttl:e=5e3}={}){let i,r,o;if(await t.update("lock",t=>{const s=Date.now(),a=s+e;return r=t&&t.expires<s,i=void 0===t||r,o=t&&t.holder===this._id,this._lock=i?{holder:this._id,expires:a}:t,this._lock},this._store),o)throw new Error("Mutex double-locked");return i}async wait({interval:t=100,limit:i=6e3,ttl:r}={}){for(;i--;){if(await this.acquire({ttl:r}))return!0;await e(t)}throw new Error("Mutex timeout")}async release({force:e=!1}={}){let i,r,o;if(await t.update("lock",t=>(i=e||t&&t.holder===this._id,r=void 0===t,o=t&&t.holder!==this._id,this._lock=i?void 0:t,this._lock),this._store),await t.close(this._store),!i&&!e){if(r)throw new Error("Mutex double-freed");if(o)throw new Error("Mutex lost ownership")}return i}};
},{"@isomorphic-git/idb-keyval":"K5SR"}],"zzSF":[function(require,module,exports) {
module.exports=class{constructor(e){this._id=Math.random(),this._database=e,this._has=!1,this._release=null}async has(){return this._has}async acquire(){return new Promise(e=>{navigator.locks.request(this._database+"_lock",{ifAvailable:!0},s=>(this._has=!!s,e(!!s),new Promise(e=>{this._release=e})))})}async wait({timeout:e=6e5}={}){return new Promise((s,a)=>{const t=new AbortController;setTimeout(()=>{t.abort(),a(new Error("Mutex timeout"))},e),navigator.locks.request(this._database+"_lock",{signal:t.signal},e=>(this._has=!!e,s(!!e),new Promise(e=>{this._release=e})))})}async release({force:e=!1}={}){this._has=!1,this._release?this._release():e&&navigator.locks.request(this._database+"_lock",{steal:!0},e=>!0)}};
},{}],"MeXs":[function(require,module,exports) {
const e="undefined"==typeof window?"worker":"main";module.exports=function(n){return performance.mark(`${n} start`),console.log(`${e}: ${n}`),console.time(`${e}: ${n}`),function(){performance.mark(`${n} end`),console.timeEnd(`${e}: ${n}`),performance.measure(`${n}`,`${n} start`,`${n} end`)}};
},{}],"eLHQ":[function(require,module,exports) {
const{encode:t,decode:i}=require("isomorphic-textencoder"),e=require("just-debounce-it"),s=require("./Stat.js"),a=require("./CacheFS.js"),{ENOENT:r,ENOTEMPTY:n,ETIMEDOUT:h}=require("./errors.js"),o=require("./IdbBackend.js"),c=require("./HttpBackend.js"),l=require("./Mutex.js"),_=require("./Mutex2.js"),u=require("./path.js"),d=require("./clock.js");function w(t,i){return void 0!==i&&"function"!=typeof i||(i={}),"string"==typeof i&&(i={encoding:i}),[t=u.normalize(t),i]}function m(t,i){return[u.normalize(t),u.normalize(i)]}module.exports=class{constructor(t,i){this.init=this.init.bind(this),this.readFile=this._wrap(this.readFile,!1),this.writeFile=this._wrap(this.writeFile,!0),this.unlink=this._wrap(this.unlink,!0),this.readdir=this._wrap(this.readdir,!1),this.mkdir=this._wrap(this.mkdir,!0),this.rmdir=this._wrap(this.rmdir,!0),this.rename=this._wrap(this.rename,!0),this.stat=this._wrap(this.stat,!1),this.lstat=this._wrap(this.lstat,!1),this.readlink=this._wrap(this.readlink,!1),this.symlink=this._wrap(this.symlink,!0),this.backFile=this._wrap(this.backFile,!0),this.du=this._wrap(this.du,!1),this.saveSuperblock=e(()=>{this._saveSuperblock()},500),this._deactivationPromise=null,this._deactivationTimeout=null,this._activationPromise=null,this._operations=new Set,t&&this.init(t,i)}async init(...t){return this._initPromiseResolve&&await this._initPromise,this._initPromise=this._init(...t),this._initPromise}async _init(t,{wipe:i,url:e,urlauto:s,fileDbName:r=t,fileStoreName:n=t+"_files",lockDbName:h=t+"_lock",lockStoreName:u=t+"_lock",defer:d=!1}={}){await this._gracefulShutdown(),this._name=t,this._idb=new o(r,n),this._mutex=navigator.locks?new _(t):new l(h,u),this._cache=new a(t),this._opts={wipe:i,url:e},this._needsWipe=!!i,e&&(this._http=new c(e),this._urlauto=!!s),this._initPromiseResolve&&(this._initPromiseResolve(),this._initPromiseResolve=null),d||this.stat("/")}async _gracefulShutdown(){this._operations.size>0&&(this._isShuttingDown=!0,await new Promise(t=>this._gracefulShutdownResolve=t),this._isShuttingDown=!1,this._gracefulShutdownResolve=null)}_wrap(t,i){return async(...e)=>{let s={name:t.name,args:e};this._operations.add(s);try{return await this._activate(),await t.apply(this,e)}finally{this._operations.delete(s),i&&this.saveSuperblock(),0===this._operations.size&&(this._deactivationTimeout||clearTimeout(this._deactivationTimeout),this._deactivationTimeout=setTimeout(this._deactivate.bind(this),500))}}}async _activate(){if(this._initPromise||console.warn(new Error(`Attempted to use LightningFS ${this._name} before it was initialized.`)),await this._initPromise,this._deactivationTimeout&&(clearTimeout(this._deactivationTimeout),this._deactivationTimeout=null),this._deactivationPromise&&await this._deactivationPromise,this._deactivationPromise=null,this._activationPromise||(this._activationPromise=this.__activate()),await this._activationPromise,!(await this._mutex.has()))throw new h}async __activate(){if(this._cache.activated)return;this._needsWipe&&(this._needsWipe=!1,await this._idb.wipe(),await this._mutex.release({force:!0})),await this._mutex.has()||await this._mutex.wait();const t=await this._idb.loadSuperblock();if(t)this._cache.activate(t);else if(this._http){const t=await this._http.loadSuperblock();this._cache.activate(t),await this._saveSuperblock()}else this._cache.activate()}async _deactivate(){return this._activationPromise&&await this._activationPromise,this._deactivationPromise||(this._deactivationPromise=this.__deactivate()),this._activationPromise=null,this._gracefulShutdownResolve&&this._gracefulShutdownResolve(),this._deactivationPromise}async __deactivate(){await this._mutex.has()&&await this._saveSuperblock(),this._cache.deactivate();try{await this._mutex.release()}catch(t){console.log(t)}await this._idb.close()}async _saveSuperblock(){this._cache.activated&&(this._lastSavedAt=Date.now(),await this._idb.saveSuperblock(this._cache._root))}async _writeStat(t,i,e){let s=u.split(u.dirname(t)),a=s.shift();for(let n of s){a=u.join(a,n);try{this._cache.mkdir(a,{mode:511})}catch(r){}}return this._cache.writeStat(t,i,e)}async readFile(t,e){[t,e]=w(t,e);const{encoding:s}=e;if(s&&"utf8"!==s)throw new Error('Only "utf8" encoding is supported in readFile');let a=null,n=null;try{n=this._cache.stat(t),a=await this._idb.readFile(n.ino)}catch(h){if(!this._urlauto)throw h}if(!a&&this._http){let i=this._cache.lstat(t);for(;"symlink"===i.type;)t=u.resolve(u.dirname(t),i.target),i=this._cache.lstat(t);a=await this._http.readFile(t)}if(a&&(n&&n.size==a.byteLength||(n=await this._writeStat(t,a.byteLength,{mode:n?n.mode:438}),this.saveSuperblock()),"utf8"===s&&(a=i(a))),!n)throw new r(t);return a}async writeFile(i,e,s){[i,s]=w(i,s);const{mode:a,encoding:r="utf8"}=s;if("string"==typeof e){if("utf8"!==r)throw new Error('Only "utf8" encoding is supported in writeFile');e=t(e)}const n=await this._cache.writeStat(i,e.byteLength,{mode:a});return await this._idb.writeFile(n.ino,e),null}async unlink(t,i){[t,i]=w(t,i);const e=this._cache.lstat(t);return this._cache.unlink(t),"symlink"!==e.type&&await this._idb.unlink(e.ino),null}async readdir(t,i){return[t,i]=w(t,i),this._cache.readdir(t)}async mkdir(t,i){[t,i]=w(t,i);const{mode:e=511}=i;return await this._cache.mkdir(t,{mode:e}),null}async rmdir(t,i){if([t,i]=w(t,i),"/"===t)throw new n;return this._cache.rmdir(t),null}async rename(t,i){return[t,i]=m(t,i),this._cache.rename(t,i),null}async stat(t,i){[t,i]=w(t,i);const e=this._cache.stat(t);return new s(e)}async lstat(t,i){[t,i]=w(t,i);let e=this._cache.lstat(t);return new s(e)}async readlink(t,i){return[t,i]=w(t,i),this._cache.readlink(t)}async symlink(t,i){return[t,i]=m(t,i),this._cache.symlink(t,i),null}async backFile(t,i){[t,i]=w(t,i);let e=await this._http.sizeFile(t);return await this._writeStat(t,e,i),null}async du(t){return this._cache.du(t)}};
},{"isomorphic-textencoder":"A23F","just-debounce-it":"jrqd","./Stat.js":"wmTx","./CacheFS.js":"yLdG","./errors.js":"E49j","./IdbBackend.js":"tzoN","./HttpBackend.js":"M0ih","./Mutex.js":"Yl89","./Mutex2.js":"zzSF","./path.js":"RLCP","./clock.js":"MeXs"}],"m1bK":[function(require,module,exports) {
const i=require("just-once"),t=require("./PromisifiedFS");function s(t,s){"function"==typeof t&&(s=t);return[(...i)=>s(null,...i),s=i(s)]}module.exports=class{constructor(...i){this.promises=new t(...i),this.init=this.init.bind(this),this.readFile=this.readFile.bind(this),this.writeFile=this.writeFile.bind(this),this.unlink=this.unlink.bind(this),this.readdir=this.readdir.bind(this),this.mkdir=this.mkdir.bind(this),this.rmdir=this.rmdir.bind(this),this.rename=this.rename.bind(this),this.stat=this.stat.bind(this),this.lstat=this.lstat.bind(this),this.readlink=this.readlink.bind(this),this.symlink=this.symlink.bind(this),this.backFile=this.backFile.bind(this),this.du=this.du.bind(this)}init(i,t){this.promises.init(i,t)}readFile(i,t,h){const[e,n]=s(t,h);this.promises.readFile(i,t).then(e).catch(n)}writeFile(i,t,h,e){const[n,r]=s(h,e);this.promises.writeFile(i,t,h).then(n).catch(r)}unlink(i,t,h){const[e,n]=s(t,h);this.promises.unlink(i,t).then(e).catch(n)}readdir(i,t,h){const[e,n]=s(t,h);this.promises.readdir(i,t).then(e).catch(n)}mkdir(i,t,h){const[e,n]=s(t,h);this.promises.mkdir(i,t).then(e).catch(n)}rmdir(i,t,h){const[e,n]=s(t,h);this.promises.rmdir(i,t).then(e).catch(n)}rename(i,t,h){const[e,n]=s(h);this.promises.rename(i,t).then(e).catch(n)}stat(i,t,h){const[e,n]=s(t,h);this.promises.stat(i).then(e).catch(n)}lstat(i,t,h){const[e,n]=s(t,h);this.promises.lstat(i).then(e).catch(n)}readlink(i,t,h){const[e,n]=s(t,h);this.promises.readlink(i).then(e).catch(n)}symlink(i,t,h){const[e,n]=s(h);this.promises.symlink(i,t).then(e).catch(n)}backFile(i,t,h){const[e,n]=s(t,h);this.promises.backFile(i,t).then(e).catch(n)}du(i,t){const[h,e]=s(t);this.promises.du(i).then(h).catch(e)}};
},{"just-once":"JwGC","./PromisifiedFS":"eLHQ"}],"uq1s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("regenerator-runtime")),r=u(require("isomorphic-git")),t=u(require("isomorphic-git/http/web")),n=u(require("@isomorphic-git/lightning-fs"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e,r,t,n,u,i,a){try{var s=e[i](a),o=s.value}catch(c){return void t(c)}s.done?r(o):Promise.resolve(o).then(n,u)}function a(e){return function(){var r=this,t=arguments;return new Promise(function(n,u){var a=e.apply(r,t);function s(e){i(a,n,u,s,o,"next",e)}function o(e){i(a,n,u,s,o,"throw",e)}s(void 0)})}}function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var f=function(){function u(e){s(this,u),this.fs=new n.default(e),this.corsProxy="https://cors.isomorphic-git.org"}return c(u,[{key:"clone",value:function(){var n=a(e.default.mark(function n(u,i){var a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={fs:this.fs,http:t.default,dir:i,url:u,corsProxy:this.corsProxy,username:"EDC-dev",password:"MapGuide6.5"},e.next=3,r.default.clone(a);case 3:return e.next=5,this.fs.promises.readdir(i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},n,this)}));return function(e,r){return n.apply(this,arguments)}}()},{key:"readFile",value:function(){var r=a(e.default.mark(function r(t){var n,u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fs.promises.readFile(t);case 2:return n=e.sent,u=(new TextDecoder).decode(n),e.next=6,JSON.parse(u);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()},{key:"status",value:function(){var t=a(e.default.mark(function t(n,u){var i;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={fs:this.fs,dir:n,filepath:u},e.next=3,r.default.status(i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()}]),u}();exports.default=f;
},{"regenerator-runtime":"KA2S","isomorphic-git":"oKjG","isomorphic-git/http/web":"h5hX","@isomorphic-git/lightning-fs":"m1bK"}],"oRpa":[function(require,module,exports) {
module.exports="4910-vodomjerUOknu.c0ac4ef7.png";
},{}],"cHgY":[function(require,module,exports) {
module.exports="491-zatvaracNaPovrsini.1aff5abd.png";
},{}],"Hu87":[function(require,module,exports) {
module.exports="4911-prikljucnaOgrlica.4d6cc1a8.png";
},{}],"kJEQ":[function(require,module,exports) {
module.exports="4914-crpka.39f17b5e.png";
},{}],"RKXW":[function(require,module,exports) {
module.exports="4916-uredjajZaProciscavanjeVode.8130e111.png";
},{}],"Bl9Y":[function(require,module,exports) {
module.exports="492-okno.3fa46365.png";
},{}],"yYS7":[function(require,module,exports) {
module.exports="492-oknoOkruglo.b1274e3f.png";
},{}],"xsJx":[function(require,module,exports) {
module.exports="493-zatvaracUOknu.5604512c.png";
},{}],"ZWbU":[function(require,module,exports) {
module.exports="494-hidrantNaPovrsini.5bd88dea.png";
},{}],"Guda":[function(require,module,exports) {
module.exports="495-hidrantUOknu.086b7b41.png";
},{}],"w80G":[function(require,module,exports) {
module.exports="497-OknoSIspustom.355a4ccf.png";
},{}],"p4Xc":[function(require,module,exports) {
module.exports="498-regulatorPritiskaUOknu.c3e20a2e.png";
},{}],"jxu4":[function(require,module,exports) {
module.exports="eiBlue.140ffbf8.png";
},{}],"VVtK":[function(require,module,exports) {
module.exports="eiGreen.e8768815.png";
},{}],"wcu6":[function(require,module,exports) {
module.exports="eiRed.2c4f66f7.png";
},{}],"HpTs":[function(require,module,exports) {
module.exports="eiYellow.269bc55b.png";
},{}],"wgWc":[function(require,module,exports) {
module.exports="hydrosphere_icon__1568308562734__w110.ef8ffe45.png";
},{}],"ZsNy":[function(require,module,exports) {
module.exports="logoOmis-min.3568f3dc.png";
},{}],"OhbA":[function(require,module,exports) {
module.exports="logoOmis.3e1684ac.png";
},{}],"z3Ui":[function(require,module,exports) {
module.exports="th.cab1b83e.png";
},{}],"edgo":[function(require,module,exports) {
module.exports="uredjaj.600825e8.png";
},{}],"v1N0":[function(require,module,exports) {
module.exports="vozilo.36fe5fef.png";
},{}],"uJkI":[function(require,module,exports) {
module.exports="496-zracniVentilUOknu.5657d294.png";
},{}],"rzf8":[function(require,module,exports) {
module.exports={"4910-vodomjerUOknu":require("./4910-vodomjerUOknu.png"),"491-zatvaracNaPovrsini":require("./491-zatvaracNaPovrsini.png"),"4911-prikljucnaOgrlica":require("./4911-prikljucnaOgrlica.png"),"4914-crpka":require("./4914-crpka.png"),"4916-uredjajZaProciscavanjeVode":require("./4916-uredjajZaProciscavanjeVode.png"),"492-okno":require("./492-okno.png"),"492-oknoOkruglo":require("./492-oknoOkruglo.png"),"493-zatvaracUOknu":require("./493-zatvaracUOknu.png"),"494-hidrantNaPovrsini":require("./494-hidrantNaPovrsini.png"),"495-hidrantUOknu":require("./495-hidrantUOknu.png"),"497-OknoSIspustom":require("./497-OknoSIspustom.png"),"498-regulatorPritiskaUOknu":require("./498-regulatorPritiskaUOknu.png"),eiBlue:require("./eiBlue.png"),eiGreen:require("./eiGreen.png"),eiRed:require("./eiRed.png"),eiYellow:require("./eiYellow.png"),hydrosphere_icon__1568308562734__w110:require("./hydrosphere_icon__1568308562734__w110.png"),"logoOmis-min":require("./logoOmis-min.png"),logoOmis:require("./logoOmis.png"),th:require("./th.png"),uredjaj:require("./uredjaj.png"),vozilo:require("./vozilo.png"),"496-zracniVentilUOknu":require("./496-zracniVentilUOknu.png")};
},{"./4910-vodomjerUOknu.png":"oRpa","./491-zatvaracNaPovrsini.png":"cHgY","./4911-prikljucnaOgrlica.png":"Hu87","./4914-crpka.png":"kJEQ","./4916-uredjajZaProciscavanjeVode.png":"RKXW","./492-okno.png":"Bl9Y","./492-oknoOkruglo.png":"yYS7","./493-zatvaracUOknu.png":"xsJx","./494-hidrantNaPovrsini.png":"ZWbU","./495-hidrantUOknu.png":"Guda","./497-OknoSIspustom.png":"w80G","./498-regulatorPritiskaUOknu.png":"p4Xc","./eiBlue.png":"jxu4","./eiGreen.png":"VVtK","./eiRed.png":"wcu6","./eiYellow.png":"HpTs","./hydrosphere_icon__1568308562734__w110.png":"wgWc","./logoOmis-min.png":"ZsNy","./logoOmis.png":"OhbA","./th.png":"z3Ui","./uredjaj.png":"edgo","./vozilo.png":"v1N0","./496-zracniVentilUOknu.png":"uJkI"}],"PjFK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeStyle=n;var e=require("ol/style");function t(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=r(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,n=function(){};return{s:n,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==o.return||o.return()}finally{if(c)throw i}}}}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var l=require("../img/*.png");function n(r){if(r){var o=Array.isArray(r)?r:[r];return function(r,n){var i,a=[],c=t(o);try{for(c.s();!(i=c.n()).done;){var s=i.value,u=new e.Style,f=!0,x=!0;if(s.filter&&r){var g=s.filter;if(g.value&&g.property){var d=r.get(g.property)||"";switch(g.operator){case"=":f=d==g.value;break;case">":f=d>g.value;break;case"<":f=d<g.value;break;case">=":f=d>=g.value;break;case"<=":f=d<=g.value;break;case"!=":f=d!=g.value;break;case"LIKE":f=d&&g.value&&-1!==(d+"").search(g.value)}}}if(s.resolution&&(x=s.resolution[0]<n&&n<s.resolution[1]),f&&x){if(s.fill&&u.setFill(new e.Fill({color:s.fill.color})),s.stroke&&u.setStroke(new e.Stroke({color:s.stroke.color,width:s.stroke.width})),s.text&&(!s.text.resolution||s.text.resolution[0]<n&&s.text.resolution[1]>n)){if(u.setText(new e.Text({font:s.text.font,scale:s.text.scale,maxAngle:s.text.maxAngle,offsetX:s.text.offsetX,offsetY:s.text.offsetY,placement:s.text.placement,textAlign:s.text.textAlign,textBaseline:s.text.textBaseline,padding:s.text.padding})),s.text.text)if(r){var p=r.get(s.text.text);p||""===s.text.text?u.getText().setText(p+""):s.text.text.startsWith("*")?u.getText().setText(s.text.text.substr(1)):u.getText().setText("")}else u.getText().setText(s.text.text+"");s.text.fill&&u.getText().setFill(new e.Fill({color:s.text.fill.color})),s.text.stroke&&u.getText().setStroke(new e.Stroke({color:s.text.stroke.color,width:s.text.stroke.width})),s.text.backgroundStroke&&u.getText().setBackgroundStroke(new e.Stroke({color:s.text.backgroundStroke.color,width:s.text.backgroundStroke.width})),s.text.backgroundFill&&u.getText().setBackgroundFill(new e.Fill({color:s.text.backgroundFill.color}))}s.circle&&u.setImage(new e.Circle({radius:s.circle.radius,displacement:s.circle.displacement,fill:s.circle.fill?new e.Fill({color:s.circle.fill.color}):null,stroke:s.circle.stroke?new e.Stroke({color:s.circle.stroke.color,width:s.circle.stroke.width}):null})),s.regularShape&&u.setImage(new e.RegularShape({points:s.regularShape.points,radius:s.regularShape.radius,radius1:s.regularShape.radius1,radius2:s.regularShape.radius2,angle:s.regularShape.angle,rotation:s.regularShape.rotation,displacement:s.regularShape.displacement,fill:s.regularShape.fill?new e.Fill({color:s.regularShape.fill.color}):null,stroke:s.regularShape.stroke?new e.Stroke({color:s.regularShape.stroke.color,width:s.regularShape.stroke.width}):null})),s.icon&&u.setImage(new e.Icon({src:l[s.icon.src],anchor:s.icon.anchor,anchorOrigin:s.icon.anchorOrigin,anchorXUnits:s.icon.anchorXUnits,anchorYUnits:s.icon.anchorYUnits,color:s.icon.color,offset:s.icon.offset,displacement:s.icon.displacement,offsetOrigin:s.icon.offsetOrigin,opacity:s.icon.opacity,scale:s.icon.scale,rotation:s.icon.rotation,size:s.icon.size}))}a.push(u)}}catch(h){c.e(h)}finally{c.f()}return a}}}
},{"ol/style":"qeKX","../img/*.png":"rzf8"}],"TwgZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("ol/layer/Tile")),t=f(require("ol/source/OSM")),n=f(require("ol/source/BingMaps")),r=f(require("ol/source/TileWMS")),a=f(require("ol/source/Vector")),o=f(require("ol/format/GeoJSON")),i=f(require("ol/layer/Vector")),u=f(require("./vcs")),s=require("./makeStyle");function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return m(e)||y(e,t)||h(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}}function m(e){if(Array.isArray(e))return e}function v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}var w=function(){function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,f),this.def=e.def,this.map=e.map,this.localFolder="/datas",this.vc=new u.default("fs"),this.result=this.vc.clone(this.def.gitPath,this.localFolder)}return S(f,[{key:"getTHLayers",value:function(){var e,t=this,n=[],r=v(this.def.layers.entries());try{var a=function(){var r=c(e.value,2),a=(r[0],r[1]),o=t.def.sources.find(function(e){return e.name===a.source});["th","TH"].includes(o.type)&&n.push(a)};for(r.s();!(e=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return n}},{key:"addTHLayers",value:function(){var e,t=this,n=v(this.getTHLayers().entries());try{var r=function(){var n=c(e.value,2),r=n[0],u=n[1],l=t.def.sources.find(function(e){return e.name===u.source}),f={maxResolution:u.maxResolution,minResolution:u.minResolution,maxZoom:u.maxZoom,minZoom:u.minZoom,visible:u.visible,opacity:u.opacity,zIndex:u.zIndex||r,name:u.name,label:u.label,info:u.info,translucent:u.translucent,def:u},d=new i.default(f),y=new a.default({loader:function(e,t,n){fetch(l.path).then(function(e){return e.json()}).then(function(e){var t,n={type:"FeatureCollection",features:[]},r=v(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.features.push({type:"Feature",properties:{company_id:a.company_id,device_id:a.device_id,device_name:a.device_name,gain_id:a.gain_id,info_id:a.info_id},id:a.device_id,geometry:{type:"Point",coordinates:[a.longitude,a.latitude]}})}}catch(u){r.e(u)}finally{r.f()}var i=new o.default({dataProjection:"EPSG:4326",featureProjection:"EPSG:3765"}).readFeatures(n);y.addFeatures(i)})}});d.setSource(y),u.style&&d.setStyle((0,s.makeStyle)(u.style)),d.getSource().set("def",l),t.map&&t.map.addLayer(d)};for(n.s();!(e=n.n()).done;)r()}catch(u){n.e(u)}finally{n.f()}}},{key:"getTileLayers",value:function(){var e,t=this,n=[],r=v(this.def.layers.entries());try{var a=function(){var r=c(e.value,2),a=(r[0],r[1]),o=t.def.sources.find(function(e){return e.name===a.source});["osm","bing","wms"].includes(o.type)&&n.push(a)};for(r.s();!(e=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return n}},{key:"addTileLayers",value:function(){var a,o=this,i=v(this.getTileLayers().entries());try{var u=function(){var i=c(a.value,2),u=i[0],l=i[1],s=o.def.sources.find(function(e){return e.name===l.source}),f={maxResolution:l.maxResolution,minResolution:l.minResolution,maxZoom:l.maxZoom,minZoom:l.minZoom,visible:l.visible,opacity:l.opacity,zIndex:l.zIndex||u,name:l.name,label:l.label,info:l.info,translucent:l.translucent,def:l},d=new e.default(f);"osm"===s.type&&d.setSource(new t.default),"bing"===s.type&&d.setSource(new n.default({key:s.APIKey,imagerySet:s.imagerySet})),"wms"===s.type&&d.setSource(new r.default({url:s.path,params:s.params,crossOrigin:"anonymous"})),d.getSource().set("def",s),o.map&&o.map.addLayer(d)};for(i.s();!(a=i.n()).done;)u()}catch(l){i.e(l)}finally{i.f()}}},{key:"removeTileLayers",value:function(){var e,t=this,n=v(this.getTileLayers().entries());try{var r=function(){var n=c(e.value,2),r=(n[0],n[1]);t.map.removeLayer(t.map.getLayers().getArray().find(function(e){return e.get("name")===r.name}))};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}}},{key:"getVectorLayers",value:function(){var e,t=this,n=[],r=v(this.def.layers.entries());try{var a=function(){var r=c(e.value,2),a=(r[0],r[1]),o=t.def.sources.find(function(e){return e.name===a.source});["geojson"].includes(o.type)&&n.push(a)};for(r.s();!(e=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return n}},{key:"addVectorLayers",value:function(){var e,t=this,n=v(this.getVectorLayers().entries());try{var r=function(){var n=c(e.value,2),r=n[0],u=n[1],l=t.def.sources.find(function(e){return e.name===u.source}),f={maxResolution:u.maxResolution,minResolution:u.minResolution,maxZoom:u.maxZoom,minZoom:u.minZoom,visible:u.visible,opacity:u.opacity,zIndex:u.zIndex||r,name:u.name,label:u.label,info:u.info,translucent:u.translucent,def:u},d=new i.default(f),y=new a.default({loader:function(e,n,r){t.result.then(function(e){t.vc.readFile(t.localFolder+"/"+t.def.path+"/"+u.name+".json").then(function(e){var t=new o.default({dataProjection:"EPSG:4326",featureProjection:"EPSG:3765"}).readFeatures(e);y.addFeatures(t),y.getFeatures().map(function(e){return e.set("layer",d)})})})}});d.setSource(y),u.style&&d.setStyle((0,s.makeStyle)(u.style)),d.getSource().set("def",l),t.map&&t.map.addLayer(d)};for(n.s();!(e=n.n()).done;)r()}catch(u){n.e(u)}finally{n.f()}}},{key:"removeVectorLayers",value:function(){var e,t=this,n=v(this.getVectorLayers().entries());try{var r=function(){var n=c(e.value,2),r=(n[0],n[1]);t.map.removeLayer(t.map.getLayers().getArray().find(function(e){return e.get("name")===r.name}))};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}}},{key:"setStyle",value:function(){l.style&&layer.setStyle((0,s.makeStyle)(l.style))}},{key:"setDef",value:function(e){this.def=e}}]),f}();exports.default=w;
},{"ol/layer/Tile":"BUEc","ol/source/OSM":"Rmo4","ol/source/BingMaps":"KSjo","ol/source/TileWMS":"IcO7","ol/source/Vector":"ZS12","ol/format/GeoJSON":"qBlb","ol/layer/Vector":"dflx","./vcs":"uq1s","./makeStyle":"PjFK"}],"zxSe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("ol/control/Control")),t=r(require("./defLayers"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=l();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(r){u(c,e.default);var n=f(c);function c(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,c),(e=n.call(this,{element:document.createElement("textarea")})).def=r.def,e.element.className=r.className||"defEditor",e.element.innerHTML=JSON.stringify(e.def,null,2);var u=new t.default({def:e.def,map:map});return e.element.addEventListener("input",function(e){var t=e.target.value;try{u.setDef(JSON.parse(t)),u.removeTileLayers(),u.addTileLayers(),u.removeVectorLayers(),u.addVectorLayers()}catch(r){console.log("DefEditor err: ",r)}}),e}return c}();exports.default=p;
},{"ol/control/Control":"xxE2","./defLayers":"TwgZ"}],"X4ix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./events/Event.js")),e=a(require("./Object.js")),i=c(require("./events/EventType.js")),n=require("./geom/Polygon.js"),o=require("./proj.js"),r=require("./math.js");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=n?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function c(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),p={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},h=function(t){function e(e){var n=t.call(this,i.default.ERROR)||this;return n.code=e.code,n.message=e.message,n}return u(e,t),e}(t.default),d=function(t){function i(i){var n=t.call(this)||this,r=i||{};return n.position_=null,n.transform_=o.identityTransform,n.watchId_=void 0,n.addEventListener((0,e.getChangeEventType)(p.PROJECTION),n.handleProjectionChanged_),n.addEventListener((0,e.getChangeEventType)(p.TRACKING),n.handleTrackingChanged_),void 0!==r.projection&&n.setProjection(r.projection),void 0!==r.trackingOptions&&n.setTrackingOptions(r.trackingOptions),n.setTracking(void 0!==r.tracking&&r.tracking),n}return u(i,t),i.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},i.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=(0,o.getTransformFromProjections)((0,o.get)("EPSG:4326"),t),this.position_&&this.set(p.POSITION,this.transform_(this.position_)))},i.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},i.prototype.positionChange_=function(t){var e=t.coords;this.set(p.ACCURACY,e.accuracy),this.set(p.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(p.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(p.HEADING,null===e.heading?void 0:(0,r.toRadians)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(p.POSITION,i),this.set(p.SPEED,null===e.speed?void 0:e.speed);var o=(0,n.circular)(this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(p.ACCURACY_GEOMETRY,o),this.changed()},i.prototype.positionError_=function(t){this.dispatchEvent(new h(t))},i.prototype.getAccuracy=function(){return this.get(p.ACCURACY)},i.prototype.getAccuracyGeometry=function(){return this.get(p.ACCURACY_GEOMETRY)||null},i.prototype.getAltitude=function(){return this.get(p.ALTITUDE)},i.prototype.getAltitudeAccuracy=function(){return this.get(p.ALTITUDE_ACCURACY)},i.prototype.getHeading=function(){return this.get(p.HEADING)},i.prototype.getPosition=function(){return this.get(p.POSITION)},i.prototype.getProjection=function(){return this.get(p.PROJECTION)},i.prototype.getSpeed=function(){return this.get(p.SPEED)},i.prototype.getTracking=function(){return this.get(p.TRACKING)},i.prototype.getTrackingOptions=function(){return this.get(p.TRACKING_OPTIONS)},i.prototype.setProjection=function(t){this.set(p.PROJECTION,(0,o.get)(t))},i.prototype.setTracking=function(t){this.set(p.TRACKING,t)},i.prototype.setTrackingOptions=function(t){this.set(p.TRACKING_OPTIONS,t)},i}(e.default),g=d;exports.default=g;
},{"./events/Event.js":"fKNg","./Object.js":"PhPh","./events/EventType.js":"C8cu","./geom/Polygon.js":"Nwwk","./proj.js":"Diht","./math.js":"B96G"}],"w0c6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greatCircleArc=n,exports.meridian=e,exports.parallel=o;var t=require("../../proj.js"),a=require("../../math.js");function r(t,r,n){for(var e,o,s,i,u,p,h=[],c=t(0),M=t(1),f=r(c),g=r(M),d=[M,c],l=[g,f],v=[1,0],R={},m=1e5;--m>0&&v.length>0;)s=v.pop(),c=d.pop(),f=l.pop(),(p=s.toString())in R||(h.push(f[0],f[1]),R[p]=!0),i=v.pop(),M=d.pop(),g=l.pop(),o=r(e=t(u=(s+i)/2)),(0,a.squaredSegmentDistance)(o[0],o[1],f[0],f[1],g[0],g[1])<n?(h.push(g[0],g[1]),R[p=i.toString()]=!0):(v.push(i,u,u,s),l.push(g,o,o,f),d.push(M,e,e,c));return h}function n(n,e,o,s,i,u){var p=(0,t.get)("EPSG:4326"),h=Math.cos((0,a.toRadians)(e)),c=Math.sin((0,a.toRadians)(e)),M=Math.cos((0,a.toRadians)(s)),f=Math.sin((0,a.toRadians)(s)),g=Math.cos((0,a.toRadians)(o-n)),d=Math.sin((0,a.toRadians)(o-n)),l=c*f+h*M*g;return r(function(t){if(1<=l)return[o,s];var r=t*Math.acos(l),e=Math.cos(r),i=Math.sin(r),u=d*M,p=h*f-c*M*g,v=Math.atan2(u,p),R=Math.asin(c*e+h*i*Math.cos(v)),m=(0,a.toRadians)(n)+Math.atan2(Math.sin(v)*i*h,e-c*Math.sin(R));return[(0,a.toDegrees)(m),(0,a.toDegrees)(R)]},(0,t.getTransform)(p,i),u)}function e(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[a,n+(e-n)*t]},(0,t.getTransform)(i,o),s)}function o(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[n+(e-n)*t,a]},(0,t.getTransform)(i,o),s)}
},{"../../proj.js":"Diht","../../math.js":"B96G"}],"wXs0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=b(require("../Collection.js")),e=b(require("../render/EventType.js")),a=b(require("../Feature.js")),i=b(require("../style/Fill.js")),r=b(require("../geom/GeometryLayout.js")),s=b(require("../geom/LineString.js")),n=b(require("../geom/Point.js")),l=b(require("../style/Stroke.js")),o=b(require("../style/Style.js")),h=b(require("../style/Text.js")),_=b(require("./Vector.js")),m=b(require("../source/Vector.js")),L=require("../extent.js"),d=require("../obj.js"),u=require("../math.js"),p=require("../coordinate.js"),f=require("../proj.js"),c=require("../render.js"),g=require("../geom/flat/geodesic.js");function b(t){return t&&t.__esModule?t:{default:t}}var x=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function i(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),v=new l.default({color:"rgba(0,0,0,0.2)"}),y=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],S=function(_){function b(a){var r=this,s=a||{},n=(0,d.assign)({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},s);return delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,(r=_.call(this,n)||this).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==s.targetSize?s.targetSize:100,r.maxLines_=void 0!==s.maxLines?s.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==s.strokeStyle?s.strokeStyle:v,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,s.showLabels&&(r.lonLabelFormatter_=null==s.lonLabelFormatter?p.degreesToStringHDMS.bind(r,"EW"):s.lonLabelFormatter,r.latLabelFormatter_=null==s.latLabelFormatter?p.degreesToStringHDMS.bind(r,"NS"):s.latLabelFormatter,r.lonLabelPosition_=null==s.lonLabelPosition?0:s.lonLabelPosition,r.latLabelPosition_=null==s.latLabelPosition?1:s.latLabelPosition,r.lonLabelStyleBase_=new o.default({text:void 0!==s.lonLabelStyle?s.lonLabelStyle.clone():new h.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(r),r.latLabelStyleBase_=new o.default({text:void 0!==s.latLabelStyle?s.latLabelStyle.clone():new h.default({font:"12px Calibri,sans-serif",textAlign:"right",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(r),r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener(e.default.POSTRENDER,r.drawLabels_.bind(r))),r.intervals_=void 0!==s.intervals?s.intervals:y,r.setSource(new m.default({loader:r.loaderFunction.bind(r),strategy:r.strategyFunction.bind(r),features:new t.default,overlaps:!1,useSpatialIndex:!1,wrapX:s.wrapX})),r.featurePool_=[],r.lineStyle_=new o.default({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.setRenderOrder(null),r}return x(b,_),b.prototype.strategyFunction=function(t,e){var a=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,L.wrapX)(a,this.projection_),this.loadedExtent_&&((0,L.approximatelyEquals)(this.loadedExtent_,a,e)?a=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[a]},b.prototype.loaderFunction=function(t,e,i){this.loadedExtent_=t;var r=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],n=(0,L.getIntersection)(s,t);if(!(this.renderedExtent_&&(0,L.equals)(this.renderedExtent_,n)||(this.renderedExtent_=n,(0,L.isEmpty)(n)))){var l=(0,L.getCenter)(n),o=e*e/4;(!this.projection_||!(0,f.equivalent)(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(n,l,e,o);var h,_=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(_+=this.meridians_.length),this.parallelsLabels_&&(_+=this.parallels_.length);_>this.featurePool_.length;)h=new a.default,this.featurePool_.push(h);var m=r.getFeaturesCollection();m.clear();var d,u,p=0;for(d=0,u=this.meridians_.length;d<u;++d)(h=this.featurePool_[p++]).setGeometry(this.meridians_[d]),h.setStyle(this.lineStyle_),m.push(h);for(d=0,u=this.parallels_.length;d<u;++d)(h=this.featurePool_[p++]).setGeometry(this.parallels_[d]),h.setStyle(this.lineStyle_),m.push(h)}},b.prototype.addMeridian_=function(t,e,a,i,r,s){var l=this.getMeridian_(t,e,a,i,s);if((0,L.intersects)(l.getExtent(),r)){if(this.meridiansLabels_){var o=this.lonLabelFormatter_(t);s in this.meridiansLabels_?this.meridiansLabels_[s].text=o:this.meridiansLabels_[s]={geom:new n.default([]),text:o}}this.meridians_[s++]=l}return s},b.prototype.addParallel_=function(t,e,a,i,r,s){var l=this.getParallel_(t,e,a,i,s);if((0,L.intersects)(l.getExtent(),r)){if(this.parallelsLabels_){var o=this.latLabelFormatter_(t);s in this.parallelsLabels_?this.parallelsLabels_[s].text=o:this.parallelsLabels_[s]={geom:new n.default([]),text:o}}this.parallels_[s++]=l}return s},b.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,a=t.frameState.extent,i=(0,L.getCenter)(a),r=a;if(e){var s=(0,L.getWidth)(a),n=(0,L.getHeight)(a),l=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),h=(o*n-l*s)/(o*o-l*l),_=(o*s-l*n)/(o*o-l*l);r=[i[0]-h/2,i[1]-_/2,i[0]+h/2,i[1]+_/2]}var m=0,d=0,u=this.latLabelPosition_<.5,p=this.projection_.getExtent(),f=(0,L.getWidth)(p);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,L.containsExtent)(p,a)&&(m=Math.floor((a[0]-p[0])/f),d=Math.ceil((a[2]-p[2])/f),u=u!==Math.abs(e)>Math.PI/2);for(var g=(0,c.getVectorContext)(t),b=m;b<=d;++b){var x=this.meridians_.length+this.parallels_.length,v=void 0,y=void 0,S=void 0,j=void 0;if(this.meridiansLabels_)for(y=0,S=this.meridiansLabels_.length;y<S;++y){var M=this.meridians_[y];if(e||0!==b)(P=M.clone()).translate(b*f,0),P.rotate(-e,i),(j=this.getMeridianPoint_(P,r,y)).rotate(e,i);else j=this.getMeridianPoint_(M,a,y);(v=this.featurePool_[x++]).setGeometry(j),v.set("graticule_label",this.meridiansLabels_[y].text),g.drawFeature(v,this.lonLabelStyle_(v))}if(this.parallelsLabels_&&(b===m&&u||b===d&&!u))for(y=0,S=this.parallels_.length;y<S;++y){var P;M=this.parallels_[y];if(e||0!==b)(P=M.clone()).translate(b*f,0),P.rotate(-e,i),(j=this.getParallelPoint_(P,r,y)).rotate(e,i);else j=this.getParallelPoint_(M,a,y);(v=this.featurePool_[x++]).setGeometry(j),v.set("graticule_label",this.parallelsLabels_[y].text),g.drawFeature(v,this.latLabelStyle_(v))}}},b.prototype.createGraticule_=function(t,e,a,i){var r=this.getInterval_(a);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var s=!1,n=this.projection_.getExtent(),l=(0,L.getWidth)(n);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,L.containsExtent)(n,t)&&((0,L.getWidth)(t)>=l?(t[0]=n[0],t[2]=n[2]):s=!0);var o=[(0,u.clamp)(e[0],this.minX_,this.maxX_),(0,u.clamp)(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(o);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var _,m,d,p,f=(0,u.clamp)(h[0],this.minLon_,this.maxLon_),c=(0,u.clamp)(h[1],this.minLat_,this.maxLat_),g=this.maxLines_,b=t;s||(b=[(0,u.clamp)(t[0],this.minX_,this.maxX_),(0,u.clamp)(t[1],this.minY_,this.maxY_),(0,u.clamp)(t[2],this.minX_,this.maxX_),(0,u.clamp)(t[3],this.minY_,this.maxY_)]);var x=(0,L.applyTransform)(b,this.toLonLatTransform_,void 0,8),v=x[3],y=x[2],S=x[1],j=x[0];if(s||((0,L.containsCoordinate)(b,this.bottomLeft_)&&(j=this.minLon_,S=this.minLat_),(0,L.containsCoordinate)(b,this.bottomRight_)&&(y=this.maxLon_,S=this.minLat_),(0,L.containsCoordinate)(b,this.topLeft_)&&(j=this.minLon_,v=this.maxLat_),(0,L.containsCoordinate)(b,this.topRight_)&&(y=this.maxLon_,v=this.maxLat_),v=(0,u.clamp)(v,c,this.maxLat_),y=(0,u.clamp)(y,f,this.maxLon_),S=(0,u.clamp)(S,this.minLat_,c),j=(0,u.clamp)(j,this.minLon_,f)),f=Math.floor(f/r)*r,p=(0,u.clamp)(f,this.minLon_,this.maxLon_),m=this.addMeridian_(p,S,v,i,t,0),_=0,s)for(;(p-=r)>=j&&_++<g;)m=this.addMeridian_(p,S,v,i,t,m);else for(;p!=this.minLon_&&_++<g;)p=Math.max(p-r,this.minLon_),m=this.addMeridian_(p,S,v,i,t,m);if(p=(0,u.clamp)(f,this.minLon_,this.maxLon_),_=0,s)for(;(p+=r)<=y&&_++<g;)m=this.addMeridian_(p,S,v,i,t,m);else for(;p!=this.maxLon_&&_++<g;)p=Math.min(p+r,this.maxLon_),m=this.addMeridian_(p,S,v,i,t,m);for(this.meridians_.length=m,this.meridiansLabels_&&(this.meridiansLabels_.length=m),c=Math.floor(c/r)*r,d=(0,u.clamp)(c,this.minLat_,this.maxLat_),m=this.addParallel_(d,j,y,i,t,0),_=0;d!=this.minLat_&&_++<g;)d=Math.max(d-r,this.minLat_),m=this.addParallel_(d,j,y,i,t,m);for(d=(0,u.clamp)(c,this.minLat_,this.maxLat_),_=0;d!=this.maxLat_&&_++<g;)d=Math.min(d+r,this.maxLat_),m=this.addParallel_(d,j,y,i,t,m);this.parallels_.length=m,this.parallelsLabels_&&(this.parallelsLabels_.length=m)},b.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],a=this.projectionCenterLonLat_[1],i=-1,r=Math.pow(this.targetSize_*t,2),s=[],n=[],l=0,o=this.intervals_.length;l<o;++l){var h=(0,u.clamp)(this.intervals_[l]/2,0,90),_=(0,u.clamp)(a,-90+h,90-h);if(s[0]=e-h,s[1]=_-h,n[0]=e+h,n[1]=_+h,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(n,n),Math.pow(n[0]-s[0],2)+Math.pow(n[1]-s[1],2)<=r)break;i=this.intervals_[l]}return i},b.prototype.getMeridian_=function(t,e,a,i,n){var l=(0,g.meridian)(t,e,a,this.projection_,i),o=this.meridians_[n];return o?(o.setFlatCoordinates(r.default.XY,l),o.changed()):(o=new s.default(l,r.default.XY),this.meridians_[n]=o),o},b.prototype.getMeridianPoint_=function(t,e,a){var i=t.getFlatCoordinates(),r=1,s=i.length-1;i[r]>i[s]&&(r=s,s=1);var n=Math.max(e[1],i[r]),l=Math.min(e[3],i[s]),o=(0,u.clamp)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,n,l),h=[i[r-1]+(i[s-1]-i[r-1])*(o-i[r])/(i[s]-i[r]),o],_=this.meridiansLabels_[a].geom;return _.setCoordinates(h),_},b.prototype.getMeridians=function(){return this.meridians_},b.prototype.getParallel_=function(t,e,a,i,n){var l=(0,g.parallel)(t,e,a,this.projection_,i),o=this.parallels_[n];return o?(o.setFlatCoordinates(r.default.XY,l),o.changed()):o=new s.default(l,r.default.XY),o},b.prototype.getParallelPoint_=function(t,e,a){var i=t.getFlatCoordinates(),r=0,s=i.length-2;i[r]>i[s]&&(r=s,s=0);var n=Math.max(e[0],i[r]),l=Math.min(e[2],i[s]),o=(0,u.clamp)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,n,l),h=[o,i[r+1]+(i[s+1]-i[r+1])*(o-i[r])/(i[s]-i[r])],_=this.parallelsLabels_[a].geom;return _.setCoordinates(h),_},b.prototype.getParallels=function(){return this.parallels_},b.prototype.updateProjectionInfo_=function(t){var e=(0,f.get)("EPSG:4326"),a=t.getWorldExtent();this.maxLat_=a[3],this.maxLon_=a[2],this.minLat_=a[1],this.minLon_=a[0];var i=(0,f.getTransform)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{var r=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,a){for(var s=a||2,n=i(t,e,s),l=0,o=n.length;l<o;l+=s)n[l]<r&&(n[l]+=360);return n}}this.fromLonLatTransform_=(0,f.getTransform)(e,t);var s=(0,L.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,L.getCenter)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},b}(_.default),j=S;exports.default=j;
},{"../Collection.js":"FnDa","../render/EventType.js":"z39m","../Feature.js":"mYW9","../style/Fill.js":"AFcg","../geom/GeometryLayout.js":"Utvi","../geom/LineString.js":"DfxW","../geom/Point.js":"gLcY","../style/Stroke.js":"TXDt","../style/Style.js":"he4w","../style/Text.js":"RPsG","./Vector.js":"dflx","../source/Vector.js":"ZS12","../extent.js":"QDir","../obj.js":"mH6q","../math.js":"B96G","../coordinate.js":"nGsj","../proj.js":"Diht","../render.js":"RvU2","../geom/flat/geodesic.js":"w0c6"}],"SCyv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext=_,exports.getSupportedExtensions=a,exports.FLOAT=exports.UNSIGNED_INT=exports.UNSIGNED_SHORT=exports.UNSIGNED_BYTE=exports.DYNAMIC_DRAW=exports.STATIC_DRAW=exports.STREAM_DRAW=exports.ELEMENT_ARRAY_BUFFER=exports.ARRAY_BUFFER=void 0;var e=34962;exports.ARRAY_BUFFER=e;var t=34963;exports.ELEMENT_ARRAY_BUFFER=t;var r=35040;exports.STREAM_DRAW=r;var o=35044;exports.STATIC_DRAW=o;var s=35048;exports.DYNAMIC_DRAW=s;var p=5121;exports.UNSIGNED_BYTE=p;var x=5123;exports.UNSIGNED_SHORT=x;var E=5125;exports.UNSIGNED_INT=E;var A=5126;exports.FLOAT=A;var R,n=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function _(e,t){for(var r=n.length,o=0;o<r;++o)try{var s=e.getContext(n[o],t);if(s)return s}catch(p){}return null}function a(){if(!R){var e=_(document.createElement("canvas"));e&&(R=e.getSupportedExtensions())}return R}
},{}],"zsRd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getArrayClassForType=a,exports.default=exports.BufferUsage=void 0;var r=require("../webgl.js"),t=require("../asserts.js"),e={STATIC_DRAW:r.STATIC_DRAW,STREAM_DRAW:r.STREAM_DRAW,DYNAMIC_DRAW:r.DYNAMIC_DRAW};exports.BufferUsage=e;var o=function(){function o(o,a){this.array=null,this.type=o,(0,t.assert)(o===r.ARRAY_BUFFER||o===r.ELEMENT_ARRAY_BUFFER,62),this.usage=void 0!==a?a:e.STATIC_DRAW}return o.prototype.ofSize=function(r){this.array=new(a(this.type))(r)},o.prototype.fromArray=function(r){this.array=a(this.type).from(r)},o.prototype.fromArrayBuffer=function(r){this.array=new(a(this.type))(r)},o.prototype.getType=function(){return this.type},o.prototype.getArray=function(){return this.array},o.prototype.getUsage=function(){return this.usage},o.prototype.getSize=function(){return this.array?this.array.length:0},o}();function a(t){switch(t){case r.ARRAY_BUFFER:return Float32Array;case r.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}var s=o;exports.default=s;
},{"../webgl.js":"SCyv","../asserts.js":"fLG6"}],"HqWy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};exports.default=e;
},{}],"glXL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",r="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n",t=function(){function t(t){this.gl_=t.webGlContext;var i=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=i.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=i.createFramebuffer();var a=i.createShader(i.VERTEX_SHADER);i.shaderSource(a,t.vertexShader||e),i.compileShader(a);var n=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(n,t.fragmentShader||r),i.compileShader(n),this.renderTargetProgram_=i.createProgram(),i.attachShader(this.renderTargetProgram_,a),i.attachShader(this.renderTargetProgram_,n),i.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),i.STATIC_DRAW),this.renderTargetAttribLocation_=i.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=i.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=i.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(e){this.uniforms_.push({value:t.uniforms[e],location:i.getUniformLocation(this.renderTargetProgram_,e)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(e){var r=this.getGL(),t=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,t[0],t[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==t[0]||this.renderTargetTextureSize_[1]!==t[1]){this.renderTargetTextureSize_=t;var i=r.RGBA,a=r.RGBA,n=r.UNSIGNED_BYTE;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,0,i,t[0],t[1],0,a,n,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(e,r){var t=this.getGL(),i=e.size;t.bindFramebuffer(t.FRAMEBUFFER,r?r.getFrameBuffer():null),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.useProgram(this.renderTargetProgram_),t.enableVertexAttribArray(this.renderTargetAttribLocation_),t.vertexAttribPointer(this.renderTargetAttribLocation_,2,t.FLOAT,!1,0,0),t.uniform2f(this.renderTargetUniformLocation_,i[0],i[1]),t.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(e),t.drawArrays(t.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(e){var r,t=this.getGL(),i=1;this.uniforms_.forEach(function(a){if((r="function"==typeof a.value?a.value(e):a.value)instanceof HTMLCanvasElement||r instanceof ImageData)a.texture||(a.texture=t.createTexture()),t.activeTexture(t["TEXTURE"+i]),t.bindTexture(t.TEXTURE_2D,a.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(a.location,i++);else if(Array.isArray(r))switch(r.length){case 2:return void t.uniform2f(a.location,r[0],r[1]);case 3:return void t.uniform3f(a.location,r[0],r[1],r[2]);case 4:return void t.uniform4f(a.location,r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&t.uniform1f(a.location,r)})},t}(),i=t;exports.default=i;
},{}],"UkOi":[function(require,module,exports) {
"use strict";function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e,r){return e[0]=r[0],e[1]=r[1],e[4]=r[2],e[5]=r[3],e[12]=r[4],e[13]=r[5],e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.fromTransform=r;
},{}],"w1WE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeAttributesStride=m,exports.default=exports.AttributeType=exports.DefaultUniform=exports.ShaderType=void 0;var e=_(require("../webgl/ContextEventType.js")),t=_(require("../Disposable.js")),r=_(require("./PostProcessingPass.js")),o=require("../webgl.js"),a=require("../asserts.js"),i=require("../obj.js"),n=require("../transform.js"),s=require("../vec/mat4.js"),u=require("../util.js"),f=require("../array.js");function _(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),l={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};exports.ShaderType=l;var E={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"};exports.DefaultUniform=E;var h={UNSIGNED_BYTE:o.UNSIGNED_BYTE,UNSIGNED_SHORT:o.UNSIGNED_SHORT,UNSIGNED_INT:o.UNSIGNED_INT,FLOAT:o.FLOAT};exports.AttributeType=h;var p=function(t){function _(i){var u=t.call(this)||this,_=i||{};u.boundHandleWebGLContextLost_=u.handleWebGLContextLost.bind(u),u.boundHandleWebGLContextRestored_=u.handleWebGLContextRestored.bind(u),u.canvas_=document.createElement("canvas"),u.canvas_.style.position="absolute",u.canvas_.style.left="0",u.gl_=(0,o.getContext)(u.canvas_);var c=u.getGL();if(u.bufferCache_={},u.currentProgram_=null,(0,a.assert)((0,f.includes)((0,o.getSupportedExtensions)(),"OES_element_index_uint"),63),c.getExtension("OES_element_index_uint"),u.canvas_.addEventListener(e.default.LOST,u.boundHandleWebGLContextLost_),u.canvas_.addEventListener(e.default.RESTORED,u.boundHandleWebGLContextRestored_),u.offsetRotateMatrix_=(0,n.create)(),u.offsetScaleMatrix_=(0,n.create)(),u.tmpMat4_=(0,s.create)(),u.uniformLocations_={},u.attribLocations_={},u.uniforms_=[],_.uniforms)for(var l in _.uniforms)u.uniforms_.push({name:l,value:_.uniforms[l]});return u.postProcessPasses_=_.postProcesses?_.postProcesses.map(function(e){return new r.default({webGlContext:c,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})}):[new r.default({webGlContext:c})],u.shaderCompileErrors_=null,u.startTime_=Date.now(),u}return c(_,t),_.prototype.bindBuffer=function(e){var t=this.getGL(),r=(0,u.getUid)(e),o=this.bufferCache_[r];o||(o={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=o);t.bindBuffer(e.getType(),o.webGlBuffer)},_.prototype.flushBufferData=function(e){var t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())},_.prototype.deleteBuffer=function(e){var t=this.getGL(),r=(0,u.getUid)(e),o=this.bufferCache_[r];t.isContextLost()||t.deleteBuffer(o.buffer),delete this.bufferCache_[r]},_.prototype.disposeInternal=function(){this.canvas_.removeEventListener(e.default.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(e.default.RESTORED,this.boundHandleWebGLContextRestored_)},_.prototype.prepareDraw=function(e){var t=this.getGL(),r=this.getCanvas(),o=e.size,a=e.pixelRatio;r.width=o[0]*a,r.height=o[1]*a,r.style.width=o[0]+"px",r.style.height=o[1]+"px",t.useProgram(this.currentProgram_);for(var i=this.postProcessPasses_.length-1;i>=0;i--)this.postProcessPasses_[i].init(e);t.bindTexture(t.TEXTURE_2D,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},_.prototype.prepareDrawToRenderTarget=function(e,t,r){var o=this.getGL(),a=t.getSize();o.bindFramebuffer(o.FRAMEBUFFER,t.getFramebuffer()),o.viewport(0,0,a[0],a[1]),o.bindTexture(o.TEXTURE_2D,t.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},_.prototype.drawElements=function(e,t){var r=this.getGL(),o=r.UNSIGNED_INT,a=t-e,i=4*e;r.drawElements(r.TRIANGLES,a,o,i)},_.prototype.finalizeDraw=function(e){for(var t=0;t<this.postProcessPasses_.length;t++)this.postProcessPasses_[t].apply(e,this.postProcessPasses_[t+1]||null)},_.prototype.getCanvas=function(){return this.canvas_},_.prototype.getGL=function(){return this.gl_},_.prototype.applyFrameState=function(e){var t=e.size,r=e.viewState.rotation,o=(0,n.reset)(this.offsetScaleMatrix_);(0,n.scale)(o,2/t[0],2/t[1]);var a=(0,n.reset)(this.offsetRotateMatrix_);0!==r&&(0,n.rotate)(a,-r),this.setUniformMatrixValue(E.OFFSET_SCALE_MATRIX,(0,s.fromTransform)(this.tmpMat4_,o)),this.setUniformMatrixValue(E.OFFSET_ROTATION_MATRIX,(0,s.fromTransform)(this.tmpMat4_,a)),this.setUniformFloatValue(E.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(E.ZOOM,e.viewState.zoom),this.setUniformFloatValue(E.RESOLUTION,e.viewState.resolution)},_.prototype.applyUniforms=function(e){var t,r=this.getGL(),o=0;this.uniforms_.forEach(function(a){if((t="function"==typeof a.value?a.value(e):a.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)a.texture||(a.prevValue=void 0,a.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+o]),r.bindTexture(r.TEXTURE_2D,a.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(t instanceof HTMLImageElement)||t.complete)&&a.prevValue!==t&&(a.prevValue=t,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)),r.uniform1i(this.getUniformLocation(a.name),o++);else if(Array.isArray(t)&&6===t.length)this.setUniformMatrixValue(a.name,(0,s.fromTransform)(this.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void r.uniform2f(this.getUniformLocation(a.name),t[0],t[1]);case 3:return void r.uniform3f(this.getUniformLocation(a.name),t[0],t[1],t[2]);case 4:return void r.uniform4f(this.getUniformLocation(a.name),t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&r.uniform1f(this.getUniformLocation(a.name),t)}.bind(this))},_.prototype.useProgram=function(e){return e!=this.currentProgram_&&(this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},!0)},_.prototype.compileShader=function(e,t){var r=this.getGL(),o=r.createShader(t);return r.shaderSource(o,e),r.compileShader(o),o},_.prototype.getProgram=function(e,t){var r=this.getGL(),o=this.compileShader(e,r.FRAGMENT_SHADER),a=this.compileShader(t,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(o)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+r.getShaderInfoLog(o)),r.getShaderInfoLog(a)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+r.getShaderInfoLog(a));var i=r.createProgram();return r.attachShader(i,o),r.attachShader(i,a),r.linkProgram(i),i},_.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},_.prototype.getUniformLocation=function(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]},_.prototype.getAttributeLocation=function(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]},_.prototype.makeProjectionTransform=function(e,t){var r=e.size,o=e.viewState.rotation,a=e.viewState.resolution,i=e.viewState.center;return(0,n.reset)(t),(0,n.compose)(t,0,0,2/(a*r[0]),2/(a*r[1]),-o,-i[0],-i[1]),t},_.prototype.setUniformFloatValue=function(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)},_.prototype.setUniformMatrixValue=function(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)},_.prototype.enableAttributeArray_=function(e,t,r,o,a){var i=this.getAttributeLocation(e);i<0||(this.getGL().enableVertexAttribArray(i),this.getGL().vertexAttribPointer(i,t,r,!1,o,a))},_.prototype.enableAttributes=function(e){for(var t=m(e),r=0,a=0;a<e.length;a++){var i=e[a];this.enableAttributeArray_(i.name,i.size,i.type||o.FLOAT,t,r),r+=i.size*T(i.type)}},_.prototype.handleWebGLContextLost=function(){(0,i.clear)(this.bufferCache_),this.currentProgram_=null},_.prototype.handleWebGLContextRestored=function(){},_.prototype.createTexture=function(e,t,r){var o=this.getGL(),a=r||o.createTexture(),i=o.RGBA,n=o.RGBA,s=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,a),t?o.texImage2D(o.TEXTURE_2D,0,i,n,s,t):o.texImage2D(o.TEXTURE_2D,0,i,e[0],e[1],0,n,s,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),a},_}(t.default);function m(e){for(var t=0,r=0;r<e.length;r++){var o=e[r];t+=o.size*T(o.type)}return t}function T(e){switch(e){case h.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case h.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case h.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case h.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var d=p;exports.default=d;
},{"../webgl/ContextEventType.js":"HqWy","../Disposable.js":"DDda","./PostProcessingPass.js":"glXL","../webgl.js":"SCyv","../asserts.js":"fLG6","../obj.js":"mH6q","../transform.js":"P4eA","../vec/mat4.js":"UkOi","../util.js":"KniQ","../array.js":"luEr"}],"nUxs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.writePointFeatureToBuffers=p,exports.getBlankImageData=c,exports.colorEncodeId=l,exports.colorDecodeId=f,exports.default=exports.WebGLWorkerMessageType=void 0;var e=r(require("../Layer.js")),t=r(require("../../webgl/Helper.js"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n={GENERATE_BUFFERS:"GENERATE_BUFFERS"};exports.WebGLWorkerMessageType=n;var a=function(e){function r(r,o){var n=e.call(this,r)||this,a=o||{};return n.helper=new t.default({postProcesses:a.postProcesses,uniforms:a.uniforms}),n}return o(r,e),r.prototype.disposeInternal=function(){this.helper.dispose(),e.prototype.disposeInternal.call(this)},r.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},r}(e.default),s=[],i={vertexPosition:0,indexPosition:0};function u(e,t,r,o,n){e[t+0]=r,e[t+1]=o,e[t+2]=n}function p(e,t,r,o,n,a){var p=3+n,c=e[t+0],l=e[t+1],f=s;f.length=n;for(var d=0;d<f.length;d++)f[d]=e[t+2+d];var h=a?a.vertexPosition:0,v=a?a.indexPosition:0,x=h/p;return u(r,h,c,l,0),f.length&&r.set(f,h+3),u(r,h+=p,c,l,1),f.length&&r.set(f,h+3),u(r,h+=p,c,l,2),f.length&&r.set(f,h+3),u(r,h+=p,c,l,3),f.length&&r.set(f,h+3),h+=p,o[v++]=x,o[v++]=x+1,o[v++]=x+3,o[v++]=x+1,o[v++]=x+2,o[v++]=x+3,i.vertexPosition=h,i.indexPosition=v,i}function c(){var e=document.createElement("canvas").getContext("2d").createImageData(1,1);return e.data[0]=255,e.data[1]=255,e.data[2]=255,e.data[3]=255,e}function l(e,t){var r=t||[];return r[0]=Math.floor(e/256/256/256)/255,r[1]=Math.floor(e/256/256)%256/255,r[2]=Math.floor(e/256)%256/255,r[3]=e%256/255,r}function f(e){var t=0;return t+=Math.round(256*e[0]*256*256*255),t+=Math.round(256*e[1]*256*255),t+=Math.round(256*e[2]*255),t+=Math.round(255*e[3])}var d=a;exports.default=d;
},{"../Layer.js":"fpOz","../../webgl/Helper.js":"w1WE"}],"KkPv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=new Uint8Array(4),r=function(){function r(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return r.prototype.setSize=function(e){(0,t.equals)(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())},r.prototype.getSize=function(){return this.size_},r.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},r.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},r.prototype.readPixel=function(t,r){if(t<0||r<0||t>this.size_[0]||r>=this.size_[1])return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e;this.readAll();var i=Math.floor(t)+(this.size_[1]-Math.floor(r)-1)*this.size_[0];return e[0]=this.data_[4*i],e[1]=this.data_[4*i+1],e[2]=this.data_[4*i+2],e[3]=this.data_[4*i+3],e},r.prototype.getTexture=function(){return this.texture_},r.prototype.getFramebuffer=function(){return this.framebuffer_},r.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},r}(),i=r;exports.default=i;
},{"../array.js":"luEr"}],"z0A1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n;var e='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};',r=new Blob([e],{type:"application/javascript"}),t=URL.createObjectURL(r);function n(){return new Worker(t)}
},{}],"m8cI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=g(require("../../layer/BaseVector.js")),t=g(require("../../geom/GeometryType.js")),r=g(require("../../source/VectorEventType.js")),i=g(require("../../ViewHint.js")),n=g(require("../../webgl/Buffer.js")),s=y(require("./Layer.js")),o=g(require("../../webgl/RenderTarget.js")),a=require("../../webgl.js"),u=require("../../webgl/Helper.js"),h=require("../../transform.js"),f=require("../../asserts.js"),c=require("../../extent.js"),d=require("../../worker/webgl.js"),l=require("../../util.js"),_=require("../../events.js");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function g(e){return e&&e.__esModule?e:{default:e}}var m=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),b=function(p){function y(e,t){var i=this,f=t.uniforms||{},y=(0,h.create)();f[u.DefaultUniform.PROJECTION_MATRIX]=y,(i=p.call(this,e,{uniforms:f,postProcesses:t.postProcesses})||this).sourceRevision_=-1,i.verticesBuffer_=new n.default(a.ARRAY_BUFFER,a.DYNAMIC_DRAW),i.hitVerticesBuffer_=new n.default(a.ARRAY_BUFFER,a.DYNAMIC_DRAW),i.indicesBuffer_=new n.default(a.ELEMENT_ARRAY_BUFFER,a.DYNAMIC_DRAW),i.program_=i.helper.getProgram(t.fragmentShader,t.vertexShader),i.hitDetectionEnabled_=!(!t.hitFragmentShader||!t.hitVertexShader),i.hitProgram_=i.hitDetectionEnabled_&&i.helper.getProgram(t.hitFragmentShader,t.hitVertexShader);var g=t.attributes?t.attributes.map(function(e){return{name:"a_"+e.name,size:1,type:u.AttributeType.FLOAT}}):[];i.attributes=[{name:"a_position",size:2,type:u.AttributeType.FLOAT},{name:"a_index",size:1,type:u.AttributeType.FLOAT}].concat(g),i.hitDetectionAttributes=[{name:"a_position",size:2,type:u.AttributeType.FLOAT},{name:"a_index",size:1,type:u.AttributeType.FLOAT},{name:"a_hitColor",size:4,type:u.AttributeType.FLOAT},{name:"a_featureUid",size:1,type:u.AttributeType.FLOAT}].concat(g),i.customAttributes=t.attributes?t.attributes:[],i.previousExtent_=(0,c.createEmpty)(),i.currentTransform_=y,i.renderTransform_=(0,h.create)(),i.invertRenderTransform_=(0,h.create)(),i.renderInstructions_=new Float32Array(0),i.hitRenderInstructions_=new Float32Array(0),i.hitRenderTarget_=i.hitDetectionEnabled_&&new o.default(i.helper),i.worker_=(0,d.create)(),i.worker_.addEventListener("message",function(e){var t=e.data;if(t.type===s.WebGLWorkerMessageType.GENERATE_BUFFERS){var r=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,(0,h.makeInverse)(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):this.renderInstructions_=new Float32Array(e.data.renderInstructions),this.getLayer().changed()}}.bind(i)),i.featureCache_={},i.featureCount_=0;var m=i.getLayer().getSource();return i.sourceListenKeys_=[(0,_.listen)(m,r.default.ADDFEATURE,i.handleSourceFeatureAdded_,i),(0,_.listen)(m,r.default.CHANGEFEATURE,i.handleSourceFeatureChanged_,i),(0,_.listen)(m,r.default.REMOVEFEATURE,i.handleSourceFeatureDelete_,i),(0,_.listen)(m,r.default.CLEAR,i.handleSourceFeatureClear_,i)],m.forEachFeature(function(e){this.featureCache_[(0,l.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}.bind(i)),i}return m(y,p),y.prototype.handleSourceFeatureAdded_=function(e){var t=e.feature;this.featureCache_[(0,l.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++},y.prototype.handleSourceFeatureChanged_=function(e){var t=e.feature;this.featureCache_[(0,l.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}},y.prototype.handleSourceFeatureDelete_=function(e){var t=e.feature;delete this.featureCache_[(0,l.getUid)(t)],this.featureCount_--},y.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},y.prototype.renderFrame=function(e){var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t),this.helper.finalizeDraw(e);var r=this.helper.getCanvas(),i=e.layerStatesArray[e.layerIndex].opacity;return i!==parseFloat(r.style.opacity)&&(r.style.opacity=String(i)),this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),r},y.prototype.prepareFrame=function(t){var r=this.getLayer(),n=r.getSource(),s=t.viewState,o=!t.viewHints[i.default.ANIMATING]&&!t.viewHints[i.default.INTERACTING],a=!(0,c.equals)(this.previousExtent_,t.extent),u=this.sourceRevision_<n.getRevision();if(u&&(this.sourceRevision_=n.getRevision()),o&&(a||u)){var f=s.projection,d=s.resolution,l=r instanceof e.default?r.getRenderBuffer():0,_=(0,c.buffer)(t.extent,l*d);n.loadFeatures(_,d,f),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),(0,h.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},y.prototype.rebuildBuffers_=function(e){var r=(0,h.create)();this.helper.makeProjectionTransform(e,r);var i,n,o=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===o||(this.renderInstructions_=new Float32Array(o)),this.hitDetectionEnabled_){var a=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===a||(this.hitRenderInstructions_=new Float32Array(a))}var u,f=[],c=[],d=0,l=0;for(var _ in this.featureCache_)if((n=(i=this.featureCache_[_]).geometry)&&n.getType()===t.default.POINT){f[0]=n.getFlatCoordinates()[0],f[1]=n.getFlatCoordinates()[1],(0,h.apply)(r,f),u=(0,s.colorEncodeId)(l+6,c),this.renderInstructions_[d++]=f[0],this.renderInstructions_[d++]=f[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=f[0],this.hitRenderInstructions_[l++]=f[1],this.hitRenderInstructions_[l++]=u[0],this.hitRenderInstructions_[l++]=u[1],this.hitRenderInstructions_[l++]=u[2],this.hitRenderInstructions_[l++]=u[3],this.hitRenderInstructions_[l++]=Number(_));for(var p=void 0,y=0;y<this.customAttributes.length;y++)p=this.customAttributes[y].callback(i.feature,i.properties),this.renderInstructions_[d++]=p,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=p)}var g={type:s.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(g.projectionTransform=r,this.worker_.postMessage(g,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var m={type:s.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};m.projectionTransform=r,m.hitDetection=!0,this.worker_.postMessage(m,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},y.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){if((0,f.assert)(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=(0,h.apply)(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),u=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=(0,s.colorDecodeId)(u),d=this.hitRenderInstructions_[c],l=Math.floor(d).toString(),_=this.getLayer().getSource().getFeatureByUid(l);return _?i(_,this.getLayer()):void 0}},y.prototype.renderHitDetection=function(e){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}},y.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){(0,_.unlistenByKey)(e)}),this.sourceListenKeys_=null,p.prototype.disposeInternal.call(this)},y}(s.default),A=b;exports.default=A;
},{"../../layer/BaseVector.js":"pskK","../../geom/GeometryType.js":"lmV0","../../source/VectorEventType.js":"s8Fc","../../ViewHint.js":"cuLW","../../webgl/Buffer.js":"zsRd","./Layer.js":"nUxs","../../webgl/RenderTarget.js":"KkPv","../../webgl.js":"SCyv","../../webgl/Helper.js":"w1WE","../../transform.js":"P4eA","../../asserts.js":"fLG6","../../extent.js":"QDir","../../worker/webgl.js":"z0A1","../../util.js":"KniQ","../../events.js":"UqnM"}],"I4BI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Vector.js")),e=a(require("../renderer/webgl/PointsLayer.js")),n=require("../obj.js"),o=require("../math.js"),i=require("../dom.js"),r=require("../Object.js");function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},f=["#00f","#0ff","#0f0","#ff0","#f00"],l=function(t){function i(e){var o=this,i=e||{},a=(0,n.assign)({},i);delete a.gradient,delete a.radius,delete a.blur,delete a.weight,(o=t.call(this,a)||this).gradient_=null,o.addEventListener((0,r.getChangeEventType)(s.GRADIENT),o.handleGradientChanged_),o.setGradient(i.gradient?i.gradient:f),o.setBlur(void 0!==i.blur?i.blur:15),o.setRadius(void 0!==i.radius?i.radius:8);var u=i.weight?i.weight:"weight";return o.weightFunction_="string"==typeof u?function(t){return t.get(u)}:u,o.setRenderOrder(null),o}return u(i,t),i.prototype.getBlur=function(){return this.get(s.BLUR)},i.prototype.getGradient=function(){return this.get(s.GRADIENT)},i.prototype.getRadius=function(){return this.get(s.RADIUS)},i.prototype.handleGradientChanged_=function(){this.gradient_=d(this.getGradient())},i.prototype.setBlur=function(t){this.set(s.BLUR,t)},i.prototype.setGradient=function(t){this.set(s.GRADIENT,t)},i.prototype.setRadius=function(t){this.set(s.RADIUS,t)},i.prototype.createRenderer=function(){return new e.default(this,{attributes:[{name:"weight",callback:function(t){var e=this.weightFunction_(t);return void 0!==e?(0,o.clamp)(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(s.RADIUS)+this.get(s.BLUR))}.bind(this),u_blurSlope:function(){return this.get(s.RADIUS)/Math.max(1,this.get(s.BLUR))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},i}(t.default);function d(t){for(var e=(0,i.createCanvasContext2D)(1,256),n=e.createLinearGradient(0,0,1,256),o=1/(t.length-1),r=0,a=t.length;r<a;++r)n.addColorStop(r*o,t[r]);return e.fillStyle=n,e.fillRect(0,0,1,256),e.canvas}var _=l;exports.default=_;
},{"./Vector.js":"dflx","../renderer/webgl/PointsLayer.js":"m8cI","../obj.js":"mH6q","../math.js":"B96G","../dom.js":"Xno5","../Object.js":"PhPh"}],"ZHEI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Layer.js"));function r(t){return t&&t.__esModule?t:{default:t}}var e=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),o=function(t){function r(r){var e=r||{};return t.call(this,e)||this}return e(r,t),r}(t.default),n=o;exports.default=n;
},{"./Layer.js":"GCgv"}],"rzNj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Layer.js")),t=u(require("../../ViewHint.js")),r=require("../../reproj/common.js"),i=require("../../obj.js"),n=require("../../transform.js"),o=require("../../extent.js"),a=require("../../render/canvas.js"),s=require("../../proj.js");function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),c=function(e){function u(t){var r=e.call(this,t)||this;return r.image_=null,r}return h(u,e),u.prototype.getImage=function(){return this.image_?this.image_.getImage():null},u.prototype.prepareFrame=function(e){var i=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,a=e.viewState,u=a.resolution,h=this.getLayer().getSource(),c=e.viewHints,l=e.extent;if(void 0!==i.extent&&(l=(0,o.getIntersection)(l,(0,s.fromUserExtent)(i.extent,a.projection))),!c[t.default.ANIMATING]&&!c[t.default.INTERACTING]&&!(0,o.isEmpty)(l))if(h){var p=a.projection;if(!r.ENABLE_RASTER_REPROJECTION){var f=h.getProjection();f&&(p=f)}var g=h.getImage(l,u,n,p);g&&this.loadImage(g)&&(this.image_=g)}else this.image_=null;return!!this.image_},u.prototype.renderFrame=function(e,t){var r=this.image_,u=r.getExtent(),h=r.getResolution(),c=r.getPixelRatio(),l=e.layerStatesArray[e.layerIndex],p=e.pixelRatio,f=e.viewState,g=f.center,d=f.resolution,m=e.size,x=p*h/(d*c),v=Math.round(m[0]*p),y=Math.round(m[1]*p),_=f.rotation;if(_){var j=Math.round(Math.sqrt(v*v+y*y));v=j,y=j}(0,n.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/p,1/p,_,-v/2,-y/2),(0,n.makeInverse)(this.inversePixelTransform,this.pixelTransform);var I=(0,a.createTransformString)(this.pixelTransform);this.useContainer(t,I,l.opacity);var R=this.context,w=R.canvas;w.width!=v||w.height!=y?(w.width=v,w.height=y):this.containerReused||R.clearRect(0,0,v,y);var A=!1;if(l.extent){var E=(0,s.fromUserExtent)(l.extent,f.projection);(A=!(0,o.containsExtent)(E,e.extent)&&(0,o.intersects)(E,e.extent))&&this.clipUnrotated(R,e,E)}var M=r.getImage(),T=(0,n.compose)(this.tempTransform,v/2,y/2,x,x,0,c*(u[0]-g[0])/h,c*(g[1]-u[3])/h);this.renderedResolution=h*p/c;var q=T[4],O=T[5],S=M.width*T[0],b=M.height*T[3];if((0,i.assign)(R,this.getLayer().getSource().getContextOptions()),this.preRender(R,e),S>=.5&&b>=.5){var P=l.opacity,N=void 0;1!==P&&(N=this.context.globalAlpha,this.context.globalAlpha=P),this.context.drawImage(M,0,0,+M.width,+M.height,Math.round(q),Math.round(O),Math.round(S),Math.round(b)),1!==P&&(this.context.globalAlpha=N)}return this.postRender(R,e),A&&R.restore(),I!==w.style.transform&&(w.style.transform=I),this.container},u}(e.default),l=c;exports.default=l;
},{"./Layer.js":"vPfl","../../ViewHint.js":"cuLW","../../reproj/common.js":"fF5X","../../obj.js":"mH6q","../../transform.js":"P4eA","../../extent.js":"QDir","../../render/canvas.js":"iAG7","../../proj.js":"Diht"}],"KHBf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseImage.js")),t=r(require("../renderer/canvas/ImageLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.createRenderer=function(){return new t.default(this)},r}(e.default),u=o;exports.default=u;
},{"./BaseImage.js":"ZHEI","../renderer/canvas/ImageLayer.js":"rzNj"}],"UzHN":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,r=1/e,s=12,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(t,i,e){var r,s,n=e.buf;if(r=(112&(s=n[e.pos++]))>>4,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<3,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<10,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<17,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<24,s<128)return a(t,r,i);if(r|=(1&(s=n[e.pos++]))<<31,s<128)return a(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function h(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function u(t,i){var e,r;if(t>=0?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),f(e,r,i),d(r,i)}function f(t,i,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}function d(t,i){var e=(7&t)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t)))))}function p(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));e.realloc(r);for(var s=e.pos-1;s>=t;s--)e.buf[s+r]=e.buf[s]}function l(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function c(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function w(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function F(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function g(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function b(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function x(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function v(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function y(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function V(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function S(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function B(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function k(t,i,e){for(var r="",s=i;s<e;){var n,o,h,a=t[s],u=null,f=a>239?4:a>223?3:a>191?2:1;if(s+f>e)break;1===f?a<128&&(u=a):2===f?128==(192&(n=t[s+1]))&&(u=(31&a)<<6|63&n)<=127&&(u=null):3===f?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((u=(15&a)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===f&&(n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&((u=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,f=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),s+=f}return r}function M(t,i,e){return n.decode(t.subarray(i,e))}function P(t,i,e){for(var r,s,n=0;n<i.length;n++){if((r=i.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=63&r|128)}return e}i.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,i,this),this.pos===n&&this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=V(this.buf,this.pos)+V(this.buf,this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=V(this.buf,this.pos)+B(this.buf,this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var i=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(t){var i,e,r=this.buf;return i=127&(e=r[this.pos++]),e<128?i:(i|=(127&(e=r[this.pos++]))<<7,e<128?i:(i|=(127&(e=r[this.pos++]))<<14,e<128?i:(i|=(127&(e=r[this.pos++]))<<21,e<128?i:o(i|=(15&(e=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=s&&n?M(this.buf,i,t):k(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=h(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?u(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var i=this.pos;this.pos=P(this.buf,t,this.pos);var e=this.pos-i;e>=128&&p(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),t.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),t.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var r=this.pos-e;r>=128&&p(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,l,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,c,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,g,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,w,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,F,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,b,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,x,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,v,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,y,i)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
},{"ieee754":"jJYq"}],"IFOM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("../geom/GeometryType.js")),e=require("../transform.js"),r=require("../extent.js"),i=require("../array.js"),o=require("../geom/flat/interiorpoint.js"),n=require("../proj.js"),s=require("../geom/flat/interpolate.js"),a=require("../geom/flat/center.js"),p=require("../geom/flat/transform.js");function f(t){return t&&t.__esModule?t:{default:t}}var l=(0,e.create)(),d=function(){function f(t,e,r,i,o){this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i}return f.prototype.get=function(t){return this.properties_[t]},f.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===t.default.POINT?(0,r.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,r.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},f.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=(0,r.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,o.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},f.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=(0,a.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,o.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},f.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,s.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},f.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,o=0,n=r.length;o<n;++o){var a=r[o],p=(0,s.interpolatePoint)(t,e,a,2,.5);(0,i.extend)(this.flatMidpoints_,p),e=a}}return this.flatMidpoints_},f.prototype.getId=function(){return this.id_},f.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},f.prototype.getGeometry=function(){return this},f.prototype.getSimplifiedGeometry=function(t){return this},f.prototype.simplifyTransformed=function(t,e){return this},f.prototype.getProperties=function(){return this.properties_},f.prototype.getStride=function(){return 2},f.prototype.getStyleFunction=function(){},f.prototype.getType=function(){return this.type_},f.prototype.transform=function(t,i){var o=(t=(0,n.get)(t)).getExtent(),s=t.getWorldExtent(),a=(0,r.getHeight)(s)/(0,r.getHeight)(o);(0,e.compose)(l,s[0],s[3],a,-a,0,0,0),(0,p.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,l,this.flatCoordinates_)},f.prototype.getEnds=function(){return this.ends_},f}();d.prototype.getEndss=d.prototype.getEnds,d.prototype.getFlatCoordinates=d.prototype.getOrientedFlatCoordinates;var u=d;exports.default=u;
},{"../geom/GeometryType.js":"lmV0","../transform.js":"P4eA","../extent.js":"QDir","../array.js":"luEr","../geom/flat/interiorpoint.js":"UDvN","../proj.js":"Diht","../geom/flat/interpolate.js":"rDTq","../geom/flat/center.js":"VjQP","../geom/flat/transform.js":"LGwr"}],"bjcz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=m(require("./Feature.js")),r=v(require("./FormatType.js")),t=v(require("../geom/GeometryLayout.js")),a=v(require("../geom/GeometryType.js")),n=v(require("../geom/LineString.js")),o=v(require("../geom/MultiLineString.js")),i=v(require("../geom/MultiPoint.js")),u=v(require("../geom/MultiPolygon.js")),s=v(require("pbf")),l=v(require("../geom/Point.js")),f=v(require("../geom/Polygon.js")),d=v(require("../proj/Projection.js")),p=v(require("../render/Feature.js")),y=v(require("../proj/Units.js")),c=require("../asserts.js"),_=require("../proj.js"),h=require("../geom/flat/orient.js");function v(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}var j=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function a(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),P=function(v){function g(e){var r=v.call(this)||this,t=e||{};return r.dataProjection=new d.default({code:"",units:y.default.TILE_PIXELS}),r.featureClass_=t.featureClass?t.featureClass:p.default,r.geometryName_=t.geometryName,r.layerName_=t.layerName?t.layerName:"layer",r.layers_=t.layers?t.layers:null,r.idProperty_=t.idProperty,r}return j(g,v),g.prototype.readRawGeometry_=function(e,r,t,a){e.pos=r.geometry;for(var n=e.readVarint()+e.pos,o=1,i=0,u=0,s=0,l=0,f=0;e.pos<n;){if(!i){var d=e.readVarint();o=7&d,i=d>>3}i--,1===o||2===o?(u+=e.readSVarint(),s+=e.readSVarint(),1===o&&l>f&&(a.push(l),f=l),t.push(u,s),l+=2):7===o?l>f&&(t.push(t[f],t[f+1]),l+=2):(0,c.assert)(!1,59)}l>f&&(a.push(l),f=l)},g.prototype.createFeature_=function(r,s,d){var y,c=s.type;if(0===c)return null;var _,v=s.properties;this.idProperty_?(_=v[this.idProperty_],delete v[this.idProperty_]):_=s.id,v[this.layerName_]=s.layer.name;var g=[],m=[];this.readRawGeometry_(r,s,g,m);var j=V(c,m.length);if(this.featureClass_===p.default)(y=new this.featureClass_(j,g,m,v,_)).transform(d.dataProjection,d.featureProjection);else{var P=void 0;if(j==a.default.POLYGON){for(var O=[],N=0,w=0,I=0,q=m.length;I<q;++I){var L=m[I];if((0,h.linearRingIsClockwise)(g,N,L,2)){if(0===O.length)continue;O[O.length-1].push(m[w])}else O.push(m.slice(w,I+1));w=I+1,N=L}P=O.length>1?new u.default(g,t.default.XY,O):new f.default(g,t.default.XY,m)}else P=j===a.default.POINT?new l.default(g,t.default.XY):j===a.default.LINE_STRING?new n.default(g,t.default.XY):j===a.default.POLYGON?new f.default(g,t.default.XY,m):j===a.default.MULTI_POINT?new i.default(g,t.default.XY):j===a.default.MULTI_LINE_STRING?new o.default(g,t.default.XY,m):null;y=new(0,this.featureClass_),this.geometryName_&&y.setGeometryName(this.geometryName_);var T=(0,e.transformGeometryWithOptions)(P,!1,d);y.setGeometry(T),y.setId(_),y.setProperties(v,!0)}return y},g.prototype.getType=function(){return r.default.ARRAY_BUFFER},g.prototype.readFeatures=function(e,r){var t=this.layers_,a=this.adaptOptions(r),n=(0,_.get)(a.dataProjection);n.setWorldExtent(a.extent),a.dataProjection=n;var o=new s.default(e),i=o.readFields(O,{}),u=[];for(var l in i)if(!t||-1!=t.indexOf(l)){var f=i[l],d=f?[0,0,f.extent,f.extent]:null;n.setExtent(d);for(var p=0,y=f.length;p<y;++p){var c=I(o,f,p);u.push(this.createFeature_(o,c,a))}}return u},g.prototype.readProjection=function(e){return this.dataProjection},g.prototype.setLayers=function(e){this.layers_=e},g}(e.default);function O(e,r,t){if(3===e){var a={keys:[],values:[],features:[]},n=t.readVarint()+t.pos;t.readFields(N,a,n),a.length=a.features.length,a.length&&(r[a.name]=a)}}function N(e,r,t){if(15===e)r.version=t.readVarint();else if(1===e)r.name=t.readString();else if(5===e)r.extent=t.readVarint();else if(2===e)r.features.push(t.pos);else if(3===e)r.keys.push(t.readString());else if(4===e){for(var a=null,n=t.readVarint()+t.pos;t.pos<n;)a=1===(e=t.readVarint()>>3)?t.readString():2===e?t.readFloat():3===e?t.readDouble():4===e?t.readVarint64():5===e?t.readVarint():6===e?t.readSVarint():7===e?t.readBoolean():null;r.values.push(a)}}function w(e,r,t){if(1==e)r.id=t.readVarint();else if(2==e)for(var a=t.readVarint()+t.pos;t.pos<a;){var n=r.layer.keys[t.readVarint()],o=r.layer.values[t.readVarint()];r.properties[n]=o}else 3==e?r.type=t.readVarint():4==e&&(r.geometry=t.pos)}function I(e,r,t){e.pos=r.features[t];var a=e.readVarint()+e.pos,n={layer:r,type:0,properties:{}};return e.readFields(w,n,a),n}function V(e,r){var t;return 1===e?t=1===r?a.default.POINT:a.default.MULTI_POINT:2===e?t=1===r?a.default.LINE_STRING:a.default.MULTI_LINE_STRING:3===e&&(t=a.default.POLYGON),t}var q=P;exports.default=q;
},{"./Feature.js":"Kylu","./FormatType.js":"AbO3","../geom/GeometryLayout.js":"Utvi","../geom/GeometryType.js":"lmV0","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","pbf":"UzHN","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","../proj/Projection.js":"WUar","../render/Feature.js":"IFOM","../proj/Units.js":"yZx6","../asserts.js":"fLG6","../proj.js":"Diht","../geom/flat/orient.js":"cJkE"}],"Q2C4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};exports.default=e;
},{}],"UST7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=R(require("../../render/canvas/BuilderGroup.js")),t=y(require("../../render/canvas/ExecutorGroup.js")),r=R(require("./TileLayer.js")),i=R(require("../../events/EventType.js")),n=R(require("../../render/canvas/BuilderType.js")),o=R(require("../../TileState.js")),a=R(require("../../layer/VectorTileRenderType.js")),d=R(require("../../ViewHint.js")),l=require("../../transform.js"),u=require("../../extent.js"),s=require("../../obj.js"),g=require("../../render/canvas/hitdetect.js"),c=require("../vector.js"),f=require("../../util.js"),p=require("../../events.js"),h=require("../../size.js"),T=require("../../coordinate.js");function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function R(e){return e&&e.__esModule?e:{default:e}}var _=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),m={image:[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT],hybrid:[n.default.POLYGON,n.default.LINE_STRING],vector:[]},C={image:[n.default.DEFAULT],hybrid:[n.default.IMAGE,n.default.TEXT,n.default.DEFAULT],vector:[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT,n.default.DEFAULT]},I=function(r){function n(e){var t=r.call(this,e)||this;return t.boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(t),t.dirty_=!1,t.renderedLayerRevision_,t.renderedPixelToCoordinateTransform_=null,t.renderedRotation_,t.renderTileImageQueue_={},t.tileListenerKeys_={},t.tmpTransform_=(0,l.create)(),t}return _(n,r),n.prototype.prepareTile=function(e,t,r,i){var n,a=(0,f.getUid)(e),d=e.getState();return(d===o.default.LOADED&&e.hifi||d===o.default.ERROR)&&a in this.tileListenerKeys_&&((0,p.unlistenByKey)(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),d!==o.default.LOADED&&d!==o.default.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e,t,r)&&(n=!0,i&&(this.renderTileImageQueue_[a]=e))),n},n.prototype.getTile=function(e,t,n,l){var u=l.pixelRatio,s=l.viewState,g=s.resolution,c=s.projection,h=this.getLayer(),T=h.getSource().getTile(e,t,n,u,c);if(T.getState()<o.default.LOADED){T.wantedResolution=g;var v=(0,f.getUid)(T);if(!(v in this.tileListenerKeys_)){var y=(0,p.listen)(T,i.default.CHANGE,this.prepareTile.bind(this,T,u,c,!0));this.tileListenerKeys_[v]=y}}else{var R=l.viewHints;!!(R[d.default.ANIMATING]||R[d.default.INTERACTING])&&T.wantedResolution||(T.wantedResolution=g),this.prepareTile(T,u,c,!1)&&h.getRenderMode()!==a.default.VECTOR&&this.renderTileImage_(T,l)}return r.prototype.getTile.call(this,e,t,n,l)},n.prototype.isDrawableTile=function(e){var t=this.getLayer();return r.prototype.isDrawableTile.call(this,e)&&(t.getRenderMode()===a.default.VECTOR?(0,f.getUid)(t)in e.executorGroups:e.hasContext(t))},n.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},n.prototype.prepareFrame=function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!=t&&(this.renderedTiles.length=0),this.renderedLayerRevision_=t,r.prototype.prepareFrame.call(this,e)},n.prototype.updateExecutorGroup_=function(r,i,n){var d=this.getLayer(),l=d.getRevision(),s=d.getRenderOrder()||null,g=r.wantedResolution,p=r.getReplayState(d);if(p.dirty||p.renderedResolution!==g||p.renderedRevision!=l||p.renderedRenderOrder!=s||p.renderedZ!==r.sourceZ){var h=d.getSource(),T=h.getTileGrid(),v=h.getTileGridForProjection(n).getTileCoordExtent(r.wrappedTileCoord),y=h.getSourceTiles(i,n,r),R=(0,f.getUid)(d);delete r.hitDetectionImageData[R],r.executorGroups[R]=[];for(var _=function(n,l){var f=y[n];if(f.getState()!=o.default.LOADED)return"continue";var _=f.tileCoord,C=T.getTileCoordExtent(_),I=(0,u.getIntersection)(v,C),E=(0,u.equals)(C,I)?null:(0,u.buffer)(I,d.getRenderBuffer()*g,m.tmpExtent);p.dirty=!1;var x=new e.default(0,I,g,i,d.getDeclutter()),S=(0,c.getSquaredTolerance)(g,i),w=function(e){var t,r=e.getStyleFunction()||d.getStyleFunction();if(r&&(t=r(e,g)),t){var i=this.renderFeature(e,S,t,x);this.dirty_=this.dirty_||i,p.dirty=p.dirty||i}},L=f.getFeatures();s&&s!==p.renderedRenderOrder&&L.sort(s);for(var j=0,O=L.length;j<O;++j){var D=L[j];E&&!(0,u.intersects)(E,D.getGeometry().getExtent())||w.call(m,D)}var G=x.finish(),A=d.getRenderMode()!==a.default.VECTOR&&d.getDeclutter()&&1===y.length?null:I,F=new t.default(A,g,i,h.getOverlaps(),G,d.getRenderBuffer());r.executorGroups[R].push(F)},m=this,C=0,I=y.length;C<I;++C)_(C);p.renderedRevision=l,p.renderedZ=r.sourceZ,p.renderedRenderOrder=s,p.renderedResolution=g}},n.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){var o=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var d,l,s,g=this.getLayer(),c=g.getDeclutter(),p=g.getSource().getTileGridForProjection(t.viewState.projection),h={},T=this.renderedTiles,v=function(){var t=T[l],s=p.getTileCoordExtent(t.wrappedTileCoord),v=(0,u.containsCoordinate)(s,e);if(!c&&!v)return"continue";for(var y=t.executorGroups[(0,f.getUid)(g)],R=0,_=y.length;R<_;++R){var m=y[R];d=d||m.forEachFeatureAtCoordinate(e,o,a,r,function(e){if(v||n&&-1!==n.indexOf(e)){var t=e.getId();if(void 0===t&&(t=(0,f.getUid)(e)),!(t in h))return h[t]=!0,i(e,g)}},g.getDeclutter()?n:null)}};for(l=0,s=T.length;l<s;++l)v();return d},n.prototype.getFeatures=function(e){return new Promise(function(t,r){for(var i,n=this.getLayer(),a=(0,f.getUid)(n),d=n.getSource(),s=this.renderedProjection,c=s.getExtent(),p=this.renderedResolution,v=d.getTileGridForProjection(s),y=(0,l.apply)(this.renderedPixelToCoordinateTransform_,e.slice()),R=v.getTileCoordForCoordAndResolution(y,p),_=0,m=this.renderedTiles.length;_<m;++_)if(R.toString()===this.renderedTiles[_].tileCoord.toString()){if((i=this.renderedTiles[_]).getState()===o.default.LOADED&&i.hifi){var C=v.getTileCoordExtent(i.tileCoord);d.getWrapX()&&s.canWrapX()&&!(0,u.containsExtent)(c,C)&&(0,T.wrapX)(y,s);break}i=void 0}if(!i||i.loadingSourceTiles>0)t([]);else{var I=v.getTileCoordExtent(i.wrappedTileCoord),E=(0,u.getTopLeft)(I),x=[(y[0]-E[0])/p,(E[1]-y[1])/p],S=i.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),w=i.hitDetectionImageData[a];if(!w&&!this.animatingOrInteracting_){var L=(0,h.toSize)(v.getTileSize(v.getZForResolution(p))),j=[L[0]/2,L[1]/2],O=this.renderedRotation_,D=[this.getRenderTransform(v.getTileCoordCenter(i.wrappedTileCoord),p,0,.5,j[0],j[1],0)];w=(0,g.createHitDetectionImageData)(L,D,S,n.getStyleFunction(),v.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(n).renderedResolution,O),i.hitDetectionImageData[a]=w}t((0,g.hitDetect)(x,S,w))}}.bind(this))},n.prototype.handleFontsChanged=function(){(0,s.clear)(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},n.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},n.prototype.renderFrame=function(e,i){var n=e.viewHints,o=!(n[d.default.ANIMATING]||n[d.default.INTERACTING]);this.renderQueuedTileImages_(o,e),r.prototype.renderFrame.call(this,e,i),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var u=this.getLayer(),s=u.getRenderMode();if(s===a.default.IMAGE)return this.container;var g=u.getSource(),c=e.usedTiles[(0,f.getUid)(g)];for(var p in this.renderTileImageQueue_)c&&p in c||delete this.renderTileImageQueue_[p];for(var h=this.context,T=u.getDeclutter()?{}:null,v=C[s],y=e.pixelRatio,R=e.viewState,_=R.center,m=R.resolution,I=R.rotation,E=e.size,x=Math.round(E[0]*y),S=Math.round(E[1]*y),w=this.renderedTiles,L=g.getTileGridForProjection(e.viewState.projection),j=[],O=[],D=w.length-1;D>=0;--D)for(var G=w[D],A=G.tileCoord,F=L.getTileCoordExtent(G.wrappedTileCoord),b=L.getTileCoordExtent(A,this.tmpExtent)[0]-F[0],P=(0,l.multiply)((0,l.scale)(this.inversePixelTransform.slice(),1/y,1/y),this.getRenderTransform(_,m,I,y,x,S,b)),N=G.executorGroups[(0,f.getUid)(u)],q=!1,M=0,U=N.length;M<U;++M){var Q=N[M];if(Q.hasExecutors(v)){var Z=G.tileCoord[0],H=void 0;if(!T&&!q){H=Q.getClipCoords(P),h.save();for(var K=0,V=j.length;K<V;++K){var X=j[K];Z<O[K]&&(h.beginPath(),h.moveTo(H[0],H[1]),h.lineTo(H[2],H[3]),h.lineTo(H[4],H[5]),h.lineTo(H[6],H[7]),h.moveTo(X[6],X[7]),h.lineTo(X[4],X[5]),h.lineTo(X[2],X[3]),h.lineTo(X[0],X[1]),h.clip())}}Q.execute(h,1,P,I,o,v,T),T||q||(h.restore(),j.push(H),O.push(Z),q=!0)}}if(T){var z=e.layerStatesArray[e.layerIndex];(0,t.replayDeclutter)(T,h,I,z.opacity,o,e.declutterItems)}return this.container},n.prototype.renderQueuedTileImages_=function(e,t){for(var r in this.renderTileImageQueue_){if(!e&&Date.now()-t.time>8){t.animate=!0;break}var i=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(i,t)}},n.prototype.renderFeature=function(e,t,r,i){if(!r)return!1;var n=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)n=(0,c.renderFeature)(i,e,r[o],t,this.boundHandleStyleImageChange_)||n;else n=(0,c.renderFeature)(i,e,r,t,this.boundHandleStyleImageChange_);return n},n.prototype.tileImageNeedsRender_=function(e,t,r){var i=this.getLayer(),n=e.getReplayState(i),o=i.getRevision(),a=e.sourceZ,d=e.wantedResolution;return n.renderedTileResolution!==d||n.renderedTileRevision!==o||n.renderedTileZ!==a},n.prototype.renderTileImage_=function(e,t){var r=this.getLayer(),i=e.getReplayState(r),n=r.getRevision(),o=e.executorGroups[(0,f.getUid)(r)];i.renderedTileRevision=n,i.renderedTileZ=e.sourceZ;var a=e.wrappedTileCoord,d=a[0],u=r.getSource(),s=t.pixelRatio,g=t.viewState.projection,c=u.getTileGridForProjection(g),p=c.getResolution(e.tileCoord[0]),h=t.pixelRatio/e.wantedResolution*p,T=c.getResolution(d),v=e.getContext(r);s=Math.max(s,h/s);var y=u.getTilePixelSize(d,s,g);v.canvas.width=y[0],v.canvas.height=y[1];var R=s/h;if(1!==R){var _=(0,l.reset)(this.tmpTransform_);(0,l.scale)(_,R,R),v.setTransform.apply(v,_)}var C=c.getTileCoordExtent(a,this.tmpExtent),I=h/T,E=(0,l.reset)(this.tmpTransform_);(0,l.scale)(E,I,-I),(0,l.translate)(E,-C[0],-C[3]);for(var x=0,S=o.length;x<S;++x){o[x].execute(v,R,E,0,!0,m[r.getRenderMode()])}i.renderedTileResolution=e.wantedResolution},n}(r.default),E=I;exports.default=E;
},{"../../render/canvas/BuilderGroup.js":"vqHd","../../render/canvas/ExecutorGroup.js":"ngEc","./TileLayer.js":"hkMV","../../events/EventType.js":"C8cu","../../render/canvas/BuilderType.js":"irm1","../../TileState.js":"u3kG","../../layer/VectorTileRenderType.js":"Q2C4","../../ViewHint.js":"cuLW","../../transform.js":"P4eA","../../extent.js":"QDir","../../obj.js":"mH6q","../../render/canvas/hitdetect.js":"MrCe","../vector.js":"UCah","../../util.js":"KniQ","../../events.js":"UqnM","../../size.js":"TAHd","../../coordinate.js":"nGsj"}],"zOJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./BaseVector.js")),t=u(require("../renderer/canvas/VectorTileLayer.js")),r=u(require("./TileProperty.js")),o=u(require("./VectorTileRenderType.js")),n=require("../asserts.js"),s=require("../obj.js");function u(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function u(t){var r=this,u=t||{},i=(0,s.assign)({},u);delete i.preload,delete i.useInterimTilesOnError,r=e.call(this,i)||this;var a=u.renderMode||o.default.HYBRID;return(0,n.assert)(null==a||a==o.default.IMAGE||a==o.default.HYBRID||a==o.default.VECTOR,28),r.renderMode_=a,r.setPreload(u.preload?u.preload:0),r.setUseInterimTilesOnError(void 0===u.useInterimTilesOnError||u.useInterimTilesOnError),r}return i(u,e),u.prototype.createRenderer=function(){return new t.default(this)},u.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},u.prototype.getRenderMode=function(){return this.renderMode_},u.prototype.getPreload=function(){return this.get(r.default.PRELOAD)},u.prototype.getUseInterimTilesOnError=function(){return this.get(r.default.USE_INTERIM_TILES_ON_ERROR)},u.prototype.setPreload=function(e){this.set(r.default.PRELOAD,e)},u.prototype.setUseInterimTilesOnError=function(e){this.set(r.default.USE_INTERIM_TILES_ON_ERROR,e)},u}(e.default),l=a;exports.default=l;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorTileLayer.js":"UST7","./TileProperty.js":"M5pz","./VectorTileRenderType.js":"Q2C4","../asserts.js":"fLG6","../obj.js":"mH6q"}],"yj80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Tile.js")),e=o(require("./TileState.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=function(t){function o(e,o,r,n,u,i){var s=t.call(this,e,o,i)||this;return s.extent=null,s.format_=n,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=u,s.url_=r,s}return r(o,t),o.prototype.getFormat=function(){return this.format_},o.prototype.getFeatures=function(){return this.features_},o.prototype.getKey=function(){return this.url_},o.prototype.load=function(){this.state==e.default.IDLE&&(this.setState(e.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},o.prototype.onLoad=function(t,e){this.setFeatures(t)},o.prototype.onError=function(){this.setState(e.default.ERROR)},o.prototype.setFeatures=function(t){this.features_=t,this.setState(e.default.LOADED)},o.prototype.setLoader=function(t){this.loader_=t},o}(t.default),u=n;exports.default=u;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG"}],"C8Du":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Tile.js")),t=require("./dom.js"),r=require("./util.js");function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=[],u=function(e){function o(t,r,o,n){var i=e.call(this,t,r,{transition:0})||this;return i.context_={},i.executorGroups={},i.loadingSourceTiles=0,i.errorSourceTileKeys={},i.hitDetectionImageData={},i.replayState_={},i.sourceTiles=null,i.wantedResolution,i.getSourceTiles=n.bind(void 0,i),i.sourceZ=-1,i.hifi=!1,i.wrappedTileCoord=o,i}return n(o,e),o.prototype.getContext=function(e){var o=(0,r.getUid)(e);return o in this.context_||(this.context_[o]=(0,t.createCanvasContext2D)(1,1,i)),this.context_[o]},o.prototype.hasContext=function(e){return(0,r.getUid)(e)in this.context_},o.prototype.getImage=function(e){return this.hasContext(e)?this.getContext(e).canvas:null},o.prototype.getReplayState=function(e){var t=(0,r.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[t]},o.prototype.load=function(){this.getSourceTiles()},o.prototype.release=function(){for(var t in this.context_)i.push(this.context_[t].canvas);e.prototype.release.call(this)},o}(e.default),s=u;exports.default=s;
},{"./Tile.js":"IWZI","./dom.js":"Xno5","./util.js":"KniQ"}],"A6uo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultLoadFunction=v,exports.default=void 0;var e=f(require("../events/EventType.js")),t=f(require("../VectorTile.js")),i=f(require("../TileCache.js")),r=f(require("../TileState.js")),o=f(require("./UrlTile.js")),n=f(require("../VectorRenderTile.js")),l=require("../extent.js"),a=require("../tilegrid.js"),s=require("../array.js"),u=require("../tilecoord.js"),c=require("../featureloader.js"),d=require("../size.js");function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=function(o){function c(e){var r=this,n=e.projection||"EPSG:3857",l=e.extent||(0,a.extentFromProjection)(n),s=e.tileGrid||(0,a.createXYZ)({extent:l,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=o.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:v,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileCache=new i.default(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:t.default,r.tileGrids_={},r}return h(c,o),c.prototype.getFeaturesInExtent=function(e){var t=[],i=this.tileCache;if(0===i.getCount())return t;var o=(0,u.fromKey)(i.peekFirstKey())[0],n=this.tileGrid;return i.forEach(function(i){if(i.tileCoord[0]===o&&i.getState()===r.default.LOADED)for(var a=i.getSourceTiles(),s=0,u=a.length;s<u;++s){var c=a[s],d=c.tileCoord;if((0,l.intersects)(e,n.getTileCoordExtent(d))){var f=c.getFeatures();if(f)for(var h=0,p=f.length;h<p;++h){var g=f[h],v=g.getGeometry();(0,l.intersects)(e,v.getExtent())&&t.push(g)}}}}),t},c.prototype.getOverlaps=function(){return this.overlaps_},c.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},c.prototype.expireCache=function(e,t){o.prototype.expireCache.call(this,e,t),this.sourceTileCache.expireCache({})},c.prototype.getSourceTiles=function(t,i,o){var n=o.wrappedTileCoord,a=this.getTileGridForProjection(i),u=a.getTileCoordExtent(n),c=n[0],d=a.getResolution(c);(0,l.buffer)(u,-d,u);var f=this.tileGrid,h=f.getExtent();h&&(0,l.getIntersection)(u,h,u);var p,g,v,T=f.getZForResolution(d,1),C=f.getMinZoom(),E=o.sourceTiles;if(E&&E.length>0&&E[0].tileCoord[0]===T)p=E,g=!0,v=T;else{p=[],v=T+1;do{--v,g=!0,f.forEachTileCoord(u,v,function(n){var l,a=this.tileUrlFunction(n,t,i);if(void 0!==a)if(this.sourceTileCache.containsKey(a)){var s=(l=this.sourceTileCache.get(a)).getState();if(s===r.default.LOADED||s===r.default.ERROR||s===r.default.EMPTY)return void p.push(l)}else v===T&&((l=new this.tileClass(n,r.default.IDLE,a,this.format_,this.tileLoadFunction)).extent=f.getTileCoordExtent(n),l.projection=i,l.resolution=f.getResolution(n[0]),this.sourceTileCache.set(a,l),l.addEventListener(e.default.CHANGE,this.handleTileChange.bind(this)),l.load());g=g&&l&&l.getState()===r.default.LOADED,l&&l.getState()!==r.default.EMPTY&&o.getState()===r.default.IDLE&&(o.loadingSourceTiles++,l.addEventListener(e.default.CHANGE,function t(){var i=l.getState(),n=l.getKey();if(i===r.default.LOADED||i===r.default.ERROR){i===r.default.LOADED?(l.removeEventListener(e.default.CHANGE,t),o.loadingSourceTiles--,delete o.errorSourceTileKeys[n]):i===r.default.ERROR&&(o.errorSourceTileKeys[n]=!0);var a=Object.keys(o.errorSourceTileKeys).length;o.loadingSourceTiles-a==0&&(o.hifi=0===a,o.sourceZ=T,o.setState(r.default.LOADED))}}))}.bind(this)),g||(p.length=0)}while(!g&&v>C)}return o.getState()===r.default.IDLE&&o.setState(r.default.LOADING),g&&(o.hifi=T===v,o.sourceZ=v,o.getState()<r.default.LOADED?o.setState(r.default.LOADED):E&&(0,s.equals)(p,E)||(o.sourceTiles=p)),p},c.prototype.getTile=function(e,t,i,o,a){var s,c=(0,u.getKeyZXY)(e,t,i),d=this.getKey();if(this.tileCache.containsKey(c)&&(s=this.tileCache.get(c)).key===d)return s;var f=[e,t,i],h=this.getTileCoordForTileUrlFunction(f,a),p=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(a);if(h&&p){var v=g.getTileCoordExtent(h);(0,l.buffer)(v,-g.getResolution(e),v),(0,l.intersects)(p,v)||(h=null)}var T=!0;if(null!==h){var C=this.tileGrid,E=g.getResolution(e),y=C.getZForResolution(E,1),S=g.getTileCoordExtent(h);(0,l.buffer)(S,-E,S),C.forEachTileCoord(S,y,function(e){T=T&&!this.tileUrlFunction(e,o,a)}.bind(this))}var x=new n.default(f,T?r.default.EMPTY:r.default.IDLE,h,this.getSourceTiles.bind(this,o,a));return x.key=d,s?(x.interimTile=s,x.refreshInterimChain(),this.tileCache.replace(c,x)):this.tileCache.set(c,x),x},c.prototype.getTileGridForProjection=function(e){var t=e.getCode(),i=this.tileGrids_[t];if(!i){var r=this.tileGrid;i=(0,a.createForProjection)(e,void 0,r?r.getTileSize(r.getMinZoom()):void 0),this.tileGrids_[t]=i}return i},c.prototype.getTilePixelRatio=function(e){return e},c.prototype.getTilePixelSize=function(e,t,i){var r=this.getTileGridForProjection(i),o=(0,d.toSize)(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]},c.prototype.updateCacheSize=function(e,t){o.prototype.updateCacheSize.call(this,2*e,t)},c}(o.default),g=p;function v(e,t){var i=(0,c.loadFeaturesXhr)(t,e.getFormat(),e.onLoad.bind(e),e.onError.bind(e));e.setLoader(i)}exports.default=g;
},{"../events/EventType.js":"C8cu","../VectorTile.js":"yj80","../TileCache.js":"YFDe","../TileState.js":"u3kG","./UrlTile.js":"uv9E","../VectorRenderTile.js":"C8Du","../extent.js":"QDir","../tilegrid.js":"ExRx","../array.js":"luEr","../tilecoord.js":"faTr","../featureloader.js":"U3JP","../size.js":"TAHd"}],"pt6h":[function(require,module,exports) {
var a={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},e=" ",r=/(italic|oblique)$/i,l={};module.exports=function(o,t,i){var n=l[o];if(!n){Array.isArray(o)||(o=[o]);for(var p=400,b="normal",c=[],h=0,s=o.length;h<s;++h){var u=o[h].split(" "),d=u[u.length-1].toLowerCase();for(var m in"normal"==d||"italic"==d||"oblique"==d?(b=d,u.pop(),d=u[u.length-1].toLowerCase()):r.test(d)&&(d=d.replace(r,""),b=u[u.length-1].replace(d,"")),a)if(d==m||d==m.replace("-","")||d==m.replace("-",e)){p=a[m],u.pop();break}"number"==typeof d&&(p=d);var f=u.join(e).replace("Klokantech Noto Sans","Noto Sans");-1!==f.indexOf(e)&&(f='"'+f+'"'),c.push(f)}n=l[o]=[b,p,c]}return n[0]+e+n[1]+e+t+"px"+(i?"/"+i:"")+e+n[2]};
},{}],"Prd1":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.composite=An,exports.convertFilter=xn,exports.derefLayers=Cn,exports.diff=Jn,exports.featureFilter=cn,exports.format=G,exports.migrate=_n,exports.validate=_i,exports.validateMapboxApiSupported=Pi,exports.visit=exports.v8=exports.latest=exports.function=exports.expression=exports.ValidationError=exports.ParsingError=exports.Color=void 0;var r=8,o={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},n={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},i=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],a={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},s={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},l={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},u={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},p={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},c={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},d={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},h=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],f={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},y={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},m={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},v={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},g={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},b={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},x={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},w={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},k={type:"array",value:"*",doc:"A filter selects specific features from a layer."},j={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},z={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},S={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},T={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},_={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `["get", "building_type"]`). Each label must be either:\n - a single literal value; or\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `["c", "b"]`). The input matches if any of the values in the array matches, similar to the `"in"` operator.\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},A={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},I=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],O={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},C={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},q={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},E={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},M={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},N={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},P={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},R={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},L={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},D={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},F={$version:r,$root:o,sources:n,source:i,source_vector:a,source_raster:s,source_raster_dem:l,source_geojson:u,source_video:p,source_image:c,layer:d,layout:h,layout_background:f,layout_fill:y,layout_circle:m,layout_heatmap:v,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:g,layout_symbol:b,layout_raster:x,layout_hillshade:w,filter:k,filter_operator:j,geometry_type:z,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:S,expression:T,expression_name:_,light:A,paint:I,paint_fill:O,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:C,paint_circle:q,paint_heatmap:E,paint_symbol:M,paint_raster:N,paint_hillshade:P,paint_background:R,transition:L,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:D};exports.v8=exports.latest=F;var $=/("(?:[^\\"]|\\.)*")|[:,]/g,U=function(e,t){var r,o,n;return t=t||{},r=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),o=""===r?1/0:void 0===t.maxLength?80:t.maxLength,n=t.replacer,function e(t,i,a){var s,l,u,p,c,d,h,f,y,m,v,g;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(v=JSON.stringify(t,n)))return v;if(h=o-i.length-a,v.length<=h&&(y=v.replace($,function(e,t){return t||e+" "})).length<=h)return y;if(null!=n&&(t=JSON.parse(v),n=void 0),"object"==typeof t&&null!==t){if(f=i+r,u=[],l=0,Array.isArray(t))for(m="[",s="]",h=t.length;l<h;l++)u.push(e(t[l],f,l===h-1?0:1)||"null");else for(m="{",s="}",h=(d=Object.keys(t)).length;l<h;l++)p=d[l],c=JSON.stringify(p)+": ",void 0!==(g=e(t[p],f,c.length+(l===h-1?0:1)))&&u.push(c+g);if(u.length>0)return[m,r+u.join(",\n"+f),s].join("\n"+i)}return v}(e,"",0)};function J(e,t){var r={};for(var o in t)void 0!==e[o]&&(r[o]=e[o]);for(var n in e)void 0===r[n]&&(r[n]=e[n]);return r}function G(e,t){return void 0===t&&(t=2),(e=J(e,F.$root)).layers&&(e.layers=e.layers.map(function(e){return J(e,F.layer)})),U(e,{indent:t})}var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function B(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function V(e,t){return e(t={exports:{}},t.exports),t.exports}var H=V(function(e,t){!function(r){var o=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,i="object"==typeof W&&W;i.global!==i&&i.window!==i&&i.self!==i||(r=i);var a,s,l=2147483647,u=36,p=1,c=26,d=38,h=700,f=72,y=128,m="-",v=/^xn--/,g=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-p,k=Math.floor,j=String.fromCharCode;function z(e){throw RangeError(x[e])}function S(e,t){for(var r=e.length,o=[];r--;)o[r]=t(e[r]);return o}function T(e,t){var r=e.split("@"),o="";return r.length>1&&(o=r[0]+"@",e=r[1]),o+S((e=e.replace(b,".")).split("."),t).join(".")}function _(e){for(var t,r,o=[],n=0,i=e.length;n<i;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<i?56320==(64512&(r=e.charCodeAt(n++)))?o.push(((1023&t)<<10)+(1023&r)+65536):(o.push(t),n--):o.push(t);return o}function A(e){return S(e,function(e){var t="";return e>65535&&(t+=j((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function I(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,r){var o=0;for(e=r?k(e/h):e>>1,e+=k(e/t);e>w*c>>1;o+=u)e=k(e/w);return k(o+(w+1)*e/(e+d))}function C(e){var t,r,o,n,i,a,s,d,h,v,g,b=[],x=e.length,w=0,j=y,S=f;for((r=e.lastIndexOf(m))<0&&(r=0),o=0;o<r;++o)e.charCodeAt(o)>=128&&z("not-basic"),b.push(e.charCodeAt(o));for(n=r>0?r+1:0;n<x;){for(i=w,a=1,s=u;n>=x&&z("invalid-input"),((d=(g=e.charCodeAt(n++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:u)>=u||d>k((l-w)/a))&&z("overflow"),w+=d*a,!(d<(h=s<=S?p:s>=S+c?c:s-S));s+=u)a>k(l/(v=u-h))&&z("overflow"),a*=v;S=O(w-i,t=b.length+1,0==i),k(w/t)>l-j&&z("overflow"),j+=k(w/t),w%=t,b.splice(w++,0,j)}return A(b)}function q(e){var t,r,o,n,i,a,s,d,h,v,g,b,x,w,S,T=[];for(b=(e=_(e)).length,t=y,r=0,i=f,a=0;a<b;++a)(g=e[a])<128&&T.push(j(g));for(o=n=T.length,n&&T.push(m);o<b;){for(s=l,a=0;a<b;++a)(g=e[a])>=t&&g<s&&(s=g);for(s-t>k((l-r)/(x=o+1))&&z("overflow"),r+=(s-t)*x,t=s,a=0;a<b;++a)if((g=e[a])<t&&++r>l&&z("overflow"),g==t){for(d=r,h=u;!(d<(v=h<=i?p:h>=i+c?c:h-i));h+=u)S=d-v,w=u-v,T.push(j(I(v+S%w,0))),d=k(S/w);T.push(j(I(d,0))),i=O(r,x,o==n),r=0,++o}++r,++t}return T.join("")}if(a={version:"1.3.2",ucs2:{decode:_,encode:A},decode:C,encode:q,toASCII:function(e){return T(e,function(e){return g.test(e)?"xn--"+q(e):e})},toUnicode:function(e){return T(e,function(e){return v.test(e)?C(e.slice(4).toLowerCase()):e})}},o&&n)if(e.exports==o)n.exports=a;else for(s in a)a.hasOwnProperty(s)&&(o[s]=a[s]);else r.punycode=a}(W)}),Z={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}};function X(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var K=function(e,t,r,o){t=t||"&",r=r||"=";var n={};if("string"!=typeof e||0===e.length)return n;var i=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var u,p,c,d,h=e[l].replace(i,"%20"),f=h.indexOf(r);f>=0?(u=h.substr(0,f),p=h.substr(f+1)):(u=h,p=""),c=decodeURIComponent(u),d=decodeURIComponent(p),X(n,c)?Array.isArray(n[c])?n[c].push(d):n[c]=[n[c],d]:n[c]=d}return n},Y=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Q=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var n=encodeURIComponent(Y(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return n+encodeURIComponent(Y(e))}).join(t):n+encodeURIComponent(Y(e[o]))}).join(t):o?encodeURIComponent(Y(o))+r+encodeURIComponent(Y(e)):""},ee=V(function(e,t){t.decode=t.parse=K,t.encode=t.stringify=Q}),te=ee.decode,re=ee.parse,oe=ee.encode,ne=ee.stringify,ie=Se,ae=_e,se=Ae,le=Te,ue=pe;function pe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ce=/^([a-z0-9.+-]+:)/i,de=/:[0-9]*$/,he=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fe=["<",">",'"',"`"," ","\r","\n","\t"],ye=["{","}","|","\\","^","`"].concat(fe),me=["'"].concat(ye),ve=["%","/","?",";","#"].concat(me),ge=["/","?","#"],be=255,xe=/^[+a-z0-9A-Z_-]{0,63}$/,we=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ke={javascript:!0,"javascript:":!0},je={javascript:!0,"javascript:":!0},ze={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Se(e,t,r){if(e&&Z.isObject(e)&&e instanceof pe)return e;var o=new pe;return o.parse(e,t,r),o}function Te(e){return Z.isString(e)&&(e=Se(e)),e instanceof pe?e.format():pe.prototype.format.call(e)}function _e(e,t){return Se(e,!1,!0).resolve(t)}function Ae(e,t){return e?Se(e,!1,!0).resolveObject(t):t}pe.prototype.parse=function(e,t,r){if(!Z.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),n=-1!==o&&o<e.indexOf("#")?"?":"#",i=e.split(n);i[0]=i[0].replace(/\\/g,"/");var a=e=i.join(n);if(a=a.trim(),!r&&1===e.split("#").length){var s=he.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?ee.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=ce.exec(a);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,a=a.substr(l.length)}if(r||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===a.substr(0,2);!p||l&&je[l]||(a=a.substr(2),this.slashes=!0)}if(!je[l]&&(p||l&&!ze[l])){for(var c,d,h=-1,f=0;f<ge.length;f++){-1!==(y=a.indexOf(ge[f]))&&(-1===h||y<h)&&(h=y)}-1!==(d=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(c=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(c)),h=-1;for(f=0;f<ve.length;f++){var y;-1!==(y=a.indexOf(ve[f]))&&(-1===h||y<h)&&(h=y)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),g=(f=0,v.length);f<g;f++){var b=v[f];if(b&&!b.match(xe)){for(var x="",w=0,k=b.length;w<k;w++)b.charCodeAt(w)>127?x+="x":x+=b[w];if(!x.match(xe)){var j=v.slice(0,f),z=v.slice(f+1),S=b.match(we);S&&(j.push(S[1]),z.unshift(S[2])),z.length&&(a="/"+z.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>be?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=H.toASCII(this.hostname));var T=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+T,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!ke[u])for(f=0,g=me.length;f<g;f++){var A=me[f];if(-1!==a.indexOf(A)){var I=encodeURIComponent(A);I===A&&(I=escape(A)),a=a.split(A).join(I)}}var O=a.indexOf("#");-1!==O&&(this.hash=a.substr(O),a=a.slice(0,O));var C=a.indexOf("?");if(-1!==C?(this.search=a.substr(C),this.query=a.substr(C+1),t&&(this.query=ee.parse(this.query)),a=a.slice(0,C)):t&&(this.search="",this.query={}),a&&(this.pathname=a),ze[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var q=this.search||"";this.path=T+q}return this.href=this.format(),this},pe.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",o=this.hash||"",n=!1,i="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Z.isObject(this.query)&&Object.keys(this.query).length&&(i=ee.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||ze[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),t+n+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+o},pe.prototype.resolve=function(e){return this.resolveObject(Se(e,!1,!0)).format()},pe.prototype.resolveObject=function(e){if(Z.isString(e)){var t=new pe;t.parse(e,!1,!0),e=t}for(var r=new pe,o=Object.keys(this),n=0;n<o.length;n++){var i=o[n];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(r[l]=e[l])}return ze[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!ze[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var c=u[p];r[c]=e[c]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||je[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var h=r.pathname||"",f=r.search||"";r.path=h+f}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=m||y||r.host&&e.pathname,g=v,b=r.pathname&&r.pathname.split("/")||[],x=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!ze[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),v=v&&(""===d[0]||""===b[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),r.search=e.search,r.query=e.query;else if(!Z.isNullOrUndefined(e.search)){if(x)r.hostname=r.host=b.shift(),(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift());return r.search=e.search,r.query=e.query,Z.isNull(r.pathname)&&Z.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=b.slice(-1)[0],k=(r.host||e.host||b.length>1)&&("."===w||".."===w)||""===w,j=0,z=b.length;z>=0;z--)"."===(w=b[z])?b.splice(z,1):".."===w?(b.splice(z,1),j++):j&&(b.splice(z,1),j--);if(!v&&!g)for(;j--;j)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),k&&"/"!==b.join("/").substr(-1)&&b.push("");var S,T=""===b[0]||b[0]&&"/"===b[0].charAt(0);x&&(r.hostname=r.host=T?"":b.length?b.shift():"",(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift()));return(v=v||r.host&&b.length)&&!T&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),Z.isNull(r.pathname)&&Z.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},pe.prototype.parseHost=function(){var e=this.host,t=de.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Ie={parse:ie,resolve:ae,resolveObject:se,format:le,Url:ue};function Oe(e){for(var t=0;t<F.layout.length;t++)for(var r in F[F.layout[t]])if(r===e)return F[F.layout[t]][r];for(var o=0;o<F.paint.length;o++)for(var n in F[F.paint[o]])if(n===e)return F[F.paint[o]][n];return null}function Ce(e,t){for(var r in e.sources)t(e.sources[r])}function qe(e,t){for(var r=0,o=e.layers;r<o.length;r+=1){t(o[r])}}function Ee(e,t,r){function o(e,t){var o=e[t];o&&Object.keys(o).forEach(function(n){r({path:[e.id,t,n],key:n,value:o[n],reference:Oe(n),set:function(e){o[n]=e}})})}qe(e,function(e){t.paint&&o(e,"paint"),t.layout&&o(e,"layout")})}function Me(e,t){for(var r in e)0===r.indexOf("layout")&&t(e[r],r)}function Ne(e,t){for(var r in e)0===r.indexOf("paint")&&t(e[r],r)}function Pe(e,t){return"string"==typeof t&&"@"===t[0]?Pe(e,e.constants[t]):t}function Re(e){return Array.isArray(e.stops)}function Le(e,t,r){e[r]=e[t],delete e[t]}function De(e){var t,r,o;e.version=8,Ce(e,function(e){"video"===e.type&&void 0!==e.url&&Le(e,"url","urls"),"video"===e.type&&e.coordinates.forEach(function(e){return e.reverse()})}),qe(e,function(e){Me(e,function(e){void 0!==e["symbol-min-distance"]&&Le(e,"symbol-min-distance","symbol-spacing")}),Ne(e,function(e){void 0!==e["background-image"]&&Le(e,"background-image","background-pattern"),void 0!==e["line-image"]&&Le(e,"line-image","line-pattern"),void 0!==e["fill-image"]&&Le(e,"fill-image","fill-pattern")})}),Ee(e,{paint:!0,layout:!0},function(t){var r=Pe(e,t.value);Re(r)&&r.stops.forEach(function(t){t[1]=Pe(e,t[1])}),t.set(r)}),delete e.constants,qe(e,function(e){Me(e,function(e){delete e["text-max-size"],delete e["icon-max-size"]}),Ne(e,function(t){t["text-size"]&&(e.layout||(e.layout={}),e.layout["text-size"]=t["text-size"],delete t["text-size"]),t["icon-size"]&&(e.layout||(e.layout={}),e.layout["icon-size"]=t["icon-size"],delete t["icon-size"])})}),e.glyphs&&(e.glyphs=(t=e.glyphs,r=Ie.parse(t),o=r.pathname.split("/"),"mapbox:"!==r.protocol?t:"fontstack"===r.hostname?"mapbox://fonts/mapbox/{fontstack}/{range}.pbf":"fonts"===r.hostname?"mapbox://fonts/"+o[2]+"/{fontstack}/{range}.pbf":void 0)),qe(e,function(e){Me(e,function(e){e["text-font"]&&(e["text-font"]=function(e){function t(e){return e.split(",").map(function(e){return e.trim()})}if(Array.isArray(e))return e;if("string"==typeof e)return t(e);if("object"==typeof e)return e.stops.forEach(function(e){e[1]=t(e[1])}),e;throw new Error("unexpected font value")}(e["text-font"]))})});for(var n=0,i=e.layers.length-1;i>=0;i--){if("symbol"!==e.layers[i].type){n=i+1;break}}var a=e.layers.splice(n);return a.reverse(),e.layers=e.layers.concat(a),e}function Fe(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var o=0,n=t;o<n.length;o+=1){var i=n[o];for(var a in i)e[a]=i[a]}return e}var $e=function(e){function t(t,r){e.call(this,r),this.message=r,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Ue=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,o=t;r<o.length;r+=1){var n=o[r],i=n[0],a=n[1];this.bindings[i]=a}};Ue.prototype.concat=function(e){return new Ue(this,e)},Ue.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Ue.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Je={kind:"null"},Ge={kind:"number"},We={kind:"string"},Be={kind:"boolean"},Ve={kind:"color"},He={kind:"object"},Ze={kind:"value"},Xe={kind:"error"},Ke={kind:"collator"},Ye={kind:"formatted"},Qe={kind:"resolvedImage"};function et(e,t){return{kind:"array",itemType:e,N:t}}function tt(e){if("array"===e.kind){var t=tt(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var rt=[Je,Ge,We,Be,Ve,Ye,He,et(Ze),Qe];function ot(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ot(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var r=0,o=rt;r<o.length;r+=1){if(!ot(o[r],t))return null}}return"Expected "+tt(e)+" but found "+tt(t)+" instead."}function nt(e,t){return t.some(function(t){return t.kind===e.kind})}function it(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e})}var at=V(function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(e){return(e=Math.round(e))<0?0:e>255?255:e}function n(e){return e<0?0:e>1?1:e}function i(e){return"%"===e[e.length-1]?o(parseFloat(e)/100*255):o(parseInt(e))}function a(e){return"%"===e[e.length-1]?n(parseFloat(e)/100):n(parseFloat(e))}function s(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{t.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in r)return r[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(-1!==l&&u+1===n.length){var p=n.substr(0,l),c=n.substr(l+1,u-(l+1)).split(","),d=1;switch(p){case"rgba":if(4!==c.length)return null;d=a(c.pop());case"rgb":return 3!==c.length?null:[i(c[0]),i(c[1]),i(c[2]),d];case"hsla":if(4!==c.length)return null;d=a(c.pop());case"hsl":if(3!==c.length)return null;var h=(parseFloat(c[0])%360+360)%360/360,f=a(c[1]),y=a(c[2]),m=y<=.5?y*(f+1):y+f-y*f,v=2*y-m;return[o(255*s(v,m,h+1/3)),o(255*s(v,m,h)),o(255*s(v,m,h-1/3)),d];default:return null}}return null}}catch(l){}}),st=at.parseCSSColor,lt=function(e,t,r,o){void 0===o&&(o=1),this.r=e,this.g=t,this.b=r,this.a=o};exports.Color=lt,lt.parse=function(e){if(e){if(e instanceof lt)return e;if("string"==typeof e){var t=st(e);if(t)return new lt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},lt.prototype.toString=function(){var e=this.toArray(),t=e[0],r=e[1],o=e[2],n=e[3];return"rgba("+Math.round(t)+","+Math.round(r)+","+Math.round(o)+","+n+")"},lt.prototype.toArray=function(){var e=this.r,t=this.g,r=this.b,o=this.a;return 0===o?[0,0,0,0]:[255*e/o,255*t/o,255*r/o,o]},lt.black=new lt(0,0,0,1),lt.white=new lt(1,1,1,1),lt.transparent=new lt(0,0,0,0),lt.red=new lt(1,0,0,1);var ut=function(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ut.prototype.compare=function(e,t){return this.collator.compare(e,t)},ut.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pt=function(e,t,r,o,n){this.text=e,this.image=t,this.scale=r,this.fontStack=o,this.textColor=n},ct=function(e){this.sections=e};ct.fromString=function(e){return new ct([new pt(e,null,null,null,null)])},ct.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},ct.factory=function(e){return e instanceof ct?e:ct.fromString(e)},ct.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")},ct.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var o=r[t];if(o.image)e.push(["image",o.image.name]);else{e.push(o.text);var n={};o.fontStack&&(n["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(n["font-scale"]=o.scale),o.textColor&&(n["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(n)}}return e};var dt=function(e){this.name=e.name,this.available=e.available};function ht(e,t,r,o){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===o||"number"==typeof o&&o>=0&&o<=1?null:"Invalid rgba value ["+[e,t,r,o].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof o?[e,t,r,o]:[e,t,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ft(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof lt)return!0;if(e instanceof ut)return!0;if(e instanceof ct)return!0;if(e instanceof dt)return!0;if(Array.isArray(e)){for(var t=0,r=e;t<r.length;t+=1){if(!ft(r[t]))return!1}return!0}if("object"==typeof e){for(var o in e)if(!ft(e[o]))return!1;return!0}return!1}function yt(e){if(null===e)return Je;if("string"==typeof e)return We;if("boolean"==typeof e)return Be;if("number"==typeof e)return Ge;if(e instanceof lt)return Ve;if(e instanceof ut)return Ke;if(e instanceof ct)return Ye;if(e instanceof dt)return Qe;if(Array.isArray(e)){for(var t,r=e.length,o=0,n=e;o<n.length;o+=1){var i=yt(n[o]);if(t){if(t===i)continue;t=Ze;break}t=i}return et(t||Ze,r)}return He}function mt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof lt||e instanceof ct||e instanceof dt?e.toString():JSON.stringify(e)}dt.prototype.toString=function(){return this.name},dt.fromString=function(e){return e?new dt({name:e,available:!1}):null},dt.prototype.serialize=function(){return["image",this.name]};var vt=function(e,t){this.type=e,this.value=t};vt.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!ft(e[1]))return t.error("invalid value");var r=e[1],o=yt(r),n=t.expectedType;return"array"!==o.kind||0!==o.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(o=n),new vt(o,r)},vt.prototype.evaluate=function(){return this.value},vt.prototype.eachChild=function(){},vt.prototype.outputDefined=function(){return!0},vt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof lt?["rgba"].concat(this.value.toArray()):this.value instanceof ct?this.value.serialize():this.value};var gt=function(e){this.name="ExpressionEvaluationError",this.message=e};gt.prototype.toJSON=function(){return this.message};var bt={string:We,number:Ge,boolean:Be,object:He},xt=function(e,t){this.type=e,this.args=t};xt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r,o=1,n=e[0];if("array"===n){var i,a;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in bt)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=bt[s],o++}else i=Ze;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],o++}r=et(i,a)}else r=bt[n];for(var l=[];o<e.length;o++){var u=t.parse(e[o],o,Ze);if(!u)return null;l.push(u)}return new xt(r,l)},xt.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!ot(this.type,yt(r)))return r;if(t===this.args.length-1)throw new gt("Expected value to be of type "+tt(this.type)+", but found "+tt(yt(r))+" instead.")}return null},xt.prototype.eachChild=function(e){this.args.forEach(e)},xt.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},xt.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var o=e.N;("number"==typeof o||this.args.length>1)&&t.push(o)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var wt=function(e){this.type=Ye,this.sections=e};wt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");for(var o=[],n=!1,i=1;i<=e.length-1;++i){var a=e[i];if(n&&"object"==typeof a&&!Array.isArray(a)){n=!1;var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,Ge)))return null;var l=null;if(a["text-font"]&&!(l=t.parse(a["text-font"],1,et(We))))return null;var u=null;if(a["text-color"]&&!(u=t.parse(a["text-color"],1,Ve)))return null;var p=o[o.length-1];p.scale=s,p.font=l,p.textColor=u}else{var c=t.parse(e[i],1,Ze);if(!c)return null;var d=c.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,o.push({content:c,scale:null,font:null,textColor:null})}}return new wt(o)},wt.prototype.evaluate=function(e){return new ct(this.sections.map(function(t){var r=t.content.evaluate(e);return yt(r)===Qe?new pt("",r,null,null,null):new pt(mt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},wt.prototype.eachChild=function(e){for(var t=0,r=this.sections;t<r.length;t+=1){var o=r[t];e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}},wt.prototype.outputDefined=function(){return!1},wt.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var o=r[t];e.push(o.content.serialize());var n={};o.scale&&(n["font-scale"]=o.scale.serialize()),o.font&&(n["text-font"]=o.font.serialize()),o.textColor&&(n["text-color"]=o.textColor.serialize()),e.push(n)}return e};var kt=function(e){this.type=Qe,this.input=e};kt.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,We);return r?new kt(r):t.error("No image name provided.")},kt.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=dt.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r},kt.prototype.eachChild=function(e){e(this.input)},kt.prototype.outputDefined=function(){return!1},kt.prototype.serialize=function(){return["image",this.input.serialize()]};var jt={"to-boolean":Be,"to-color":Ve,"to-number":Ge,"to-string":We},zt=function(e,t){this.type=e,this.args=t};zt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");for(var o=jt[r],n=[],i=1;i<e.length;i++){var a=t.parse(e[i],i,Ze);if(!a)return null;n.push(a)}return new zt(o,n)},zt.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,r,o=0,n=this.args;o<n.length;o+=1){if(r=null,(t=n[o].evaluate(e))instanceof lt)return t;if("string"==typeof t){var i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":ht(t[0],t[1],t[2],t[3])))return new lt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new gt(r||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(e)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new gt("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ct.fromString(mt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?dt.fromString(mt(this.args[0].evaluate(e))):mt(this.args[0].evaluate(e))},zt.prototype.eachChild=function(e){this.args.forEach(e)},zt.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},zt.prototype.serialize=function(){if("formatted"===this.type.kind)return new wt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new kt(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var St=["Unknown","Point","LineString","Polygon"],Tt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Tt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Tt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?St[this.feature.type]:this.feature.type:null},Tt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Tt.prototype.canonicalID=function(){return this.canonical},Tt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Tt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=lt.parse(e)),t};var _t=function(e,t,r,o){this.name=e,this.type=t,this._evaluate=r,this.args=o};function At(e){return Array.isArray(e)?"("+e.map(tt).join(", ")+")":"("+tt(e.type)+"...)"}_t.prototype.evaluate=function(e){return this._evaluate(e,this.args)},_t.prototype.eachChild=function(e){this.args.forEach(e)},_t.prototype.outputDefined=function(){return!1},_t.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},_t.parse=function(e,t){var r,o=e[0],n=_t.definitions[o];if(!n)return t.error('Unknown expression "'+o+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter(function(t){var r=t[0];return!Array.isArray(r)||r.length===e.length-1}),l=null,u=0,p=s;u<p.length;u+=1){var c=p[u],d=c[0],h=c[1];l=new ir(t.registry,t.path,null,t.scope);for(var f=[],y=!1,m=1;m<e.length;m++){var v=e[m],g=Array.isArray(d)?d[m-1]:d.type,b=l.parse(v,1+f.length,g);if(!b){y=!0;break}f.push(b)}if(!y)if(Array.isArray(d)&&d.length!==f.length)l.error("Expected "+d.length+" arguments, but found "+f.length+" instead.");else{for(var x=0;x<f.length;x++){var w=Array.isArray(d)?d[x]:d.type,k=f[x];l.concat(x+1).checkSubtype(w,k.type)}if(0===l.errors.length)return new _t(o,i,h,f)}}if(1===s.length)(r=t.errors).push.apply(r,l.errors);else{for(var j=(s.length?s:a).map(function(e){return At(e[0])}).join(" | "),z=[],S=1;S<e.length;S++){var T=t.parse(e[S],1+z.length);if(!T)return null;z.push(tt(T.type))}t.error("Expected arguments of type "+j+", but found ("+z.join(", ")+") instead.")}return null},_t.register=function(e,t){for(var r in _t.definitions=t,t)e[r]=_t};var It=function(e,t,r){this.type=Ke,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t};It.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");var o=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Be);if(!o)return null;var n=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Be);if(!n)return null;var i=null;return r.locale&&!(i=t.parse(r.locale,1,We))?null:new It(o,n,i)},It.prototype.evaluate=function(e){return new ut(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},It.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},It.prototype.outputDefined=function(){return!1},It.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Ot=8192;function Ct(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function qt(e){return(180+e)/360}function Et(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Mt(e,t){return!(e[0]<=t[0])&&(!(e[2]>=t[2])&&(!(e[1]<=t[1])&&!(e[3]>=t[3])))}function Nt(e,t){var r=qt(e[0]),o=Et(e[1]),n=Math.pow(2,t.z);return[Math.round(r*n*Ot),Math.round(o*n*Ot)]}function Pt(e,t,r){var o=e[0]-t[0],n=e[1]-t[1],i=e[0]-r[0],a=e[1]-r[1];return o*a-i*n==0&&o*i<=0&&n*a<=0}function Rt(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function Lt(e,t){for(var r=!1,o=0,n=t.length;o<n;o++)for(var i=t[o],a=0,s=i.length;a<s-1;a++){if(Pt(e,i[a],i[a+1]))return!1;Rt(e,i[a],i[a+1])&&(r=!r)}return r}function Dt(e,t){for(var r=0;r<t.length;r++)if(Lt(e,t[r]))return!0;return!1}function Ft(e,t){return e[0]*t[1]-e[1]*t[0]}function $t(e,t,r,o){var n=e[0]-r[0],i=e[1]-r[1],a=t[0]-r[0],s=t[1]-r[1],l=o[0]-r[0],u=o[1]-r[1],p=n*u-l*i,c=a*u-l*s;return p>0&&c<0||p<0&&c>0}function Ut(e,t,r,o){var n=[t[0]-e[0],t[1]-e[1]];return 0!==Ft([o[0]-r[0],o[1]-r[1]],n)&&!(!$t(e,t,r,o)||!$t(r,o,e,t))}function Jt(e,t,r){for(var o=0,n=r;o<n.length;o+=1)for(var i=n[o],a=0;a<i.length-1;++a)if(Ut(e,t,i[a],i[a+1]))return!0;return!1}function Gt(e,t){for(var r=0;r<e.length;++r)if(!Lt(e[r],t))return!1;for(var o=0;o<e.length-1;++o)if(Jt(e[o],e[o+1],t))return!1;return!0}function Wt(e,t){for(var r=0;r<t.length;r++)if(Gt(e,t[r]))return!0;return!1}function Bt(e,t,r){for(var o=[],n=0;n<e.length;n++){for(var i=[],a=0;a<e[n].length;a++){var s=Nt(e[n][a],r);Ct(t,s),i.push(s)}o.push(i)}return o}function Vt(e,t,r){for(var o=[],n=0;n<e.length;n++){var i=Bt(e[n],t,r);o.push(i)}return o}function Ht(e,t,r,o){if(e[0]<r[0]||e[0]>r[2]){var n=.5*o,i=e[0]-r[0]>n?-o:r[0]-e[0]>n?o:0;0===i&&(i=e[0]-r[2]>n?-o:r[2]-e[0]>n?o:0),e[0]+=i}Ct(t,e)}function Zt(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function Xt(e,t,r,o){for(var n=Math.pow(2,o.z)*Ot,i=[o.x*Ot,o.y*Ot],a=[],s=0,l=e;s<l.length;s+=1)for(var u=0,p=l[s];u<p.length;u+=1){var c=p[u],d=[c.x+i[0],c.y+i[1]];Ht(d,t,r,n),a.push(d)}return a}function Kt(e,t,r,o){for(var n=Math.pow(2,o.z)*Ot,i=[o.x*Ot,o.y*Ot],a=[],s=0,l=e;s<l.length;s+=1){for(var u=[],p=0,c=l[s];p<c.length;p+=1){var d=c[p],h=[d.x+i[0],d.y+i[1]];Ct(t,h),u.push(h)}a.push(u)}if(t[2]-t[0]<=n/2){Zt(t);for(var f=0,y=a;f<y.length;f+=1)for(var m=0,v=y[f];m<v.length;m+=1){Ht(v[m],t,r,n)}}return a}function Yt(e,t){var r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var i=Bt(t.coordinates,o,n),a=Xt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var s=0,l=a;s<l.length;s+=1){if(!Lt(l[s],i))return!1}}if("MultiPolygon"===t.type){var u=Vt(t.coordinates,o,n),p=Xt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var c=0,d=p;c<d.length;c+=1){if(!Dt(d[c],u))return!1}}return!0}function Qt(e,t){var r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var i=Bt(t.coordinates,o,n),a=Kt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var s=0,l=a;s<l.length;s+=1){if(!Gt(l[s],i))return!1}}if("MultiPolygon"===t.type){var u=Vt(t.coordinates,o,n),p=Kt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var c=0,d=p;c<d.length;c+=1){if(!Wt(d[c],u))return!1}}return!0}var er=function(e,t){this.type=Be,this.geojson=e,this.geometries=t};function tr(e){if(e instanceof _t){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof er)return!1;var t=!0;return e.eachChild(function(e){t&&!tr(e)&&(t=!1)}),t}function rr(e){if(e instanceof _t&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!rr(e)&&(t=!1)}),t}function or(e,t){if(e instanceof _t&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(e){r&&!or(e,t)&&(r=!1)}),r}er.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(ft(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var o=0;o<r.features.length;++o){var n=r.features[o].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new er(r,r.features[o].geometry)}else if("Feature"===r.type){var i=r.geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new er(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new er(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},er.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return Yt(e,this.geometries);if("LineString"===e.geometryType())return Qt(e,this.geometries)}return!1},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return["within",this.geojson]};var nr=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};nr.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var r=e[1];return t.scope.has(r)?new nr(r,t.scope.get(r)):t.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},nr.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},nr.prototype.eachChild=function(){},nr.prototype.outputDefined=function(){return!1},nr.prototype.serialize=function(){return["var",this.name]};var ir=function(e,t,r,o,n){void 0===t&&(t=[]),void 0===o&&(o=new Ue),void 0===n&&(n=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=o,this.errors=n,this.expectedType=r};function ar(e){if(e instanceof nr)return ar(e.boundExpression);if(e instanceof _t&&"error"===e.name)return!1;if(e instanceof It)return!1;if(e instanceof er)return!1;var t=e instanceof zt||e instanceof xt,r=!0;return e.eachChild(function(e){r=t?r&&ar(e):r&&e instanceof vt}),!!r&&(tr(e)&&or(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}function sr(e,t){for(var r,o,n=e.length-1,i=0,a=n,s=0;i<=a;)if(r=e[s=Math.floor((i+a)/2)],o=e[s+1],r<=t){if(s===n||t<o)return s;i=s+1}else{if(!(r>t))throw new gt("Input is not a number.");a=s-1}return 0}ir.prototype.parse=function(e,t,r,o,n){return void 0===n&&(n={}),t?this.concat(t,r,o)._parse(e,n):this._parse(e,n)},ir.prototype._parse=function(e,t){function r(e,t,r){return"assert"===r?new xt(t,[e]):"coerce"===r?new zt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var o=e[0];if("string"!=typeof o)return this.error("Expression name must be a string, but found "+typeof o+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[o];if(n){var i=n.parse(e,this);if(!i)return null;if(this.expectedType){var a=this.expectedType,s=i.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else i=r(i,a,t.typeAnnotation||"coerce");else i=r(i,a,t.typeAnnotation||"assert")}if(!(i instanceof vt)&&"resolvedImage"!==i.type.kind&&ar(i)){var l=new Tt;try{i=new vt(i.type,i.evaluate(l))}catch(u){return this.error(u.message),null}}return i}return this.error('Unknown expression "'+o+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},ir.prototype.concat=function(e,t,r){var o="number"==typeof e?this.path.concat(e):this.path,n=r?this.scope.concat(r):this.scope;return new ir(this.registry,o,t||null,n,this.errors)},ir.prototype.error=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var o=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new $e(o,e))},ir.prototype.checkSubtype=function(e,t){var r=ot(e,t);return r&&this.error(r),r};var lr=function(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var o=0,n=r;o<n.length;o+=1){var i=n[o],a=i[0],s=i[1];this.labels.push(a),this.outputs.push(s)}};lr.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var r=t.parse(e[1],1,Ge);if(!r)return null;var o=[],n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var i=1;i<e.length;i+=2){var a=1===i?-1/0:e[i],s=e[i+1],l=i,u=i+1;if("number"!=typeof a)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(o.length&&o[o.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var p=t.parse(s,u,n);if(!p)return null;n=n||p.type,o.push([a,p])}return new lr(n,r,o)},lr.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var o=this.input.evaluate(e);if(o<=t[0])return r[0].evaluate(e);var n=t.length;return o>=t[n-1]?r[n-1].evaluate(e):r[sr(t,o)].evaluate(e)},lr.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},lr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},lr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var ur=pr;function pr(e,t,r,o){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=o,this.p2x=r,this.p2y=o}function cr(e,t,r){return e*(1-r)+t*r}function dr(e,t,r){return new lt(cr(e.r,t.r,r),cr(e.g,t.g,r),cr(e.b,t.b,r),cr(e.a,t.a,r))}function hr(e,t,r){return e.map(function(e,o){return cr(e,t[o],r)})}pr.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},pr.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},pr.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},pr.prototype.solveCurveX=function(e,t){var r,o,n,i,a;for(void 0===t&&(t=1e-6),n=e,a=0;a<8;a++){if(i=this.sampleCurveX(n)-e,Math.abs(i)<t)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=i/s}if((n=e)<(r=0))return r;if(n>(o=1))return o;for(;r<o;){if(i=this.sampleCurveX(n),Math.abs(i-e)<t)return n;e>i?r=n:o=n,n=.5*(o-r)+r}return n},pr.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var fr=Object.freeze({__proto__:null,number:cr,color:dr,array:hr}),yr=.95047,mr=1,vr=1.08883,gr=4/29,br=6/29,xr=3*br*br,wr=br*br*br,kr=Math.PI/180,jr=180/Math.PI;function zr(e){return e>wr?Math.pow(e,1/3):e/xr+gr}function Sr(e){return e>br?e*e*e:xr*(e-gr)}function Tr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _r(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ar(e){var t=_r(e.r),r=_r(e.g),o=_r(e.b),n=zr((.4124564*t+.3575761*r+.1804375*o)/yr),i=zr((.2126729*t+.7151522*r+.072175*o)/mr);return{l:116*i-16,a:500*(n-i),b:200*(i-zr((.0193339*t+.119192*r+.9503041*o)/vr)),alpha:e.a}}function Ir(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,o=isNaN(e.b)?t:t-e.b/200;return t=mr*Sr(t),r=yr*Sr(r),o=vr*Sr(o),new lt(Tr(3.2404542*r-1.5371385*t-.4985314*o),Tr(-.969266*r+1.8760108*t+.041556*o),Tr(.0556434*r-.2040259*t+1.0572252*o),e.alpha)}function Or(e,t,r){return{l:cr(e.l,t.l,r),a:cr(e.a,t.a,r),b:cr(e.b,t.b,r),alpha:cr(e.alpha,t.alpha,r)}}function Cr(e){var t=Ar(e),r=t.l,o=t.a,n=t.b,i=Math.atan2(n,o)*jr;return{h:i<0?i+360:i,c:Math.sqrt(o*o+n*n),l:r,alpha:e.a}}function qr(e){var t=e.h*kr,r=e.c;return Ir({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})}function Er(e,t,r){var o=t-e;return e+r*(o>180||o<-180?o-360*Math.round(o/360):o)}function Mr(e,t,r){return{h:Er(e.h,t.h,r),c:cr(e.c,t.c,r),l:cr(e.l,t.l,r),alpha:cr(e.alpha,t.alpha,r)}}var Nr={forward:Ar,reverse:Ir,interpolate:Or},Pr={forward:Cr,reverse:qr,interpolate:Mr},Rr=Object.freeze({__proto__:null,lab:Nr,hcl:Pr}),Lr=function(e,t,r,o,n){this.type=e,this.operator=t,this.interpolation=r,this.input=o,this.labels=[],this.outputs=[];for(var i=0,a=n;i<a.length;i+=1){var s=a[i],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Dr(e,t,r,o){var n=o-r,i=e-r;return 0===n?0:1===t?i/n:(Math.pow(t,i)-1)/(Math.pow(t,n)-1)}Lr.interpolationFactor=function(e,t,r,o){var n=0;if("exponential"===e.name)n=Dr(t,e.base,r,o);else if("linear"===e.name)n=Dr(t,1,r,o);else if("cubic-bezier"===e.name){var i=e.controlPoints;n=new ur(i[0],i[1],i[2],i[3]).solve(Dr(t,1,r,o))}return n},Lr.parse=function(e,t){var r=e[0],o=e[1],n=e[2],i=e.slice(3);if(!Array.isArray(o)||0===o.length)return t.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){var a=o[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:a}}else{if("cubic-bezier"!==o[0])return t.error("Unknown interpolation type "+String(o[0]),1,0);var s=o.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,2,Ge)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=Ve:t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var p=0;p<i.length;p+=2){var c=i[p],d=i[p+1],h=p+3,f=p+4;if("number"!=typeof c)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(l.length&&l[l.length-1][0]>=c)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var y=t.parse(d,f,u);if(!y)return null;u=u||y.type,l.push([c,y])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Lr(u,r,o,n,l):t.error("Type "+tt(u)+" is not interpolatable.")},Lr.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var o=this.input.evaluate(e);if(o<=t[0])return r[0].evaluate(e);var n=t.length;if(o>=t[n-1])return r[n-1].evaluate(e);var i=sr(t,o),a=t[i],s=t[i+1],l=Lr.interpolationFactor(this.interpolation,o,a,s),u=r[i].evaluate(e),p=r[i+1].evaluate(e);return"interpolate"===this.operator?fr[this.type.kind.toLowerCase()](u,p,l):"interpolate-hcl"===this.operator?Pr.reverse(Pr.interpolate(Pr.forward(u),Pr.forward(p),l)):Nr.reverse(Nr.interpolate(Nr.forward(u),Nr.forward(p),l))},Lr.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},Lr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Lr.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var Fr=function(e,t){this.type=e,this.args=t};Fr.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var r=null,o=t.expectedType;o&&"value"!==o.kind&&(r=o);for(var n=[],i=0,a=e.slice(1);i<a.length;i+=1){var s=a[i],l=t.parse(s,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,n.push(l)}var u=o&&n.some(function(e){return ot(o,e.type)});return new Fr(u?Ze:r,n)},Fr.prototype.evaluate=function(e){for(var t,r=null,o=0,n=0,i=this.args;n<i.length;n+=1){if(o++,(r=i[n].evaluate(e))&&r instanceof dt&&!r.available&&(t||(t=r.name),r=null,o===this.args.length&&(r=t)),null!==r)break}return r},Fr.prototype.eachChild=function(e){this.args.forEach(e)},Fr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Fr.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var $r=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};$r.prototype.evaluate=function(e){return this.result.evaluate(e)},$r.prototype.eachChild=function(e){for(var t=0,r=this.bindings;t<r.length;t+=1){e(r[t][1])}e(this.result)},$r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var r=[],o=1;o<e.length-1;o+=2){var n=e[o];if("string"!=typeof n)return t.error("Expected string, but found "+typeof n+" instead.",o);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);var i=t.parse(e[o+1],o+1);if(!i)return null;r.push([n,i])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return a?new $r(r,a):null},$r.prototype.outputDefined=function(){return this.result.outputDefined()},$r.prototype.serialize=function(){for(var e=["let"],t=0,r=this.bindings;t<r.length;t+=1){var o=r[t],n=o[0],i=o[1];e.push(n,i.serialize())}return e.push(this.result.serialize()),e};var Ur=function(e,t,r){this.type=e,this.index=t,this.input=r};Ur.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ge),o=t.parse(e[2],2,et(t.expectedType||Ze));if(!r||!o)return null;var n=o.type;return new Ur(n.itemType,r,o)},Ur.prototype.evaluate=function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new gt("Array index out of bounds: "+t+" < 0.");if(t>=r.length)throw new gt("Array index out of bounds: "+t+" > "+(r.length-1)+".");if(t!==Math.floor(t))throw new gt("Array index must be an integer, but found "+t+" instead.");return r[t]},Ur.prototype.eachChild=function(e){e(this.index),e(this.input)},Ur.prototype.outputDefined=function(){return!1},Ur.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Jr=function(e,t){this.type=Be,this.needle=e,this.haystack=t};Jr.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ze),o=t.parse(e[2],2,Ze);return r&&o?nt(r.type,[Be,We,Ge,Je,Ze])?new Jr(r,o):t.error("Expected first argument to be of type boolean, string, number or null, but found "+tt(r.type)+" instead"):null},Jr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!it(t,["boolean","string","number","null"]))throw new gt("Expected first argument to be of type boolean, string, number or null, but found "+tt(yt(t))+" instead.");if(!it(r,["string","array"]))throw new gt("Expected second argument to be of type array or string, but found "+tt(yt(r))+" instead.");return r.indexOf(t)>=0},Jr.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Jr.prototype.outputDefined=function(){return!0},Jr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Gr=function(e,t,r){this.type=Ge,this.needle=e,this.haystack=t,this.fromIndex=r};Gr.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ze),o=t.parse(e[2],2,Ze);if(!r||!o)return null;if(!nt(r.type,[Be,We,Ge,Je,Ze]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+tt(r.type)+" instead");if(4===e.length){var n=t.parse(e[3],3,Ge);return n?new Gr(r,o,n):null}return new Gr(r,o)},Gr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!it(t,["boolean","string","number","null"]))throw new gt("Expected first argument to be of type boolean, string, number or null, but found "+tt(yt(t))+" instead.");if(!it(r,["string","array"]))throw new gt("Expected second argument to be of type array or string, but found "+tt(yt(r))+" instead.");if(this.fromIndex){var o=this.fromIndex.evaluate(e);return r.indexOf(t,o)}return r.indexOf(t)},Gr.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Gr.prototype.outputDefined=function(){return!1},Gr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Wr=function(e,t,r,o,n,i){this.inputType=e,this.type=t,this.input=r,this.cases=o,this.outputs=n,this.otherwise=i};Wr.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var r,o;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);for(var n={},i=[],a=2;a<e.length-1;a+=2){var s=e[a],l=e[a+1];Array.isArray(s)||(s=[s]);var u=t.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var p=0,c=s;p<c.length;p+=1){var d=c[p];if("number"!=typeof d&&"string"!=typeof d)return u.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,yt(d)))return null}else r=yt(d);if(void 0!==n[String(d)])return u.error("Branch labels must be unique.");n[String(d)]=i.length}var h=t.parse(l,a,o);if(!h)return null;o=o||h.type,i.push(h)}var f=t.parse(e[1],1,Ze);if(!f)return null;var y=t.parse(e[e.length-1],e.length-1,o);return y?"value"!==f.type.kind&&t.concat(1).checkSubtype(r,f.type)?null:new Wr(r,o,f,n,i,y):null},Wr.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(yt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Wr.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Wr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Wr.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],r=[],o={},n=0,i=Object.keys(this.cases).sort();n<i.length;n+=1){var a=i[n];void 0===(c=o[this.cases[a]])?(o[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[c][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=r;l<u.length;l+=1){var p=u[l],c=p[0],d=p[1];1===d.length?t.push(s(d[0])):t.push(d.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Br=function(e,t,r){this.type=e,this.branches=t,this.otherwise=r};Br.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var o=[],n=1;n<e.length-1;n+=2){var i=t.parse(e[n],n,Be);if(!i)return null;var a=t.parse(e[n+1],n+1,r);if(!a)return null;o.push([i,a]),r=r||a.type}var s=t.parse(e[e.length-1],e.length-1,r);return s?new Br(r,o,s):null},Br.prototype.evaluate=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var o=r[t],n=o[0],i=o[1];if(n.evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},Br.prototype.eachChild=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var o=r[t],n=o[0],i=o[1];e(n),e(i)}e(this.otherwise)},Br.prototype.outputDefined=function(){return this.branches.every(function(e){e[0];return e[1].outputDefined()})&&this.otherwise.outputDefined()},Br.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Vr=function(e,t,r,o){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=o};function Hr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Zr(e,t,r){return t===r}function Xr(e,t,r){return t!==r}function Kr(e,t,r){return t<r}function Yr(e,t,r){return t>r}function Qr(e,t,r){return t<=r}function eo(e,t,r){return t>=r}function to(e,t,r,o){return 0===o.compare(t,r)}function ro(e,t,r,o){return!to(e,t,r,o)}function oo(e,t,r,o){return o.compare(t,r)<0}function no(e,t,r,o){return o.compare(t,r)>0}function io(e,t,r,o){return o.compare(t,r)<=0}function ao(e,t,r,o){return o.compare(t,r)>=0}function so(e,t,r){var o="=="!==e&&"!="!==e;return function(){function n(e,t,r){this.type=Be,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return n.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],i=t.parse(e[1],1,Ze);if(!i)return null;if(!Hr(r,i.type))return t.concat(1).error('"'+r+"\" comparisons are not supported for type '"+tt(i.type)+"'.");var a=t.parse(e[2],2,Ze);if(!a)return null;if(!Hr(r,a.type))return t.concat(2).error('"'+r+"\" comparisons are not supported for type '"+tt(a.type)+"'.");if(i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '"+tt(i.type)+"' and '"+tt(a.type)+"'.");o&&("value"===i.type.kind&&"value"!==a.type.kind?i=new xt(a.type,[i]):"value"!==i.type.kind&&"value"===a.type.kind&&(a=new xt(i.type,[a])));var s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Ke)))return null}return new n(i,a,s)},n.prototype.evaluate=function(n){var i=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(o&&this.hasUntypedArgument){var s=yt(i),l=yt(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new gt('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!o&&this.hasUntypedArgument){var u=yt(i),p=yt(a);if("string"!==u.kind||"string"!==p.kind)return t(n,i,a)}return this.collator?r(n,i,a,this.collator.evaluate(n)):t(n,i,a)},n.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},n}()}Vr.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ze),o=t.parse(e[2],2,Ge);if(!r||!o)return null;if(!nt(r.type,[et(Ze),We,Ze]))return t.error("Expected first argument to be of type array or string, but found "+tt(r.type)+" instead");if(4===e.length){var n=t.parse(e[3],3,Ge);return n?new Vr(r.type,r,o,n):null}return new Vr(r.type,r,o)},Vr.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!it(t,["string","array"]))throw new gt("Expected first argument to be of type array or string, but found "+tt(yt(t))+" instead.");if(this.endIndex){var o=this.endIndex.evaluate(e);return t.slice(r,o)}return t.slice(r)},Vr.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Vr.prototype.outputDefined=function(){return!1},Vr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var lo=so("==",Zr,to),uo=so("!=",Xr,ro),po=so("<",Kr,oo),co=so(">",Yr,no),ho=so("<=",Qr,io),fo=so(">=",eo,ao),yo=function(e,t,r,o,n){this.type=We,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=o,this.maxFractionDigits=n};yo.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,Ge);if(!r)return null;var o=e[2];if("object"!=typeof o||Array.isArray(o))return t.error("NumberFormat options argument must be an object.");var n=null;if(o.locale&&!(n=t.parse(o.locale,1,We)))return null;var i=null;if(o.currency&&!(i=t.parse(o.currency,1,We)))return null;var a=null;if(o["min-fraction-digits"]&&!(a=t.parse(o["min-fraction-digits"],1,Ge)))return null;var s=null;return o["max-fraction-digits"]&&!(s=t.parse(o["max-fraction-digits"],1,Ge))?null:new yo(r,n,i,a,s)},yo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},yo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var mo=function(e){this.type=Ge,this.input=e};mo.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error("Expected argument of type string or array, but found "+tt(r.type)+" instead."):new mo(r):null},mo.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new gt("Expected value to be of type string or array, but found "+tt(yt(t))+" instead.")},mo.prototype.eachChild=function(e){e(this.input)},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var vo={"==":lo,"!=":uo,">":co,"<":po,">=":fo,"<=":ho,array:xt,at:Ur,boolean:xt,case:Br,coalesce:Fr,collator:It,format:wt,image:kt,in:Jr,"index-of":Gr,interpolate:Lr,"interpolate-hcl":Lr,"interpolate-lab":Lr,length:mo,let:$r,literal:vt,match:Wr,number:xt,"number-format":yo,object:xt,slice:Vr,step:lr,string:xt,"to-boolean":zt,"to-color":zt,"to-number":zt,"to-string":zt,var:nr,within:er};function go(e,t){var r=t[0],o=t[1],n=t[2],i=t[3];r=r.evaluate(e),o=o.evaluate(e),n=n.evaluate(e);var a=i?i.evaluate(e):1,s=ht(r,o,n,a);if(s)throw new gt(s);return new lt(r/255*a,o/255*a,n/255*a,a)}function bo(e,t){return e in t}function xo(e,t){var r=t[e];return void 0===r?null:r}function wo(e,t,r,o){for(;r<=o;){var n=r+o>>1;if(t[n]===e)return!0;t[n]>e?o=n-1:r=n+1}return!1}function ko(e){return{type:e}}function jo(e){return{result:"success",value:e}}function zo(e){return{result:"error",value:e}}function So(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function To(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function _o(e){return!!e.expression&&e.expression.interpolated}function Ao(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Io(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Oo(e){return e}function Co(e,t){var r,o,n,i="color"===t.type,a=e.stops&&"object"==typeof e.stops[0][0],s=a||void 0!==e.property,l=a||!s,u=e.type||(_o(t)?"exponential":"interval");if(i&&((e=Fe({},e)).stops&&(e.stops=e.stops.map(function(e){return[e[0],lt.parse(e[1])]})),e.default?e.default=lt.parse(e.default):e.default=lt.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Rr[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===u)r=No;else if("interval"===u)r=Mo;else if("categorical"===u){r=Eo,o=Object.create(null);for(var p=0,c=e.stops;p<c.length;p+=1){var d=c[p];o[d[0]]=d[1]}n=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');r=Po}if(a){for(var h={},f=[],y=0;y<e.stops.length;y++){var m=e.stops[y],v=m[0].zoom;void 0===h[v]&&(h[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},f.push(v)),h[v].stops.push([m[0].value,m[1]])}for(var g=[],b=0,x=f;b<x.length;b+=1){var w=x[b];g.push([h[w].zoom,Co(h[w],t)])}var k={name:"linear"};return{kind:"composite",interpolationType:k,interpolationFactor:Lr.interpolationFactor.bind(void 0,k),zoomStops:g.map(function(e){return e[0]}),evaluate:function(r,o){var n=r.zoom;return No({stops:g,base:e.base},t,n).evaluate(n,o)}}}if(l){var j="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:Lr.interpolationFactor.bind(void 0,j),zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(i){var a=i.zoom;return r(e,t,a,o,n)}}}return{kind:"source",evaluate:function(i,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?qo(e.default,t.default):r(e,t,s,o,n)}}}function qo(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function Eo(e,t,r,o,n){return qo(typeof r===n?o[r]:void 0,e.default,t.default)}function Mo(e,t,r){if("number"!==Ao(r))return qo(e.default,t.default);var o=e.stops.length;if(1===o)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[o-1][0])return e.stops[o-1][1];var n=sr(e.stops.map(function(e){return e[0]}),r);return e.stops[n][1]}function No(e,t,r){var o=void 0!==e.base?e.base:1;if("number"!==Ao(r))return qo(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];var i=sr(e.stops.map(function(e){return e[0]}),r),a=Ro(r,o,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],l=e.stops[i+1][1],u=fr[t.type]||Oo;if(e.colorSpace&&"rgb"!==e.colorSpace){var p=Rr[e.colorSpace];u=function(e,t){return p.reverse(p.interpolate(p.forward(e),p.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=s.evaluate.apply(void 0,e),o=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==o)return u(r,o,a)}}:u(s,l,a)}function Po(e,t,r){return"color"===t.type?r=lt.parse(r):"formatted"===t.type?r=ct.fromString(r.toString()):"resolvedImage"===t.type?r=dt.fromString(r.toString()):Ao(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),qo(r,e.default,t.default)}function Ro(e,t,r,o){var n=o-r,i=e-r;return 0===n?0:1===t?i/n:(Math.pow(t,i)-1)/(Math.pow(t,n)-1)}_t.register(vo,{error:[Xe,[We],function(e,t){var r=t[0];throw new gt(r.evaluate(e))}],typeof:[We,[Ze],function(e,t){return tt(yt(t[0].evaluate(e)))}],"to-rgba":[et(Ge,4),[Ve],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ve,[Ge,Ge,Ge],go],rgba:[Ve,[Ge,Ge,Ge,Ge],go],has:{type:Be,overloads:[[[We],function(e,t){return bo(t[0].evaluate(e),e.properties())}],[[We,He],function(e,t){var r=t[0],o=t[1];return bo(r.evaluate(e),o.evaluate(e))}]]},get:{type:Ze,overloads:[[[We],function(e,t){return xo(t[0].evaluate(e),e.properties())}],[[We,He],function(e,t){var r=t[0],o=t[1];return xo(r.evaluate(e),o.evaluate(e))}]]},"feature-state":[Ze,[We],function(e,t){return xo(t[0].evaluate(e),e.featureState||{})}],properties:[He,[],function(e){return e.properties()}],"geometry-type":[We,[],function(e){return e.geometryType()}],id:[Ze,[],function(e){return e.id()}],zoom:[Ge,[],function(e){return e.globals.zoom}],"heatmap-density":[Ge,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ge,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ze,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Ge,ko(Ge),function(e,t){for(var r=0,o=0,n=t;o<n.length;o+=1){r+=n[o].evaluate(e)}return r}],"*":[Ge,ko(Ge),function(e,t){for(var r=1,o=0,n=t;o<n.length;o+=1){r*=n[o].evaluate(e)}return r}],"-":{type:Ge,overloads:[[[Ge,Ge],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)-o.evaluate(e)}],[[Ge],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ge,[Ge,Ge],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)/o.evaluate(e)}],"%":[Ge,[Ge,Ge],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)%o.evaluate(e)}],ln2:[Ge,[],function(){return Math.LN2}],pi:[Ge,[],function(){return Math.PI}],e:[Ge,[],function(){return Math.E}],"^":[Ge,[Ge,Ge],function(e,t){var r=t[0],o=t[1];return Math.pow(r.evaluate(e),o.evaluate(e))}],sqrt:[Ge,[Ge],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[Ge,[Ge],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[Ge,[Ge],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[Ge,[Ge],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[Ge,[Ge],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[Ge,[Ge],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[Ge,[Ge],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[Ge,[Ge],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[Ge,[Ge],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[Ge,[Ge],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[Ge,ko(Ge),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[Ge,ko(Ge),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[Ge,[Ge],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[Ge,[Ge],function(e,t){var r=t[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ge,[Ge],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[Ge,[Ge],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1];return e.properties()[r.value]===o.value}],"filter-id-==":[Be,[Ze],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[Be,[We],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n<i}],"filter-id-<":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o<n}],"filter->":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n>i}],"filter-id->":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o>n}],"filter-<=":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o<=n}],"filter->=":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o>=n}],"filter-has":[Be,[Ze],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Be,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Be,[et(We)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Be,[et(Ze)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Be,[We,et(Ze)],function(e,t){var r=t[0];return t[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[Be,[We,et(Ze)],function(e,t){var r=t[0],o=t[1];return wo(e.properties()[r.value],o.value,0,o.value.length-1)}],all:{type:Be,overloads:[[[Be,Be],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)&&o.evaluate(e)}],[ko(Be),function(e,t){for(var r=0,o=t;r<o.length;r+=1){if(!o[r].evaluate(e))return!1}return!0}]]},any:{type:Be,overloads:[[[Be,Be],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)||o.evaluate(e)}],[ko(Be),function(e,t){for(var r=0,o=t;r<o.length;r+=1){if(o[r].evaluate(e))return!0}return!1}]]},"!":[Be,[Be],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Be,[We],function(e,t){var r=t[0],o=e.globals&&e.globals.isSupportedScript;return!o||o(r.evaluate(e))}],upcase:[We,[We],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[We,[We],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[We,ko(Ze),function(e,t){return t.map(function(t){return mt(t.evaluate(e))}).join("")}],"resolved-locale":[We,[Ke],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Lo=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Tt,this._defaultValue=t?Ho(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function Do(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in vo}function Fo(e,t){var r=new ir(vo,[],t?Vo(t):void 0),o=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return o?jo(new Lo(o,t)):zo(r.errors)}Lo.prototype.evaluateWithoutErrorHandling=function(e,t,r,o,n,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=o,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)},Lo.prototype.evaluate=function(e,t,r,o,n,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=o,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new gt("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,"undefined"!=typeof console&&console.warn(s.message)),this._defaultValue}};var $o=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!rr(t.expression)};$o.prototype.evaluateWithoutErrorHandling=function(e,t,r,o,n,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,o,n,i)},$o.prototype.evaluate=function(e,t,r,o,n,i){return this._styleExpression.evaluate(e,t,r,o,n,i)};var Uo=function(e,t,r,o){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!rr(t.expression),this.interpolationType=o};function Jo(e,t){if("error"===(e=Fo(e,t)).result)return e;var r=e.value.expression,o=tr(r);if(!o&&!So(t))return zo([new $e("","data expressions not supported")]);var n=or(r,["zoom"]);if(!n&&!To(t))return zo([new $e("","zoom expressions not supported")]);var i=Bo(r);if(!i&&!n)return zo([new $e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof $e)return zo([i]);if(i instanceof Lr&&!_o(t))return zo([new $e("",'"interpolate" expressions cannot be used with this property')]);if(!i)return jo(new $o(o?"constant":"source",e.value));var a=i instanceof Lr?i.interpolation:void 0;return jo(new Uo(o?"camera":"composite",e.value,i.labels,a))}Uo.prototype.evaluateWithoutErrorHandling=function(e,t,r,o,n,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,o,n,i)},Uo.prototype.evaluate=function(e,t,r,o,n,i){return this._styleExpression.evaluate(e,t,r,o,n,i)},Uo.prototype.interpolationFactor=function(e,t,r){return this.interpolationType?Lr.interpolationFactor(this.interpolationType,e,t,r):0};var Go=function(e,t){this._parameters=e,this._specification=t,Fe(this,Co(this._parameters,this._specification))};function Wo(e,t){if(Io(e))return new Go(e,t);if(Do(e)){var r=Jo(e,t);if("error"===r.result)throw new Error(r.value.map(function(e){return e.key+": "+e.message}).join(", "));return r.value}var o=e;return"string"==typeof e&&"color"===t.type&&(o=lt.parse(e)),{kind:"constant",evaluate:function(){return o}}}function Bo(e){var t=null;if(e instanceof $r)t=Bo(e.result);else if(e instanceof Fr)for(var r=0,o=e.args;r<o.length;r+=1){var n=o[r];if(t=Bo(n))break}else(e instanceof lr||e instanceof Lr)&&e.input instanceof _t&&"zoom"===e.input.name&&(t=e);return t instanceof $e?t:(e.eachChild(function(e){var r=Bo(e);r instanceof $e?t=r:!t&&r?t=new $e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new $e("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function Vo(e){var t={color:Ve,string:We,number:Ge,enum:We,boolean:Be,formatted:Ye,resolvedImage:Qe};return"array"===e.type?et(t[e.value]||Ze,e.length):t[e.type]}function Ho(e){return"color"===e.type&&Io(e.default)?new lt(0,0,0,0):"color"===e.type?lt.parse(e.default)||null:void 0===e.default?null:e.default}function Zo(e){return"object"==typeof e?["literal",e]:e}function Xo(e,t){var r=e.stops;if(!r)return Ko(e,t);var o=r&&"object"==typeof r[0][0],n=o||void 0!==e.property,i=o||!n;return r=r.map(function(e){return!n&&t.tokens&&"string"==typeof e[1]?[e[0],ln(e[1])]:[e[0],Zo(e[1])]}),o?Qo(e,t,r):i?on(e,t,r):rn(e,t,r)}function Ko(e,t){var r=["get",e.property];if(void 0===e.default)return"string"===t.type?["string",r]:r;if("enum"===t.type)return["match",r,Object.keys(t.values),r,e.default];var o=["color"===t.type?"to-color":t.type,r,Zo(e.default)];return"array"===t.type&&o.splice(1,0,t.value,t.length||null),o}function Yo(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Qo(e,t,r){for(var o={},n={},i=[],a=0;a<r.length;a++){var s=r[a],l=s[0].zoom;void 0===o[l]&&(o[l]={zoom:l,type:e.type,property:e.property,default:e.default},n[l]=[],i.push(l)),n[l].push([s[0].value,s[1]])}if("exponential"===sn({},t)){for(var u=[Yo(e),["linear"],["zoom"]],p=0,c=i;p<c.length;p+=1){var d=c[p];an(u,d,rn(o[d],t,n[d]),!1)}return u}for(var h=["step",["zoom"]],f=0,y=i;f<y.length;f+=1){var m=y[f];an(h,m,rn(o[m],t,n[m]),!0)}return nn(h),h}function en(e,t){return void 0!==e?e:void 0!==t?t:void 0}function tn(e,t){var r=Zo(en(e.default,t.default));return void 0===r&&"resolvedImage"===t.type?"":r}function rn(e,t,r){var o=sn(e,t),n=["get",e.property];if("categorical"===o&&"boolean"==typeof r[0][0]){for(var i=["case"],a=0,s=r;a<s.length;a+=1){var l=s[a];i.push(["==",n,l[0]],l[1])}return i.push(tn(e,t)),i}if("categorical"===o){for(var u=["match",n],p=0,c=r;p<c.length;p+=1){var d=c[p];an(u,d[0],d[1],!1)}return u.push(tn(e,t)),u}if("interval"===o){for(var h=["step",["number",n]],f=0,y=r;f<y.length;f+=1){var m=y[f];an(h,m[0],m[1],!0)}return nn(h),void 0===e.default?h:["case",["==",["typeof",n],"number"],h,Zo(e.default)]}if("exponential"===o){for(var v=void 0!==e.base?e.base:1,g=[Yo(e),1===v?["linear"]:["exponential",v],["number",n]],b=0,x=r;b<x.length;b+=1){var w=x[b];an(g,w[0],w[1],!1)}return void 0===e.default?g:["case",["==",["typeof",n],"number"],g,Zo(e.default)]}throw new Error("Unknown property function type "+o)}function on(e,t,r,o){void 0===o&&(o=["zoom"]);var n,i=sn(e,t),a=!1;if("interval"===i)n=["step",o],a=!0;else{if("exponential"!==i)throw new Error('Unknown zoom function type "'+i+'"');var s=void 0!==e.base?e.base:1;n=[Yo(e),1===s?["linear"]:["exponential",s],o]}for(var l=0,u=r;l<u.length;l+=1){var p=u[l];an(n,p[0],p[1],a)}return nn(n),n}function nn(e){"step"===e[0]&&3===e.length&&(e.push(0),e.push(e[3]))}function an(e,t,r,o){e.length>3&&t===e[e.length-2]||(o&&2===e.length||e.push(t),e.push(r))}function sn(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function ln(e){for(var t=["concat"],r=/{([^{}]+)}/g,o=0,n=r.exec(e);null!==n;n=r.exec(e)){var i=e.slice(o,r.lastIndex-n[0].length);o=r.lastIndex,i.length>0&&t.push(i),t.push(["get",n[1]])}if(1===t.length)return e;if(o<e.length)t.push(e.slice(o));else if(2===t.length)return["to-string",t[1]];return t}function un(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var o=r[t];if(!un(o)&&"boolean"!=typeof o)return!1}return!0;default:return!0}}Go.deserialize=function(e){return new Go(e._parameters,e._specification)},Go.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var pn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function cn(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};un(e)||(e=fn(e));var t=Fo(e,pn);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return{filter:function(e,r,o){return t.value.evaluate(e,r,{},o)},needGeometry:hn(e)}}function dn(e,t){return e<t?-1:e>t?1:0}function hn(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(hn(e[t]))return!0;return!1}function fn(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?yn(e[1],e[2],"=="):"!="===t?bn(yn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?yn(e[1],e[2],t):"any"===t?mn(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(fn)):"none"===t?["all"].concat(e.slice(1).map(fn).map(bn)):"in"===t?vn(e[1],e.slice(2)):"!in"===t?bn(vn(e[1],e.slice(2))):"has"===t?gn(e[1]):"!has"===t?bn(gn(e[1])):"within"!==t||e}function yn(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function mn(e){return["any"].concat(e.map(fn))}function vn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(dn)]]:["filter-in-small",e,["literal",t]]}}function gn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function bn(e){return["!",e]}function xn(e){return wn(e,{})}function wn(e,t){var r;if(un(e))return e;if(!e)return!0;var o,n=e[0];if(e.length<=1)return"any"!==n;if("=="===n||"!="===n||"<"===n||">"===n||"<="===n||">="===n){var i=e;o=jn(i[1],i[2],n,t)}else{if("any"===n){var a=e.slice(1).map(function(e){var t={},r=wn(e,t),o=kn(t);return!0===o?r:["case",o,r,!1]});return["any"].concat(a)}if("all"===n){var s=e.slice(1).map(function(e){return wn(e,t)});return s.length>1?["all"].concat(s):(r=[]).concat.apply(r,s)}if("none"===n)return["!",wn(["any"].concat(e.slice(1)),{})];o="in"===n?zn(e[1],e.slice(2)):"!in"===n?zn(e[1],e.slice(2),!0):"has"===n?Sn(e[1]):"!has"!==n||["!",Sn(e[1])]}return o}function kn(e){var t=[];for(var r in e){var o="$id"===r?["id"]:["get",r];t.push(["==",["typeof",o],e[r]])}return 0===t.length||(1===t.length?t[0]:["all"].concat(t))}function jn(e,t,r,o){var n;if("$type"===e)return[r,["geometry-type"],t];if(n="$id"===e?["id"]:["get",e],o&&null!==t){var i=typeof t;o[e]=i}return"=="===r&&"$id"!==e&&null===t?["all",["has",e],["==",n,null]]:"!="===r&&"$id"!==e&&null===t?["any",["!",["has",e]],["!=",n,null]]:[r,n,t]}function zn(e,t,r){if(void 0===r&&(r=!1),0===t.length)return r;var o;o="$type"===e?["geometry-type"]:"$id"===e?["id"]:["get",e];for(var n=!0,i=typeof t[0],a=0,s=t;a<s.length;a+=1){if(typeof s[a]!==i){n=!1;break}}if(n&&("string"===i||"number"===i)){var l=t.sort().filter(function(e,r){return 0===r||t[r-1]!==e});return["match",o,l,!r,r]}return[r?"all":"any"].concat(t.map(function(e){return[r?"!=":"==",o,e]}))}function Sn(e){return"$type"===e||("$id"===e?["!=",["id"],null]:["has",e])}function Tn(e){var t=[];return qe(e,function(e){e.filter&&(e.filter=xn(e.filter))}),Ee(e,{paint:!0,layout:!0},function(e){var r=e.path,o=e.value,n=e.reference,i=e.set;Do(o)||("object"!=typeof o||Array.isArray(o)?n.tokens&&"string"==typeof o&&i(ln(o)):(i(Xo(o,n)),t.push(r.join("."))))}),e}function _n(e){var t=!1;if(7===e.version&&(e=De(e),t=!0),8===e.version&&(t=Tn(e),t=!0),!t)throw new Error("cannot migrate from",e.version);return e}function An(e){var t=[],r=[],o=[];for(var n in e.sources){var i=e.sources[n];if("vector"===i.type){var a=/^mapbox:\/\/(.*)/.exec(i.url);a&&(t.push(n),r.push(a[1]))}}if(t.length<2)return e;t.forEach(function(t){delete e.sources[t]});var s=r.join(",");return e.sources[s]={type:"vector",url:"mapbox://"+s},e.layers.forEach(function(e){if(t.indexOf(e.source)>=0&&(e.source=s,"source-layer"in e)){if(o.indexOf(e["source-layer"])>=0)throw new Error("Conflicting source layer names");o.push(e["source-layer"])}}),e}var In=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function On(e,t){var r={};for(var o in e)"ref"!==o&&(r[o]=e[o]);return In.forEach(function(e){e in t&&(r[e]=t[e])}),r}function Cn(e){e=e.slice();for(var t=Object.create(null),r=0;r<e.length;r++)t[e[r].id]=e[r];for(var o=0;o<e.length;o++)"ref"in e[o]&&(e[o]=On(e[o],t[e[o].ref]));return e}function qn(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!qn(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(!qn(e[o],t[o]))return!1;return!0}return e===t}var En={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mn(e,t,r){r.push({command:En.addSource,args:[e,t[e]]})}function Nn(e,t,r){t.push({command:En.removeSource,args:[e]}),r[e]=!0}function Pn(e,t,r,o){Nn(e,r,o),Mn(e,t,r)}function Rn(e,t,r){var o;for(o in e[r])if(e[r].hasOwnProperty(o)&&"data"!==o&&!qn(e[r][o],t[r][o]))return!1;for(o in t[r])if(t[r].hasOwnProperty(o)&&"data"!==o&&!qn(e[r][o],t[r][o]))return!1;return!0}function Ln(e,t,r,o){var n;for(n in t=t||{},e=e||{})e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||Nn(n,r,o));for(n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)?qn(e[n],t[n])||("geojson"===e[n].type&&"geojson"===t[n].type&&Rn(e,t,n)?r.push({command:En.setGeoJSONSourceData,args:[n,t[n].data]}):Pn(n,t,r,o)):Mn(n,t,r))}function Dn(e,t,r,o,n,i){var a;for(a in t=t||{},e=e||{})e.hasOwnProperty(a)&&(qn(e[a],t[a])||r.push({command:i,args:[o,a,t[a],n]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(qn(e[a],t[a])||r.push({command:i,args:[o,a,t[a],n]}))}function Fn(e){return e.id}function $n(e,t){return e[t.id]=t,e}function Un(e,t,r){t=t||[];var o,n,i,a,s,l,u,p=(e=e||[]).map(Fn),c=t.map(Fn),d=e.reduce($n,{}),h=t.reduce($n,{}),f=p.slice(),y=Object.create(null);for(o=0,n=0;o<p.length;o++)i=p[o],h.hasOwnProperty(i)?n++:(r.push({command:En.removeLayer,args:[i]}),f.splice(f.indexOf(i,n),1));for(o=0,n=0;o<c.length;o++)i=c[c.length-1-o],f[f.length-1-o]!==i&&(d.hasOwnProperty(i)?(r.push({command:En.removeLayer,args:[i]}),f.splice(f.lastIndexOf(i,f.length-n),1)):n++,l=f[f.length-o],r.push({command:En.addLayer,args:[h[i],l]}),f.splice(f.length-o,0,i),y[i]=!0);for(o=0;o<c.length;o++)if(a=d[i=c[o]],s=h[i],!y[i]&&!qn(a,s))if(qn(a.source,s.source)&&qn(a["source-layer"],s["source-layer"])&&qn(a.type,s.type)){for(u in Dn(a.layout,s.layout,r,i,null,En.setLayoutProperty),Dn(a.paint,s.paint,r,i,null,En.setPaintProperty),qn(a.filter,s.filter)||r.push({command:En.setFilter,args:[i,s.filter]}),qn(a.minzoom,s.minzoom)&&qn(a.maxzoom,s.maxzoom)||r.push({command:En.setLayerZoomRange,args:[i,s.minzoom,s.maxzoom]}),a)a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Dn(a[u],s[u],r,i,u.slice(6),En.setPaintProperty):qn(a[u],s[u])||r.push({command:En.setLayerProperty,args:[i,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Dn(a[u],s[u],r,i,u.slice(6),En.setPaintProperty):qn(a[u],s[u])||r.push({command:En.setLayerProperty,args:[i,u,s[u]]}))}else r.push({command:En.removeLayer,args:[i]}),l=f[f.lastIndexOf(i)+1],r.push({command:En.addLayer,args:[s,l]})}function Jn(e,t){if(!e)return[{command:En.setStyle,args:[t]}];var r=[];try{if(!qn(e.version,t.version))return[{command:En.setStyle,args:[t]}];qn(e.center,t.center)||r.push({command:En.setCenter,args:[t.center]}),qn(e.zoom,t.zoom)||r.push({command:En.setZoom,args:[t.zoom]}),qn(e.bearing,t.bearing)||r.push({command:En.setBearing,args:[t.bearing]}),qn(e.pitch,t.pitch)||r.push({command:En.setPitch,args:[t.pitch]}),qn(e.sprite,t.sprite)||r.push({command:En.setSprite,args:[t.sprite]}),qn(e.glyphs,t.glyphs)||r.push({command:En.setGlyphs,args:[t.glyphs]}),qn(e.transition,t.transition)||r.push({command:En.setTransition,args:[t.transition]}),qn(e.light,t.light)||r.push({command:En.setLight,args:[t.light]});var o={},n=[];Ln(e.sources,t.sources,n,o);var i=[];e.layers&&e.layers.forEach(function(e){o[e.source]?r.push({command:En.removeLayer,args:[e.id]}):i.push(e)}),r=r.concat(n),Un(i,t.layers,r)}catch(a){console.warn("Unable to compute style diff:",a),r=[{command:En.setStyle,args:[t]}]}return r}var Gn=function(e,t,r,o){this.message=(e?e+": ":"")+r,o&&(this.identifier=o),null!=t&&t.__line__&&(this.line=t.__line__)};exports.ValidationError=Gn;var Wn=function(e){this.error=e,this.message=e.message;var t=e.message.match(/line (\d+)/);this.line=t?parseInt(t[1],10):0};function Bn(e){var t=e.key,r=e.value;return r?[new Gn(t,r,"constants have been deprecated as of v8")]:[]}function Vn(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Hn(e){if(Array.isArray(e))return e.map(Hn);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var r in e)t[r]=Hn(e[r]);return t}return Vn(e)}function Zn(e){var t=e.key,r=e.value,o=e.valueSpec||{},n=e.objectElementValidators||{},i=e.style,a=e.styleSpec,s=[],l=Ao(r);if("object"!==l)return[new Gn(t,r,"object expected, "+l+" found")];for(var u in r){var p=u.split(".")[0],c=o[p]||o["*"],d=void 0;if(n[p])d=n[p];else if(o[p])d=vi;else if(n["*"])d=n["*"];else{if(!o["*"]){s.push(new Gn(t,r[u],'unknown property "'+u+'"'));continue}d=vi}s=s.concat(d({key:(t?t+".":t)+u,value:r[u],valueSpec:c,style:i,styleSpec:a,object:r,objectKey:u},r))}for(var h in o)n[h]||o[h].required&&void 0===o[h].default&&void 0===r[h]&&s.push(new Gn(t,r,'missing required property "'+h+'"'));return s}function Xn(e){var t=e.value,r=e.valueSpec,o=e.style,n=e.styleSpec,i=e.key,a=e.arrayElementValidator||vi;if("array"!==Ao(t))return[new Gn(i,t,"array expected, "+Ao(t)+" found")];if(r.length&&t.length!==r.length)return[new Gn(i,t,"array length "+r.length+" expected, length "+t.length+" found")];if(r["min-length"]&&t.length<r["min-length"])return[new Gn(i,t,"array length at least "+r["min-length"]+" expected, length "+t.length+" found")];var s={type:r.value,values:r.values};n.$version<7&&(s.function=r.function),"object"===Ao(r.value)&&(s=r.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:o,styleSpec:n,key:i+"["+u+"]"}));return l}function Kn(e){var t=e.key,r=e.value,o=e.valueSpec,n=Ao(r);return"number"===n&&r!=r&&(n="NaN"),"number"!==n?[new Gn(t,r,"number expected, "+n+" found")]:"minimum"in o&&r<o.minimum?[new Gn(t,r,r+" is less than the minimum value "+o.minimum)]:"maximum"in o&&r>o.maximum?[new Gn(t,r,r+" is greater than the maximum value "+o.maximum)]:[]}function Yn(e){var t,r,o,n=e.valueSpec,i=Vn(e.value.type),a={},s="categorical"!==i&&void 0===e.value.property,l=!s,u="array"===Ao(e.value.stops)&&"array"===Ao(e.value.stops[0])&&"object"===Ao(e.value.stops[0][0]),p=Zn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===i)return[new Gn(e.key,e.value,'identity function may not have a "stops" property')];var t=[],r=e.value;t=t.concat(Xn({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:c})),"array"===Ao(r)&&0===r.length&&t.push(new Gn(e.key,r,"array must have at least one stop"));return t},default:function(e){return vi({key:e.key,value:e.value,valueSpec:n,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===i&&s&&p.push(new Gn(e.key,e.value,'missing required property "property"')),"identity"===i||e.value.stops||p.push(new Gn(e.key,e.value,'missing required property "stops"')),"exponential"===i&&e.valueSpec.expression&&!_o(e.valueSpec)&&p.push(new Gn(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!So(e.valueSpec)?p.push(new Gn(e.key,e.value,"property functions not supported")):s&&!To(e.valueSpec)&&p.push(new Gn(e.key,e.value,"zoom functions not supported"))),"categorical"!==i&&!u||void 0!==e.value.property||p.push(new Gn(e.key,e.value,'"property" property is required')),p;function c(e){var t=[],i=e.value,s=e.key;if("array"!==Ao(i))return[new Gn(s,i,"array expected, "+Ao(i)+" found")];if(2!==i.length)return[new Gn(s,i,"array length 2 expected, length "+i.length+" found")];if(u){if("object"!==Ao(i[0]))return[new Gn(s,i,"object expected, "+Ao(i[0])+" found")];if(void 0===i[0].zoom)return[new Gn(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Gn(s,i,"object stop key must have value")];if(o&&o>Vn(i[0].zoom))return[new Gn(s,i[0].zoom,"stop zoom values must appear in ascending order")];Vn(i[0].zoom)!==o&&(o=Vn(i[0].zoom),r=void 0,a={}),t=t.concat(Zn({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Kn,value:d}}))}else t=t.concat(d({key:s+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return Do(Hn(i[1]))?t.concat([new Gn(s+"[1]",i[1],"expressions are not allowed in function stops.")]):t.concat(vi({key:s+"[1]",value:i[1],valueSpec:n,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){var s=Ao(e.value),l=Vn(e.value),u=null!==e.value?e.value:o;if(t){if(s!==t)return[new Gn(e.key,u,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Gn(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){var p="number expected, "+s+" found";return So(n)&&void 0===i&&(p+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Gn(e.key,u,p)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==r&&l<r?[new Gn(e.key,u,"stop domain values must appear in ascending order")]:(r=l,"categorical"===i&&l in a?[new Gn(e.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Gn(e.key,u,"integer expected, found "+l)]}}function Qn(e){var t=("property"===e.expressionContext?Jo:Fo)(Hn(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new Gn(""+e.key+t.key,e.value,t.message)});var r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new Gn(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!rr(r))return[new Gn(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!rr(r))return[new Gn(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!or(r,["zoom","feature-state"]))return[new Gn(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!tr(r))return[new Gn(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ei(e){var t=e.value,r=e.key,o=Ao(t);return"boolean"!==o?[new Gn(r,t,"boolean expected, "+o+" found")]:[]}function ti(e){var t=e.key,r=e.value,o=Ao(r);return"string"!==o?[new Gn(t,r,"color expected, "+o+" found")]:null===st(r)?[new Gn(t,r,'color expected, "'+r+'" found')]:[]}function ri(e){var t=e.key,r=e.value,o=e.valueSpec,n=[];return Array.isArray(o.values)?-1===o.values.indexOf(Vn(r))&&n.push(new Gn(t,r,"expected one of ["+o.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(o.values).indexOf(Vn(r))&&n.push(new Gn(t,r,"expected one of ["+Object.keys(o.values).join(", ")+"], "+JSON.stringify(r)+" found")),n}function oi(e){return un(Hn(e.value))?Qn(Fe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ni(e)}function ni(e){var t=e.value,r=e.key;if("array"!==Ao(t))return[new Gn(r,t,"array expected, "+Ao(t)+" found")];var o,n=e.styleSpec,i=[];if(t.length<1)return[new Gn(r,t,"filter array must have at least 1 element")];switch(i=i.concat(ri({key:r+"[0]",value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),Vn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Vn(t[1])&&i.push(new Gn(r,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&i.push(new Gn(r,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":t.length>=2&&"string"!==(o=Ao(t[1]))&&i.push(new Gn(r+"[1]",t[1],"string expected, "+o+" found"));for(var a=2;a<t.length;a++)o=Ao(t[a]),"$type"===Vn(t[1])?i=i.concat(ri({key:r+"["+a+"]",value:t[a],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&i.push(new Gn(r+"["+a+"]",t[a],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)i=i.concat(ni({key:r+"["+s+"]",value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=Ao(t[1]),2!==t.length?i.push(new Gn(r,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==o&&i.push(new Gn(r+"[1]",t[1],"string expected, "+o+" found"));break;case"within":o=Ao(t[1]),2!==t.length?i.push(new Gn(r,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"object"!==o&&i.push(new Gn(r+"[1]",t[1],"object expected, "+o+" found"))}return i}function ii(e,t){var r=e.key,o=e.style,n=e.styleSpec,i=e.value,a=e.objectKey,s=n[t+"_"+e.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return vi({key:r,value:i,valueSpec:n.transition,style:o,styleSpec:n});var u,p=e.valueSpec||s[a];if(!p)return[new Gn(r,i,'unknown property "'+a+'"')];if("string"===Ao(i)&&So(p)&&!p.tokens&&(u=/^{([^}]+)}$/.exec(i)))return[new Gn(r,i,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var c=[];return"symbol"===e.layerType&&("text-field"===a&&o&&!o.glyphs&&c.push(new Gn(r,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Io(Hn(i))&&"identity"===Vn(i.type)&&c.push(new Gn(r,i,'"text-font" does not support identity functions'))),c.concat(vi({key:e.key,value:i,valueSpec:p,style:o,styleSpec:n,expressionContext:"property",propertyType:t,propertyKey:a}))}function ai(e){return ii(e,"paint")}function si(e){return ii(e,"layout")}function li(e){var t=[],r=e.value,o=e.key,n=e.style,i=e.styleSpec;r.type||r.ref||t.push(new Gn(o,r,'either "type" or "ref" is required'));var a,s=Vn(r.type),l=Vn(r.ref);if(r.id)for(var u=Vn(r.id),p=0;p<e.arrayIndex;p++){var c=n.layers[p];Vn(c.id)===u&&t.push(new Gn(o,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(e){e in r&&t.push(new Gn(o,r[e],'"'+e+'" is prohibited for ref layers'))}),n.layers.forEach(function(e){Vn(e.id)===l&&(a=e)}),a?a.ref?t.push(new Gn(o,r.ref,"ref cannot reference another ref layer")):s=Vn(a.type):t.push(new Gn(o,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var d=n.sources&&n.sources[r.source],h=d&&Vn(d.type);d?"vector"===h&&"raster"===s?t.push(new Gn(o,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===h&&"raster"!==s?t.push(new Gn(o,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==h||r["source-layer"]?"raster-dem"===h&&"hillshade"!==s?t.push(new Gn(o,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===h&&d.lineMetrics||t.push(new Gn(o,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Gn(o,r,'layer "'+r.id+'" must specify a "source-layer"')):t.push(new Gn(o,r.source,'source "'+r.source+'" not found'))}else t.push(new Gn(o,r,'missing required property "source"'));return t=t.concat(Zn({key:o,value:r,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vi({key:o+".type",value:r.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"})},filter:oi,layout:function(e){return Zn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return si(Fe({layerType:s},e))}}})},paint:function(e){return Zn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return ai(Fe({layerType:s},e))}}})}}}))}function ui(e){var t=e.value,r=e.key,o=Ao(t);return"string"!==o?[new Gn(r,t,"string expected, "+o+" found")]:[]}exports.ParsingError=Wn;var pi={promoteId:di};function ci(e){var t=e.value,r=e.key,o=e.styleSpec,n=e.style;if(!t.type)return[new Gn(r,t,'"type" is required')];var i,a=Vn(t.type);switch(a){case"vector":case"raster":case"raster-dem":return i=Zn({key:r,value:t,valueSpec:o["source_"+a.replace("-","_")],style:e.style,styleSpec:o,objectElementValidators:pi});case"geojson":if(i=Zn({key:r,value:t,valueSpec:o.source_geojson,style:n,styleSpec:o,objectElementValidators:pi}),t.cluster)for(var s in t.clusterProperties){var l=t.clusterProperties[s],u=l[0],p=l[1],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;i.push.apply(i,Qn({key:r+"."+s+".map",value:p,expressionContext:"cluster-map"})),i.push.apply(i,Qn({key:r+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return i;case"video":return Zn({key:r,value:t,valueSpec:o.source_video,style:n,styleSpec:o});case"image":return Zn({key:r,value:t,valueSpec:o.source_image,style:n,styleSpec:o});case"canvas":return[new Gn(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ri({key:r+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:o})}}function di(e){var t=e.key,r=e.value;if("string"===Ao(r))return ui({key:t,value:r});var o=[];for(var n in r)o.push.apply(o,ui({key:t+"."+n,value:r[n]}));return o}function hi(e){var t=e.value,r=e.styleSpec,o=r.light,n=e.style,i=[],a=Ao(t);if(void 0===t)return i;if("object"!==a)return i=i.concat([new Gn("light",t,"object expected, "+a+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);i=l&&o[l[1]]&&o[l[1]].transition?i.concat(vi({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r})):o[s]?i.concat(vi({key:s,value:t[s],valueSpec:o[s],style:n,styleSpec:r})):i.concat([new Gn(s,t[s],'unknown property "'+s+'"')])}return i}function fi(e){return 0===ui(e).length?[]:Qn(e)}function yi(e){return 0===ui(e).length?[]:Qn(e)}var mi={"*":function(){return[]},array:Xn,boolean:ei,number:Kn,color:ti,constants:Bn,enum:ri,filter:oi,function:Yn,layer:li,object:Zn,source:ci,light:hi,string:ui,formatted:fi,resolvedImage:yi};function vi(e){var t=e.value,r=e.valueSpec,o=e.styleSpec;return r.expression&&Io(Vn(t))?Yn(e):r.expression&&Do(Hn(t))?Qn(e):r.type&&mi[r.type]?mi[r.type](e):Zn(Fe({},e,{valueSpec:r.type?o[r.type]:r}))}function gi(e){var t=e.value,r=e.key,o=ui(e);return o.length?o:(-1===t.indexOf("{fontstack}")&&o.push(new Gn(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&o.push(new Gn(r,t,'"glyphs" url must include a "{range}" token')),o)}function bi(e,t){void 0===t&&(t=F);var r=[];return r=r.concat(vi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:gi,"*":function(){return[]}}})),e.constants&&(r=r.concat(Bn({key:"constants",value:e.constants,style:e,styleSpec:t}))),xi(r)}function xi(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function wi(e){return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return xi(e.apply(this,t))}}bi.source=wi(ci),bi.light=wi(hi),bi.layer=wi(li),bi.filter=wi(oi),bi.paintProperty=wi(ai),bi.layoutProperty=wi(si);var ki=V(function(e,t){var r=function(){var e=function(e,t,r,o){for(r=r||{},o=e.length;o--;r[e[o]]=t);return r},t=[1,12],r=[1,13],o=[1,9],n=[1,10],i=[1,11],a=[1,14],s=[1,15],l=[14,18,22,24],u=[18,22],p=[22,24],c={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,r,o,n,i,a){var s=i.length-1;switch(n){case 1:this.$=new String(e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(e),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=i[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[s-2],i[s]];break;case 16:this.$={},this.$[i[s][0]]=i[s][1];break;case 17:this.$=i[s-2],i[s-2][i[s][0]]=i[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[s]];break;case 21:this.$=i[s-2],i[s-2].push(i[s])}},table:[{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},e(l,[2,7]),e(l,[2,8]),e(l,[2,9]),e(l,[2,10]),e(l,[2,11]),e(l,[2,12]),e(l,[2,3]),e(l,[2,4]),e(l,[2,5]),e([14,18,21,22,24],[2,1]),e(l,[2,2]),{3:20,4:t,18:[1,17],19:18,20:19},{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},e(l,[2,13]),{18:[1,24],22:[1,25]},e(u,[2,16]),{21:[1,26]},e(l,[2,18]),{22:[1,28],24:[1,27]},e(p,[2,20]),e(l,[2,14]),{3:20,4:t,20:29},{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,13:30,15:7,16:8,17:a,23:s},e(l,[2,19]),{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,13:31,15:7,16:8,17:a,23:s},e(u,[2,17]),e(u,[2,15]),e(p,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],o=[null],n=[],i=this.table,a="",s=0,l=0,u=1,p=n.slice.call(arguments,1),c=Object.create(this.lexer),d={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(d.yy[h]=this.yy[h]);c.setInput(e,d.yy),d.yy.lexer=c,d.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var f=c.yylloc;n.push(f);var y=c.options&&c.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,v,g,b,x,w,k,j,z,S={};;){if(v=r[r.length-1],this.defaultActions[v]?g=this.defaultActions[v]:(null==m&&(z=void 0,"number"!=typeof(z=c.lex()||u)&&(z=t.symbols_[z]||z),m=z),g=i[v]&&i[v][m]),void 0===g||!g.length||!g[0]){var T="";for(x in j=[],i[v])this.terminals_[x]&&x>2&&j.push("'"+this.terminals_[x]+"'");T=c.showPosition?"Parse error on line "+(s+1)+":\n"+c.showPosition()+"\nExpecting "+j.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:c.match,token:this.terminals_[m]||m,line:c.yylineno,loc:f,expected:j})}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(g[0]){case 1:r.push(m),o.push(c.yytext),n.push(c.yylloc),r.push(g[1]),m=null,l=c.yyleng,a=c.yytext,s=c.yylineno,f=c.yylloc;break;case 2:if(w=this.productions_[g[1]][1],S.$=o[o.length-w],S._$={first_line:n[n.length-(w||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(w||1)].first_column,last_column:n[n.length-1].last_column},y&&(S._$.range=[n[n.length-(w||1)].range[0],n[n.length-1].range[1]]),void 0!==(b=this.performAction.apply(S,[a,l,s,d.yy,g[1],o,n].concat(p))))return b;w&&(r=r.slice(0,-1*w*2),o=o.slice(0,-1*w),n=n.slice(0,-1*w)),r.push(this.productions_[g[1]][0]),o.push(S.$),n.push(S._$),k=i[r[r.length-2]][r[r.length-1]],r.push(k);break;case 3:return!0}}return!0}},d={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===o.length?this.yylloc.first_column:0)+o[o.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,o,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(o=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in n)this[i]=n[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),i=0;i<n.length;i++)if((r=this._input.match(this.rules[n[i]]))&&(!t||r[0].length>t[0].length)){if(t=r,o=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,n[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,n[o]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,o){switch(r){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function h(){this.yy={}}return c.lexer=d,h.prototype=c,c.Parser=h,new h}();void 0!==B&&(t.parser=r,t.Parser=r.Parser,t.parse=function(){return r.parse.apply(r,arguments)})}),ji=ki.parser,zi=ki.Parser,Si=ki.parse;function Ti(e){if(e instanceof String||"string"==typeof e||e instanceof t)try{return ki.parse(e.toString())}catch(r){throw new Wn(r)}return e}function _i(e,t){void 0===t&&(t=F);var r=e;try{r=Ti(r)}catch(o){return[o]}return bi(r,t)}var Ai=8,Ii=15;function Oi(e,t){return!e||"string"!==Ao(e)||!!e.match(t)}function Ci(e){return e.url?e.url.split(",").length:0}function qi(e,t,r){var o=new Set(t),n=[];return Object.keys(e).forEach(function(t){if(!o.has(t)){var i=r?r+"."+t:null;n.push(new Gn(i,e[t],'Unsupported property "'+t+'"'))}}),n}function Ei(e,t){var r=[];r.push.apply(r,qi(e,["type","url","tileSize"],"source"));return Oi(e.url,/^mapbox:\/\/([^/]*)$/)||r.push(new Gn("sources["+t+"]",e.url,"Source url must be a valid Mapbox tileset url")),r}function Mi(e){var t=[],r=0;return Object.keys(e).forEach(function(o,n){var i=Ei(e[o],n);i.length||(r+=Ci(e[o])),t.push.apply(t,i)}),r>Ii&&t.push(new Gn("sources",null,"Styles must contain "+Ii+" or fewer sources")),t}function Ni(e,t){var r=[],o=qi(e,t.concat(["owner","id","cacheControl","draft","created","modified","visibility"]));r.push.apply(r,o),(e.version>Ai||e.version<Ai)&&r.push(new Gn("version",e.version,"Style version must be "+Ai));Oi(e.glyphs,/^mapbox:\/\/fonts\/([^/]*)\/{fontstack}\/{range}.pbf$/)||r.push(new Gn("glyphs",e.glyphs,"Styles must reference glyphs hosted by Mapbox"));Oi(e.sprite,/^mapbox:\/\/sprites\/([^/]*)\/([^/]*)\/?([^/]*)?$/)||r.push(new Gn("sprite",e.sprite,"Styles must reference sprites hosted by Mapbox"));return Oi(e.visibility,/^(public|private)$/)||r.push(new Gn("visibility",e.visibility,"Style visibility must be public or private")),r}function Pi(e){var t=e;try{t=Ti(t)}catch(o){return[o]}var r=bi(t,F).concat(Ni(t,Object.keys(F.$root)));return t.sources&&(r=r.concat(Mi(t.sources))),r}var Ri={StyleExpression:Lo,isExpression:Do,isExpressionFilter:un,createExpression:Fo,createPropertyExpression:Jo,normalizePropertyExpression:Wo,ZoomConstantExpression:$o,ZoomDependentExpression:Uo,StylePropertyFunction:Go};exports.expression=Ri;var Li={convertFunction:Xo,createFunction:Co,isFunction:Io};exports.function=Li;var Di={eachSource:Ce,eachLayer:qe,eachProperty:Ee};exports.visit=Di,_i.parsed=_i,_i.latest=_i;
},{"buffer":"wYDm"}],"N0IJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deg2rad=a,exports.createCanvas=s,exports.getZoomForResolution=u,exports.applyLetterSpacing=p,exports.wrapText=d,exports.defaultResolutions=exports.assign=void 0;var e=require("ol/events"),r=t(require("ol/events/EventType")),n=require("ol/render/canvas");function t(e){return e&&e.__esModule?e:{default:e}}var o="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1,o=arguments.length;t<o;++t){var a=arguments[t];if(null!=a)for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])}return n};function a(e){return e*Math.PI/180}exports.assign=o;var i=function(){for(var e=[],r=78271.51696402048;e.length<=24;r/=2)e.push(r);return e}();function s(e,r){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(e,r);var n=document.createElement("canvas");return n.width=e,n.height=r,n}function u(e,r){for(var n=0,t=r.length;n<t;++n){if(r[n]<e&&n+1<t){var o=r[n]/r[n+1];return n+Math.log(r[n]/e)/Math.log(o)}}return t-1}exports.defaultResolutions=i;var l,f=Array(256).join(" ");function p(e,r){if(r>=.05){for(var n="",t=e.split("\n"),o=f.slice(0,Math.round(r/.1)),a=0,i=t.length;a<i;++a)a>0&&(n+="\n"),n+=t[a].split("").join(o);return n}return e}function c(){return l||(l=s(1,1).getContext("2d")),l}function v(e,r){return c().measureText(e).width+(e.length-1)*r}var h={};function d(e,r,n,t){if(-1!==e.indexOf("\n")){for(var o=e.split("\n"),a=[],i=0,s=o.length;i<s;++i)a.push(d(o[i],r,n,t));return a.join("\n")}var u=n+","+r+","+e+","+t,l=h[u];if(!l){var f=e.split(" ");if(f.length>1){var g=c();g.font=r;var x=g.measureText("M").width*n,j="";for(a=[],i=0,s=f.length;i<s;++i){var b=f[i],y=j+(j?" ":"")+b;v(y,t)<=x?j=y:(j&&a.push(j),j=b)}j&&a.push(j);for(i=0,s=a.length;i<s&&s>1;++i){var w=a[i];if(v(w,t)<.35*x){var C=i>0?v(a[i-1],t):1/0,O=i<s-1?v(a[i+1],t):1/0;a.splice(i,1),s-=1,C<O?(a[i-1]+=" "+w,i-=1):a[i]=w+" "+a[i]}}for(i=0,s=a.length-1;i<s;++i){var M=a[i],m=a[i+1];if(v(M,t)>.7*x&&v(m,t)<.6*x){var T=M.split(" "),E=T.pop();v(E,t)<.2*x&&(a[i]=T.join(" "),a[i+1]=E+" "+m),s-=1}}l=a.join("\n")}else l=e;l=p(l,t),h[u]=l}return l}n.labelCache&&(0,e.listen)(n.labelCache,r.default.CLEAR,function(){h={}});
},{"ol/events":"UqnM","ol/events/EventType":"C8cu","ol/render/canvas":"iAG7"}],"Fj7k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._getValue=exports.getValue=b,exports.default=O,exports._colorWithOpacity=C,exports._evaluateFilter=k,exports._fromTemplate=I,exports._functionCache=exports._filterCache=void 0;var e=u(require("ol/style/Style")),t=u(require("ol/style/Fill")),i=u(require("ol/style/Stroke")),o=u(require("ol/style/Icon")),a=u(require("ol/style/Text")),r=u(require("ol/style/Circle")),n=u(require("ol/render/Feature")),l=require("@mapbox/mapbox-gl-style-spec"),s=u(require("mapbox-to-css-font")),d=require("./util");function u(e){return e&&e.__esModule?e:{default:e}}var f,g,p=l.function.isFunction,c=l.function.convertFunction,v=l.expression.isExpression,h=l.expression.createPropertyExpression,x={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},y={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},m=function(e,t){var i=h(e,t);if("error"===i.result)throw new Error(i.value.map(function(e){return e.key+": "+e.message}).join(", "));return i.value},w={},S={zoom:0},M={};function b(e,t,i,o,a){var r=e.id;M[r]||(M[r]={});var n=M[r];if(!n[i]){var s=(e[t]||w)[i],d=l.latest[t+"_"+e.type][i];void 0===s&&(s=d.default);var u=v(s);if(!u&&p(s)&&(s=c(s,d),u=!0),u){var f=m(s,d);n[i]=f.evaluate.bind(f)}else"color"==d.type&&(s=l.Color.parse(s)),n[i]=function(){return s}}return S.zoom=o,n[i](S,a)}exports._functionCache=M;var F={};function k(e,t,i,o){return e in F||(F[e]=(0,l.featureFilter)(t).filter),S.zoom=o,F[e](S,i)}function C(e,t){if(e){if(0===e.a||0===t)return;var i=e.a;return t=void 0===t?1:t,"rgba("+Math.round(255*e.r/i)+","+Math.round(255*e.g/i)+","+Math.round(255*e.b/i)+","+i*t+")"}return e}exports._filterCache=F;var T=/^([^]*)\{(.*)\}([^]*)$/;function I(e,t){var i;do{if(i=e.match(T)){var o=t[i[2]]||"";e=i[1]+o+i[3]}}while(i);return e}function O(u,p,c,v,h,m,S){if(void 0===v&&(v=d.defaultResolutions),"string"==typeof p&&(p=JSON.parse(p)),8!=p.version)throw new Error("glStyle version 8 required.");var T,O;if(m)if("undefined"!=typeof Image){var _=new Image;_.crossOrigin="anonymous",_.onload=function(){T=_,O=[_.width,_.height],u.changed(),_.onload=null},_.src=m}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var q=self;q.postMessage({action:"loadImage",src:m}),q.addEventListener("message",function(e){"imageLoaded"===e.data.action&&e.data.src===m&&(T=e.data.image,O=[T.width,T.height])})}for(var z,L=(0,l.derefLayers)(p.layers),P={},W=[],E=0,R=L.length;E<R;++E){var G=L[E],Z=G.id;if("string"==typeof c&&G.source==c||-1!==c.indexOf(Z)){var j=G["source-layer"];if(!z){z=G.source;var A=p.sources[z];if(!A)throw new Error('Source "'+z+'" is not defined');var N=A.type;if("vector"!==N&&"geojson"!==N)throw new Error('Source "'+z+'" is not of type "vector" or "geojson", but "'+N+'"')}var V=P[j];V||(V=P[j]=[]),V.push({layer:G,index:E}),W.push(Z)}delete M[Z],delete F[Z]}var D=new i.default,J=new t.default,B={},U={},X=[],Y=function(l,u){var p=l.getProperties(),c=P[p.layer];if(c){var m=v.indexOf(u);-1==m&&(m=(0,d.getZoomForResolution)(u,v));for(var M=x[l.getGeometry().getType()],F={properties:p,type:M},_=-1,q=function(v,x){var q=c[v],z=q.layer,L=z.id,P=z.layout||w,W=z.paint||w;if("none"===P.visibility||"minzoom"in z&&m<z.minzoom||"maxzoom"in z&&m>=z.maxzoom)return"continue";var E=z.filter;if(!E||k(L,E,F,m)){var R=void 0,G=void 0,Z=void 0,j=void 0,A=void 0,N=void 0,V=q.index;if(3==M&&"fill"==z.type)if(G=b(z,"paint","fill-opacity",m,F),"fill-pattern"in W){var Y=b(z,"paint","fill-pattern",m,F);if(Y){var $="string"==typeof Y?I(Y,p):Y.toString();if(T&&h&&h[$]){(N=X[++_])&&N.getFill()&&!N.getStroke()&&!N.getText()||(N=X[_]=new e.default({fill:new t.default})),Z=N.getFill(),N.setZIndex(V);var H=U[Ce=$+"."+G];if(!H){var K=h[$];(Ie=(Te=(0,d.createCanvas)(K.width,K.height)).getContext("2d")).globalAlpha=G,Ie.drawImage(T,K.x,K.y,K.width,K.height,0,0,K.width,K.height),H=Ie.createPattern(Te,"repeat"),U[Ce]=H}Z.setColor(H)}}}else(R=C(b(z,"paint","fill-color",m,F),G))&&("fill-outline-color"in W&&(A=C(b(z,"paint","fill-outline-color",m,F),G)),A||(A=R),(N=X[++_])&&N.getFill()&&N.getStroke()&&!N.getText()||(N=X[_]=new e.default({fill:new t.default,stroke:new i.default})),(Z=N.getFill()).setColor(R),(j=N.getStroke()).setColor(A),j.setWidth(1),N.setZIndex(V));if(1!=M&&"line"==z.type){R=!("line-pattern"in W)&&"line-color"in W?C(b(z,"paint","line-color",m,F),b(z,"paint","line-opacity",m,F)):void 0;var Q=b(z,"paint","line-width",m,F);R&&Q>0&&((N=X[++_])&&N.getStroke()&&!N.getFill()&&!N.getText()||(N=X[_]=new e.default({stroke:new i.default})),(j=N.getStroke()).setLineCap(b(z,"layout","line-cap",m,F)),j.setLineJoin(b(z,"layout","line-join",m,F)),j.setMiterLimit(b(z,"layout","line-miter-limit",m,F)),j.setColor(R),j.setWidth(Q),j.setLineDash(W["line-dasharray"]?b(z,"paint","line-dasharray",m,F).map(function(e){return e*Q}):null),N.setZIndex(V))}var ee=!1,te=null,ie=0,oe=void 0,ae=void 0,re=void 0;if((1==M||2==M)&&"icon-image"in P){var ne=b(z,"layout","icon-image",m,F);if(ne){oe="string"==typeof ne?I(ne,p):ne.toString();var le=void 0;if(T&&h&&h[oe]){var se=b(z,"layout","icon-rotation-alignment",m,F);if(2==M){var de=l.getGeometry();if(de.getFlatMidpoint||de.getFlatMidpoints){var ue=de.getExtent();if(Math.sqrt(Math.max(Math.pow((ue[2]-ue[0])/u,2),Math.pow((ue[3]-ue[1])/u,2)))>150){var fe="MultiLineString"===de.getType()?de.getFlatMidpoints():de.getFlatMidpoint();if(g||(f=[NaN,NaN],g=new n.default("Point",f,[],{},null)),le=g,f[0]=fe[0],f[1]=fe[1],"line"===(Xe=b(z,"layout","symbol-placement",m,F))&&"map"===se)for(var ge=de.getStride(),pe=de.getFlatCoordinates(),ce=0,ve=pe.length-ge;ce<ve;ce+=ge){var he=pe[ce],xe=pe[ce+1],ye=pe[ce+ge],me=pe[ce+ge+1],we=Math.min(he,ye),Se=Math.min(xe,me),Me=Math.max(he,ye),be=Math.max(xe,me);if(fe[0]>=we&&fe[0]<=Me&&fe[1]>=Se&&fe[1]<=be){ie=Math.atan2(xe-me,ye-he);break}}}}}if(2!==M||le){(N=X[++_])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=X[_]=new e.default),N.setGeometry(le);var Fe=b(z,"layout","icon-size",m,F),ke=void 0!==W["icon-color"]?b(z,"paint","icon-color",m,F):null,Ce=oe+"."+Fe;if(null!==ke&&(Ce+="."+ke),!(ae=B[Ce])){K=h[oe];if(null!==ke){var Te,Ie;(Ie=(Te=(0,d.createCanvas)(K.width,K.height)).getContext("2d")).drawImage(T,K.x,K.y,K.width,K.height,0,0,K.width,K.height);for(var Oe=Ie.getImageData(0,0,Te.width,Te.height),_e=0,qe=Oe.data.length;_e<qe;_e+=4){var ze=ke.a;0!==ze&&(Oe.data[_e]=255*ke.r/ze,Oe.data[_e+1]=255*ke.g/ze,Oe.data[_e+2]=255*ke.b/ze),Oe.data[_e+3]=ze}Ie.putImageData(Oe,0,0),ae=B[Ce]=new o.default({img:Te,imgSize:[Te.width,Te.height],scale:Fe/K.pixelRatio})}else ae=B[Ce]=new o.default({img:T,imgSize:O,size:[K.width,K.height],offset:[K.x,K.y],rotateWithView:"map"===se,scale:Fe/K.pixelRatio})}ae.setRotation(ie+(0,d.deg2rad)(b(z,"layout","icon-rotate",m,F))),ae.setOpacity(b(z,"paint","icon-opacity",m,F)),ae.setAnchor(y[b(z,"layout","icon-anchor",m,F)]),N.setImage(ae),te=N.getText(),N.setText(void 0),N.setZIndex(V),ee=!0,re=!1}else re=!0}}}if(1==M&&"circle-radius"in W){(N=X[++_])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=X[_]=new e.default);var Le=b(z,"paint","circle-radius",m,F),Pe=C(b(z,"paint","circle-stroke-color",m,F),b(z,"paint","circle-stroke-opacity",m,F)),We=C(b(z,"paint","circle-color",m,F),b(z,"paint","circle-opacity",m,F)),Ee=b(z,"paint","circle-stroke-width",m,F),Re=Le+"."+Pe+"."+We+"."+Ee;(ae=B[Re])||(ae=B[Re]=new r.default({radius:Le,stroke:Pe&&Ee>0?new i.default({width:Ee,color:Pe}):void 0,fill:We?new t.default({color:We}):void 0})),N.setImage(ae),te=N.getText(),N.setText(void 0),N.setGeometry(void 0),N.setZIndex(V),ee=!0}var Ge=void 0;if("text-field"in P)Ge=I(b(z,"layout","text-field",m,F).toString(),p).trim(),G=b(z,"paint","text-opacity",m,F);if(Ge&&G&&!re){ee||((N=X[++_])&&N.getText()&&!N.getFill()&&!N.getStroke()||(N=X[_]=new e.default),N.setImage(void 0),N.setGeometry(void 0)),N.getText()||N.setText(te||new a.default({padding:[2,2,2,2]})),te=N.getText();var Ze=Math.round(b(z,"layout","text-size",m,F)),je=b(z,"layout","text-font",m,F),Ae=b(z,"layout","text-line-height",m,F),Ne=(0,s.default)(S?S(je):je,Ze,Ae),Ve=P["text-transform"];"uppercase"==Ve?Ge=Ge.toUpperCase():"lowercase"==Ve&&(Ge=Ge.toLowerCase());var De=b(z,"layout","text-max-width",m,F),Je=b(z,"layout","text-letter-spacing",m,F),Be=2==M?(0,d.applyLetterSpacing)(Ge,Je):(0,d.wrapText)(Ge,Ne,De,Je);te.setText(Be),te.setFont(Ne),te.setRotation((0,d.deg2rad)(b(z,"layout","text-rotate",m,F)));var Ue=b(z,"layout","text-anchor",m,F),Xe=ee||1==M?"point":b(z,"layout","symbol-placement",m,F);te.setPlacement(Xe);var Ye=b(z,"paint","text-halo-width",m,F),$e=b(z,"layout","text-offset",m,F),He=b(z,"paint","text-translate",m,F),Ke=0,Qe=0;if("point"==Xe){var et="center";-1!==Ue.indexOf("left")?(et="left",Qe=Ye):-1!==Ue.indexOf("right")&&(et="right",Qe=-Ye),te.setTextAlign(et);var tt=b(z,"layout","text-rotation-alignment",m,F);te.setRotateWithView("map"==tt)}else te.setMaxAngle((0,d.deg2rad)(b(z,"layout","text-max-angle",m,F))*Ge.length/Be.length),te.setTextAlign(),te.setRotateWithView(!1);var it="middle";0==Ue.indexOf("bottom")?(it="bottom",Ke=-Ye-.5*(Ae-1)*Ze):0==Ue.indexOf("top")&&(it="top",Ke=Ye+.5*(Ae-1)*Ze),te.setTextBaseline(it),te.setOffsetX($e[0]*Ze+Qe+He[0]),te.setOffsetY($e[1]*Ze+Ke+He[1]),J.setColor(C(b(z,"paint","text-color",m,F),G)),te.setFill(J);var ot=C(b(z,"paint","text-halo-color",m,F),G);if(ot){D.setColor(ot),Ye*=2;var at=.5*Ze;D.setWidth(Ye<=at?Ye:at),te.setStroke(D)}else te.setStroke(void 0);var rt=b(z,"layout","text-padding",m,F),nt=te.getPadding();rt!==nt[0]&&(nt[0]=nt[1]=nt[2]=nt[3]=rt),N.setZIndex(V)}}},z=0,L=c.length;z<L;++z)q(z);return _>-1?(X.length=_+1,X):void 0}};return u.setStyle(Y),u.set("mapbox-source",z),u.set("mapbox-layers",W),Y}
},{"ol/style/Style":"he4w","ol/style/Fill":"AFcg","ol/style/Stroke":"TXDt","ol/style/Icon":"z2xv","ol/style/Text":"RPsG","ol/style/Circle":"cdf1","ol/render/Feature":"IFOM","@mapbox/mapbox-gl-style-spec":"Prd1","mapbox-to-css-font":"pt6h","./util":"N0IJ"}],"jVC7":[function(require,module,exports) {
(function(){var a;module.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return a},getLink:function(a){return"https://fonts.google.com/specimen/"+a.replace(/( )/g,"+")},normalizeName:function(a){return a}},a=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this);
},{}],"V9RY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("./State.js")),e=l(require("./TileImage.js")),r=require("../extent.js"),i=require("../asserts.js"),o=require("../tileurlfunction.js"),n=require("../tilegrid.js"),s=require("../proj.js"),a=require("../net.js");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),d=function(e){function l(r){var o=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,projection:(0,s.get)("EPSG:3857"),reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:t.default.LOADING,tileLoadFunction:r.tileLoadFunction,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition})||this;if(o.tileJSON_=null,o.tileSize_=r.tileSize,r.url)if(r.jsonp)(0,a.jsonp)(r.url,o.handleTileJSONResponse.bind(o),o.handleTileJSONError.bind(o));else{var n=new XMLHttpRequest;n.addEventListener("load",o.onXHRLoad_.bind(o)),n.addEventListener("error",o.onXHRError_.bind(o)),n.open("GET",r.url),n.send()}else r.tileJSON?o.handleTileJSONResponse(r.tileJSON):(0,i.assert)(!1,51);return o}return u(l,e),l.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(i){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},l.prototype.onXHRError_=function(t){this.handleTileJSONError()},l.prototype.getTileJSON=function(){return this.tileJSON_},l.prototype.handleTileJSONResponse=function(e){var i,a=(0,s.get)("EPSG:4326"),l=this.getProjection();if(void 0!==e.bounds){var u=(0,s.getTransformFromProjections)(a,l);i=(0,r.applyTransform)(e.bounds,u)}var d=e.minzoom||0,c=e.maxzoom||22,p=(0,n.createXYZ)({extent:(0,n.extentFromProjection)(l),maxZoom:c,minZoom:d,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=(0,o.createFromTemplates)(e.tiles,p),void 0!==e.attribution&&!this.getAttributions()){var h=void 0!==i?i:a.getExtent();this.setAttributions(function(t){return(0,r.intersects)(h,t.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState(t.default.READY)},l.prototype.handleTileJSONError=function(){this.setState(t.default.ERROR)},l}(e.default),c=d;exports.default=c;
},{"./State.js":"iC8j","./TileImage.js":"udAI","../extent.js":"QDir","../asserts.js":"fLG6","../tileurlfunction.js":"p1vZ","../tilegrid.js":"ExRx","../proj.js":"Diht","../net.js":"SU9K"}],"CreQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyStyle=V,exports.applyBackground=C,exports.default=F,exports.apply=H,exports.getLayer=I,exports.getLayers=X,exports.getSource=Y,exports._finalizeLayer=W,exports._getFonts=L;var e=w(require("mapbox-to-css-font")),t=x(require("./stylefunction")),r=w(require("webfont-matcher/lib/fonts/google")),o=require("ol/proj"),n=require("ol/tilegrid"),i=w(require("ol/tilegrid/TileGrid")),a=w(require("ol/Map")),u=w(require("ol/View")),s=w(require("ol/format/GeoJSON")),l=w(require("ol/format/MVT")),c=require("ol/Observable"),f=w(require("ol/layer/Tile")),g=w(require("ol/layer/Vector")),p=w(require("ol/layer/VectorTile")),d=w(require("ol/source/TileJSON")),y=w(require("ol/source/Vector")),m=w(require("ol/source/VectorTile")),v=require("@mapbox/mapbox-gl-style-spec"),h=require("./util");function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function w(e){return e&&e.__esModule?e:{default:e}}var S,O={},T=/font-family: ?([^;]*);/,q=/("|')/g;function E(e){if(!S){S={};for(var t=document.styleSheets,r=0,o=t.length;r<o;++r){var n=t[r];try{var i=n.rules||n.cssRules;if(i)for(var a=0,u=i.length;a<u;++a){var s=i[a];if(5==s.type){var l=s.cssText.match(T);S[l[1].replace(q,"")]=!0}}}catch(c){}}}return e in S}var j={},z=r.default.getNames();function L(t){var r=t.toString();if(r in j)return t;for(var o=t.map(function(t){var r=(0,e.default)(t,1).split(" ");return[r.slice(3).join(" ").replace(/"/g,""),r[1]+r[0]]}),n=0,i=o.length;n<i;++n){var a=o[n],u=a[0];if(!E(u)&&-1!==z.indexOf(u)){var s="https://fonts.googleapis.com/css?family="+u.replace(/ /g,"+")+":"+a[1];if(!document.querySelector('link[href="'+s+'"]')){var l=document.createElement("link");l.href=s,l.rel="stylesheet",document.head.appendChild(l)}}}return j[r]=!0,t}var k=/^(.*)(\?.*)$/;function M(e,t){return t&&0===e.indexOf(".")&&(e=t+e),e}function P(e,t,r){var o=(e=M(e,t)).match(k);return o?o[1]+r+(o.length>2?o[2]:""):e+r}function V(e,r,o,n,i){return new Promise(function(a,u){if("object"!=typeof r&&(r=JSON.parse(r)),8!=r.version)return u(new Error("glStyle version 8 required."));if(!(e instanceof g.default||e instanceof p.default))return u(new Error("Can only apply to VectorLayer or VectorTileLayer"));var s,l,c;function f(){c||r.sprite&&!s?c?(e.setStyle(c),a()):u(new Error("Something went wrong trying to apply style.")):(c=(0,t.default)(e,r,o,i,s,l,L),e.getStyle()?a():u(new Error("Nothing to show for source ["+o+"]")))}if(r.sprite){var d=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",y=P(r.sprite,n,d+".json");fetch(y,{credentials:"same-origin"}).then(function(e){return e.ok||""===d?e:(y=P(r.sprite,n,".json"),fetch(y,{credentials:"same-origin"}))}).then(function(e){if(e.ok)return e.json();u(new Error("Problem fetching sprite from "+y+": "+e.statusText))}).then(function(e){if(void 0===e||0===Object.keys(e).length)return u(new Error("No sprites found."));s=e,l=P(r.sprite,n,d+".png"),f()}).catch(function(e){u(new Error("Sprites cannot be loaded: "+y+": "+e.message))})}else f()})}var R={};function N(e,r){var o={type:r.type};function n(){var n=e.getTargetElement();if(n){var i=r.layout||{},a=r.paint||{};o.paint=a,o.id="olms-bg-"+a["background-opacity"]+a["background-color"];var u=e.getView().getZoom();if(void 0!==a["background-color"]){var s=(0,t.getValue)(o,"paint","background-color",u,R);n.style.background=v.Color.parse(s).toString()}void 0!==a["background-opacity"]&&(n.style.opacity=(0,t.getValue)(o,"paint","background-opacity",u,R)),"none"==i.visibility&&(n.style.backgroundColor="",n.style.opacity="")}}e.getTargetElement()&&n(),e.on(["change:resolution","change:target"],n)}function C(e,t){t.layers.some(function(t){if("background"==t.type)return N(e,t),!0})}function G(e,t){var r;return e.some(function(e){if(e.id==t)return r=e.source,!0}),r}function Z(e){var t=e.bounds;if(t){var r=(0,o.fromLonLat)([t[0],t[1]]),n=(0,o.fromLonLat)([t[2],t[3]]);return[r[0],r[1],n[0],n[1]]}}function A(e,t,r){e=(0,h.assign)({},e);var o=new p.default({declutter:!0,visible:!1}),n=JSON.stringify(e),a=O[n];a||(a=O[n]=new d.default({url:e.tiles?void 0:r,tileJSON:e.tiles?e:void 0}));var u=a.on("change",function(){var t=a.getState();if("ready"===t){var r=a.getTileJSON(),n=Array.isArray(r.tiles)?r.tiles:[r.tiles];if(e.url)for(var s=0,f=n.length;s<f;++s){var g=n[s];0!=g.indexOf("http")&&(n[s]=e.url+g)}var p=a.getTileGrid(),d=Z(r),y=r.minzoom||0,v=r.maxzoom||22,b=a.get("ol-source");void 0===b&&(b=new m.default({attributions:a.getAttributions(),format:new l.default,tileGrid:new i.default({origin:p.getOrigin(0),extent:d||p.getExtent(),minZoom:y,resolutions:h.defaultResolutions.slice(0,v+1),tileSize:512}),urls:n}),a.set("ol-source",b)),(0,c.unByKey)(u),o.setSource(b)}else"error"===t&&(a.set("ol-source",null),(0,c.unByKey)(u),o.setSource(void 0))});return"ready"===a.getState()&&a.changed(),o}function J(e,t){var r=new f.default,o=new d.default({transition:0,url:e.tiles?void 0:t,tileJSON:e.tiles?e:void 0,crossOrigin:"anonymous"}),a=o.on("change",function(){var t=o.getState();if("ready"===t){(0,c.unByKey)(a);var u=o.getTileJSON(),s=Z(u),l=o.getTileGrid(),f=e.tileSize||u.tileSize||512,g=u.minzoom||0,p=u.maxzoom||22;o.tileGrid=new i.default({origin:l.getOrigin(0),extent:s||l.getExtent(),minZoom:g,resolutions:(0,n.createXYZ)({maxZoom:p,tileSize:f}).getResolutions(),tileSize:f}),r.setSource(o)}else"error"===t&&((0,c.unByKey)(a),r.setSource(void 0))});return o.setTileLoadFunction(function(e,t){if(-1!=t.indexOf("{bbox-epsg-3857}")){var r=o.getTileGrid().getTileCoordExtent(e.getTileCoord());t=t.replace("{bbox-epsg-3857}",r.toString())}e.getImage().src=t}),r}var _=new s.default;function B(e,t){var r,o,n=e.data;return"string"==typeof n?o=M(n,t):r=_.readFeatures(n,{featureProjection:"EPSG:3857"}),new g.default({source:new y.default({attributions:e.attribution,features:r,format:_,url:o}),visible:!1})}function K(e,r,o){var n=o.getZoom(),i=(0,t.getValue)(e,"paint","raster-opacity",n,R);r.setOpacity(i)}function D(e,t,r,n,i,a){var s=[],l=t.getView();l.isDef()||l.getRotation()||l.getResolutions()||(l=new u.default({maxResolution:h.defaultResolutions[0]}),t.setView(l)),"center"in e&&!l.getCenter()&&l.setCenter((0,o.fromLonLat)(e.center)),"zoom"in e&&void 0===l.getZoom()&&l.setResolution(h.defaultResolutions[0]/Math.pow(2,e.zoom)),l.getCenter()&&void 0!==l.getZoom()||l.fit(l.getProjection().getExtent(),{nearest:!0,size:t.getSize()}),e.sprite&&(0==e.sprite.indexOf("mapbox://")?e.sprite=r+"/sprite"+a:0!=e.sprite.indexOf("http")&&(e.sprite=(n?n+i:"")+e.sprite+a));for(var c,f,g,p,d,y,m=e.layers,v=[],b=function(r,o){var n=(c=m[r]).type;if("heatmap"==n||"fill-extrusion"==n||"hillshade"==n);else if("background"==n)N(t,c);else{if((p=c.source||G(m,c.ref))!=g){if(v.length&&(s.push(W(d,v,e,i,t)),v=[]),f=e.sources[p],(y=f.url)&&0==(y=M(y,i)).indexOf("mapbox://")){var u=y.replace("mapbox://","");f.tiles=["a","b","c","d"].map(function(e){return"https://"+e+".tiles.mapbox.com/v4/"+u+"/{z}/{x}/{y}."+("vector"==f.type?"vector.pbf":"png")+a})}"vector"==f.type?d=A(f,a,y):"raster"==f.type?((d=J(f,y)).setVisible(!c.layout||"none"!==c.layout.visibility),l.on("change:resolution",K.bind(x,c,d,l)),K(c,d,l)):"geojson"==f.type&&(d=B(f,i)),g=p,d&&d.set("mapbox-source",g)}v.push(c.id)}},x=this,w=0,S=m.length;w<S;++w)b(w);return s.push(W(d,v,e,i,t)),t.set("mapbox-style",e),Promise.all(s)}function F(e,t){var r,o,n,i,u;if(r=o=n=i="",("string"==typeof e||e instanceof HTMLElement)&&(e=new a.default({target:e})),"string"==typeof t){var s=t.match(k);s&&(o=s[1],r=s.length>2?s[2]:""),u=new Promise(function(a,u){fetch(t,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(s){var l=document.createElement("A");l.href=t;var c=l.href;i=l.pathname.split("/").slice(0,-1).join("/")+"/",n=c.substr(0,c.indexOf(i)),D(s,e,o,n,i,r).then(function(){a(e)}).catch(u)}).catch(function(e){u(new Error("Could not load "+t+": "+e.message))})})}else u=new Promise(function(r,o){D(t,e).then(function(){r(e)}).catch(o)});return u}function H(e,t){return("string"==typeof e||e instanceof HTMLElement)&&(e=new a.default({target:e})),setTimeout(function(){F(e,t)},0),e}function W(e,t,r,o,n){for(var i=24,a=0,u=r.layers,s=0,l=u.length;s<l;++s){var c=u[s];-1!==t.indexOf(c.id)&&(i=Math.min("minzoom"in c?c.minzoom:0,i),a=Math.max("maxzoom"in c?c.maxzoom:24,a))}return new Promise(function(u,s){var l=function(){var n=e.getSource();if(n&&"error"!==n.getState()){if("function"==typeof n.getTileGrid){var l=n.getTileGrid();if(l){var c=l.getMinZoom();(i>0||c>0)&&e.setMaxResolution(Math.min(h.defaultResolutions[i],l.getResolution(c))+1e-9),a<24&&e.setMinResolution(h.defaultResolutions[a]+1e-9)}}n instanceof y.default||n instanceof m.default?V(e,r,t,o).then(function(){e.setVisible(!0),u()},function(e){s(e)}):u()}else s(new Error("Error accessing data for source "+e.get("mapbox-source")))};e.set("mapbox-layers",t),-1===n.getLayers().getArray().indexOf(e)&&n.addLayer(e),e.getSource()?l():e.once("change:source",l)})}function I(e,t){for(var r=e.getLayers().getArray(),o=0,n=r.length;o<n;++o){var i=r[o].get("mapbox-layers");if(i&&-1!==i.indexOf(t))return r[o]}}function X(e,t){for(var r=[],o=e.getLayers().getArray(),n=0,i=o.length;n<i;++n)o[n].get("mapbox-source")===t&&r.push(o[n]);return r}function Y(e,t){for(var r=e.getLayers().getArray(),o=0,n=r.length;o<n;++o){var i=r[o].getSource();if(r[o].get("mapbox-source")===t)return i}}
},{"mapbox-to-css-font":"pt6h","./stylefunction":"Fj7k","webfont-matcher/lib/fonts/google":"jVC7","ol/proj":"Diht","ol/tilegrid":"ExRx","ol/tilegrid/TileGrid":"dpZ6","ol/Map":"kYy5","ol/View":"hNqE","ol/format/GeoJSON":"qBlb","ol/format/MVT":"bjcz","ol/Observable":"IdSm","ol/layer/Tile":"BUEc","ol/layer/Vector":"dflx","ol/layer/VectorTile":"zOJv","ol/source/TileJSON":"V9RY","ol/source/Vector":"ZS12","ol/source/VectorTile":"A6uo","@mapbox/mapbox-gl-style-spec":"Prd1","./util":"N0IJ"}],"VqZN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMapboxPath=c,exports.normalizeSpriteUrl=f,exports.normalizeGlyphsUrl=p,exports.normalizeStyleUrl=d,exports.normalizeSourceUrl=h,exports.default=void 0;var e=a(require("../events/Event.js")),r=a(require("../events/EventType.js")),t=a(require("../format/MVT.js")),n=a(require("../source/State.js")),o=a(require("../layer/VectorTile.js")),s=a(require("../source/VectorTile.js")),i=require("ol-mapbox-style");function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),u="https://api.mapbox.com";function c(e){return 0!==e.indexOf("mapbox://")?"":e.slice("mapbox://".length)}function f(e,r){var t=c(e);if(!t)return e;if(0!==t.indexOf("sprites/"))throw new Error("unexpected sprites url: "+e);var n=t.slice("sprites/".length);return u+"/styles/v1/"+n+"/sprite?access_token="+r}function p(e,r){var t=c(e);if(!t)return e;if(0!==t.indexOf("fonts/"))throw new Error("unexpected fonts url: "+e);var n=t.slice("fonts/".length);return u+"/fonts/v1/"+n+"/0-255.pbf?access_token="+r}function d(e,r){var t=c(e);if(!t)return e;if(0!==t.indexOf("styles/"))throw new Error("unexpected style url: "+e);var n=t.slice("styles/".length);return u+"/styles/v1/"+n+"?&access_token="+r}function h(e,r){var t=c(e);return t?"https://{a-d}.tiles.mapbox.com/v4/"+t+"/{z}/{x}/{y}.vector.pbf?access_token="+r:e}var y=function(e){function t(t){var n=e.call(this,r.default.ERROR)||this;return n.error=t,n}return l(t,e),t}(e.default),v={VECTOR:"vector"},m=function(e){function r(r){var o=this,i=!("declutter"in r)||r.declutter,a=new s.default({state:n.default.LOADING,format:new t.default});return(o=e.call(this,{source:a,declutter:i,className:r.className,opacity:r.opacity,visible:r.visible,zIndex:r.zIndex,minResolution:r.minResolution,maxResolution:r.maxResolution,minZoom:r.minZoom,maxZoom:r.maxZoom,renderOrder:r.renderOrder,renderBuffer:r.renderBuffer,renderMode:r.renderMode,map:r.map,updateWhileAnimating:r.updateWhileAnimating,updateWhileInteracting:r.updateWhileInteracting,preload:r.preload,useInterimTilesOnError:r.useInterimTilesOnError})||this).sourceId=r.source,o.layers=r.layers,o.accessToken=r.accessToken,o.fetchStyle(r.styleUrl),o}return l(r,e),r.prototype.fetchStyle=function(e){var r=this,t=d(e,this.accessToken);fetch(t).then(function(e){if(!e.ok)throw new Error("unexpected response when fetching style: "+e.status);return e.json()}).then(function(e){r.onStyleLoad(e)}).catch(function(e){r.handleError(e)})},r.prototype.onStyleLoad=function(e){var r,t,o=this;if(this.layers){for(var s={},a=0;a<e.layers.length;++a){var l=e.layers[a];l.source&&(s[l.id]=l.source)}var u=void 0;for(a=0;a<this.layers.length;++a){var c=s[this.layers[a]];if(!c)return void this.handleError(new Error("could not find source for "+this.layers[a]));if(u){if(u!==c)return void this.handleError(new Error("layers can only use a single source, found "+u+" and "+c))}else u=c}r=u,t=this.layers}else t=r=this.sourceId;t||(t=r=Object.keys(e.sources)[0]),e.sprite&&(e.sprite=f(e.sprite,this.accessToken)),e.glyphs&&(e.glyphs=p(e.glyphs,this.accessToken));var d=e.sources[r];if(d.type===v.VECTOR){var y=this.getSource();y.setUrl(h(d.url,this.accessToken)),(0,i.applyStyle)(this,e,t).then(function(){y.setState(n.default.READY)}).catch(function(e){o.handleError(e)})}else this.handleError(new Error("only works for vector sources, found "+d.type))},r.prototype.handleError=function(e){this.dispatchEvent(new y(e)),this.getSource().setState(n.default.ERROR)},r}(o.default),x=m;exports.default=x;
},{"../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../format/MVT.js":"bjcz","../source/State.js":"iC8j","../layer/VectorTile.js":"zOJv","../source/VectorTile.js":"A6uo","ol-mapbox-style":"CreQ"}],"K7j2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./ImageBase.js")),e=r(require("./ImageState.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(t){function r(r,o,n,a,u){var i=this,s=void 0!==u?e.default.IDLE:e.default.LOADED;return(i=t.call(this,r,o,n,s)||this).loader_=void 0!==u?u:null,i.canvas_=a,i.error_=null,i}return o(r,t),r.prototype.getError=function(){return this.error_},r.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=e.default.ERROR):this.state=e.default.LOADED,this.changed()},r.prototype.load=function(){this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},r.prototype.getImage=function(){return this.canvas_},r}(t.default),a=n;exports.default=a;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3kG"}],"GITV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./ImageLayer.js")),t=l(require("./VectorLayer.js")),r=l(require("../../events/EventType.js")),o=l(require("../../ImageCanvas.js")),n=l(require("../../ImageState.js")),i=l(require("../../ViewHint.js")),a=require("../../transform.js"),s=require("../../obj.js"),u=require("../../extent.js"),c=require("../../render.js");function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=function(e){function l(r){var o=e.call(this,r)||this;return o.vectorRenderer_=new t.default(r),o.layerImageRatio_=r.getImageRatio(),o.coordinateToVectorPixelTransform_=(0,a.create)(),o.renderedPixelToCoordinateTransform_=null,o}return d(l,e),l.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),e.prototype.disposeInternal.call(this)},l.prototype.getFeatures=function(e){if(this.vectorRenderer_){var t=(0,a.apply)(this.coordinateToVectorPixelTransform_,(0,a.apply)(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}return new Promise(function(e,t){e([])})},l.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},l.prototype.prepareFrame=function(e){var t=e.pixelRatio,l=e.viewState,d=l.resolution,p=e.viewHints,f=this.vectorRenderer_,h=e.extent;1!==this.layerImageRatio_&&(h=h.slice(0),(0,u.scaleFromCenter)(h,this.layerImageRatio_));var _=(0,u.getWidth)(h)/d,v=(0,u.getHeight)(h)/d;if(!p[i.default.ANIMATING]&&!p[i.default.INTERACTING]&&!(0,u.isEmpty)(h)){f.useContainer(null,null,1);var m=f.context,y=(0,s.assign)({},e,{declutterItems:[],extent:h,size:[_,v],viewState:(0,s.assign)({},e.viewState,{rotation:0})}),g=new o.default(h,d,t,m.canvas,function(e){f.prepareFrame(y)&&f.replayGroupChanged&&(f.clipping=!1,f.renderFrame(y,null),(0,c.renderDeclutterItems)(y,null),e())});g.addEventListener(r.default.CHANGE,function(){if(g.getState()===n.default.LOADED){this.image_=g;var e=g.getResolution(),r=g.getPixelRatio(),o=e*t/r;this.renderedResolution=o,this.coordinateToVectorPixelTransform_=(0,a.compose)(this.coordinateToVectorPixelTransform_,_/2,v/2,1/o,-1/o,0,-l.center[0],-l.center[1])}}.bind(this)),g.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_},l.prototype.preRender=function(){},l.prototype.postRender=function(){},l.prototype.forEachFeatureAtCoordinate=function(t,r,o,n,i){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,r,o,n,i):e.prototype.forEachFeatureAtCoordinate.call(this,t,r,o,n,i)},l}(e.default),f=p;exports.default=f;
},{"./ImageLayer.js":"rzNj","./VectorLayer.js":"F2e3","../../events/EventType.js":"C8cu","../../ImageCanvas.js":"K7j2","../../ImageState.js":"u3kG","../../ViewHint.js":"cuLW","../../transform.js":"P4eA","../../obj.js":"mH6q","../../extent.js":"QDir","../../render.js":"RvU2"}],"VV4h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./BaseVector.js")),t=o(require("../renderer/canvas/VectorImageLayer.js")),r=require("../obj.js");function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(e){function o(t){var o=this,n=t||{},i=(0,r.assign)({},n);return delete i.imageRatio,(o=e.call(this,i)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,o}return n(o,e),o.prototype.getImageRatio=function(){return this.imageRatio_},o.prototype.createRenderer=function(){return new t.default(this)},o}(e.default),a=i;exports.default=a;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorImageLayer.js":"GITV","../obj.js":"mH6q"}],"xlCh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getValueType=e,exports.isTypeUnique=o,exports.numberToGlsl=u,exports.arrayToGlsl=i,exports.colorToGlsl=l,exports.getStringNumberEquivalent=f,exports.stringToGlsl=a,exports.expressionToGlsl=s,exports.Operators=exports.ValueTypes=void 0;var t=require("../color.js"),r={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0};exports.ValueTypes=r;var n={};function e(e){if("number"==typeof e)return r.NUMBER;if("boolean"==typeof e)return r.BOOLEAN;if("string"==typeof e)return(0,t.isStringColor)(e)?r.COLOR|r.STRING:r.STRING;if(!Array.isArray(e))throw new Error("Unhandled value type: "+JSON.stringify(e));var o=e;if(o.every(function(t){return"number"==typeof t}))return 3===o.length||4===o.length?r.COLOR|r.NUMBER_ARRAY:r.NUMBER_ARRAY;if("string"!=typeof o[0])throw new Error("Expected an expression operator but received: "+JSON.stringify(o));var u=n[o[0]];if(void 0===u)throw new Error("Unrecognized expression operator: "+JSON.stringify(o));return u.getReturnType(o.slice(1))}function o(t){return Math.log2(t)%1==0}function u(t){var r=t.toString();return-1===r.indexOf(".")?r+".0":r}function i(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec"+t.length+"("+t.map(u).join(", ")+")"}function l(r){var n=(0,t.asArray)(r).slice();return n.length<4&&n.push(1),i(n.map(function(t,r){return r<3?t/255:t}))}function f(t,r){return void 0===t.stringLiteralsMap[r]&&(t.stringLiteralsMap[r]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[r]}function a(t,r){return u(f(t,r))}function s(t,o,f){if(Array.isArray(o)&&"string"==typeof o[0]){var s=n[o[0]];if(void 0===s)throw new Error("Unrecognized expression operator: "+JSON.stringify(o));return s.toGlsl(t,o.slice(1),f)}return(e(o)&r.NUMBER)>0?u(o):(e(o)&r.BOOLEAN)>0?o.toString():(e(o)&r.STRING)>0&&(void 0===f||f==r.STRING)?a(t,o.toString()):(e(o)&r.COLOR)>0&&(void 0===f||f==r.COLOR)?l(o):(e(o)&r.NUMBER_ARRAY)>0?i(o):void 0}function c(t){if(!(e(t)&r.NUMBER))throw new Error("A numeric value was expected, got "+JSON.stringify(t)+" instead")}function g(t){for(var r=0;r<t.length;r++)c(t[r])}function p(t){if(!(e(t)&r.STRING))throw new Error("A string value was expected, got "+JSON.stringify(t)+" instead")}function R(t){if(!(e(t)&r.BOOLEAN))throw new Error("A boolean value was expected, got "+JSON.stringify(t)+" instead")}function y(t,r){if(t.length!==r)throw new Error("Exactly "+r+" arguments were expected, got "+t.length+" instead")}function N(t,r){if(t.length<r)throw new Error("At least "+r+" arguments were expected, got "+t.length+" instead")}function v(t,r){if(t.length>r)throw new Error("At most "+r+" arguments were expected, got "+t.length+" instead")}function h(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got "+t+" instead")}function O(t){if(t.length%2==0)throw new Error("An even amount of arguments was expected, got "+t+" instead")}function E(t,r){if(!o(r))throw new Error("Could not infer only one type from the following expression: "+JSON.stringify(t))}function d(t){return{getReturnType:function(t){return r.BOOLEAN},toGlsl:function(n,o){y(o,2);for(var u=r.ANY,i=0;i<o.length;i++)u&=e(o[i]);if(0===u)throw new Error("All arguments should be of compatible type, got "+JSON.stringify(o)+" instead");return"("+s(n,o[0],u)+" "+t+" "+s(n,o[1],u)+")"}}}function w(t){return{getReturnType:function(t){return r.BOOLEAN},toGlsl:function(r,n){N(n,2);for(var e=0;e<n.length;e++)R(n[e]);return"("+n.map(function(t){return s(r,t)}).join(" "+t+" ")+")"}}}exports.Operators=n,n.get={getReturnType:function(t){return r.ANY},toGlsl:function(t,r){y(r,1),p(r[0]);var n=r[0].toString();return-1===t.attributes.indexOf(n)&&t.attributes.push(n),(t.inFragmentShader?"v_":"a_")+n}},n.var={getReturnType:function(t){return r.ANY},toGlsl:function(t,r){y(r,1),p(r[0]);var n=r[0].toString();return-1===t.variables.indexOf(n)&&t.variables.push(n),"u_"+n}},n.time={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,0),"u_time"}},n.zoom={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,0),"u_zoom"}},n.resolution={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,0),"u_resolution"}},n["*"]={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" * "+s(t,r[1])+")"}},n["/"]={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" / "+s(t,r[1])+")"}},n["+"]={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" + "+s(t,r[1])+")"}},n["-"]={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" - "+s(t,r[1])+")"}},n.clamp={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){y(r,3),g(r);var n=s(t,r[1]),e=s(t,r[2]);return"clamp("+s(t,r[0])+", "+n+", "+e+")"}},n["%"]={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,2),g(r),"mod("+s(t,r[0])+", "+s(t,r[1])+")"}},n["^"]={getReturnType:function(t){return r.NUMBER},toGlsl:function(t,r){return y(r,2),g(r),"pow("+s(t,r[0])+", "+s(t,r[1])+")"}},n[">"]={getReturnType:function(t){return r.BOOLEAN},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" > "+s(t,r[1])+")"}},n[">="]={getReturnType:function(t){return r.BOOLEAN},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" >= "+s(t,r[1])+")"}},n["<"]={getReturnType:function(t){return r.BOOLEAN},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" < "+s(t,r[1])+")"}},n["<="]={getReturnType:function(t){return r.BOOLEAN},toGlsl:function(t,r){return y(r,2),g(r),"("+s(t,r[0])+" <= "+s(t,r[1])+")"}},n["=="]=d("=="),n["!="]=d("!="),n["!"]={getReturnType:function(t){return r.BOOLEAN},toGlsl:function(t,r){return y(r,1),R(r[0]),"(!"+s(t,r[0])+")"}},n.all=w("&&"),n.any=w("||"),n.between={getReturnType:function(t){return r.BOOLEAN},toGlsl:function(t,r){y(r,3),g(r);var n=s(t,r[1]),e=s(t,r[2]),o=s(t,r[0]);return"("+o+" >= "+n+" && "+o+" <= "+e+")"}},n.array={getReturnType:function(t){return r.NUMBER_ARRAY},toGlsl:function(t,n){N(n,2),v(n,4),g(n);var e=n.map(function(n){return s(t,n,r.NUMBER)});return"vec"+n.length+"("+e.join(", ")+")"}},n.color={getReturnType:function(t){return r.COLOR},toGlsl:function(t,n){N(n,3),v(n,4),g(n);var e=n;3===n.length&&e.push(1);var o=n.map(function(n,e){return s(t,n,r.NUMBER)+(e<3?" / 255.0":"")});return"vec"+n.length+"("+o.join(", ")+")"}},n.interpolate={getReturnType:function(t){for(var n=r.COLOR|r.NUMBER,o=3;o<t.length;o+=2)n&=e(t[o]);return n},toGlsl:function(t,e,o){h(e),N(e,6);var i,l=e[0];switch(l[0]){case"linear":i=1;break;case"exponential":i=l[1];break;default:i=null}if(!i)throw new Error('Invalid interpolation type for "interpolate" operator, received: '+JSON.stringify(l));var f=void 0!==o?o:r.ANY,a=n.interpolate.getReturnType(e)&f;E(e,a);for(var c=s(t,e[1]),g=null,p=2;p<e.length-2;p+=2){var R=s(t,e[p]),y=s(t,e[p+1],a),v=s(t,e[p+2]);g="mix("+(g||y)+", "+s(t,e[p+3],a)+", pow(clamp(("+c+" - "+R+") / ("+v+" - "+R+"), 0.0, 1.0), "+u(i)+"))"}return g}},n.match={getReturnType:function(t){for(var n=r.ANY,o=2;o<t.length;o+=2)n&=e(t[o]);return n&=e(t[t.length-1])},toGlsl:function(t,e,o){h(e),N(e,4);var u=void 0!==o?o:r.ANY,i=n.match.getReturnType(e)&u;E(e,i);for(var l=s(t,e[0]),f=s(t,e[e.length-1],i),a=null,c=e.length-3;c>=1;c-=2){a="("+l+" == "+s(t,e[c])+" ? "+s(t,e[c+1],i)+" : "+(a||f)+")"}return a}},n.case={getReturnType:function(t){for(var n=r.ANY,o=1;o<t.length;o+=2)n&=e(t[o]);return n&=e(t[t.length-1])},toGlsl:function(t,e,o){O(e),N(e,3);var u=void 0!==o?o:r.ANY,i=n.case.getReturnType(e)&u;E(e,i);for(var l=0;l<e.length-1;l+=2)R(e[l]);var f=s(t,e[e.length-1],i),a=null;for(l=e.length-3;l>=0;l-=2){a="("+s(t,e[l])+" ? "+s(t,e[l+1],i)+" : "+(a||f)+")"}return a}};
},{"../color.js":"eucy"}],"iRdz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseLiteralStyle=o,exports.ShaderBuilder=void 0;var e=require("../style/expressions.js"),t=function(){function e(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return e.prototype.addUniform=function(e){return this.uniforms.push(e),this},e.prototype.addAttribute=function(e){return this.attributes.push(e),this},e.prototype.addVarying=function(e,t,o){return this.varyings.push({name:e,type:t,expression:o}),this},e.prototype.setSizeExpression=function(e){return this.sizeExpression=e,this},e.prototype.setRotationExpression=function(e){return this.rotationExpression=e,this},e.prototype.setSymbolOffsetExpression=function(e){return this.offsetExpression=e,this},e.prototype.setColorExpression=function(e){return this.colorExpression=e,this},e.prototype.setTextureCoordinateExpression=function(e){return this.texCoordExpression=e,this},e.prototype.setFragmentDiscardExpression=function(e){return this.discardExpression=e,this},e.prototype.setSymbolRotateWithView=function(e){return this.rotateWithView=e,this},e.prototype.getSizeExpression=function(){return this.sizeExpression},e.prototype.getOffsetExpression=function(){return this.offsetExpression},e.prototype.getColorExpression=function(){return this.colorExpression},e.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},e.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},e.prototype.getSymbolVertexShader=function(e){var t=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",o=this.attributes,i=this.varyings;return e&&(o=o.concat("vec4 a_hitColor"),i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n"+this.uniforms.map(function(e){return"uniform "+e+";"}).join("\n")+"\nattribute vec2 a_position;\nattribute float a_index;\n"+o.map(function(e){return"attribute "+e+";"}).join("\n")+"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n"+i.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n")+"\nvoid main(void) {\n  mat4 offsetMatrix = "+t+";\n  vec2 halfSize = "+this.sizeExpression+" * 0.5;\n  vec2 offset = "+this.offsetExpression+";\n  float angle = "+this.rotationExpression+";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = "+this.texCoordExpression+";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n"+i.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join("\n")+"\n}"},e.prototype.getSymbolFragmentShader=function(e){var t=e?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",o=this.varyings;return e&&(o=o.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n"+this.uniforms.map(function(e){return"uniform "+e+";"}).join("\n")+"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n"+o.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n")+"\nvoid main(void) {\n  if ("+this.discardExpression+") { discard; }\n  gl_FragColor = "+this.colorExpression+";\n  gl_FragColor.rgb *= gl_FragColor.a;\n"+t+"\n}"},e}();function o(o){var i=o.symbol,s=void 0!==i.size?i.size:1,r=i.color||"white",n=i.textureCoord||[0,0,1,1],a=i.offset||[0,0],f=void 0!==i.opacity?i.opacity:1,u=void 0!==i.rotation?i.rotation:0,l={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{}},p=(0,e.expressionToGlsl)(l,s,e.ValueTypes.NUMBER_ARRAY|e.ValueTypes.NUMBER),x=(0,e.expressionToGlsl)(l,a,e.ValueTypes.NUMBER_ARRAY),c=(0,e.expressionToGlsl)(l,n,e.ValueTypes.NUMBER_ARRAY),d=(0,e.expressionToGlsl)(l,u,e.ValueTypes.NUMBER),h={inFragmentShader:!0,variables:l.variables,attributes:[],stringLiteralsMap:l.stringLiteralsMap},v=(0,e.expressionToGlsl)(h,r,e.ValueTypes.COLOR),y=(0,e.expressionToGlsl)(h,f,e.ValueTypes.NUMBER),m="1.0",g="vec2("+(0,e.expressionToGlsl)(h,s,e.ValueTypes.NUMBER_ARRAY|e.ValueTypes.NUMBER)+").x";switch(i.symbolType){case"square":case"image":break;case"circle":m="(1.0-smoothstep(1.-4./"+g+",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))";break;case"triangle":var _="(v_quadCoord*2.-1.)",E="(atan("+_+".x,"+_+".y))";m="(1.0-smoothstep(.5-3./"+g+",.5,cos(floor(.5+"+E+"/2.094395102)*2.094395102-"+E+")*length("+_+")))";break;default:throw new Error("Unexpected symbol type: "+i.symbolType)}var b=(new t).setSizeExpression("vec2("+p+")").setRotationExpression(d).setSymbolOffsetExpression(x).setTextureCoordinateExpression(c).setSymbolRotateWithView(!!i.rotateWithView).setColorExpression("vec4("+v+".rgb, "+v+".a * "+y+" * "+m+")");if(o.filter){var C=(0,e.expressionToGlsl)(h,o.filter,e.ValueTypes.BOOLEAN);b.setFragmentDiscardExpression("!"+C)}var S={};if(h.variables.forEach(function(t){b.addUniform("float u_"+t),S["u_"+t]=function(){if(!o.variables||void 0===o.variables[t])throw new Error("The following variable is missing from the style: "+t);var i=o.variables[t];return"string"==typeof i&&(i=(0,e.getStringNumberEquivalent)(l,i)),void 0!==i?i:-9999999}}),"image"===i.symbolType&&i.src){var z=new Image;z.src=i.src,b.addUniform("sampler2D u_texture").setColorExpression(b.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),S.u_texture=z}return h.attributes.forEach(function(e){-1===l.attributes.indexOf(e)&&l.attributes.push(e),b.addVarying("v_"+e,"float","a_"+e)}),l.attributes.forEach(function(e){b.addAttribute("float a_"+e)}),{builder:b,attributes:l.attributes.map(function(t){return{name:t,callback:function(o,i){var s=i[t];return"string"==typeof s&&(s=(0,e.getStringNumberEquivalent)(l,s)),void 0!==s?s:-9999999}}}),uniforms:S}}exports.ShaderBuilder=t;
},{"../style/expressions.js":"xlCh"}],"sCa7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./Layer.js")),t=s(require("../renderer/webgl/PointsLayer.js")),r=require("../obj.js"),i=require("../webgl/ShaderBuilder.js");function s(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),o=function(e){function s(t){var s=this,n=(0,r.assign)({},t);return(s=e.call(this,n)||this).parseResult_=(0,i.parseLiteralStyle)(t.style),s.hitDetectionDisabled_=!!t.disableHitDetection,s}return n(s,e),s.prototype.createRenderer=function(){return new t.default(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitVertexShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolFragmentShader(!0),uniforms:this.parseResult_.uniforms,attributes:this.parseResult_.attributes})},s.prototype.disposeInternal=function(){this.getRenderer().disposeInternal(),e.prototype.disposeInternal.call(this)},s}(e.default),a=o;exports.default=a;
},{"./Layer.js":"GCgv","../renderer/webgl/PointsLayer.js":"m8cI","../obj.js":"mH6q","../webgl/ShaderBuilder.js":"iRdz"}],"ZVaS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Graticule",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Heatmap",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"MapboxVector",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"VectorImage",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"WebGLPoints",{enumerable:!0,get:function(){return c.default}});var e=p(require("./layer/Graticule.js")),r=p(require("./layer/Group.js")),t=p(require("./layer/Heatmap.js")),u=p(require("./layer/Image.js")),n=p(require("./layer/Layer.js")),o=p(require("./layer/MapboxVector.js")),a=p(require("./layer/Tile.js")),i=p(require("./layer/Vector.js")),l=p(require("./layer/VectorImage.js")),f=p(require("./layer/VectorTile.js")),c=p(require("./layer/WebGLPoints.js"));function p(e){return e&&e.__esModule?e:{default:e}}
},{"./layer/Graticule.js":"wXs0","./layer/Group.js":"q0nK","./layer/Heatmap.js":"I4BI","./layer/Image.js":"KHBf","./layer/Layer.js":"GCgv","./layer/MapboxVector.js":"VqZN","./layer/Tile.js":"BUEc","./layer/Vector.js":"dflx","./layer/VectorImage.js":"VV4h","./layer/VectorTile.js":"zOJv","./layer/WebGLPoints.js":"sCa7"}],"WJrq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./State.js")),e=o(require("./XYZ.js")),i=require("../obj.js");function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),a=function(e){function o(t){var i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,wrapX:t.wrapX})||this;return i.account_=t.account,i.mapId_=t.map||"",i.config_=t.config||{},i.templateCache_={},i.initializeMap_(),i}return n(o,e),o.prototype.getConfig=function(){return this.config_},o.prototype.updateConfig=function(t){(0,i.assign)(this.config_,t),this.initializeMap_()},o.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},o.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},o.prototype.handleInitResponse_=function(e,i){var o=i.target;if(!o.status||o.status>=200&&o.status<300){var n=void 0;try{n=JSON.parse(o.responseText)}catch(a){return void this.setState(t.default.ERROR)}this.applyTemplate_(n),this.templateCache_[e]=n,this.setState(t.default.READY)}else this.setState(t.default.ERROR)},o.prototype.handleInitError_=function(e){this.setState(t.default.ERROR)},o.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},o}(e.default),r=a;exports.default=r;
},{"./State.js":"iC8j","./XYZ.js":"knlU","../obj.js":"mH6q"}],"sV2m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../events/EventType.js")),t=c(require("../Feature.js")),r=c(require("../geom/GeometryType.js")),o=c(require("../geom/Point.js")),s=c(require("./Vector.js")),i=require("../coordinate.js"),n=require("../asserts.js"),u=require("../extent.js"),a=require("../util.js");function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),h=function(s){function c(e){var t=s.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return t.resolution=void 0,t.distance=void 0!==e.distance?e.distance:20,t.features=[],t.geometryFunction=e.geometryFunction||function(e){var t=e.getGeometry();return(0,n.assert)(t.getType()==r.default.POINT,10),t},t.boundRefresh_=t.refresh.bind(t),t.setSource(e.source||null),t}return f(c,s),c.prototype.clear=function(e){this.features.length=0,s.prototype.clear.call(this,e)},c.prototype.getDistance=function(){return this.distance},c.prototype.getSource=function(){return this.source},c.prototype.loadFeatures=function(e,t,r){this.source.loadFeatures(e,t,r),t!==this.resolution&&(this.clear(),this.resolution=t,this.cluster(),this.addFeatures(this.features))},c.prototype.setDistance=function(e){this.distance=e,this.refresh()},c.prototype.setSource=function(t){this.source&&this.source.removeEventListener(e.default.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(e.default.CHANGE,this.boundRefresh_),this.refresh()},c.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},c.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var e=(0,u.createEmpty)(),t=this.distance*this.resolution,r=this.source.getFeatures(),o={},s=0,i=r.length;s<i;s++){var n=r[s];if(!((0,a.getUid)(n)in o)){var c=this.geometryFunction(n);if(c){var f=c.getCoordinates();(0,u.createOrUpdateFromCoordinate)(f,e),(0,u.buffer)(e,t,e);var h=this.source.getFeaturesInExtent(e);h=h.filter(function(e){var t=(0,a.getUid)(e);return!(t in o)&&(o[t]=!0,!0)}),this.features.push(this.createCluster(h))}}}},c.prototype.createCluster=function(e){for(var r=[0,0],s=e.length-1;s>=0;--s){var n=this.geometryFunction(e[s]);n?(0,i.add)(r,n.getCoordinates()):e.splice(s,1)}(0,i.scale)(r,1/e.length);var u=new t.default(new o.default(r));return u.set("features",e),u},c}(s.default),l=h;exports.default=l;
},{"../events/EventType.js":"C8cu","../Feature.js":"mYW9","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","./Vector.js":"ZS12","../coordinate.js":"nGsj","../asserts.js":"fLG6","../extent.js":"QDir","../util.js":"KniQ"}],"aDh3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CustomTile=void 0;var e=require("../tilegrid/common.js"),t=c(require("../ImageTile.js")),r=c(require("../tilegrid/TileGrid.js")),i=c(require("./TileImage.js")),o=c(require("../TileState.js")),n=require("../asserts.js"),a=require("../dom.js"),u=require("../tileurlfunction.js"),s=require("../extent.js"),l=require("../size.js");function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),h={DEFAULT:"default",TRUNCATED:"truncated"},d=function(e){function t(t,r,i,o,n,a,u){var s=e.call(this,r,i,o,n,a,u)||this;return s.zoomifyImage_=null,s.tileSize_=t,s}return f(t,e),t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=e.prototype.getImage.call(this);if(this.state==o.default.LOADED){var r=this.tileSize_;if(t.width==r[0]&&t.height==r[1])return this.zoomifyImage_=t,t;var i=(0,a.createCanvasContext2D)(r[0],r[1]);return i.drawImage(t,0,0),this.zoomifyImage_=i.canvas,i.canvas}return t},t}(t.default);exports.CustomTile=d;var p=function(t){function i(i){var o=this,a=i,c=a.size,f=void 0!==a.tierSizeCalculation?a.tierSizeCalculation:h.DEFAULT,p=a.tilePixelRatio||1,g=c[0],m=c[1],v=[],T=a.tileSize||e.DEFAULT_TILE_SIZE,_=T*p;switch(f){case h.DEFAULT:for(;g>_||m>_;)v.push([Math.ceil(g/_),Math.ceil(m/_)]),_+=_;break;case h.TRUNCATED:for(var z=g,x=m;z>_||x>_;)v.push([Math.ceil(z/_),Math.ceil(x/_)]),z>>=1,x>>=1;break;default:(0,n.assert)(!1,53)}v.push([1,1]),v.reverse();for(var j=[p],y=[0],I=1,E=v.length;I<E;I++)j.push(p<<I),y.push(v[I-1][0]*v[I-1][1]+y[I-1]);j.reverse();var S=new r.default({tileSize:T,extent:a.extent||[0,-m,g,0],resolutions:j}),C=a.url;C&&-1==C.indexOf("{TileGroup}")&&-1==C.indexOf("{tileIndex}")&&(C+="{TileGroup}/{z}-{x}-{y}.jpg");var D=(0,u.expandUrl)(C),q=T*p;var O=(0,u.createFromTileUrlFunctions)(D.map(function(e){return function(t,r,i){if(t){var o=t[0],n=t[1],a=t[2],u=n+a*v[o][0],s={z:o,x:n,y:a,tileIndex:u,TileGroup:"TileGroup"+((u+y[o])/q|0)};return e.replace(/\{(\w+?)\}/g,function(e,t){return s[t]})}}})),b=d.bind(null,(0,l.toSize)(T*p));(o=t.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,imageSmoothing:a.imageSmoothing,projection:a.projection,tilePixelRatio:p,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:b,tileGrid:S,tileUrlFunction:O,transition:a.transition})||this).zDirection=a.zDirection;var A=O(S.getTileCoordForCoordAndResolution((0,s.getCenter)(S.getExtent()),j[j.length-1]),1,null),U=new Image;return U.addEventListener("error",function(){q=T,this.changed()}.bind(o)),U.src=A,o}return f(i,t),i}(i.default),g=p;exports.default=g;
},{"../tilegrid/common.js":"mOEX","../ImageTile.js":"TOsW","../tilegrid/TileGrid.js":"dpZ6","./TileImage.js":"udAI","../TileState.js":"u3kG","../asserts.js":"fLG6","../dom.js":"Xno5","../tileurlfunction.js":"p1vZ","../extent.js":"QDir","../size.js":"TAHd"}],"FFf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Versions=void 0;var e=require("../asserts.js"),i=function(){for(var e=0,i=0,t=arguments.length;i<t;i++)e+=arguments[i].length;var o=Array(e),r=0;for(i=0;i<t;i++)for(var s=arguments[i],a=0,n=s.length;a<n;a++,r++)o[r]=s[a];return o},t={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"};exports.Versions=t;var o={};o[t.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},o[t.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},o[t.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},o.none={none:{supports:[],formats:[],qualities:[]}};var r=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,s=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,a=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function n(e){var r=e.getComplianceLevelSupportedFeatures();return void 0===r&&(r=o[t.VERSION1].level0),{url:void 0===e.imageInfo["@id"]?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:r.supports,formats:i(r.formats,[void 0===e.imageInfo.formats?[]:e.imageInfo.formats]),qualities:i(r.qualities,[void 0===e.imageInfo.qualities?[]:e.imageInfo.qualities]),resolutions:e.imageInfo.scale_factors,tileSize:void 0!==e.imageInfo.tile_width?void 0!==e.imageInfo.tile_height?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:null!=e.imageInfo.tile_height?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}}function f(e){var t=e.getComplianceLevelSupportedFeatures(),o=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,r=o&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],s=o&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],a=o&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return void 0===e.height?e.width:e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:i(t.supports,r),formats:i(t.formats,s),qualities:i(t.qualities,a)}}function l(e){var t=e.getComplianceLevelSupportedFeatures(),o=void 0===e.imageInfo.extraFormats?t.formats:i(t.formats,e.imageInfo.extraFormats),r=void 0!==e.imageInfo.preferredFormats&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter(function(e){return["jpg","png","gif"].includes(e)}).reduce(function(e,i){return void 0===e&&o.includes(i)?i:e},void 0):void 0;return{url:e.imageInfo.id,sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:void 0===e.imageInfo.extraFeatures?t.supports:i(t.supports,e.imageInfo.extraFeatures),formats:o,qualities:void 0===e.imageInfo.extraQualities?t.qualities:i(t.qualities,e.imageInfo.extraQualities),preferredFormat:r}}var p={};p[t.VERSION1]=n,p[t.VERSION2]=f,p[t.VERSION3]=l;var g=function(){function i(e){this.setImageInfo(e)}return i.prototype.setImageInfo=function(e){this.imageInfo="string"==typeof e?JSON.parse(e):e},i.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var i=this.imageInfo["@context"]||"ol-no-context";"string"==typeof i&&(i=[i]);for(var o=0;o<i.length;o++)switch(i[o]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return t.VERSION1;case"http://iiif.io/api/image/2/context.json":return t.VERSION2;case"http://iiif.io/api/image/3/context.json":return t.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(t.VERSION1)&&this.imageInfo.identifier)return t.VERSION1}(0,e.assert)(!1,61)}},i.prototype.getComplianceLevelEntryFromProfile=function(e){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===e&&(e=this.getImageApiVersion()),e){case t.VERSION1:if(r.test(this.imageInfo.profile))return this.imageInfo.profile;break;case t.VERSION3:if(a.test(this.imageInfo.profile))return this.imageInfo.profile;break;case t.VERSION2:if("string"==typeof this.imageInfo.profile&&s.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&s.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},i.prototype.getComplianceLevelFromProfile=function(e){var i=this.getComplianceLevelEntryFromProfile(e);if(void 0!==i){var t=i.match(/level[0-2](?:\.json)?$/g);return Array.isArray(t)?t[0].replace(".json",""):void 0}},i.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var e=this.getImageApiVersion(),i=this.getComplianceLevelFromProfile(e);return void 0===i?o.none.none:o[e][i]}},i.prototype.getTileSourceOptions=function(e){var i=e||{},t=this.getImageApiVersion();if(void 0!==t){var o=void 0===t?void 0:p[t](this);if(void 0!==o)return{url:o.url,version:t,size:[this.imageInfo.width,this.imageInfo.height],sizes:o.sizes,format:void 0!==i.format&&o.formats.includes(i.format)?i.format:void 0!==o.preferredFormat?o.preferredFormat:"jpg",supports:o.supports,quality:i.quality&&o.qualities.includes(i.quality)?i.quality:o.qualities.includes("native")?"native":"default",resolutions:Array.isArray(o.resolutions)?o.resolutions.sort(function(e,i){return i-e}):void 0,tileSize:o.tileSize}}},i}(),u=g;exports.default=u;
},{"../asserts.js":"fLG6"}],"oF4i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../tilegrid/TileGrid.js")),i=u(require("./TileImage.js")),t=require("./Zoomify.js"),r=require("../tilegrid/common.js"),n=require("../format/IIIFInfo.js"),o=require("../asserts.js"),s=require("../extent.js"),l=require("../size.js");function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(i,t)};return function(i,t){function r(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();function c(e){return e.toLocaleString("en",{maximumFractionDigits:10})}var h=function(i){function u(u){var a=this,h=u||{},f=h.url||"";f+=f.lastIndexOf("/")===f.length-1||""===f?"":"/";var g=h.version||n.Versions.VERSION2,d=h.sizes||[],p=h.size;(0,o.assert)(null!=p&&Array.isArray(p)&&2==p.length&&!isNaN(p[0])&&p[0]>0&&!isNaN(p[1])&&p[1]>0,60);var y,v,m,I=p[0],z=p[1],M=h.tileSize,b=h.tilePixelRatio||1,N=h.format||"jpg",x=h.quality||(h.version==n.Versions.VERSION1?"native":"default"),j=h.resolutions||[],_=h.supports||[],S=h.extent||[0,-z,I,0],A=null!=d&&Array.isArray(d)&&d.length>0,B=void 0!==M&&("number"==typeof M&&Number.isInteger(M)&&M>0||Array.isArray(M)&&M.length>0),E=null!=_&&Array.isArray(_)&&(_.includes("regionByPx")||_.includes("regionByPct"))&&(_.includes("sizeByWh")||_.includes("sizeByH")||_.includes("sizeByW")||_.includes("sizeByPct"));if(j.sort(function(e,i){return i-e}),B||E)if(null!=M&&("number"==typeof M&&Number.isInteger(M)&&M>0?(y=M,v=M):Array.isArray(M)&&M.length>0&&((1==M.length||null==M[1]&&Number.isInteger(M[0]))&&(y=M[0],v=M[0]),2==M.length&&(Number.isInteger(M[0])&&Number.isInteger(M[1])?(y=M[0],v=M[1]):null==M[0]&&Number.isInteger(M[1])&&(y=M[1],v=M[1])))),void 0!==y&&void 0!==v||(y=r.DEFAULT_TILE_SIZE,v=r.DEFAULT_TILE_SIZE),0==j.length)for(var O=m=Math.max(Math.ceil(Math.log(I/y)/Math.LN2),Math.ceil(Math.log(z/v)/Math.LN2));O>=0;O--)j.push(Math.pow(2,O));else{var P=Math.max.apply(Math,j);m=Math.round(Math.log(P)/Math.LN2)}else if(y=I,v=z,j=[],A){d.sort(function(e,i){return e[0]-i[0]}),m=-1;var T=[];for(O=0;O<d.length;O++){var V=I/d[O][0];j.length>0&&j[j.length-1]==V?T.push(O):(j.push(V),m++)}if(T.length>0)for(O=0;O<T.length;O++)d.splice(T[O]-O,1)}else j.push(1),d.push([I,z]),m=0;var q=new e.default({tileSize:[y,v],extent:S,origin:(0,s.getTopLeft)(S),resolutions:j}),L=t.CustomTile.bind(null,(0,l.toSize)(M||256).map(function(e){return e*b}));return(a=i.call(this,{attributions:h.attributions,attributionsCollapsible:h.attributionsCollapsible,cacheSize:h.cacheSize,crossOrigin:h.crossOrigin,imageSmoothing:h.imageSmoothing,projection:h.projection,reprojectionErrorThreshold:h.reprojectionErrorThreshold,state:h.state,tileClass:L,tileGrid:q,tilePixelRatio:h.tilePixelRatio,tileUrlFunction:function(e,i,t){var r,o,s=e[0];if(!(s>m)){var l=e[1],u=e[2],a=j[s];if(!(void 0===l||void 0===u||void 0===a||l<0||Math.ceil(I/a/y)<=l||u<0||Math.ceil(z/a/v)<=u)){if(E||B){var h=l*y*a,p=u*v*a,M=y*a,b=v*a,S=y,O=v;h+M>I&&(M=I-h),p+b>z&&(b=z-p),h+y*a>I&&(S=Math.floor((I-h+a-1)/a)),p+v*a>z&&(O=Math.floor((z-p+a-1)/a)),0==h&&M==I&&0==p&&b==z?r="full":!E||_.includes("regionByPx")?r=h+","+p+","+M+","+b:_.includes("regionByPct")&&(r="pct:"+c(h/I*100)+","+c(p/z*100)+","+c(M/I*100)+","+c(b/z*100)),g!=n.Versions.VERSION3||E&&!_.includes("sizeByWh")?!E||_.includes("sizeByW")?o=S+",":_.includes("sizeByH")?o=","+O:_.includes("sizeByWh")?o=S+","+O:_.includes("sizeByPct")&&(o="pct:"+c(100/a)):o=S+","+O}else if(r="full",A){var P=d[s][0],T=d[s][1];o=g==n.Versions.VERSION3?P==I&&T==z?"max":P+","+T:P==I?"full":P+","}else o=g==n.Versions.VERSION3?"max":"full";return f+r+"/"+o+"/0/"+x+"."+N}}},transition:h.transition})||this).zDirection=h.zDirection,a}return a(u,i),u}(i.default),f=h;exports.default=f;
},{"../tilegrid/TileGrid.js":"dpZ6","./TileImage.js":"udAI","./Zoomify.js":"aDh3","../tilegrid/common.js":"mOEX","../format/IIIFInfo.js":"FFf1","../asserts.js":"fLG6","../extent.js":"QDir","../size.js":"TAHd"}],"rc7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=a(require("../events/EventType.js")),r=a(require("../ImageBase.js")),o=a(require("../ImageState.js")),n=a(require("./Triangulation.js")),i=require("../reproj.js"),s=require("../extent.js"),u=require("../events.js");function a(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),l=function(r){function a(e,u,a,c,l,_,g){var h=this,f=e.getExtent(),p=u.getExtent(),d=p?(0,s.getIntersection)(a,p):a,x=(0,s.getCenter)(d),E=(0,i.calculateSourceResolution)(e,u,x,c),y=t.ERROR_THRESHOLD,I=new n.default(e,u,d,f,E*y,c),R=_(I.calculateSourceExtent(),E,l),j=R?o.default.IDLE:o.default.EMPTY,m=R?R.getPixelRatio():1;return(h=r.call(this,a,c,m,j)||this).targetProj_=u,h.maxSourceExtent_=f,h.triangulation_=I,h.targetResolution_=c,h.targetExtent_=a,h.sourceImage_=R,h.sourcePixelRatio_=m,h.contextOptions_=g,h.canvas_=null,h.sourceListenerKey_=null,h}return c(a,r),a.prototype.disposeInternal=function(){this.state==o.default.LOADING&&this.unlistenSource_(),r.prototype.disposeInternal.call(this)},a.prototype.getImage=function(){return this.canvas_},a.prototype.getProjection=function(){return this.targetProj_},a.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==o.default.LOADED){var e=(0,s.getWidth)(this.targetExtent_)/this.targetResolution_,r=(0,s.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,i.render)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=t,this.changed()},a.prototype.load=function(){if(this.state==o.default.IDLE){this.state=o.default.LOADING,this.changed();var t=this.sourceImage_.getState();t==o.default.LOADED||t==o.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,u.listen)(this.sourceImage_,e.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=o.default.LOADED&&e!=o.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},a.prototype.unlistenSource_=function(){(0,u.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null},a}(r.default),_=l;exports.default=_;
},{"./common.js":"fF5X","../events/EventType.js":"C8cu","../ImageBase.js":"Ojbp","../ImageState.js":"u3kG","./Triangulation.js":"BiRY","../reproj.js":"U255","../extent.js":"QDir","../events.js":"UqnM"}],"XHvt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultImageLoadFunction=f,exports.default=exports.ImageSourceEvent=exports.ImageSourceEventType=void 0;var e=p(require("../events/Event.js")),t=p(require("../ImageState.js")),r=p(require("../reproj/Image.js")),o=p(require("./Source.js")),n=require("../reproj/common.js"),i=require("./common.js"),s=require("../util.js"),a=require("../extent.js"),u=require("../proj.js"),c=require("../array.js");function p(e){return e&&e.__esModule?e:{default:e}}var l=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),g={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};exports.ImageSourceEventType=g;var d=function(e){function t(t,r){var o=e.call(this,t)||this;return o.image=r,o}return l(t,e),t}(e.default);exports.ImageSourceEvent=d;var h=function(e){function o(t){var r=e.call(this,{attributions:t.attributions,projection:t.projection,state:t.state})||this;return r.resolutions_=void 0!==t.resolutions?t.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r.contextOptions_=!1===t.imageSmoothing?i.IMAGE_SMOOTHING_DISABLED:void 0,r}return l(o,e),o.prototype.getResolutions=function(){return this.resolutions_},o.prototype.getContextOptions=function(){return this.contextOptions_},o.prototype.findNearestResolution=function(e){if(this.resolutions_){var t=(0,c.linearFindNearest)(this.resolutions_,e,0);e=this.resolutions_[t]}return e},o.prototype.getImage=function(e,t,o,i){var s=this.getProjection();if(n.ENABLE_RASTER_REPROJECTION&&s&&i&&!(0,u.equivalent)(s,i)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,u.equivalent)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&(0,a.equals)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new r.default(s,i,e,t,o,function(e,t,r){return this.getImageInternal(e,t,r,s)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return s&&(i=s),this.getImageInternal(e,t,o,i)},o.prototype.getImageInternal=function(e,t,r,o){return(0,s.abstract)()},o.prototype.handleImageChange=function(e){var r=e.target;switch(r.getState()){case t.default.LOADING:this.loading=!0,this.dispatchEvent(new d(g.IMAGELOADSTART,r));break;case t.default.LOADED:this.loading=!1,this.dispatchEvent(new d(g.IMAGELOADEND,r));break;case t.default.ERROR:this.loading=!1,this.dispatchEvent(new d(g.IMAGELOADERROR,r))}},o}(o.default);function f(e,t){e.getImage().src=t}var I=h;exports.default=I;
},{"../events/Event.js":"fKNg","../ImageState.js":"u3kG","../reproj/Image.js":"rc7I","./Source.js":"H38a","../reproj/common.js":"fF5X","./common.js":"a8mu","../util.js":"KniQ","../extent.js":"QDir","../proj.js":"Diht","../array.js":"luEr"}],"P20y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("../events/EventType.js")),e=u(require("./Image.js")),i=p(require("../Image.js")),r=require("../uri.js"),n=require("../asserts.js"),o=require("../obj.js"),a=require("../extent.js");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=r?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}function p(t){return t&&t.__esModule?t:{default:t}}var g=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=function(s){function u(t){var i=this,r=t||{};return(i=s.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions})||this).crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null,i.hidpi_=void 0===r.hidpi||r.hidpi,i.url_=r.url,i.imageLoadFunction_=void 0!==r.imageLoadFunction?r.imageLoadFunction:e.defaultImageLoadFunction,i.params_=r.params||{},i.image_=null,i.imageSize_=[0,0],i.renderedRevision_=0,i.ratio_=void 0!==r.ratio?r.ratio:1.5,i}return g(u,s),u.prototype.getParams=function(){return this.params_},u.prototype.getImageInternal=function(e,r,n,s){if(void 0===this.url_)return null;r=this.findNearestResolution(r),n=this.hidpi_?n:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==r&&u.getPixelRatio()==n&&(0,a.containsExtent)(u.getExtent(),e))return u;var p={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};(0,o.assign)(p,this.params_);var g=((e=e.slice())[0]+e[2])/2,c=(e[1]+e[3])/2;if(1!=this.ratio_){var h=this.ratio_*(0,a.getWidth)(e)/2,l=this.ratio_*(0,a.getHeight)(e)/2;e[0]=g-h,e[1]=c-l,e[2]=g+h,e[3]=c+l}var d=r/n,_=Math.ceil((0,a.getWidth)(e)/d),f=Math.ceil((0,a.getHeight)(e)/d);e[0]=g-d*_/2,e[2]=g+d*_/2,e[1]=c-d*f/2,e[3]=c+d*f/2,this.imageSize_[0]=_,this.imageSize_[1]=f;var m=this.getRequestUrl_(e,this.imageSize_,n,s,p);return this.image_=new i.default(e,r,n,m,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(t.default.CHANGE,this.handleImageChange.bind(this)),this.image_},u.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},u.prototype.getRequestUrl_=function(t,e,i,o,a){var s=o.getCode().split(":").pop();a.SIZE=e[0]+","+e[1],a.BBOX=t.join(","),a.BBOXSR=s,a.IMAGESR=s,a.DPI=Math.round(90*i);var u=this.url_,p=u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return p==u&&(0,n.assert)(!1,50),(0,r.appendParams)(p,a)},u.prototype.getUrl=function(){return this.url_},u.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},u.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},u.prototype.updateParams=function(t){(0,o.assign)(this.params_,t),this.image_=null,this.changed()},u}(e.default),h=c;exports.default=h;
},{"../events/EventType.js":"C8cu","./Image.js":"XHvt","../Image.js":"DHWK","../uri.js":"n7G7","../asserts.js":"fLG6","../obj.js":"mH6q","../extent.js":"QDir"}],"Y2uN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../ImageCanvas.js")),e=i(require("./Image.js")),n=require("../extent.js");function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=function(e){function i(t){var n=this,i=t||{};return(n=e.call(this,{attributions:i.attributions,imageSmoothing:i.imageSmoothing,projection:i.projection,resolutions:i.resolutions,state:i.state})||this).canvasFunction_=i.canvasFunction,n.canvas_=null,n.renderedRevision_=0,n.ratio_=void 0!==i.ratio?i.ratio:1.5,n}return o(i,e),i.prototype.getImageInternal=function(e,i,o,r){i=this.findNearestResolution(i);var s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==i&&s.getPixelRatio()==o&&(0,n.containsExtent)(s.getExtent(),e))return s;e=e.slice(),(0,n.scaleFromCenter)(e,this.ratio_);var a=[(0,n.getWidth)(e)/i*o,(0,n.getHeight)(e)/i*o],u=this.canvasFunction_.call(this,e,i,o,a,r);return u&&(s=new t.default(e,i,o,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s},i}(e.default),s=r;exports.default=s;
},{"../ImageCanvas.js":"K7j2","./Image.js":"XHvt","../extent.js":"QDir"}],"C9PY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../events/EventType.js")),t=s(require("./Image.js")),i=u(require("../Image.js")),r=require("../uri.js"),n=require("../obj.js"),o=require("../extent.js");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function u(e){return e&&e.__esModule?e:{default:e}}var p=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d=function(a){function s(e){var i=a.call(this,{imageSmoothing:e.imageSmoothing,projection:e.projection,resolutions:e.resolutions})||this;return i.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,i.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,i.params_=e.params||{},i.url_=e.url,i.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:t.defaultImageLoadFunction,i.hidpi_=void 0===e.hidpi||e.hidpi,i.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,i.ratio_=void 0!==e.ratio?e.ratio:1,i.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,i.image_=null,i.renderedRevision_=0,i}return p(s,a),s.prototype.getParams=function(){return this.params_},s.prototype.getImageInternal=function(t,r,n,a){r=this.findNearestResolution(r),n=this.hidpi_?n:1;var s=this.image_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==r&&s.getPixelRatio()==n&&(0,o.containsExtent)(s.getExtent(),t))return s;1!=this.ratio_&&(t=t.slice(),(0,o.scaleFromCenter)(t,this.ratio_));var u=[(0,o.getWidth)(t)/r*n,(0,o.getHeight)(t)/r*n];if(void 0!==this.url_){var p=this.getUrl(this.url_,this.params_,t,u,a);(s=new i.default(t,r,n,p,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(e.default.CHANGE,this.handleImageChange.bind(this))}else s=null;return this.image_=s,this.renderedRevision_=this.getRevision(),s},s.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},s.prototype.updateParams=function(e){(0,n.assign)(this.params_,e),this.changed()},s.prototype.getUrl=function(e,t,i,a,s){var u=c(i,a,this.metersPerUnit_,this.displayDpi_),p=(0,o.getCenter)(i),d={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(a[0]),SETDISPLAYHEIGHT:Math.round(a[1]),SETVIEWSCALE:u,SETVIEWCENTERX:p[0],SETVIEWCENTERY:p[1]};return(0,n.assign)(d,t),(0,r.appendParams)(e,d)},s.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},s}(t.default);function c(e,t,i,r){var n=(0,o.getWidth)(e),a=(0,o.getHeight)(e),s=t[0],u=t[1],p=.0254/r;return u*n>s*a?n*i/(s*p):a*i/(u*p)}var l=d;exports.default=l;
},{"../events/EventType.js":"C8cu","./Image.js":"XHvt","../Image.js":"DHWK","../uri.js":"n7G7","../obj.js":"mH6q","../extent.js":"QDir"}],"zK6j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../events/EventType.js")),t=s(require("./Image.js")),i=c(require("../ImageState.js")),r=c(require("../Image.js")),n=require("../obj.js"),o=require("../dom.js"),a=require("../extent.js"),u=require("../proj.js");function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(g){function s(i){var n=this,o=void 0!==i.crossOrigin?i.crossOrigin:null,a=void 0!==i.imageLoadFunction?i.imageLoadFunction:t.defaultImageLoadFunction;return(n=g.call(this,{attributions:i.attributions,imageSmoothing:i.imageSmoothing,projection:(0,u.get)(i.projection)})||this).url_=i.url,n.imageExtent_=i.imageExtent,n.image_=new r.default(n.imageExtent_,void 0,1,n.url_,o,a),n.imageSize_=i.imageSize?i.imageSize:null,n.image_.addEventListener(e.default.CHANGE,n.handleImageChange.bind(n)),n}return f(s,g),s.prototype.getImageExtent=function(){return this.imageExtent_},s.prototype.getImageInternal=function(e,t,i,r){return(0,a.intersects)(e,this.image_.getExtent())?this.image_:null},s.prototype.getUrl=function(){return this.url_},s.prototype.handleImageChange=function(e){if(this.image_.getState()==i.default.LOADED){var t=this.image_.getExtent(),r=this.image_.getImage(),u=void 0,s=void 0;this.imageSize_?(u=this.imageSize_[0],s=this.imageSize_[1]):(u=r.width,s=r.height);var c=(0,a.getHeight)(t)/s,f=Math.ceil((0,a.getWidth)(t)/c);if(f!=u){var l=(0,o.createCanvasContext2D)(f,s);(0,n.assign)(l,this.getContextOptions());var p=l.canvas;l.drawImage(r,0,0,u,s,0,0,p.width,p.height),this.image_.setImage(p)}}g.prototype.handleImageChange.call(this,e)},s}(t.default),p=l;exports.default=p;
},{"../events/EventType.js":"C8cu","./Image.js":"XHvt","../ImageState.js":"u3kG","../Image.js":"DHWK","../obj.js":"mH6q","../dom.js":"Xno5","../extent.js":"QDir","../proj.js":"Diht"}],"e4Kb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=d(require("../events/EventType.js")),i=c(require("./Image.js")),r=d(require("../Image.js")),n=d(require("./WMSServerType.js")),o=require("../uri.js"),a=require("../asserts.js"),s=require("../obj.js"),u=require("../reproj.js"),h=require("../string.js"),p=require("../extent.js"),g=require("../proj.js");function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function d(e){return e&&e.__esModule?e:{default:e}}var l=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=[101,101],v=function(_){function c(e){var t=this,r=e||{};return(t=_.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions})||this).crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null,t.url_=r.url,t.imageLoadFunction_=void 0!==r.imageLoadFunction?r.imageLoadFunction:i.defaultImageLoadFunction,t.params_=r.params||{},t.v13_=!0,t.updateV13_(),t.serverType_=r.serverType,t.hidpi_=void 0===r.hidpi||r.hidpi,t.image_=null,t.imageSize_=[0,0],t.renderedRevision_=0,t.ratio_=void 0!==r.ratio?r.ratio:1.5,t}return l(c,_),c.prototype.getFeatureInfoUrl=function(t,i,r,n){if(void 0!==this.url_){var o=(0,g.get)(r),a=this.getProjection();a&&a!==o&&(i=(0,u.calculateSourceResolution)(a,o,t,i),t=(0,g.transform)(t,o,a));var h=(0,p.getForViewAndSize)(t,i,0,f),_={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,s.assign)(_,this.params_,n);var c=Math.floor((t[0]-h[0])/i),d=Math.floor((h[3]-t[1])/i);return _[this.v13_?"I":"X"]=c,_[this.v13_?"J":"Y"]=d,this.getRequestUrl_(h,f,1,a||o,_)}},c.prototype.getLegendUrl=function(t,i){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===i||void 0===i.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*a*39.37*(25.4/.28)}return(0,s.assign)(r,i),(0,o.appendParams)(this.url_,r)}},c.prototype.getParams=function(){return this.params_},c.prototype.getImageInternal=function(i,n,o,a){if(void 0===this.url_)return null;n=this.findNearestResolution(n),1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);var u=n/o,h=(0,p.getCenter)(i),g=Math.ceil((0,p.getWidth)(i)/u),_=Math.ceil((0,p.getHeight)(i)/u),c=(0,p.getForViewAndSize)(h,u,0,[g,_]),d=Math.ceil(this.ratio_*(0,p.getWidth)(i)/u),l=Math.ceil(this.ratio_*(0,p.getHeight)(i)/u),f=(0,p.getForViewAndSize)(h,u,0,[d,l]),v=this.image_;if(v&&this.renderedRevision_==this.getRevision()&&v.getResolution()==n&&v.getPixelRatio()==o&&(0,p.containsExtent)(v.getExtent(),c))return v;var S={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};(0,s.assign)(S,this.params_),this.imageSize_[0]=Math.round((0,p.getWidth)(f)/u),this.imageSize_[1]=Math.round((0,p.getHeight)(f)/u);var R=this.getRequestUrl_(f,this.imageSize_,o,a,S);return this.image_=new r.default(f,n,o,R,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(t.default.CHANGE,this.handleImageChange.bind(this)),this.image_},c.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},c.prototype.getRequestUrl_=function(e,t,i,r,s){if((0,a.assert)(void 0!==this.url_,9),s[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=i)switch(this.serverType_){case n.default.GEOSERVER:var u=90*i+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case n.default.MAPSERVER:s.MAP_RESOLUTION=90*i;break;case n.default.CARMENTA_SERVER:case n.default.QGIS:s.DPI=90*i;break;default:(0,a.assert)(!1,8)}s.WIDTH=t[0],s.HEIGHT=t[1];var h,p=r.getAxisOrientation();return h=this.v13_&&"ne"==p.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,s.BBOX=h.join(","),(0,o.appendParams)(this.url_,s)},c.prototype.getUrl=function(){return this.url_},c.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},c.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},c.prototype.updateParams=function(e){(0,s.assign)(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},c.prototype.updateV13_=function(){var t=this.params_.VERSION||e.DEFAULT_WMS_VERSION;this.v13_=(0,h.compareVersions)(t,"1.3")>=0},c}(i.default),S=v;exports.default=S;
},{"./common.js":"a8mu","../events/EventType.js":"C8cu","./Image.js":"XHvt","../Image.js":"DHWK","./WMSServerType.js":"mXwm","../uri.js":"n7G7","../asserts.js":"fLG6","../obj.js":"mH6q","../reproj.js":"U255","../string.js":"AiCK","../extent.js":"QDir","../proj.js":"Diht"}],"w95b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.newImageData=y,exports.default=exports.RasterSourceEvent=exports.Processor=void 0;var e=_(require("../Disposable.js")),t=_(require("../events/Event.js")),r=_(require("../events/EventType.js")),a=_(require("../ImageCanvas.js")),n=_(require("../layer/Image.js")),i=_(require("./Image.js")),s=_(require("./Source.js")),o=_(require("./State.js")),u=_(require("../layer/Tile.js")),l=_(require("../TileQueue.js")),h=_(require("./Tile.js")),p=require("../obj.js"),d=require("../dom.js"),f=require("../transform.js"),c=require("../extent.js");function _(e){return e&&e.__esModule?e:{default:e}}var g=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),v=!0;try{new ImageData(10,10)}catch(L){v=!1}var m=document.createElement("canvas").getContext("2d");function y(e,t,r){if(v)return new ImageData(e,t,r);var a=m.createImageData(t,r);return a.data.set(e),a}function w(e){var t=!0;try{new ImageData(10,10)}catch(L){t=!1}function r(e,r,a){return t?new ImageData(e,r,a):{data:e,width:r,height:a}}return function(t){var a,n,i=t.buffers,s=t.meta,o=t.imageOps,u=t.width,l=t.height,h=i.length,p=i[0].byteLength;if(o){var d=new Array(h);for(n=0;n<h;++n)d[n]=r(new Uint8ClampedArray(i[n]),u,l);a=e(d,s).data}else{a=new Uint8ClampedArray(p);var f=new Array(h),c=new Array(h);for(n=0;n<h;++n)f[n]=new Uint8ClampedArray(i[n]),c[n]=[0,0,0,0];for(var _=0;_<p;_+=4){for(var g=0;g<h;++g){var v=f[g];c[g][0]=v[_],c[g][1]=v[_+1],c[g][2]=v[_+2],c[g][3]=v[_+3]}var m=e(c,s);a[_]=m[0],a[_+1]=m[1],a[_+2]=m[2],a[_+3]=m[3]}}return a.buffer}}function b(e,t){var r=Object.keys(e.lib||{}).map(function(t){return"var "+t+" = "+e.lib[t].toString()+";"}).concat(["var __minion__ = ("+w.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),a=new Blob(r,{type:"text/javascript"}),n=URL.createObjectURL(a),i=new Worker(n);return i.addEventListener("message",t),i}function I(e,t){var r=w(e.operation),a=!1;return{postMessage:function(e){setTimeout(function(){a||t({data:{buffer:r(e),meta:e.meta}})},0)},terminate:function(){a=!0}}}var S=function(e){function t(t){var r,a=e.call(this)||this;a._imageOps=!!t.imageOps;var n=[];if(r=0===t.threads?0:a._imageOps?1:t.threads||1)for(var i=0;i<r;++i)n[i]=b(t,a._onWorkerMessage.bind(a,i));else n[0]=I(t,a._onWorkerMessage.bind(a,0));return a._workers=n,a._queue=[],a._maxQueueLength=t.queue||1/0,a._running=0,a._dataLookup={},a._job=null,a}return g(t,e),t.prototype.process=function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()},t.prototype._enqueue=function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},t.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var e=this._queue.shift();this._job=e;var t=e.inputs[0].width,r=e.inputs[0].height,a=e.inputs.map(function(e){return e.data.buffer}),n=this._workers.length;if(this._running=n,1===n)this._workers[0].postMessage({buffers:a,meta:e.meta,imageOps:this._imageOps,width:t,height:r},a);else for(var i=e.inputs[0].data.length,s=4*Math.ceil(i/4/n),o=0;o<n;++o){for(var u=o*s,l=[],h=0,p=a.length;h<p;++h)l.push(a[o].slice(u,u+s));this._workers[o].postMessage({buffers:l,meta:e.meta,imageOps:this._imageOps,width:t,height:r},l)}}},t.prototype._onWorkerMessage=function(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())},t.prototype._resolveJob=function(){var e,t,r=this._job,a=this._workers.length;if(1===a)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var n=r.inputs[0].data.length;e=new Uint8ClampedArray(n),t=new Array(n);for(var i=4*Math.ceil(n/4/a),s=0;s<a;++s){var o=this._dataLookup[s].buffer,u=s*i;e.set(new Uint8ClampedArray(o),u),t[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,y(e,r.inputs[0].width,r.inputs[0].height),t),this._dispatch()},t.prototype.disposeInternal=function(){for(var e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0},t}(e.default);exports.Processor=S;var q={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"},x={PIXEL:"pixel",IMAGE:"image"},C=function(e){function t(t,r,a){var n=e.call(this,t)||this;return n.extent=r.extent,n.resolution=r.viewState.resolution/r.pixelRatio,n.data=a,n}return g(t,e),t}(t.default);exports.RasterSourceEvent=C;var E=function(e){function t(t){var a=e.call(this,{projection:null})||this;a.processor_=null,a.operationType_=void 0!==t.operationType?t.operationType:x.PIXEL,a.threads_=void 0!==t.threads?t.threads:1,a.layers_=k(t.sources);for(var n=a.changed.bind(a),i=0,o=a.layers_.length;i<o;++i)a.layers_[i].addEventListener(r.default.CHANGE,n);return a.tileQueue_=new l.default(function(){return 1},a.changed.bind(a)),a.requestedFrameState_,a.renderedImageCanvas_=null,a.renderedRevision_,a.frameState_={animate:!1,coordinateToPixelTransform:(0,f.create)(),extent:null,index:0,layerIndex:0,layerStatesArray:A(a.layers_),pixelRatio:1,pixelToCoordinateTransform:(0,f.create)(),postRenderFunctions:[],size:[0,0],tileQueue:a.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},a.setAttributions(function(e){for(var r=[],a=0,n=t.sources.length;a<n;++a){var i=t.sources[a],o=(i instanceof s.default?i:i.getSource()).getAttributions();if("function"==typeof o){var u=o(e);r.push.apply(r,u)}}return 0!==r.length?r:null}),void 0!==t.operation&&a.setOperation(t.operation,t.lib),a}return g(t,e),t.prototype.setOperation=function(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new S({operation:e,imageOps:this.operationType_===x.IMAGE,queue:1,lib:t,threads:this.threads_}),this.changed()},t.prototype.updateFrameState_=function(e,t,r){var a=(0,p.assign)({},this.frameState_);a.viewState=(0,p.assign)({},a.viewState);var n=(0,c.getCenter)(e);a.extent=e.slice(),a.size[0]=Math.round((0,c.getWidth)(e)/t),a.size[1]=Math.round((0,c.getHeight)(e)/t),a.time=1/0;var i=a.viewState;return i.center=n,i.projection=r,i.resolution=t,a},t.prototype.allSourcesReady_=function(){for(var e=!0,t=0,r=this.layers_.length;t<r;++t)if(this.layers_[t].getSource().getState()!==o.default.READY){e=!1;break}return e},t.prototype.getImage=function(e,t,r,a){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(e,t,a);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();t===i&&(0,c.equals)(e,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},t.prototype.processSources_=function(){for(var e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t),a=0;a<t;++a){e.layerIndex=a;var n=O(this.layers_[a],e);if(!n)return;r[a]=n}var i={};this.dispatchEvent(new C(q.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))},t.prototype.onWorkerComplete_=function(e,t,r,n){if(!t&&r){var i=e.extent,s=e.viewState.resolution;if(s===this.requestedFrameState_.viewState.resolution&&(0,c.equals)(i,this.requestedFrameState_.extent)){var o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{var u=Math.round((0,c.getWidth)(i)/s),l=Math.round((0,c.getHeight)(i)/s);o=(0,d.createCanvasContext2D)(u,l),this.renderedImageCanvas_=new a.default(i,s,1,o.canvas)}o.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new C(q.AFTEROPERATIONS,e,n))}}},t.prototype.getImageInternal=function(){return null},t.prototype.disposeInternal=function(){this.processor_&&this.processor_.dispose(),e.prototype.disposeInternal.call(this)},t}(i.default);E.prototype.dispose;var j=null;function O(e,t){var r=e.getRenderer();if(!r)throw new Error("Unsupported layer type: "+e);if(!r.prepareFrame(t))return null;var a,n=t.size[0],i=t.size[1],s=r.renderFrame(t,null);if(s&&(a=s.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===n&&a.height===i)return a.getContext("2d").getImageData(0,0,n,i);if(j){var o=j.canvas;o.width!==n||o.height!==i?j=(0,d.createCanvasContext2D)(n,i):j.clearRect(0,0,n,i)}else j=(0,d.createCanvasContext2D)(n,i);return j.drawImage(a,0,0,n,i),j.getImageData(0,0,n,i)}function A(e){return e.map(function(e){return e.getLayerState()})}function k(e){for(var t=e.length,r=new Array(t),a=0;a<t;++a)r[a]=R(e[a]);return r}function R(e){var t;return e instanceof s.default?e instanceof h.default?t=new u.default({source:e}):e instanceof i.default&&(t=new n.default({source:e})):t=e,t}var T=E;exports.default=T;
},{"../Disposable.js":"DDda","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../ImageCanvas.js":"K7j2","../layer/Image.js":"KHBf","./Image.js":"XHvt","./Source.js":"H38a","./State.js":"iC8j","../layer/Tile.js":"BUEc","../TileQueue.js":"tHOl","./Tile.js":"JECm","../obj.js":"mH6q","../dom.js":"Xno5","../transform.js":"P4eA","../extent.js":"QDir"}],"ehVO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./XYZ.js")),o=require("./OSM.js");function n(e){return e&&e.__esModule?e:{default:e}}var t=function(){var e=function(o,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])})(o,n)};return function(o,n){function t(){this.constructor=o}e(o,n),o.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}}(),r=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',o.ATTRIBUTION],a={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},i={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},s=function(e){function o(o){var n=o.layer.indexOf("-"),t=-1==n?o.layer:o.layer.slice(0,n),s=i[t],u=a[o.layer],p=void 0!==o.url?o.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+o.layer+"/{z}/{x}/{y}."+u.extension;return e.call(this,{attributions:r,cacheSize:o.cacheSize,crossOrigin:"anonymous",imageSmoothing:o.imageSmoothing,maxZoom:null!=o.maxZoom?o.maxZoom:s.maxZoom,minZoom:null!=o.minZoom?o.minZoom:s.minZoom,opaque:u.opaque,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileLoadFunction:o.tileLoadFunction,transition:o.transition,url:p,wrapX:o.wrapX})||this}return t(o,e),o}(e.default),u=s;exports.default=u;
},{"./XYZ.js":"knlU","./OSM.js":"Rmo4"}],"XUos":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./TileImage.js")),e=require("../uri.js"),r=require("../obj.js"),i=require("../extent.js"),o=require("../math.js"),n=require("../size.js"),a=require("../tilecoord.js");function s(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),u=function(t){function s(e){var r=this,o=e||{};return(r=t.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,imageSmoothing:o.imageSmoothing,projection:o.projection,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileGrid:o.tileGrid,tileLoadFunction:o.tileLoadFunction,url:o.url,urls:o.urls,wrapX:void 0===o.wrapX||o.wrapX,transition:o.transition})||this).params_=o.params||{},r.hidpi_=void 0===o.hidpi||o.hidpi,r.tmpExtent_=(0,i.createEmpty)(),r.setKey(r.getKeyForParams_()),r}return p(s,t),s.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},s.prototype.getParams=function(){return this.params_},s.prototype.getRequestUrl_=function(t,r,i,n,s,p){var u=this.urls;if(u){var l,c=s.getCode().split(":").pop();if(p.SIZE=r[0]+","+r[1],p.BBOX=i.join(","),p.BBOXSR=c,p.IMAGESR=c,p.DPI=Math.round(p.DPI?p.DPI*n:90*n),1==u.length)l=u[0];else l=u[(0,o.modulo)((0,a.hash)(t),u.length)];var h=l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,e.appendParams)(h,p)}},s.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},s.prototype.updateParams=function(t){(0,r.assign)(this.params_,t),this.setKey(this.getKeyForParams_())},s.prototype.tileUrlFunction=function(t,e,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var a=o.getTileCoordExtent(t,this.tmpExtent_),s=(0,n.toSize)(o.getTileSize(t[0]),this.tmpSize);1!=e&&(s=(0,n.scale)(s,e,this.tmpSize));var p={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return(0,r.assign)(p,this.params_),this.getRequestUrl_(t,s,a,e,i,p)}},s}(t.default),l=u;exports.default=l;
},{"./TileImage.js":"udAI","../uri.js":"n7G7","../obj.js":"mH6q","../extent.js":"QDir","../math.js":"B96G","../size.js":"TAHd","../tilecoord.js":"faTr"}],"dQMP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../Tile.js")),e=a(require("../TileState.js")),r=a(require("./XYZ.js")),i=require("../dom.js"),n=require("../tilecoord.js"),o=require("../size.js");function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),u=function(t){function r(r,i,n){var o=t.call(this,r,e.default.LOADED)||this;return o.tileSize_=i,o.text_=n,o.canvas_=null,o}return s(r,t),r.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=(0,i.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},r.prototype.load=function(){},r}(t.default),l=function(t){function e(e){var r=e||{};return t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection})||this}return s(e,t),e.prototype.getTile=function(t,e,r){var i=(0,n.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(i))return this.tileCache.get(i);var a=(0,o.toSize)(this.tileGrid.getTileSize(t)),s=[t,e,r],l=this.getTileCoordForTileUrlFunction(s),c=void 0;c=l?"z:"+l[0]+" x:"+l[1]+" y:"+l[2]:"none";var f=new u(s,a,c);return this.tileCache.set(i,f),f},e}(r.default),c=l;exports.default=c;
},{"../Tile.js":"IWZI","../TileState.js":"u3kG","./XYZ.js":"knlU","../dom.js":"Xno5","../tilecoord.js":"faTr","../size.js":"TAHd"}],"oCPk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CustomTile=void 0;var t=f(require("../events/EventType.js")),e=f(require("./State.js")),i=f(require("../Tile.js")),r=f(require("./Tile.js")),n=f(require("../TileState.js")),o=require("../extent.js"),s=require("../asserts.js"),a=require("../tileurlfunction.js"),l=require("../tilegrid.js"),u=require("../tilecoord.js"),h=require("../proj.js"),d=require("../events.js"),p=require("../net.js");function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_=function(e){function i(t,i,r,n,o,s){var a=e.call(this,t,i)||this;return a.src_=r,a.extent_=n,a.preemptive_=o,a.grid_=null,a.keys_=null,a.data_=null,a.jsonp_=s,a}return c(i,e),i.prototype.getImage=function(){return null},i.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof r)return null;var n=r.charCodeAt(Math.floor(e*r.length));n>=93&&n--,n>=35&&n--;var o=null;if((n-=32)in this.keys_){var s=this.keys_[n];o=this.data_&&s in this.data_?this.data_[s]:s}return o},i.prototype.forDataAtCoordinate=function(e,i,r){this.state==n.default.EMPTY&&!0===r?(this.state=n.default.IDLE,(0,d.listenOnce)(this,t.default.CHANGE,function(t){i(this.getData(e))},this),this.loadInternal_()):!0===r?setTimeout(function(){i(this.getData(e))}.bind(this),0):i(this.getData(e))},i.prototype.getKey=function(){return this.src_},i.prototype.handleError_=function(){this.state=n.default.ERROR,this.changed()},i.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=n.default.LOADED,this.changed()},i.prototype.loadInternal_=function(){if(this.state==n.default.IDLE)if(this.state=n.default.LOADING,this.jsonp_)(0,p.jsonp)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},i.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(r){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},i.prototype.onXHRError_=function(t){this.handleError_()},i.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(n.default.EMPTY)},i}(i.default);exports.CustomTile=_;var v=function(t){function i(i){var r=t.call(this,{projection:(0,h.get)("EPSG:3857"),state:e.default.LOADING})||this;if(r.preemptive_=void 0===i.preemptive||i.preemptive,r.tileUrlFunction_=a.nullTileUrlFunction,r.template_=void 0,r.jsonp_=i.jsonp||!1,i.url)if(r.jsonp_)(0,p.jsonp)(i.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",i.url),n.send()}else i.tileJSON?r.handleTileJSONResponse(i.tileJSON):(0,s.assert)(!1,51);return r}return c(i,t),i.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(r){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},i.prototype.onXHRError_=function(t){this.handleTileJSONError()},i.prototype.getTemplate=function(){return this.template_},i.prototype.forDataAtCoordinateAndResolution=function(t,e,i,r){if(this.tileGrid){var n=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,n);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,r)}else!0===r?setTimeout(function(){i(null)},0):i(null)},i.prototype.handleTileJSONError=function(){this.setState(e.default.ERROR)},i.prototype.handleTileJSONResponse=function(t){var i,r=(0,h.get)("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var s=(0,h.getTransformFromProjections)(r,n);i=(0,o.applyTransform)(t.bounds,s)}var u=t.minzoom||0,d=t.maxzoom||22,p=(0,l.createXYZ)({extent:(0,l.extentFromProjection)(n),maxZoom:d,minZoom:u});this.tileGrid=p,this.template_=t.template;var f=t.grids;if(f){if(this.tileUrlFunction_=(0,a.createFromTemplates)(f,p),void 0!==t.attribution){var c=void 0!==i?i:r.getExtent();this.setAttributions(function(e){return(0,o.intersects)(c,e.extent)?[t.attribution]:null})}this.setState(e.default.READY)}else this.setState(e.default.ERROR)},i.prototype.getTile=function(t,e,i,r,o){var s=(0,u.getKeyZXY)(t,e,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,o),h=this.tileUrlFunction_(l,r,o),d=new _(a,void 0!==h?n.default.IDLE:n.default.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(s,d),d},i.prototype.useTile=function(t,e,i){var r=(0,u.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},i}(r.default),y=v;exports.default=y;
},{"../events/EventType.js":"C8cu","./State.js":"iC8j","../Tile.js":"IWZI","./Tile.js":"JECm","../TileState.js":"u3kG","../extent.js":"QDir","../asserts.js":"fLG6","../tileurlfunction.js":"p1vZ","../tilegrid.js":"ExRx","../tilecoord.js":"faTr","../proj.js":"Diht","../events.js":"UqnM","../net.js":"SU9K"}],"gBl1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={KVP:"KVP",REST:"REST"};exports.default=e;
},{}],"omFW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromCapabilitiesMatrixSet=u,exports.default=void 0;var e=i(require("./TileGrid.js")),t=require("../array.js"),r=require("../proj.js");function i(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),o=function(e){function t(t){var r=e.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})||this;return r.matrixIds_=t.matrixIds,r}return n(t,e),t.prototype.getMatrixId=function(e){return this.matrixIds_[e]},t.prototype.getMatrixIds=function(){return this.matrixIds_},t}(e.default),s=o;function u(e,i,n){var s=[],u=[],a=[],f=[],p=[],c=void 0!==n?n:[],l=e.SupportedCRS,d=(0,r.get)(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,r.get)(l),x=d.getMetersPerUnit(),h="ne"==d.getAxisOrientation().substr(0,2);return e.TileMatrix.sort(function(e,t){return t.ScaleDenominator-e.ScaleDenominator}),e.TileMatrix.forEach(function(r){if(!(c.length>0)||(0,t.find)(c,function(t){return r.Identifier==t.TileMatrix||-1===r.Identifier.indexOf(":")&&e.Identifier+":"+r.Identifier===t.TileMatrix})){u.push(r.Identifier);var i=28e-5*r.ScaleDenominator/x,n=r.TileWidth,o=r.TileHeight;h?a.push([r.TopLeftCorner[1],r.TopLeftCorner[0]]):a.push(r.TopLeftCorner),s.push(i),f.push(n==o?n:[n,o]),p.push([r.MatrixWidth,r.MatrixHeight])}}),new o({extent:i,origins:a,resolutions:s,matrixIds:u,tileSizes:f,sizes:p})}exports.default=s;
},{"./TileGrid.js":"dpZ6","../array.js":"luEr","../proj.js":"Diht"}],"LIR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.optionsFromCapabilities=d,exports.default=void 0;var e=l(require("./TileImage.js")),t=l(require("./WMTSRequestEncoding.js")),i=require("../uri.js"),r=require("../obj.js"),n=require("../tilegrid/WMTS.js"),o=require("../tileurlfunction.js"),a=require("../proj.js"),s=require("../array.js");function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=function(e){function n(i){var r=this,n=void 0!==i.requestEncoding?i.requestEncoding:t.default.KVP,a=i.tileGrid,s=i.urls;return void 0===s&&void 0!==i.url&&(s=(0,o.expandUrl)(i.url)),(r=e.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:a,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,urls:s,wrapX:void 0!==i.wrapX&&i.wrapX,transition:i.transition})||this).version_=void 0!==i.version?i.version:"1.0.0",r.format_=void 0!==i.format?i.format:"image/jpeg",r.dimensions_=void 0!==i.dimensions?i.dimensions:{},r.layer_=i.layer,r.matrixSet_=i.matrixSet,r.style_=i.style,r.requestEncoding_=n,r.setKey(r.getKeyForDimensions_()),s&&s.length>0&&(r.tileUrlFunction=(0,o.createFromTileUrlFunctions)(s.map(r.createFromWMTSTemplate.bind(r)))),r}return u(n,e),n.prototype.setUrls=function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction((0,o.createFromTileUrlFunctions)(e.map(this.createFromWMTSTemplate.bind(this))),t)},n.prototype.getDimensions=function(){return this.dimensions_},n.prototype.getFormat=function(){return this.format_},n.prototype.getLayer=function(){return this.layer_},n.prototype.getMatrixSet=function(){return this.matrixSet_},n.prototype.getRequestEncoding=function(){return this.requestEncoding_},n.prototype.getStyle=function(){return this.style_},n.prototype.getVersion=function(){return this.version_},n.prototype.getKeyForDimensions_=function(){var e=0,t=[];for(var i in this.dimensions_)t[e++]=i+"-"+this.dimensions_[i];return t.join("/")},n.prototype.updateDimensions=function(e){(0,r.assign)(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},n.prototype.createFromWMTSTemplate=function(e){var n=this.requestEncoding_,o={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n==t.default.KVP&&(0,r.assign)(o,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=n==t.default.KVP?(0,i.appendParams)(e,o):e.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in o?o[t.toLowerCase()]:e});var a=this.tileGrid,s=this.dimensions_;return function(o,l,u){if(o){var c={TileMatrix:a.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};(0,r.assign)(c,s);var f=e;return f=n==t.default.KVP?(0,i.appendParams)(f,c):f.replace(/\{(\w+?)\}/g,function(e,t){return c[t]})}}},n}(e.default),f=c;function d(e,i){var r=e.Contents.Layer,o=(0,s.find)(r,function(e,t,r){return e.Identifier==i.layer});if(null===o)return null;var l,u=e.Contents.TileMatrixSet;(l=o.TileMatrixSetLink.length>1?"projection"in i?(0,s.findIndex)(o.TileMatrixSetLink,function(e,t,r){var n=(0,s.find)(u,function(t){return t.Identifier==e.TileMatrixSet}).SupportedCRS,o=(0,a.get)(n.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,a.get)(n),l=(0,a.get)(i.projection);return o&&l?(0,a.equivalent)(o,l):n==i.projection}):(0,s.findIndex)(o.TileMatrixSetLink,function(e,t,r){return e.TileMatrixSet==i.matrixSet}):0)<0&&(l=0);var c=o.TileMatrixSetLink[l].TileMatrixSet,f=o.TileMatrixSetLink[l].TileMatrixSetLimits,d=o.Format[0];"format"in i&&(d=i.format),(l=(0,s.findIndex)(o.Style,function(e,t,r){return"style"in i?e.Title==i.style:e.isDefault}))<0&&(l=0);var p=o.Style[l].Identifier,m={};"Dimension"in o&&o.Dimension.forEach(function(e,t,i){var r=e.Identifier,n=e.Default;void 0===n&&(n=e.Value[0]),m[r]=n});var g,h=e.Contents.TileMatrixSet,T=(0,s.find)(h,function(e,t,i){return e.Identifier==c}),y=T.SupportedCRS;if(y&&(g=(0,a.get)(y.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,a.get)(y)),"projection"in i){var v=(0,a.get)(i.projection);v&&(g&&!(0,a.equivalent)(v,g)||(g=v))}var x="ne"==g.getAxisOrientation().substr(0,2),M=T.TileMatrix[0],S={MinTileCol:0,MinTileRow:0,MaxTileCol:M.MatrixWidth-1,MaxTileRow:M.MatrixHeight-1};f&&(S=f[f.length-1],M=(0,s.find)(T.TileMatrix,function(e){return e.Identifier===S.TileMatrix}));var _=28e-5*M.ScaleDenominator/g.getMetersPerUnit(),j=x?[M.TopLeftCorner[1],M.TopLeftCorner[0]]:M.TopLeftCorner,C=M.TileWidth*_,q=M.TileHeight*_,w=[j[0]+C*S.MinTileCol,j[1]-q*(1+S.MaxTileRow),j[0]+C*(1+S.MaxTileCol),j[1]-q*S.MinTileRow];null===g.getExtent()&&g.setExtent(w);var F=(0,n.createFromCapabilitiesMatrixSet)(T,w,f),E=[],P=i.requestEncoding;if(P=void 0!==P?P:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var L=e.OperationsMetadata.GetTile.DCP.HTTP.Get,R=0,O=L.length;R<O;++R)if(L[R].Constraint){var b=(0,s.find)(L[R].Constraint,function(e){return"GetEncoding"==e.name}).AllowedValues.Value;if(""===P&&(P=b[0]),P!==t.default.KVP)break;(0,s.includes)(b,t.default.KVP)&&E.push(L[R].href)}else L[R].href&&(P=t.default.KVP,E.push(L[R].href));return 0===E.length&&(P=t.default.REST,o.ResourceURL.forEach(function(e){"tile"===e.resourceType&&(d=e.format,E.push(e.template))})),{urls:E,layer:i.layer,matrixSet:c,format:d,projection:g,requestEncoding:P,tileGrid:F,style:p,dimensions:m,wrapX:!1,crossOrigin:i.crossOrigin}}exports.default=f;
},{"./TileImage.js":"udAI","./WMTSRequestEncoding.js":"gBl1","../uri.js":"n7G7","../obj.js":"mH6q","../tilegrid/WMTS.js":"omFW","../tileurlfunction.js":"p1vZ","../proj.js":"Diht","../array.js":"luEr"}],"kDr9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BingMaps",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"CartoDB",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Cluster",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"IIIF",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"ImageArcGISRest",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"ImageMapGuide",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"ImageStatic",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"ImageWMS",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"OSM",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Raster",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Source",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Stamen",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"TileArcGISRest",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"TileDebug",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"TileImage",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"TileJSON",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"TileWMS",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"UrlTile",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"UTFGrid",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"WMTS",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"XYZ",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"Zoomify",{enumerable:!0,get:function(){return M.default}});var e=G(require("./source/BingMaps.js")),r=G(require("./source/CartoDB.js")),t=G(require("./source/Cluster.js")),u=G(require("./source/IIIF.js")),n=G(require("./source/Image.js")),o=G(require("./source/ImageArcGISRest.js")),i=G(require("./source/ImageCanvas.js")),s=G(require("./source/ImageMapGuide.js")),c=G(require("./source/ImageStatic.js")),a=G(require("./source/ImageWMS.js")),f=G(require("./source/OSM.js")),l=G(require("./source/Raster.js")),d=G(require("./source/Source.js")),p=G(require("./source/Stamen.js")),b=G(require("./source/Tile.js")),j=G(require("./source/TileArcGISRest.js")),g=G(require("./source/TileDebug.js")),m=G(require("./source/TileImage.js")),O=G(require("./source/TileJSON.js")),y=G(require("./source/TileWMS.js")),x=G(require("./source/UrlTile.js")),P=G(require("./source/UTFGrid.js")),q=G(require("./source/Vector.js")),I=G(require("./source/VectorTile.js")),S=G(require("./source/WMTS.js")),T=G(require("./source/XYZ.js")),M=G(require("./source/Zoomify.js"));function G(e){return e&&e.__esModule?e:{default:e}}
},{"./source/BingMaps.js":"KSjo","./source/CartoDB.js":"WJrq","./source/Cluster.js":"sV2m","./source/IIIF.js":"oF4i","./source/Image.js":"XHvt","./source/ImageArcGISRest.js":"P20y","./source/ImageCanvas.js":"Y2uN","./source/ImageMapGuide.js":"C9PY","./source/ImageStatic.js":"zK6j","./source/ImageWMS.js":"e4Kb","./source/OSM.js":"Rmo4","./source/Raster.js":"w95b","./source/Source.js":"H38a","./source/Stamen.js":"ehVO","./source/Tile.js":"JECm","./source/TileArcGISRest.js":"XUos","./source/TileDebug.js":"dQMP","./source/TileImage.js":"udAI","./source/TileJSON.js":"V9RY","./source/TileWMS.js":"IcO7","./source/UrlTile.js":"uv9E","./source/UTFGrid.js":"oCPk","./source/Vector.js":"ZS12","./source/VectorTile.js":"A6uo","./source/WMTS.js":"LIR5","./source/XYZ.js":"knlU","./source/Zoomify.js":"aDh3"}],"JDeV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("ol/control/Control")),t=u(require("ol/Geolocation")),r=u(require("ol/Feature")),o=u(require("ol/geom/Point")),n=require("ol/style"),c=require("ol/layer"),i=require("ol/source");function u(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=m();return function(){var r,o=b(e);if(t){var n=b(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(u){f(s,e.default);var a=p(s);function s(){var e,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,s),e=a.call(this,{element:document.createElement("div")});var f=document.createElement("button");e.element.appendChild(f),e.element.className=u.className,f.innerHTML=u.html||"",f.title=u.tipLabel,e.active=u.active||!1,e.positionFeature=new r.default,e.positionFeature.setStyle(new n.Style({image:new n.Circle({radius:6,fill:new n.Fill({color:"#3399CC"}),stroke:new n.Stroke({color:"#fff",width:2})})})),e.accuracyFeature=new r.default;var p=new t.default({projection:u.map.getView().getProjection(),tracking:!0,trackingOptions:{enableHighAccuracy:!0}});return p.on("error",function(t){alert(t.message),e.element.disabled=!0,e.element.title=t.message,e.element.classList.add("disabled")}),p.on("change:position",function(){p.getPosition()&&(e.positionFeature.setGeometry(new o.default(p.getPosition())),e.element.color="red")}),p.on("change:accuracyGeometry",function(){e.accuracyFeature.setGeometry(p.getAccuracyGeometry())}),f.addEventListener("click",function(t){e.active?(e.layer.setMap(null),e.layer=void 0):(e.layer=new c.Vector({map:u.map,source:new i.Vector({features:[e.accuracyFeature,e.positionFeature]})}),e.positionFeature&&u.map.getView().fit(p.getAccuracyGeometry().getExtent(),{padding:[50,50,50,50]})),e.active=!e.active}),e}return s}();exports.default=g;
},{"ol/control/Control":"xxE2","ol/Geolocation":"X4ix","ol/Feature":"mYW9","ol/geom/Point":"gLcY","ol/style":"qeKX","ol/layer":"ZVaS","ol/source":"kDr9"}],"CT5J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("ol/control/Control"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=f();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(t){a(o,e.default);var n=l(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,o);var i=document.createElement("button");e=n.call(this,{element:i}),i.className=t.className,i.innerHTML=t.html||"",i.title=t.tipLabel||"",e.set("name",t.name||"toggle");var a=function(n){e.getParent()&&e.getParent().deactivateControls(s(e)),n&&n.preventDefault&&(n.preventDefault(),n.stopPropagation(),e.setActive(!e.getActive()),t.handleClick&&t.handleClick.call(s(e),n))};return i.addEventListener("click",a),i.addEventListener("touchstart",a),t.callback&&e.on("change:active",t.callback),e}return i(o,[{key:"getParent",value:function(){if(this.get("parent"))return this.get("parent")}},{key:"setActive",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getActive()!=e&&(e?this.element.classList.add("active"):this.element.classList.remove("active"),t||this.dispatchEvent({type:"change:active",key:"active",oldValue:!e,active:e,map:this.getMap()}))}},{key:"getActive",value:function(){return this.element.classList.contains("active")}},{key:"setHTML",value:function(e){this.element.innerHTML=e}},{key:"getHTML",value:function(){return this.element.innerHTML}},{key:"getDisabled",value:function(){return"none"===this.element.style.pointerEvents}},{key:"setDisabled",value:function(e){this.element.style.pointerEvents=e?"none":"auto",e?this.element.classList.add(this.classNameDisabled):this.element.classList.remove(this.classNameDisabled),this.dispatchEvent({type:"change:disabled",key:"disabled",oldValue:!e,disabled:e})}}]),o}();exports.default=v;
},{"ol/control/Control":"xxE2"}],"JS4L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("ol/control/Control")),e=r(require("ol/interaction/Select")),n=r(require("./container")),o=r(require("./toggle"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=d();return function(){var n,o=h(t);if(e){var r=h(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(r){a(u,e.default);var i=s(u);function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(this,u),(t=i.call(this,{hitTolerance:2,multi:!0})).setActive(e.active||!1),t}return l(u,[{key:"addUI",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ui=new n.default({className:r.className||"ol-control select"}),t.addControl(this.ui),this.point=new o.default({className:r.point.className||"select-point",html:r.point.html||'<i class="far fa-mouse-pointer"></i>',tipLabel:r.point.title||"Odaberi objekte",handleClick:function(){return e.setActive(e.point.getActive())}}),this.ui.addControl(this.point)}},{key:"addInfo",value:function(e,n){var o=this;this.info=new t.default({element:document.createElement("span")}),this.info.element.className=n.className||"select-info",this.info.element.innerHTML="Odabrano: 0",this.on("select",function(t){o.info.element.innerHTML="Odabrano: "+t.target.getFeatures().getLength()}),e.addControl(this.info)}}]),u}();exports.default=b;
},{"ol/control/Control":"xxE2","ol/interaction/Select":"SMGe","./container":"qR3i","./toggle":"CT5J"}],"V3SP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GeometryCollection",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LinearRing",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"LineString",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"MultiLineString",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MultiPoint",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"MultiPolygon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"SimpleGeometry",{enumerable:!0,get:function(){return m.default}});var e=c(require("./geom/Circle.js")),r=c(require("./geom/Geometry.js")),t=c(require("./geom/GeometryCollection.js")),n=c(require("./geom/LinearRing.js")),o=c(require("./geom/LineString.js")),u=c(require("./geom/MultiLineString.js")),i=c(require("./geom/MultiPoint.js")),l=c(require("./geom/MultiPolygon.js")),f=c(require("./geom/Point.js")),g=c(require("./geom/Polygon.js")),m=c(require("./geom/SimpleGeometry.js"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./geom/Circle.js":"AyCw","./geom/Geometry.js":"F8sI","./geom/GeometryCollection.js":"HvLT","./geom/LinearRing.js":"jRgU","./geom/LineString.js":"DfxW","./geom/MultiLineString.js":"fbCo","./geom/MultiPoint.js":"dNu5","./geom/MultiPolygon.js":"ouhF","./geom/Point.js":"gLcY","./geom/Polygon.js":"Nwwk","./geom/SimpleGeometry.js":"pnrv"}],"XDpu":[function(require,module,exports) {
"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function e(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sortable=It,exports.default=void 0;var n=e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),o=e(/Edge/i),i=e(/firefox/i),r=e(/safari/i)&&!e(/chrome/i)&&!e(/android/i),a=e(/iP(ad|od|hone)/i),l=e(/chrome/i)&&e(/android/i),s={capture:!1,passive:!1};function c(t,e,o){t.addEventListener(e,o,!n&&s)}function u(t,e,o){t.removeEventListener(e,o,!n&&s)}function d(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function h(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function f(t,e,n,o){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&d(t,e):d(t,e))||o&&t===n)return t;if(t===n)break}while(t=h(t))}return null}var p,g=/\s+/g;function v(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(g," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(g," ")}}function m(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in o||-1!==e.indexOf("webkit")||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"px")}}function b(t,e){var n="";if("string"==typeof t)n=t;else do{var o=m(t,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function w(t,e,n){if(t){var o=t.getElementsByTagName(e),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function E(){return document.scrollingElement||document.documentElement}function y(t,e,o,i,r){if(t.getBoundingClientRect||t===window){var a,l,s,c,u,d,h;if(t!==window&&t!==E()?(l=(a=t.getBoundingClientRect()).top,s=a.left,c=a.bottom,u=a.right,d=a.height,h=a.width):(l=0,s=0,c=window.innerHeight,u=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(e||o)&&t!==window&&(r=r||t.parentNode,!n))do{if(r&&r.getBoundingClientRect&&("none"!==m(r,"transform")||o&&"static"!==m(r,"position"))){var f=r.getBoundingClientRect();l-=f.top+parseInt(m(r,"border-top-width")),s-=f.left+parseInt(m(r,"border-left-width")),c=l+a.height,u=s+a.width;break}}while(r=r.parentNode);if(i&&t!==window){var p=b(r||t),g=p&&p.a,v=p&&p.d;p&&(c=(l/=v)+(d/=v),u=(s/=g)+(h/=g))}return{top:l,left:s,bottom:c,right:u,width:h,height:d}}}function D(t,e,n){for(var o=x(t,!0),i=y(t)[e];o;){var r=y(o)[n];if(!("top"===n||"left"===n?i>=r:i<=r))return o;if(o===E())break;o=x(o,!1)}return!1}function _(t,e,n){for(var o=0,i=0,r=t.children;i<r.length;){if("none"!==r[i].style.display&&r[i]!==It.ghost&&r[i]!==It.dragged&&f(r[i],n.draggable,t,!1)){if(o===e)return r[i];o++}i++}return null}function S(t,e){for(var n=t.lastElementChild;n&&(n===It.ghost||"none"===m(n,"display")||e&&!d(n,e));)n=n.previousElementSibling;return n||null}function C(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===It.clone||e&&!d(t,e)||n++;return n}function T(t){var e=0,n=0,o=E();if(t)do{var i=b(t);e+=t.scrollLeft*i.a,n+=t.scrollTop*i.d}while(t!==o&&(t=t.parentNode));return[e,n]}function x(t,e){if(!t||!t.getBoundingClientRect)return E();var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=m(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return E();if(o||e)return n;o=!0}}}while(n=n.parentNode);return E()}function M(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function N(t,e){return function(){if(!p){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),p=setTimeout(function(){p=void 0},e)}}}function O(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function A(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function I(t,e){m(t,"position","absolute"),m(t,"top",e.top),m(t,"left",e.left),m(t,"width",e.width),m(t,"height",e.height)}function P(t){m(t,"position",""),m(t,"top",""),m(t,"left",""),m(t,"width",""),m(t,"height","")}var k="Sortable"+(new Date).getTime(),R=[],X={initializeByDefault:!0},Y={mount:function(t){for(var e in X)X.hasOwnProperty(e)&&!(e in t)&&(t[e]=X[e]);R.push(t)},pluginEvent:function(e,n,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var r=e+"Global";R.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][r]&&n[i.pluginName][r](t({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](t({sortable:n},o)))})},initializePlugins:function(t,e,n,o){for(var i in R.forEach(function(o){var i=o.pluginName;if(t.options[i]||o.initializeByDefault){var r=new o(t,e,t.options);r.sortable=t,r.options=t.options,t[i]=r,Object.assign(n,r.defaults)}}),t.options)if(t.options.hasOwnProperty(i)){var r=this.modifyOption(t,i,t.options[i]);void 0!==r&&(t.options[i]=r)}},getEventProperties:function(t,e){var n={};return R.forEach(function(o){"function"==typeof o.eventProperties&&Object.assign(n,o.eventProperties.call(e[o.pluginName],t))}),n},modifyOption:function(t,e,n){var o;return R.forEach(function(i){t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(o=i.optionListeners[e].call(t[i.pluginName],n))}),o}};function B(e){var i=e.sortable,r=e.rootEl,a=e.name,l=e.targetEl,s=e.cloneEl,c=e.toEl,u=e.fromEl,d=e.oldIndex,h=e.newIndex,f=e.oldDraggableIndex,p=e.newDraggableIndex,g=e.originalEvent,v=e.putSortable,m=e.extraEventProperties;if(i=i||r&&r[k]){var b,w=i.options,E="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||n||o?(b=document.createEvent("Event")).initEvent(a,!0,!0):b=new CustomEvent(a,{bubbles:!0,cancelable:!0}),b.to=c||r,b.from=u||r,b.item=l||r,b.clone=s,b.oldIndex=d,b.newIndex=h,b.oldDraggableIndex=f,b.newDraggableIndex=p,b.originalEvent=g,b.pullMode=v?v.lastPutMode:void 0;var y=t({},m,Y.getEventProperties(a,i));for(var D in y)b[D]=y[D];r&&r.dispatchEvent(b),w[E]&&w[E].call(i,b)}}var H=function(e,n,o){var i=void 0===o?{}:o,r=i.evt,a=function(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)e.indexOf(n=r[o])>=0||(i[n]=t[n]);return i}(i,["evt"]);Y.pluginEvent.bind(It)(e,n,t({dragEl:L,parentEl:j,ghostEl:K,rootEl:W,nextEl:z,lastDownEl:G,cloneEl:U,cloneHidden:q,dragStarted:lt,putSortable:tt,activeSortable:It.active,originalEvent:r,oldIndex:V,oldDraggableIndex:Q,newIndex:Z,newDraggableIndex:$,hideGhostForTarget:xt,unhideGhostForTarget:Mt,cloneNowHidden:function(){q=!0},cloneNowShown:function(){q=!1},dispatchSortableEvent:function(t){F({sortable:n,name:t,originalEvent:r})}},a))};function F(e){B(t({putSortable:tt,cloneEl:U,targetEl:L,rootEl:W,oldIndex:V,oldDraggableIndex:Q,newIndex:Z,newDraggableIndex:$},e))}var L,j,K,W,z,G,U,q,V,Z,Q,$,J,tt,et,nt,ot,it,rt,at,lt,st,ct,ut,dt,ht=!1,ft=!1,pt=[],gt=!1,vt=!1,mt=[],bt=!1,wt=[],Et="undefined"!=typeof document,yt=a,Dt=o||n?"cssFloat":"float",_t=Et&&!l&&!a&&"draggable"in document.createElement("div"),St=function(){if(Et){if(n)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Ct=function(t,e){var n=m(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=_(t,0,e),r=_(t,1,e),a=i&&m(i),l=r&&m(r),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+y(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+y(r).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":i&&a.float&&"none"!==a.float?!r||"both"!==l.clear&&l.clear!==("left"===a.float?"left":"right")?"horizontal":"vertical":i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=o&&"none"===n[Dt]||r&&"none"===n[Dt]&&s+c>o)?"vertical":"horizontal"},Tt=function(t){function e(t,n){return function(o,i,r,a){if(null==t&&(n||o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(o,i,r,a),n)(o,i,r,a);var l=(n?o:i).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},o=t.group;o&&"object"==typeof o||(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},xt=function(){!St&&K&&m(K,"display","none")},Mt=function(){!St&&K&&m(K,"display","")};Et&&document.addEventListener("click",function(t){if(ft)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ft=!1,!1},!0);var Nt,Ot=function(t){if(L){var e=(i=(t=t.touches?t.touches[0]:t).clientX,r=t.clientY,pt.some(function(t){if(!S(t)){var e=y(t),n=t[k].options.emptyInsertThreshold;return n&&i>=e.left-n&&i<=e.right+n&&r>=e.top-n&&r<=e.bottom+n?a=t:void 0}}),a);if(e){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[k]._onDragOver(n)}}var i,r,a},At=function(t){L&&L.parentNode[k]._isOutsideThisEl(t.target)};function It(e,n){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=n=Object.assign({},n),e[k]=this;var o,i,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ct(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==It.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var a in Y.initializePlugins(this,e,r),r)!(a in n)&&(n[a]=r[a]);for(var l in Tt(n),this)"_"===l.charAt(0)&&"function"==typeof this[l]&&(this[l]=this[l].bind(this));this.nativeDraggable=!n.forceFallback&&_t,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?c(e,"pointerdown",this._onTapStart):(c(e,"mousedown",this._onTapStart),c(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(c(e,"dragover",this),c(e,"dragenter",this)),pt.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),Object.assign(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(e){if("none"!==m(e,"display")&&void 0!==e){i.push({target:e,rect:y(e)});var n=t({},i[i.length-1].rect);if(e.thisAnimationDuration){var o=b(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}})},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(o),void("function"==typeof t&&t());var n=!1,r=0;i.forEach(function(t){var o=0,i=t.target,a=i.fromRect,l=y(i),s=i.prevFromRect,c=i.prevToRect,u=t.rect,d=b(i,!0);d&&(l.top-=d.f,l.left-=d.e),i.toRect=l,i.thisAnimationDuration&&M(s,l)&&!M(a,l)&&(u.top-l.top)/(u.left-l.left)==(a.top-l.top)/(a.left-l.left)&&(o=function(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}(u,s,c,e.options)),M(l,a)||(i.prevFromRect=a,i.prevToRect=l,o||(o=e.options.animation),e.animate(i,u,l,o)),o&&(n=!0,r=Math.max(r,o),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},o),i.thisAnimationDuration=o)}),clearTimeout(o),n?o=setTimeout(function(){"function"==typeof t&&t()},r):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,o){if(o){m(t,"transition",""),m(t,"transform","");var i=b(this.el),r=(e.left-n.left)/(i&&i.a||1),a=(e.top-n.top)/(i&&i.d||1);t.animatingX=!!r,t.animatingY=!!a,m(t,"transform","translate3d("+r+"px,"+a+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),m(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),m(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){m(t,"transition",""),m(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},o)}}}))}function Pt(t,e,i,r,a,l,s,c){var u,d,h=t[k],f=h.options.onMove;return!window.CustomEvent||n||o?(u=document.createEvent("Event")).initEvent("move",!0,!0):u=new CustomEvent("move",{bubbles:!0,cancelable:!0}),u.to=e,u.from=t,u.dragged=i,u.draggedRect=r,u.related=a||e,u.relatedRect=l||y(e),u.willInsertAfter=c,u.originalEvent=s,t.dispatchEvent(u),f&&(d=f.call(h,u,s)),d}function kt(t){t.draggable=!1}function Rt(){bt=!1}function Xt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function Yt(t){return setTimeout(t,0)}function Bt(t){return clearTimeout(t)}It.prototype={constructor:It,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(st=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,L):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,o=this.options,i=o.preventOnFilter,a=t.type,l=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(l||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,u=o.filter;if(function(t){wt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&wt.push(o)}}(n),!L&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||o.disabled)&&!c.isContentEditable&&(this.nativeDraggable||!r||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=f(s,o.draggable,n,!1))&&s.animated||G===s)){if(V=C(s),Q=C(s,o.draggable),"function"==typeof u){if(u.call(this,t,s,this))return F({sortable:e,rootEl:c,name:"filter",targetEl:s,toEl:n,fromEl:n}),H("filter",e,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(u&&(u=u.split(",").some(function(o){if(o=f(c,o.trim(),n,!1))return F({sortable:e,rootEl:o,name:"filter",targetEl:s,fromEl:n,toEl:n}),H("filter",e,{evt:t}),!0})))return void(i&&t.cancelable&&t.preventDefault());o.handle&&!f(c,o.handle,n,!1)||this._prepareDragStart(t,l,s)}}},_prepareDragStart:function(t,e,r){var a,l=this,s=l.el,u=l.options,d=s.ownerDocument;if(r&&!L&&r.parentNode===s){var h=y(r);if(W=s,j=(L=r).parentNode,z=L.nextSibling,G=r,J=u.group,It.dragged=L,rt=(et={target:L,clientX:(e||t).clientX,clientY:(e||t).clientY}).clientX-h.left,at=et.clientY-h.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,L.style["will-change"]="all",a=function(){H("delayEnded",l,{evt:t}),It.eventCanceled?l._onDrop():(l._disableDelayedDragEvents(),!i&&l.nativeDraggable&&(L.draggable=!0),l._triggerDragStart(t,e),F({sortable:l,name:"choose",originalEvent:t}),v(L,u.chosenClass,!0))},u.ignore.split(",").forEach(function(t){w(L,t.trim(),kt)}),c(d,"dragover",Ot),c(d,"mousemove",Ot),c(d,"touchmove",Ot),c(d,"mouseup",l._onDrop),c(d,"touchend",l._onDrop),c(d,"touchcancel",l._onDrop),i&&this.nativeDraggable&&(this.options.touchStartThreshold=4,L.draggable=!0),H("delayStart",this,{evt:t}),!u.delay||u.delayOnTouchOnly&&!e||this.nativeDraggable&&(o||n))a();else{if(It.eventCanceled)return void this._onDrop();c(d,"mouseup",l._disableDelayedDrag),c(d,"touchend",l._disableDelayedDrag),c(d,"touchcancel",l._disableDelayedDrag),c(d,"mousemove",l._delayedDragTouchMoveHandler),c(d,"touchmove",l._delayedDragTouchMoveHandler),u.supportPointer&&c(d,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(a,u.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){L&&kt(L),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;u(t,"mouseup",this._disableDelayedDrag),u(t,"touchend",this._disableDelayedDrag),u(t,"touchcancel",this._disableDelayedDrag),u(t,"mousemove",this._delayedDragTouchMoveHandler),u(t,"touchmove",this._delayedDragTouchMoveHandler),u(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?c(document,this.options.supportPointer?"pointermove":e?"touchmove":"mousemove",this._onTouchMove):(c(L,"dragend",this),c(W,"dragstart",this._onDragStart));try{document.selection?Yt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(ht=!1,W&&L){H("dragStarted",this,{evt:e}),this.nativeDraggable&&c(document,"dragover",At);var n=this.options;!t&&v(L,n.dragClass,!1),v(L,n.ghostClass,!0),It.active=this,t&&this._appendGhost(),F({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(nt){this._lastX=nt.clientX,this._lastY=nt.clientY,xt();for(var t=document.elementFromPoint(nt.clientX,nt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(nt.clientX,nt.clientY))!==e;)e=t;if(L.parentNode[k]._isOutsideThisEl(t),e)do{if(e[k]&&e[k]._onDragOver({clientX:nt.clientX,clientY:nt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Mt()}},_onTouchMove:function(t){if(et){var e=this.options,n=e.fallbackTolerance,o=e.fallbackOffset,i=t.touches?t.touches[0]:t,r=K&&b(K,!0),a=K&&r&&r.a,l=K&&r&&r.d,s=yt&&dt&&T(dt),c=(i.clientX-et.clientX+o.x)/(a||1)+(s?s[0]-mt[0]:0)/(a||1),u=(i.clientY-et.clientY+o.y)/(l||1)+(s?s[1]-mt[1]:0)/(l||1);if(!It.active&&!ht){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(K){r?(r.e+=c-(ot||0),r.f+=u-(it||0)):r={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")";m(K,"webkitTransform",d),m(K,"mozTransform",d),m(K,"msTransform",d),m(K,"transform",d),ot=c,it=u,nt=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!K){var t=this.options.fallbackOnBody?document.body:W,e=y(L,!0,yt,!0,t),n=this.options;if(yt){for(dt=t;"static"===m(dt,"position")&&"none"===m(dt,"transform")&&dt!==document;)dt=dt.parentNode;dt!==document.body&&dt!==document.documentElement?(dt===document&&(dt=E()),e.top+=dt.scrollTop,e.left+=dt.scrollLeft):dt=E(),mt=T(dt)}v(K=L.cloneNode(!0),n.ghostClass,!1),v(K,n.fallbackClass,!0),v(K,n.dragClass,!0),m(K,"transition",""),m(K,"transform",""),m(K,"box-sizing","border-box"),m(K,"margin",0),m(K,"top",e.top),m(K,"left",e.left),m(K,"width",e.width),m(K,"height",e.height),m(K,"opacity","0.8"),m(K,"position",yt?"absolute":"fixed"),m(K,"zIndex","100000"),m(K,"pointerEvents","none"),It.ghost=K,t.appendChild(K),m(K,"transform-origin",rt/parseInt(K.style.width)*100+"% "+at/parseInt(K.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,i=n.options;H("dragStart",this,{evt:t}),It.eventCanceled?this._onDrop():(H("setupClone",this),It.eventCanceled||((U=A(L)).draggable=!1,U.style["will-change"]="",this._hideClone(),v(U,this.options.chosenClass,!1),It.clone=U),n.cloneId=Yt(function(){H("clone",n),It.eventCanceled||(n.options.removeCloneOnHide||W.insertBefore(U,L),n._hideClone(),F({sortable:n,name:"clone"}))}),!e&&v(L,i.dragClass,!0),e?(ft=!0,n._loopId=setInterval(n._emulateDragOver,50)):(u(document,"mouseup",n._onDrop),u(document,"touchend",n._onDrop),u(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,L)),c(document,"drop",n),m(L,"transform","translateZ(0)")),ht=!0,n._dragStartId=Yt(n._dragStarted.bind(n,e,t)),c(document,"selectstart",n),lt=!0,r&&m(document.body,"user-select","none"))},_onDragOver:function(e){var n,o,i,r,a=this.el,l=e.target,s=this.options,c=s.group,u=It.active,d=J===c,h=s.sort,p=tt||u,g=this,b=!1;if(!bt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=f(l,s.draggable,a,!0),B("dragOver"),It.eventCanceled)return b;if(L.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||g._ignoreWhileAnimating===l)return U(!1);if(ft=!1,u&&!s.disabled&&(d?h||(i=!W.contains(L)):tt===this||(this.lastPutMode=J.checkPull(this,u,L,e))&&c.checkPut(this,u,L,e))){if(r="vertical"===this._getDirection(e,l),n=y(L),B("dragOverValid"),It.eventCanceled)return b;if(i)return j=W,G(),this._hideClone(),B("revert"),It.eventCanceled||(z?W.insertBefore(L,z):W.appendChild(L)),U(!0);var w=S(a,s.draggable);if(!w||function(t,e,n){var o=y(S(n.el,n.options.draggable));return e?t.clientX>o.right+10||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+10}(e,r,this)&&!w.animated){if(w===L)return U(!1);if(w&&a===e.target&&(l=w),l&&(o=y(l)),!1!==Pt(W,a,L,n,l,o,e,!!l))return G(),a.appendChild(L),j=a,q(),U(!0)}else if(l.parentNode===a){o=y(l);var E,_,T,x=L.parentNode!==a,M=!function(t,e,n){var o=n?t.left:t.top,i=n?e.left:e.top;return o===i||(n?t.right:t.bottom)===(n?e.right:e.bottom)||o+(n?t.width:t.height)/2===i+(n?e.width:e.height)/2}(L.animated&&L.toRect||n,l.animated&&l.toRect||o,r),N=r?"top":"left",A=D(l,"top","top")||D(L,"top","top"),I=A?A.scrollTop:void 0;if(st!==l&&(_=o[N],gt=!1,vt=!M&&s.invertSwap||x),0!==(E=function(t,e,n,o,i,r,a,l){var s=o?t.clientY:t.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,h=!1;if(!a)if(l&&ut<c*i){if(!gt&&(1===ct?s>u+c*r/2:s<d-c*r/2)&&(gt=!0),gt)h=!0;else if(1===ct?s<u+ut:s>d-ut)return-ct}else if(s>u+c*(1-i)/2&&s<d-c*(1-i)/2)return function(t){return C(L)<C(t)?1:-1}(e);return(h=h||a)&&(s<u+c*r/2||s>d-c*r/2)?s>u+c/2?1:-1:0}(e,l,o,r,M?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,vt,st===l))){var P=C(L);do{T=j.children[P-=E]}while(T&&("none"===m(T,"display")||T===K))}if(0===E||T===l)return U(!1);st=l,ct=E;var R=l.nextElementSibling,X=!1,Y=Pt(W,a,L,n,l,o,e,X=1===E);if(!1!==Y)return 1!==Y&&-1!==Y||(X=1===Y),bt=!0,setTimeout(Rt,30),G(),X&&!R?a.appendChild(L):l.parentNode.insertBefore(L,X?R:l),A&&O(A,0,I-A.scrollTop),j=L.parentNode,void 0===_||vt||(ut=Math.abs(_-y(l)[N])),q(),U(!0)}if(a.contains(L))return U(!1)}return!1}function B(s,c){H(s,g,t({evt:e,isOwner:d,axis:r?"vertical":"horizontal",revert:i,dragRect:n,targetRect:o,canSort:h,fromSortable:p,target:l,completed:U,onMove:function(t,o){return Pt(W,a,L,n,t,y(t),e,o)},changed:q},c))}function G(){B("dragOverAnimationCapture"),g.captureAnimationState(),g!==p&&p.captureAnimationState()}function U(t){return B("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(g),g!==p&&(v(L,tt?tt.options.ghostClass:u.options.ghostClass,!1),v(L,s.ghostClass,!0)),tt!==g&&g!==It.active?tt=g:g===It.active&&tt&&(tt=null),p===g&&(g._ignoreWhileAnimating=l),g.animateAll(function(){B("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===L&&!L.animated||l===a&&!l.animated)&&(st=null),s.dragoverBubble||e.rootEl||l===document||(L.parentNode[k]._isOutsideThisEl(e.target),!t&&Ot(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function q(){Z=C(L),$=C(L,s.draggable),F({sortable:g,name:"change",toEl:a,newIndex:Z,newDraggableIndex:$,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){u(document,"mousemove",this._onTouchMove),u(document,"touchmove",this._onTouchMove),u(document,"pointermove",this._onTouchMove),u(document,"dragover",Ot),u(document,"mousemove",Ot),u(document,"touchmove",Ot)},_offUpEvents:function(){var t=this.el.ownerDocument;u(t,"mouseup",this._onDrop),u(t,"touchend",this._onDrop),u(t,"pointerup",this._onDrop),u(t,"touchcancel",this._onDrop),u(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;Z=C(L),$=C(L,n.draggable),H("drop",this,{evt:t}),j=L&&L.parentNode,Z=C(L),$=C(L,n.draggable),It.eventCanceled||(ht=!1,vt=!1,gt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Bt(this.cloneId),Bt(this._dragStartId),this.nativeDraggable&&(u(document,"drop",this),u(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),r&&m(document.body,"user-select",""),m(L,"transform",""),t&&(lt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),K&&K.parentNode&&K.parentNode.removeChild(K),(W===j||tt&&"clone"!==tt.lastPutMode)&&U&&U.parentNode&&U.parentNode.removeChild(U),L&&(this.nativeDraggable&&u(L,"dragend",this),kt(L),L.style["will-change"]="",lt&&!ht&&v(L,tt?tt.options.ghostClass:this.options.ghostClass,!1),v(L,this.options.chosenClass,!1),F({sortable:this,name:"unchoose",toEl:j,newIndex:null,newDraggableIndex:null,originalEvent:t}),W!==j?(Z>=0&&(F({rootEl:j,name:"add",toEl:j,fromEl:W,originalEvent:t}),F({sortable:this,name:"remove",toEl:j,originalEvent:t}),F({rootEl:j,name:"sort",toEl:j,fromEl:W,originalEvent:t}),F({sortable:this,name:"sort",toEl:j,originalEvent:t})),tt&&tt.save()):Z!==V&&Z>=0&&(F({sortable:this,name:"update",toEl:j,originalEvent:t}),F({sortable:this,name:"sort",toEl:j,originalEvent:t})),It.active&&(null!=Z&&-1!==Z||(Z=V,$=Q),F({sortable:this,name:"end",toEl:j,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){H("nulling",this),W=L=j=K=z=U=G=q=et=nt=lt=Z=$=V=Q=st=ct=tt=J=It.dragged=It.ghost=It.clone=It.active=null,wt.forEach(function(t){t.checked=!0}),wt.length=ot=it=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":L&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)f(t=n[o],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||Xt(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,o){var i=n.children[o];f(i,this.options.draggable,n,!1)&&(e[t]=i)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return f(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var o=Y.modifyOption(this,t,e);n[t]=void 0!==o?o:e,"group"===t&&Tt(n)},destroy:function(){H("destroy",this);var t=this.el;t[k]=null,u(t,"mousedown",this._onTapStart),u(t,"touchstart",this._onTapStart),u(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(u(t,"dragover",this),u(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),pt.splice(pt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!q){if(H("hideClone",this),It.eventCanceled)return;m(U,"display","none"),this.options.removeCloneOnHide&&U.parentNode&&U.parentNode.removeChild(U),q=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(q){if(H("showClone",this),It.eventCanceled)return;L.parentNode!=W||this.options.group.revertClone?z?W.insertBefore(U,z):W.appendChild(U):W.insertBefore(U,L),this.options.group.revertClone&&this.animate(L,U),m(U,"display",""),q=!1}}else this._hideClone()}},Et&&c(document,"touchmove",function(t){(It.active||ht)&&t.cancelable&&t.preventDefault()}),It.utils={on:c,off:u,css:m,find:w,is:function(t,e){return!!f(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:N,closest:f,toggleClass:v,clone:A,index:C,nextTick:Yt,cancelNextTick:Bt,detectDirection:Ct,getChild:_},It.get=function(t){return t[k]},It.mount=function(){var e=[].slice.call(arguments);e[0].constructor===Array&&(e=e[0]),e.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not "+{}.toString.call(e);e.utils&&(It.utils=t({},It.utils,e.utils)),Y.mount(e)})},It.create=function(t,e){return new It(t,e)},It.version="1.12.0";var Ht,Ft,Lt,jt,Kt,Wt=[],zt=[],Gt=!1,Ut=!1,qt=!1;function Vt(t,e){zt.forEach(function(n,o){var i=e.children[n.sortableIndex+(t?Number(o):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function Zt(){Wt.forEach(function(t){t!==Lt&&t.parentNode&&t.parentNode.removeChild(t)})}var Qt=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,i=t.dispatchSortableEvent,r=t.unhideGhostForTarget;if(e){var a=n||t.activeSortable;(0,t.hideGhostForTarget)();var l=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,s=document.elementFromPoint(l.clientX,l.clientY);r(),a&&!a.el.contains(s)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function $t(){}function Jt(){}$t.prototype={startIndex:null,dragStart:function(t){this.startIndex=t.oldDraggableIndex},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=_(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(e,o):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Qt},Object.assign($t,{pluginName:"revertOnSpill"}),Jt.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Qt},Object.assign(Jt,{pluginName:"removeOnSpill"});var te,ee,ne,oe,ie,re,ae=[],le=!1;function se(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function ce(){clearInterval(re)}var ue=N(function(t,e,n,o){if(e.scroll){var i,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,s=e.scrollSpeed,c=E(),u=!1;ee!==n&&(ee=n,se(),i=e.scrollFn,!0===(te=e.scroll)&&(te=x(n,!0)));var d=0,h=te;do{var f=h,p=y(f),g=p.top,v=p.bottom,b=p.left,w=p.right,D=p.width,_=p.height,S=void 0,C=void 0,T=f.scrollWidth,M=f.scrollHeight,N=m(f),A=f.scrollLeft,I=f.scrollTop;f===c?(S=D<T&&("auto"===N.overflowX||"scroll"===N.overflowX||"visible"===N.overflowX),C=_<M&&("auto"===N.overflowY||"scroll"===N.overflowY||"visible"===N.overflowY)):(S=D<T&&("auto"===N.overflowX||"scroll"===N.overflowX),C=_<M&&("auto"===N.overflowY||"scroll"===N.overflowY));var P=S&&(Math.abs(w-r)<=l&&A+D<T)-(Math.abs(b-r)<=l&&!!A),R=C&&(Math.abs(v-a)<=l&&I+_<M)-(Math.abs(g-a)<=l&&!!I);if(!ae[d])for(var X=0;X<=d;X++)ae[X]||(ae[X]={});ae[d].vx==P&&ae[d].vy==R&&ae[d].el===f||(ae[d].el=f,ae[d].vx=P,ae[d].vy=R,clearInterval(ae[d].pid),0==P&&0==R||(u=!0,ae[d].pid=setInterval(function(){o&&0===this.layer&&It.active._onTouchMove(ie);var e=ae[this.layer].vy?ae[this.layer].vy*s:0,n=ae[this.layer].vx?ae[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(It.dragged.parentNode[k],n,e,t,ie,ae[this.layer].el)||O(ae[this.layer].el,n,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==c&&(h=x(h,!1)));le=u}},30);It.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?c(document,"dragover",this._handleAutoScroll):c(document,this.options.supportPointer?"pointermove":e.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?u(document,"dragover",this._handleAutoScroll):(u(document,"pointermove",this._handleFallbackAutoScroll),u(document,"touchmove",this._handleFallbackAutoScroll),u(document,"mousemove",this._handleFallbackAutoScroll)),ce(),se(),clearTimeout(p),p=void 0},nulling:function(){ie=ee=te=le=re=ne=oe=null,ae.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,a=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(a,l);if(ie=t,e||o||n||r){ue(t,this.options,s,e);var c=x(s,!0);!le||re&&a===ne&&l===oe||(re&&ce(),re=setInterval(function(){var n=x(document.elementFromPoint(a,l),!0);n!==c&&(c=n,se()),ue(t,i.options,n,e)},10),ne=a,oe=l)}else{if(!this.options.bubbleScroll||x(s,!0)===E())return void se();ue(t,this.options,x(s,!1),!1)}}},Object.assign(t,{pluginName:"scroll",initializeByDefault:!0})}),It.mount(Jt,$t),It.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){Nt=t.dragEl},dragOverValid:function(t){var e=t.completed,n=t.target,o=t.changed,i=t.cancel;if(t.activeSortable.options.swap){var r=this.options;if(n&&n!==this.sortable.el){var a=Nt;!1!==(0,t.onMove)(n)?(v(n,r.swapClass,!0),Nt=n):Nt=null,a&&a!==Nt&&v(a,r.swapClass,!1)}o(),e(!0),i()}},drop:function(t){var e,n,o,i,r,a,l=t.activeSortable,s=t.putSortable,c=t.dragEl,u=s||this.sortable,d=this.options;Nt&&v(Nt,d.swapClass,!1),Nt&&(d.swap||s&&s.options.swap)&&c!==Nt&&(u.captureAnimationState(),u!==l&&l.captureAnimationState(),a=(n=Nt).parentNode,(r=(e=c).parentNode)&&a&&!r.isEqualNode(n)&&!a.isEqualNode(e)&&(o=C(e),i=C(n),r.isEqualNode(a)&&o<i&&i++,r.insertBefore(n,r.children[o]),a.insertBefore(e,a.children[i])),u.animateAll(),u!==l&&l.animateAll())},nulling:function(){Nt=null}},Object.assign(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Nt}}})}),It.mount(new function(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?c(document,"pointerup",this._deselectMultiDrag):(c(document,"mouseup",this._deselectMultiDrag),c(document,"touchend",this._deselectMultiDrag)),c(document,"keydown",this._checkKeyDown),c(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,n){var o="";Wt.length&&Ft===t?Wt.forEach(function(t,e){o+=(e?", ":"")+t.textContent}):o=n.textContent,e.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){Lt=t.dragEl},delayEnded:function(){this.isMultiDrag=~Wt.indexOf(Lt)},setupClone:function(t){var e=t.sortable,n=t.cancel;if(this.isMultiDrag){for(var o=0;o<Wt.length;o++)zt.push(A(Wt[o])),zt[o].sortableIndex=Wt[o].sortableIndex,zt[o].draggable=!1,zt[o].style["will-change"]="",v(zt[o],this.options.selectedClass,!1),Wt[o]===Lt&&v(zt[o],this.options.chosenClass,!1);e._hideClone(),n()}},clone:function(t){var e=t.dispatchSortableEvent,n=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Wt.length&&Ft===t.sortable&&(Vt(!0,t.rootEl),e("clone"),n()))},showClone:function(t){var e=t.cloneNowShown,n=t.cancel;this.isMultiDrag&&(Vt(!1,t.rootEl),zt.forEach(function(t){m(t,"display","")}),e(),Kt=!1,n())},hideClone:function(t){var e=this,n=t.cloneNowHidden,o=t.cancel;this.isMultiDrag&&(zt.forEach(function(t){m(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)}),n(),Kt=!0,o())},dragStartGlobal:function(t){!this.isMultiDrag&&Ft&&Ft.multiDrag._deselectMultiDrag(),Wt.forEach(function(t){t.sortableIndex=C(t)}),Wt=Wt.sort(function(t,e){return t.sortableIndex-e.sortableIndex}),qt=!0},dragStarted:function(t){var e=this,n=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Wt.forEach(function(t){t!==Lt&&m(t,"position","absolute")});var o=y(Lt,!1,!0,!0);Wt.forEach(function(t){t!==Lt&&I(t,o)}),Ut=!0,Gt=!0}n.animateAll(function(){Ut=!1,Gt=!1,e.options.animation&&Wt.forEach(function(t){P(t)}),e.options.sort&&Zt()})}},dragOver:function(t){var e=t.completed,n=t.cancel;Ut&&~Wt.indexOf(t.target)&&(e(!1),n())},revert:function(t){var e=t.fromSortable,n=t.rootEl,o=t.sortable,i=t.dragRect;Wt.length>1&&(Wt.forEach(function(t){o.addAnimationState({target:t,rect:Ut?y(t):i}),P(t),t.fromRect=i,e.removeAnimationState(t)}),Ut=!1,function(t,e){Wt.forEach(function(n,o){var i=e.children[n.sortableIndex+(t?Number(o):0)];i?e.insertBefore(n,i):e.appendChild(n)})}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(t){var e=t.sortable,n=t.isOwner,o=t.activeSortable,i=t.parentEl,r=t.putSortable,a=this.options;if(t.insertion){if(n&&o._hideClone(),Gt=!1,a.animation&&Wt.length>1&&(Ut||!n&&!o.options.sort&&!r)){var l=y(Lt,!1,!0,!0);Wt.forEach(function(t){t!==Lt&&(I(t,l),i.appendChild(t))}),Ut=!0}if(!n)if(Ut||Zt(),Wt.length>1){var s=Kt;o._showClone(e),o.options.animation&&!Kt&&s&&zt.forEach(function(t){o.addAnimationState({target:t,rect:jt}),t.fromRect=jt,t.thisAnimationDuration=null})}else o._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,o=t.activeSortable;if(Wt.forEach(function(t){t.thisAnimationDuration=null}),o.options.animation&&!n&&o.multiDrag.isMultiDrag){jt=Object.assign({},e);var i=b(Lt,!0);jt.top-=i.f,jt.left-=i.e}},dragOverAnimationComplete:function(){Ut&&(Ut=!1,Zt())},drop:function(t){var e=t.originalEvent,n=t.rootEl,o=t.parentEl,i=t.sortable,r=t.dispatchSortableEvent,a=t.oldIndex,l=t.putSortable,s=l||this.sortable;if(e){var c=this.options,u=o.children;if(!qt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),v(Lt,c.selectedClass,!~Wt.indexOf(Lt)),~Wt.indexOf(Lt))Wt.splice(Wt.indexOf(Lt),1),Ht=null,B({sortable:i,rootEl:n,name:"deselect",targetEl:Lt,originalEvt:e});else{if(Wt.push(Lt),B({sortable:i,rootEl:n,name:"select",targetEl:Lt,originalEvt:e}),e.shiftKey&&Ht&&i.el.contains(Ht)){var d,h,f=C(Ht),p=C(Lt);if(~f&&~p&&f!==p)for(p>f?(h=f,d=p):(h=p,d=f+1);h<d;h++)~Wt.indexOf(u[h])||(v(u[h],c.selectedClass,!0),Wt.push(u[h]),B({sortable:i,rootEl:n,name:"select",targetEl:u[h],originalEvt:e}))}else Ht=Lt;Ft=s}if(qt&&this.isMultiDrag){if((o[k].options.sort||o!==n)&&Wt.length>1){var g=y(Lt),m=C(Lt,":not(."+this.options.selectedClass+")");if(!Gt&&c.animation&&(Lt.thisAnimationDuration=null),s.captureAnimationState(),!Gt&&(c.animation&&(Lt.fromRect=g,Wt.forEach(function(t){if(t.thisAnimationDuration=null,t!==Lt){var e=Ut?y(t):g;t.fromRect=e,s.addAnimationState({target:t,rect:e})}})),Zt(),Wt.forEach(function(t){u[m]?o.insertBefore(t,u[m]):o.appendChild(t),m++}),a===C(Lt))){var b=!1;Wt.forEach(function(t){t.sortableIndex===C(t)||(b=!0)}),b&&r("update")}Wt.forEach(function(t){P(t)}),s.animateAll()}Ft=s}(n===o||l&&"clone"!==l.lastPutMode)&&zt.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)})}},nullingGlobal:function(){this.isMultiDrag=qt=!1,zt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),u(document,"pointerup",this._deselectMultiDrag),u(document,"mouseup",this._deselectMultiDrag),u(document,"touchend",this._deselectMultiDrag),u(document,"keydown",this._checkKeyDown),u(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==qt&&qt||Ft!==this.sortable||t&&f(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;Wt.length;){var e=Wt[0];v(e,this.options.selectedClass,!1),Wt.shift(),B({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[k];e&&e.options.multiDrag&&!~Wt.indexOf(t)&&(Ft&&Ft!==e&&(Ft.multiDrag._deselectMultiDrag(),Ft=e),v(t,e.options.selectedClass,!0),Wt.push(t))},deselect:function(t){var e=t.parentNode[k],n=Wt.indexOf(t);e&&e.options.multiDrag&&~n&&(v(t,e.options.selectedClass,!1),Wt.splice(n,1))}},eventProperties:function(){var t=this,e=[],n=[];return Wt.forEach(function(o){var i;e.push({multiDragElement:o,index:o.sortableIndex}),i=Ut&&o!==Lt?-1:Ut?C(o,":not(."+t.options.selectedClass+")"):C(o),n.push({multiDragElement:o,index:i})}),{items:[].concat(Wt),clones:[].concat(zt),oldIndicies:e,newIndicies:n}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})});var de=It;exports.default=de;
},{}],"XLkK":[function(require,module,exports) {
module.exports="lc_raster.7fe5b950.gif";
},{}],"LqLr":[function(require,module,exports) {
module.exports="lc_theme.6624c440.gif";
},{}],"oV2G":[function(require,module,exports) {
module.exports={lc_raster:require("./lc_raster.gif"),lc_theme:require("./lc_theme.gif")};
},{"./lc_raster.gif":"XLkK","./lc_theme.gif":"LqLr"}],"Ins9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("ol/control/Control")),t=o(require("ol/layer/Vector")),n=require("ol/render"),a=require("ol/geom"),r=require("ol/style"),i=o(require("sortablejs"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return u(e)||f(e,t)||y(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(c){r=!0,i=c}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}}function u(e){if(Array.isArray(e))return e}function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=M();return function(){var n,a=q(e);if(t){var r=q(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=require("../img/*.gif"),j=function(o){m(s,e.default);var l=w(s);function s(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,s),(t=l.call(this,{element:document.createElement("button")})).element.className=n.className,t.element.innerHTML=n.html,t.element.title=n.tipLabel,t.content=new e.default({element:document.createElement("div")}),t.content.element.className=n.dialogClassName||"legend ol-control";return t.element.addEventListener("click",function(e){void 0===t.getMap().getControls().getArray().find(function(e){return e===t.content})&&t.getMap().addControl(t.content),t.getParent()&&t.getParent().deactivateControls(L(t)),e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation(),t.setActive(!t.getActive()),n.handleClick&&n.handleClick.call(L(t),e))}),t}return h(s,[{key:"activeLayerInfo",value:function(){var t=new e.default({element:document.createElement("div")});this.getMap().addControl(t),t.element.className="active-info ol-unselectable";var n=this.getMap().getLayers().getArray().find(function(e){return e.get("active")});n?t.element.innerHTML="aktivni sloj: "+n.get("label")||n.get("name"):t.element.style.display="none",this.getMap().getLayers().on("propertychange",function(e){var n=e.target.get("active");n?(t.element.style.display="inline-block",t.element.innerHTML="aktivni sloj: "+n.get("label")||n.get("name")):t.element.style.display="none"})}},{key:"legend_",value:function(){var e=this,n=document.createElement("div");n.className="legend-items",this.content.element.appendChild(n);var a,r=this.getMap().getLayers().getArray().sort(function(e,t){return e.getZIndex()>t.getZIndex()?1:-1}).reverse(),o=d(r.entries());try{var l=function(){var i=c(a.value,2),o=i[0],l=i[1],s=document.createElement("div");n.appendChild(s),s.id=l.get("name")||"sloj "+o,l.set("name",s.id),s.innerHTML='\n                <div class="header">\n                    <span class="icon" title="Rasterska podloga"><img src="'.concat(k.lc_raster,'"></span>\n                    <span class="label">').concat(l.get("label")||s.id,'</span>\n                    <div class="thematic"></div>\n                    <div class="sub">\n                        <span class="detail" title="Detalji"><i class="far fa-plus fa-fw"></i></span>\n                        <span class="visible" title="Vidljivost sloja"><i class="far fa-eye fa-fw"></i></span>\n                        <span class="active" title="Aktivnost sloja"><i class="far fa-square fa-fw"></i></span>\n                        <span class="sort" title="Z index"><i class="far fa-bring-forward fa-fw"></i></span>\n                        <div class="content" style="display:none">\n                            <span><i class="far fa-fog" title="Prozirnost"></i></span>\n                            <span><input type="range" min=0 max=1 step=0.01 class="opacity"></span>\n                            <div class="info"></div>\n                        </div>\n                    </div> \n                </div>\n                '),s.querySelector(".icon").addEventListener("click",function(e){var t=s.querySelector(".thematic");t.style.display="none"===t.style.display?"block":"none"});var f=l.getMinResolution()||0,u=l.getMaxResolution()||1/0;e.getMap().getView().on("change:resolution",function(){var t=e.getMap().getView().getResolution();s.style.display=t>=f&&t<=u?"block":"none"}),map.getView().dispatchEvent("change:resolution"),s.querySelector(".opacity").value=l.getOpacity(),s.querySelector(".opacity").addEventListener("change",function(e){l.setOpacity(Number(s.querySelector(".opacity").value))}),s.querySelector(".info").innerHTML=l.get("info")||"",s.querySelector(".header .detail").addEventListener("click",function(e){var t=s.querySelector(".content");t.style.display="none"===t.style.display?"block":"none",e.currentTarget.innerHTML="none"===t.style.display?'<i class="far fa-plus fa-fw"></i>':'<i class="far fa-minus fa-fw"></i>'}),s.querySelector(".header .visible").innerHTML=l.getVisible()?'<i class="far fa-eye fa-fw"></i>':'<i class="far fa-eye-slash fa-fw"></i>',s.querySelector(".header .visible").addEventListener("click",function(e){l.setVisible(!l.getVisible()),e.currentTarget.innerHTML=l.getVisible()?'<i class="far fa-eye fa-fw"></i>':'<i class="far fa-eye-slash fa-fw"></i>'});var y=s.querySelector(".header .active");l instanceof t.default==!1&&(y.style.visibility="hidden"),y.innerHTML=l.get("active")?'<i class="far fa-check-square fa-fw"></i>':'<i class="far fa-square fa-fw"></i>',y.addEventListener("click",function(t){var a,i=l.get("active"),o=d(r);try{for(o.s();!(a=o.n()).done;){a.value.set("active",!1)}}catch(f){o.e(f)}finally{o.f()}var c,s=d(n.querySelectorAll(".header .active"));try{for(s.s();!(c=s.n()).done;){c.value.innerHTML='<i class="far fa-square fa-fw"></i>'}}catch(f){s.e(f)}finally{s.f()}l.set("active",!i),y.innerHTML=l.get("active")?'<i class="far fa-check-square fa-fw"></i>':'<i class="far fa-square fa-fw"></i>',e.getMap().getLayers().set("active",l.get("active")?l:null)}),e.getMap().getView().on("change:resolution",function(){"none"!==s.style.display&&e.getIcons(l,s.querySelector(".icon"),s.querySelector(".thematic"))}),l.on("change:opacity",function(e){s.querySelector(".icon").style.opacity=e.target.getOpacity()}),l.get("def")&&l.on("propertychange",function(e){l.get("def").zIndex=e.target.getZIndex(),l.get("def").visible=void 0===e.target.getVisible()||e.target.getVisible(),l.get("def").opacity=void 0===e.target.getOpacity()?1:e.target.getOpacity(),l.get("def").active=void 0!==e.target.get("active")&&e.target.get("active")})};for(o.s();!(a=o.n()).done;)l()}catch(s){o.e(s)}finally{o.f()}i.default.create(n,{handle:".sort",onEnd:function(e){for(var t=function(e){r.find(function(t){return t.get("name")===n.children[e].id}).setZIndex(n.children.length-e)},a=0;a<n.children.length;a++)t(a)}})}},{key:"getIcons",value:function(e,i,o){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[16,16];if(e instanceof t.default!=!1){i.title="",o.innerHTML="";var s,f=this.styleObj(e).length>1,u=d(this.styleObj(e).entries());try{var y=function(){var t=c(s.value,2),u=t[0],d=t[1],y=document.createElement("canvas"),g=y.getContext("2d"),v=(0,n.toContext)(g,{size:l}),p=null===d.getImage()&&null===d.getText()&&null===d.getFill()&&null===d.getStroke();if(f){i.innerHTML='<img src="'.concat(k.lc_theme,'">'),i.title="Otvori detaljnu legendu";var h=document.createElement("div"),m=document.createElement("span");if(h.appendChild(y),h.appendChild(m),!p&&(o.appendChild(h),e.get("def")&&e.get("def").style&&e.get("def").style.filter)){var b=e.get("def").style[u].filter;b&&(m.innerHTML=b.property+" "+b.operator+" "+b.value)}}else i.innerHTML="",i.appendChild(y);v.setStyle(d),null!==d.getFill()?v.drawGeometry(new a.Polygon([[[2,2],[l[0]-1,2],[l[0]-1,l[1]-1],[2,l[1]-1],[2,2]]])):v.drawGeometry(new a.LineString([[2,2],[l[0]-2,l[1]-2]]));var w=d.getImage();if(w)if(w instanceof r.Icon){var S=new Image;S.onload=function(){var e=new r.Style({image:new r.Icon({img:S,imgSize:[S.width,S.height],scale:Math.min(l[0]/S.width,l[1]/S.height)})});v.setStyle(e),v.drawGeometry(new a.Point([l[0]/2,l[1]/2]))},S.src=w.getSrc()}else{var L=d.clone();L.getImage().setScale(Math.min(l[0]/(2*L.getImage().getRadius()),l[1]/(2*L.getImage().getRadius()))),v.setStyle(L),v.drawGeometry(new a.Point([l[0]/2,l[1]/2]))}};for(u.s();!(s=u.n()).done;)y()}catch(g){u.e(g)}finally{u.f()}}}},{key:"styleObj",value:function(e){if(e instanceof t.default){var n="function"==typeof e.getStyle()?e.getStyle().call(this,void 0,this.getMap().getView().getResolution()):e.getStyle();return Array.isArray(n)?n:[n]}return null}},{key:"setActive",value:function(e){""===this.content.element.innerHTML&&this.legend_(),this.getActive()!=e&&(e?(this.content.element.classList.add("active"),this.element.classList.add("active"),this.getParent()&&this.getParent().deactivateControls(this)):(this.content.element.classList.remove("active"),this.element.classList.remove("active")),this.dispatchEvent({type:"change:active",key:"active",oldValue:!e,active:e}))}},{key:"getActive",value:function(){return this.element.classList.contains("active")}},{key:"getParent",value:function(){if(this.get("parent"))return this.get("parent")}}]),s}();exports.default=j;
},{"ol/control/Control":"xxE2","ol/layer/Vector":"dflx","ol/render":"RvU2","ol/geom":"V3SP","ol/style":"qeKX","sortablejs":"XDpu","../img/*.gif":"oV2G"}],"iFyQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(p){n=!0,o=p}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)},String.prototype.padStart=String.prototype.padStart||function(e,t){for(var r=this;r.length<e;)r=t+r;return r};var i={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(t>0?e.toFixed(t).replace(/0+$/,"").replace(/\.$/,""):e.toString())||"0"}var o=function(){function o(t,i,n,a){e(this,o);var s=this;if(void 0===t);else if(Array.isArray(t))this.rgba=t;else if(void 0===n){var p=t&&""+t;p&&function(e){if(e.startsWith("hsl")){var t=e.match(/([\-\d\.e]+)/g).map(Number),i=r(t,4),n=i[0],a=i[1],p=i[2],l=i[3];void 0===l&&(l=1),n/=360,a/=100,p/=100,s.hsla=[n,a,p,l]}else if(e.startsWith("rgb")){var c=e.match(/([\-\d\.e]+)/g).map(Number),u=r(c,4),d=u[0],h=u[1],f=u[2],g=u[3];void 0===g&&(g=1),s.rgba=[d,h,f,g]}else e.startsWith("#")?s.rgba=o.hexToRgb(e):s.rgba=o.nameToRgb(e)||o.hexToRgb(e)}(p.toLowerCase())}else this.rgba=[t,i,n,void 0===a?1:a]}return t(o,[{key:"printRGB",value:function(e){var t=(e?this.rgba:this.rgba.slice(0,3)).map(function(e,t){return n(e,3===t?3:0)});return e?"rgba("+t+")":"rgb("+t+")"}},{key:"printHSL",value:function(e){var t=[360,100,100,1],r=["","%","%",""],i=(e?this.hsla:this.hsla.slice(0,3)).map(function(e,i){return n(e*t[i],3===i?3:1)+r[i]});return e?"hsla("+i+")":"hsl("+i+")"}},{key:"printHex",value:function(e){var t=this.hex;return e?t:t.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=o.hslToRgb(this._hsla)},set:function(e){3===e.length&&(e[3]=1),this._rgba=e,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=o.rgbToHsl(this._rgba)},set:function(e){3===e.length&&(e[3]=1),this._hsla=e,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map(function(e,t){return t<3?e.toString(16):Math.round(255*e).toString(16)}).map(function(e){return e.padStart(2,"0")}).join("")},set:function(e){this.rgba=o.hexToRgb(e)}}],[{key:"hexToRgb",value:function(e){var t=(e.startsWith("#")?e.slice(1):e).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!t.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+e);var r=t.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(e){return parseInt(e,16)});return r[3]=r[3]/255,r}},{key:"nameToRgb",value:function(e){var t=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),r=i[t];return void 0===r?r:o.hexToRgb(r.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(e){var t=r(e,4),i=t[0],n=t[1],o=t[2],a=t[3];i/=255,n/=255,o/=255;var s=Math.max(i,n,o),p=Math.min(i,n,o),l=void 0,c=void 0,u=(s+p)/2;if(s===p)l=c=0;else{var d=s-p;switch(c=u>.5?d/(2-s-p):d/(s+p),s){case i:l=(n-o)/d+(n<o?6:0);break;case n:l=(o-i)/d+2;break;case o:l=(i-n)/d+4}l/=6}return[l,c,u,a]}},{key:"hslToRgb",value:function(e){var t=r(e,4),i=t[0],n=t[1],o=t[2],a=t[3],s=void 0,p=void 0,l=void 0;if(0===n)s=p=l=o;else{var c=function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e},u=o<.5?o*(1+n):o+n-o*n,d=2*o-u;s=c(d,u,i+1/3),p=c(d,u,i),l=c(d,u,i-1/3)}var h=[255*s,255*p,255*l].map(Math.round);return h[3]=a,h}}]),o}(),a=function(){function r(){e(this,r),this._events=[]}return t(r,[{key:"add",value:function(e,t,r){e.addEventListener(t,r,!1),this._events.push({target:e,type:t,handler:r})}},{key:"remove",value:function(e,t,i){this._events=this._events.filter(function(n){var o=!0;return e&&e!==n.target&&(o=!1),t&&t!==n.type&&(o=!1),i&&i!==n.handler&&(o=!1),o&&r._doRemove(n.target,n.type,n.handler),!o})}},{key:"destroy",value:function(){this._events.forEach(function(e){return r._doRemove(e.target,e.type,e.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(e,t,r){e.removeEventListener(t,r,!1)}}]),r}();function s(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function p(e,t,r){var i=!1;function n(e,t,r){return Math.max(t,Math.min(e,r))}function o(e,o,a){if(a&&(i=!0),i){e.preventDefault();var s=t.getBoundingClientRect(),p=s.width,l=s.height,c=o.clientX,u=o.clientY,d=n(c-s.left,0,p),h=n(u-s.top,0,l);r(d/p,h/l)}}function a(e,t){1===(void 0===e.buttons?e.which:e.buttons)?o(e,e,t):i=!1}function s(e,t){1===e.touches.length?o(e,e.touches[0],t):i=!1}e.add(t,"mousedown",function(e){a(e,!0)}),e.add(t,"touchstart",function(e){s(e,!0)}),e.add(window,"mousemove",a),e.add(t,"touchmove",s),e.add(window,"mouseup",function(e){i=!1}),e.add(t,"touchend",function(e){i=!1}),e.add(t,"touchcancel",function(e){i=!1})}var l="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",c=360,u="keydown",d="mousedown",h="focusin";function f(e,t){return(t||document).querySelector(e)}function g(e){e.preventDefault(),e.stopPropagation()}function b(e,t,r,i,n){e.add(t,u,function(e){r.indexOf(e.key)>=0&&(n&&g(e),i(e))})}var m=document.createElement("style");m.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(m);var _=function(){function r(t){e(this,r),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new a,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(t)}return t(r,[{key:"setOptions",value:function(e){var t=this;if(e){var r=this.settings;if(e instanceof HTMLElement)r.parent=e;else{r.parent&&e.parent&&r.parent!==e.parent&&(this._events.remove(r.parent),this._popupInited=!1),function(e,t,r){for(var i in e)r&&r.indexOf(i)>=0||(t[i]=e[i])}(e,r),e.onChange&&(this.onChange=e.onChange),e.onDone&&(this.onDone=e.onDone),e.onOpen&&(this.onOpen=e.onOpen),e.onClose&&(this.onClose=e.onClose);var i=e.color||e.colour;i&&this._setColor(i)}var n=r.parent;if(n&&r.popup&&!this._popupInited){var o=function(e){return t.openHandler(e)};this._events.add(n,"click",o),b(this._events,n,[" ","Spacebar","Enter"],o),this._popupInited=!0}else e.parent&&!r.popup&&this.show()}}},{key:"openHandler",value:function(e){if(this.show()){e&&e.preventDefault(),this.settings.parent.style.pointerEvents="none";var t=e&&e.type===u?this._domEdit:this.domElement;setTimeout(function(){return t.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(e){var t=e&&e.type,r=!1;if(e)if(t===d||t===h){var i=(this.__containedEvent||0)+100;e.timeStamp>i&&(r=!0)}else g(e),r=!0;else r=!0;r&&this.hide()&&(this.settings.parent.style.pointerEvents="",t!==d&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(e,t){this.closeHandler(),this.setOptions(e),t&&this.openHandler()}},{key:"setColor",value:function(e,t){this._setColor(e,{silent:t})}},{key:"_setColor",value:function(e,t){if("string"==typeof e&&(e=e.trim()),e){t=t||{};var r=void 0;try{r=new o(e)}catch(n){if(t.failSilently)return;throw n}if(!this.settings.alpha){var i=r.hsla;i[3]=1,r.hsla=i}this.colour=this.color=r,this._setHSLA(null,null,null,null,t)}}},{key:"setColour",value:function(e,t){this.setColor(e,t)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var e=this._toggleDOM(!0);return this._setPosition(),e}var t=s(this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>');return this.domElement=t,this._domH=f(".picker_hue",t),this._domSL=f(".picker_sl",t),this._domA=f(".picker_alpha",t),this._domEdit=f(".picker_editor input",t),this._domSample=f(".picker_sample",t),this._domOkay=f(".picker_done button",t),this._domCancel=f(".picker_cancel button",t),t.classList.add("layout_"+this.settings.layout),this.settings.alpha||t.classList.add("no_alpha"),this.settings.editor||t.classList.add("no_editor"),this.settings.cancelButton||t.classList.add("no_cancel"),this._ifPopup(function(){return t.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var e=this,t=this,r=this.domElement,i=this._events;function n(e,t,r){i.add(e,t,r)}n(r,"click",function(e){return e.preventDefault()}),p(i,this._domH,function(e,r){return t._setHSLA(e)}),p(i,this._domSL,function(e,r){return t._setHSLA(null,e,1-r)}),this.settings.alpha&&p(i,this._domA,function(e,r){return t._setHSLA(null,null,null,1-r)});var o=this._domEdit;n(o,"input",function(e){t._setColor(this.value,{fromEditor:!0,failSilently:!0})}),n(o,"focus",function(e){this.selectionStart===this.selectionEnd&&this.select()}),this._ifPopup(function(){var t=function(t){return e.closeHandler(t)};n(window,d,t),n(window,h,t),b(i,r,["Esc","Escape"],t);var o=function(t){e.__containedEvent=t.timeStamp};n(r,d,o),n(r,h,o),n(e._domCancel,"click",t)});var a=function(t){e._ifPopup(function(){return e.closeHandler(t)}),e.onDone&&e.onDone(e.colour)};n(this._domOkay,"click",a),b(i,r,["Enter"],a)}},{key:"_setPosition",value:function(){var e=this.settings.parent,t=this.domElement;e!==t.parentNode&&e.appendChild(t),this._ifPopup(function(r){"static"===getComputedStyle(e).position&&(e.style.position="relative");var i=!0===r?"popup_right":"popup_"+r;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(e){e===i?t.classList.add(e):t.classList.remove(e)}),t.classList.add(i)})}},{key:"_setHSLA",value:function(e,t,r,i,n){n=n||{};var o=this.colour,a=o.hsla;[e,t,r,i].forEach(function(e,t){(e||0===e)&&(a[t]=e)}),o.hsla=a,this._updateUI(n),this.onChange&&!n.silent&&this.onChange(o)}},{key:"_updateUI",value:function(e){if(this.domElement){e=e||{};var t=this.colour,r=t.hsla,i="hsl("+r[0]*c+", 100%, 50%)",n=t.hslString,o=t.hslaString,a=this._domH,s=this._domSL,p=this._domA,u=f(".picker_selector",a),d=f(".picker_selector",s),h=f(".picker_selector",p);w(0,u,r[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,w(0,d,r[1]),y(0,d,1-r[2]),s.style.color=n,y(0,h,1-r[3]);var g=n,b=g.replace("hsl","hsla").replace(")",", 0)"),m="linear-gradient("+[g,b]+")";if(this._domA.style.backgroundImage=m+", "+l,!e.fromEditor){var _=this.settings.editorFormat,k=this.settings.alpha,v=void 0;switch(_){case"rgb":v=t.printRGB(k);break;case"hsl":v=t.printHSL(k);break;default:v=t.printHex(k)}this._domEdit.value=v}this._domSample.style.color=o}function w(e,t,r){t.style.left=100*r+"%"}function y(e,t,r){t.style.top=100*r+"%"}}},{key:"_ifPopup",value:function(e,t){this.settings.parent&&this.settings.popup?e&&e(this.settings.popup):t&&t()}},{key:"_toggleDOM",value:function(e){var t=this.domElement;if(!t)return!1;var r=e?"":"none",i=t.style.display!==r;return i&&(t.style.display=r),i}}],[{key:"StyleElement",get:function(){return m}}]),r}(),k=_;exports.default=k;
},{}],"uYXC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("ol/control/Control")),t=s(require("ol/layer/Vector")),l=require("ol/render"),r=require("ol/geom"),a=require("ol/style"),o=s(require("sortablejs")),n=s(require("vanilla-picker")),i=require("./makeStyle");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return d(e)||p(e,t)||y(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var l=[],r=!0,a=!1,o=void 0;try{for(var n,i=e[Symbol.iterator]();!(r=(n=i.next()).done)&&(l.push(n.value),!t||l.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return l}}function d(e){if(Array.isArray(e))return e}function v(e,t){var l;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(l=y(e))||t&&e&&"number"==typeof e.length){l&&(e=l);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,i=!1;return{s:function(){l=e[Symbol.iterator]()},n:function(){var e=l.next();return n=e.done,e},e:function(e){i=!0,o=e},f:function(){try{n||null==l.return||l.return()}finally{if(i)throw o}}}}function y(e,t){if(e){if("string"==typeof e)return h(e,t);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var l=0,r=new Array(t);l<t;l++)r[l]=e[l];return r}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,l){return t&&m(e.prototype,t),l&&m(e,l),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=j();return function(){var l,r=A(e);if(t){var a=A(this).constructor;l=Reflect.construct(r,arguments,a)}else l=r.apply(this,arguments);return w(this,l)}}function w(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=require("../img/*.png"),O=function(t){b(r,e.default);var l=k(r);function r(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(this,r),(t=l.call(this,{element:document.createElement("button")})).element.className=a.className,t.element.innerHTML=a.html,t.element.title=a.tipLabel,t.content=new e.default({element:document.createElement("div")}),t.content.element.className=a.dialogClassName||"theme ol-control";return t.element.addEventListener("click",function(e){void 0===t.getMap().getControls().getArray().find(function(e){return e===t.content})&&(t.getMap().addControl(t.content),t.content.element.appendChild(t.header)),t.getParent()&&t.getParent().deactivateControls(x(t)),e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation(),t.setActive(!t.getActive()),a.handleClick&&a.handleClick.call(x(t),e))}),t.header=document.createElement("div"),t.header.className="header",t.cp=new n.default({popup:"bottom"}),t.htmlItem='\n        <ul class="item">\n            <li class="caret">Stil <i class="far fa-trash-alt fa-fw style"></i></li>\n             <ul class="nested">\n                <ul class="resolution">\n                    <li class="caret"><i class="far fa-square fa-fw"></i> Rezolucija</li>\n                    <ul class="nested">\n                        <li><label>Min, Max</label><input class="resolution" value ="0,1000"></li>\n                    </ul>\n                </ul>\n                <ul class="icon">\n                    <li class="caret"><i class="far fa-square fa-fw"></i> Ikona</li>\n                    <ul class="nested">\n                        <li><label>Ime ikone</label><select class="src"><option selected disabled>odaberi ikonu</option></select></li>\n                        <li><label>Skala</label><input class="scale" value ="1"></li>\n                        <li><label>Točka umetanja, x,y</label><input class="anchor" value ="0,0"></li>\n                    </ul>\n                </ul>\n                <ul class="regularShape">\n                    <li class="caret"><i class="far fa-square fa-fw"></i> Simetrični simbol</li>\n                    <ul class="nested">\n                        <li><label>Broj točaka</label><input class="points" value="6"></li>\n                        <li><label>Polumjer</label><input class="radius" value="4"></li>\n                        <li><label>Boja popune</label><div class="fill color"></div></li>\n                        <li><label>Boja ruba</label><div class="stroke color"></div></li>\n                        <li><label>Debljina ruba</label><input class="stroke width" value="1"></li>\n                    </ul>\n                </ul>\n                <ul class="stroke">\n                    <li class="caret"><i class="far fa-square fa-fw"></i> Rub poligona ili linija</li>\n                    <ul class="nested">\n                        <li><label>Boja</label><div class="color"></div></li>\n                        <li><label>Debljina</label><input class="width" value="1"></li>\n                    </ul>\n                </ul>\n                <ul class="fill">\n                    <li class="caret"><i class="far fa-square fa-fw"></i> Popuna poligona</li>\n                    <ul class="nested">\n                        <li><label>Boja</label><div class="color"></div></li>\n                    </ul>\n                </ul>\n                 <ul class="text">\n                    <li class="caret"><i class="far fa-square fa-fw"></i> Opis objekata</li>\n                    <ul class="nested">\n                        <li>Tekst || svojstvo iz liste<input class="text" value=""></li>\n                        <li>Lista svojstava<select class="properties"><option disabled selected >odaberi svojstvo</option></select></li>\n                        <li>Smještaj<select class="placement">\n                            <option disabled selected >odaberi smještaj</option>\n                            <option value="point">točka</option>\n                            <option value= "line">uzduž linije</option>\n                        </select></li>\n                        <li>CSS Font, poput: bold 18px serif<input class="font" value=""></li>\n                        <li>Skala<input class="scale" value="1"></li>\n                        <li>Bazna linija<select class="textBaseline">\n                            <option disabled selected value= "alphabetic">odaberi baznu liniju</option>\n                            <option value="bottom">dno</option>\n                            <option value= "top">vrh</option>\n                            <option value="middle">sredina</option>\n                            <option value= "alphabetic">uobičajeno</option>\n                        </select></li>\n                    </ul>\n                </ul>\n                 <ul class="filter">\n                    <li class="caret"><i class="far fa-square fa-fw"></i> Filter za stil</li>\n                    <ul class="nested">\n                    <li>Svojstvo<select class="properties"><option disabled selected>odaberi svojstvo</option></select></li>\n                    <li>Operator\n                        <select class="operators">\n                                <option disabled selected value="=">odaberi operator</option>\n                                <option value="=">jednako</option>\n                                <option value="!=">različito od</option>\n                        </select>\n                    </li>\n                    <li>Vrijednost || odaberi iz liste<input class="value" value=""></li>\n                    <li>Lista pretpostavljenih vrijednosti<select class="constrains"><option disabled selected>Odaberi vrijednost</option></select></li>\n                    </ul>\n                </ul>\n             </ul>\n        </ul>\n        ',t.setLayer(a.layer),t}return g(r,[{key:"styleSet_",value:function(){var e,t=this,l=v(this.content.element.querySelectorAll(".wrapper"));try{for(l.s();!(e=l.n()).done;){e.value.remove()}}catch(i){l.e(i)}finally{l.f()}var r=this.layer.get("def").style;r.forEach(function(e){return t.styleAdd_()});var a,o=v(this.content.element.querySelectorAll(".item").entries());try{var n=function(){var e,t=u(a.value,2),l=t[0],o=t[1],n=v(o.querySelectorAll(".fa-square, .fa-check-square"));try{for(n.s();!(e=n.n()).done;){var s=e.value;s.classList.remove("fa-square","fa-check-square"),void 0!==r[l][s.closest("ul").className]?s.classList.add("fa-check-square"):s.classList.add("fa-square")}}catch(i){n.e(i)}finally{n.f()}(r[l].resolution&&(o.querySelector(".resolution .resolution").value=r[l].resolution.join()),r[l].icon&&r[l].icon.src&&(o.querySelector(".icon .src").value=r[l].icon.src),r[l].icon&&r[l].icon.scale&&(o.querySelector(".icon .scale").value=r[l].icon.scale),r[l].icon&&r[l].icon.anchor&&(o.querySelector(".icon .anchor").value=r[l].icon.anchor.join()),r[l].regularShape&&r[l].regularShape.points&&(o.querySelector(".regularShape .points").value=r[l].regularShape.points),r[l].regularShape&&r[l].regularShape.radius&&(o.querySelector(".regularShape .radius").value=r[l].regularShape.radius),r[l].regularShape&&r[l].regularShape.fill&&r[l].regularShape.fill.color&&(o.querySelector(".regularShape .fill.color").style.backgroundColor=r[l].regularShape.fill.color),r[l].regularShape&&r[l].regularShape.stroke&&r[l].regularShape.stroke.color&&(o.querySelector(".regularShape .stroke.color").style.backgroundColor=r[l].regularShape.stroke.color),r[l].regularShape&&r[l].regularShape.stroke&&r[l].regularShape.stroke.width&&(o.querySelector(".regularShape .stroke.width").value=r[l].regularShape.stroke.width),r[l].stroke&&r[l].stroke.color&&(o.querySelector(".stroke .color").style.backgroundColor=r[l].stroke.color),r[l].stroke&&r[l].stroke.width&&(o.querySelector(".stroke .width").value=r[l].stroke.width),r[l].fill&&r[l].fill.color&&(o.querySelector(".fill .color").style.backgroundColor=r[l].fill.color),r[l].text&&r[l].text.text)&&(Array.from(o.querySelector(".text .properties").options).find(function(e){return e.value===r[l].text.text})?(o.querySelector(".text .properties").value=r[l].text.text,o.querySelector(".text .text").value=""):o.querySelector(".text .text").value=r[l].text.text);r[l].text&&r[l].text.placement&&(o.querySelector(".text .placement").value=r[l].text.placement),r[l].text&&r[l].text.textBaseline&&(o.querySelector(".text .textBaseline").value=r[l].text.textBaseline),r[l].text&&r[l].text.scale&&(o.querySelector(".text .scale").value=r[l].text.scale),r[l].text&&r[l].text.font&&(o.querySelector(".text .font").value=r[l].text.font),r[l].filter&&r[l].filter.property&&(o.querySelector(".filter .properties").value=r[l].filter.property,o.querySelector(".filter .properties").dispatchEvent(new Event("change"))),r[l].filter&&r[l].filter.operator&&(o.querySelector(".filter .operators").value=r[l].filter.operator),r[l].filter&&r[l].filter.value&&(o.querySelector('.filter .constrains select[value="'.concat(r[l].filter.value,'"]'))?o.querySelector(".filter .constrains").value=r[l].filter.value:o.querySelector(".filter .value").value=r[l].filter.value)};for(o.s();!(a=o.n()).done;)n()}catch(i){o.e(i)}finally{o.f()}}},{key:"styleAdd_",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="wrapper",this.content.element.appendChild(this.wrapper),this.wrapper.innerHTML=this.htmlItem;var e,t=v(this.wrapper.querySelectorAll(".caret"));try{var l=function(){var t=e.value;t.addEventListener("click",function(e){e.stopPropagation(),e.target===t&&(t.parentElement.querySelector(".nested").style.display="block"===t.parentElement.querySelector(".nested").style.display?"none":"block",t.classList.toggle("caret-down"))})};for(t.s();!(e=t.n()).done;)l()}catch(o){t.e(o)}finally{t.f()}var r,a=v(this.wrapper.querySelectorAll(".fa-square, .fa-check-square"));try{for(a.s();!(r=a.n()).done;){r.value.addEventListener("click",function(e){e.stopPropagation();var t=e.currentTarget.classList;t.contains("fa-square")?(t.remove("fa-square"),t.add("fa-check-square")):(t.add("fa-square"),t.remove("fa-check-square"))})}}catch(o){a.e(o)}finally{a.f()}this.wrapper.querySelector(".style").addEventListener("click",function(e){e.stopPropagation(),e.currentTarget.closest(".wrapper").remove()}),this.fillIcons_(this.wrapper),this.fillProperties_(this.wrapper),this.fillConstrains_(this.wrapper),this.fillOperators_(this.wrapper),this.colorPicker_(this.wrapper)}},{key:"styleApply_",value:function(){var e,t=[],l=(this.layer.get("def"),v(this.content.element.querySelectorAll(".item")));try{for(l.s();!(e=l.n()).done;){var r,a=e.value,o={},n=v(a.querySelectorAll(".fa-check-square"));try{for(n.s();!(r=n.n()).done;){var s=r.value;"resolution"===s.closest("ul").className&&(o.resolution=s.closest("ul").querySelector(".resolution").value.split(",")),"icon"===s.closest("ul").className&&(o.icon={},o.icon.src=s.closest("ul").querySelector(".src").value,o.icon.scale=s.closest("ul").querySelector(".scale").value,o.icon.anchor=s.closest("ul").querySelector(".anchor").value.split(",")),"regularShape"===s.closest("ul").className&&(o.regularShape={},o.regularShape.points=s.closest("ul").querySelector(".points").value,o.regularShape.radius=s.closest("ul").querySelector(".radius").value,o.regularShape.fill={},o.regularShape.fill.color=s.closest("ul").querySelector(".fill.color").style.backgroundColor,o.regularShape.stroke={},o.regularShape.stroke.color=s.closest("ul").querySelector(".stroke.color").style.backgroundColor,o.regularShape.stroke.width=s.closest("ul").querySelector(".stroke.width").value),"stroke"===s.closest("ul").className&&(o.stroke={},o.stroke.color=s.closest("ul").querySelector(".color").style.backgroundColor,o.stroke.width=s.closest("ul").querySelector(".width").value),"fill"===s.closest("ul").className&&(o.fill={},o.fill.color=s.closest("ul").querySelector(".color").style.backgroundColor),"text"===s.closest("ul").className&&(o.text={},s.closest("ul").querySelector(".text").value?o.text.text="*"+s.closest("ul").querySelector(".text").value:o.text.text=s.closest("ul").querySelector(".properties").value,o.text.placement=s.closest("ul").querySelector(".placement").value,o.text.textBaseline=s.closest("ul").querySelector(".textBaseline").value,o.text.scale=s.closest("ul").querySelector(".scale").value,o.text.font=s.closest("ul").querySelector(".font").value),"filter"===s.closest("ul").className&&(o.filter={},o.filter.property=s.closest("ul").querySelector(".properties").value,o.filter.operator=s.closest("ul").querySelector(".operators").value,s.closest("ul").querySelector(".value").value?o.filter.value=s.closest("ul").querySelector(".value").value:o.filter.value=s.closest("ul").querySelector(".constrains").value)}}catch(c){n.e(c)}finally{n.f()}t.push(o)}}catch(c){l.e(c)}finally{l.f()}this.layer.get("def").style=t,this.layer.setStyle((0,i.makeStyle)(t))}},{key:"fillOperators_",value:function(e){var t,l=this,r=v(e.querySelectorAll(".operators"));try{var a=function(){var e=t.value;if(!l.layer.getSource().get("def"))return{v:void 0};e.closest("ul").querySelector(".properties").addEventListener("change",function(t){e.length=3;var r=l.layer.getSource().get("def").schema.properties.find(function(e){return e.Name===t.target.value});[6,7,8].includes(r.DataType)&&(e.add(new Option("veće od",">")),e.add(new Option("manje od","<")),e.add(new Option("veće ili jednako",">=")),e.add(new Option("manje ili jednako","<="))),9===r.DataType&&e.add(new Option("sadrži","LIKE"))})};for(r.s();!(t=r.n()).done;){var o=a();if("object"===c(o))return o.v}}catch(n){r.e(n)}finally{r.f()}}},{key:"fillProperties_",value:function(e){if(this.layer||this.layer.getSource().get("def")){var t,l=v(e.querySelectorAll(".properties"));try{for(l.s();!(t=l.n()).done;){var r=t.value;r.length=1;var a,o=v(this.layer.getSource().get("def").schema.properties);try{for(o.s();!(a=o.n()).done;){var n=a.value;r.add(new Option(n.Label,n.Name))}}catch(i){o.e(i)}finally{o.f()}}}catch(i){l.e(i)}finally{l.f()}}}},{key:"fillConstrains_",value:function(e){var t=this;if(this.layer.getSource().get("def")){var l,r=v(e.querySelectorAll(".constrains"));try{var a=function(){var e=l.value;e.closest("ul").querySelector(".properties").addEventListener("change",function(l){e.length=1;var r=t.layer.getSource().get("def").schema.properties.find(function(e){return e.Name===l.target.value});r.Constrains&&r.Constrains.map(function(t){return e.add(new Option(t,t))})})};for(r.s();!(l=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}}},{key:"fillIcons_",value:function(e){if(L){var t,l=v(e.querySelectorAll(".icon .src"));try{for(l.s();!(t=l.n()).done;){for(var r=t.value,a=0,o=Object.entries(L);a<o.length;a++){var n=u(o[a],2),i=n[0];n[1];r.add(new Option(i,i))}r.selectedIndex=1}}catch(s){l.e(s)}finally{l.f()}}}},{key:"colorPicker_",value:function(e){var t,l=this,r=v(e.querySelectorAll(".color"));try{for(r.s();!(t=r.n()).done;){t.value.addEventListener("click",function(e){l.cp.movePopup({parent:e.currentTarget,color:e.currentTarget.style.backgroundColor},!0)})}}catch(a){r.e(a)}finally{r.f()}this.cp.onChange=function(e){this.settings.parent.style.backgroundColor=e.rgbaString}}},{key:"setLayer",value:function(e){var t=this;if(e)this.layer=e,this.header.className="top",this.header.innerHTML="\n            Tematizacija sloja ".concat(e.get("label")||e.get("name")||"",'\n            <div>\n                <span class="add ol-control" title="Dodaj stil"><i class="far fa-plus fa-fw"></i> Stil</span>\n                <span class="apply ol-control" title="Primjeni"><i class="far fa-check fa-fw"></i> Primijeni</span>\n            </div>\n            '),this.header.querySelector(".add").addEventListener("click",function(e){return t.styleAdd_()}),this.header.querySelector(".apply").addEventListener("click",function(e){return t.styleApply_()}),this.styleSet_();else{var l,r=v(this.content.element.querySelectorAll(".wrapper"));try{for(r.s();!(l=r.n()).done;){l.value.remove()}}catch(a){r.e(a)}finally{r.f()}this.header.className="middle",this.header.innerHTML="Odaberi aktivni sloj u legendi"}}},{key:"getLayer",value:function(){return this.layer}},{key:"setActive",value:function(e){this.getActive()!=e&&(e?(this.content.element.classList.add("active"),this.element.classList.add("active"),this.getParent()&&this.getParent().deactivateControls(this)):(this.content.element.classList.remove("active"),this.element.classList.remove("active")),this.dispatchEvent({type:"change:active",key:"active",oldValue:!e,active:e}))}},{key:"getActive",value:function(){return this.element.classList.contains("active")}},{key:"getParent",value:function(){if(this.get("parent"))return this.get("parent")}}]),r}();exports.default=O;
},{"ol/control/Control":"xxE2","ol/layer/Vector":"dflx","ol/render":"RvU2","ol/geom":"V3SP","ol/style":"qeKX","sortablejs":"XDpu","vanilla-picker":"iFyQ","./makeStyle":"PjFK","../img/*.png":"rzf8"}],"FEmi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("ol/control/Control"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return l(e)||o(e,t)||c(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}function l(e){if(Array.isArray(e))return e}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=g();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(t){v(a,e.default);var n=m(a);function a(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,a),(t=n.call(this,{element:document.createElement("button")})).select=r.select,t.readOnly=r.readOnly,t.element.className=r.className,t.element.innerHTML=r.html,t.element.title=r.tipLabel,t.content=new e.default({element:document.createElement("div")}),t.content.element.className=r.dialogClassName||"properties";return t.element.addEventListener("click",function(e){void 0===t.getMap().getControls().getArray().find(function(e){return e===t.content})&&t.getMap().addControl(t.content),t.getParent()&&t.getParent().deactivateControls(h(t)),e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation(),t.setActive(!t.getActive()),r.handleClick&&r.handleClick.call(h(t),e))}),t.dialog(t.select.getFeatures().getArray()),t.select.on("select",function(e){t.dialog(t.select.getFeatures().getArray())}),t}return d(a,[{key:"dialog",value:function(e){var t=this;if(0===e.length)this.content.element.innerHTML='<div class="middle">Odaberi objekte na karti</div>';else{this.content.element.classList.remove("middle"),this.content.element.innerHTML="";var n,a=[],o=i(e);try{var l=function(){var e=n.value,t=e.get("layer");t&&(a.find(function(e){return e.layer===t})?a.find(function(e){return e.layer===t}).features.push(e):a.push({layer:t,features:[e]}))};for(o.s();!(n=o.n()).done;)l()}catch(f){o.e(f)}finally{o.f()}var c,u=i(a.entries());try{var s=function(){var e=r(c.value,2),n=e[0],a=e[1],o=document.createElement("div");o.className="layer",o.innerHTML='\n                        <div class="header"><i class="far fa-plus"></i> '.concat(a.layer.get("label")||a.layer.get("name")," (").concat(a.features.length,")</div>\n                    "),t.content.element.appendChild(o);var l=document.createElement("div");l.className="items",0===n?(l.style.display="block",o.querySelector("i").className="far fa-minus"):(l.style.display="none",o.querySelector("i").className="far fa-plus"),o.querySelector("i").addEventListener("click",function(e){var t=e.currentTarget;l.style.display="none"===l.style.display?"block":"none",t.className="none"===l.style.display?"far fa-plus":"far fa-minus"}),o.appendChild(l),t.table(a.layer,a.features,l)};for(u.s();!(c=u.n()).done;)s()}catch(f){u.e(f)}finally{u.f()}}}},{key:"table",value:function(e,t,n){var r=this;if(e.getSource().get("def")){var a,o=[],l=i(t);try{for(l.s();!(a=l.n()).done;){var c,u=a.value,s=i(u.getKeys());try{var f=function(){var t=c.value;if(t!==u.getGeometryName()&&void 0===o.find(function(e){return e.Name===t})){var n=e.getSource().get("def").schema.properties.find(function(e){return e.Name===t});n&&o.push(n),o.length>0&&(o[o.length-1].values=[])}};for(s.s();!(c=s.n()).done;)f()}catch(N){s.e(N)}finally{s.f()}}}catch(N){l.e(N)}finally{l.f()}var d,v=i(t);try{for(v.s();!(d=v.n()).done;){var y,m=d.value,p=i(o);try{for(p.s();!(y=p.n()).done;){var h=y.value;-1===h.values.indexOf(m.get(h.Name))&&h.values.push(m.get(h.Name))}}catch(N){p.e(N)}finally{p.f()}}}catch(N){v.e(N)}finally{v.f()}console.log(o);var g,b=i(o=o.filter(function(e){return!0!==e.Hidden}));try{var E=function(){var e=g.value,t=document.createElement("div"),a=document.createElement("label"),o=document.createElement("input");if(t.className="item",o.className="input",e.Constrains&&!r.readOnly){(o=document.createElement("select")).className="input";var l,c=i(e.Constrains);try{for(c.s();!(l=c.n()).done;){var u=l.value,s=document.createElement("option");s.value=u,s.innerHTML=u,o.appendChild(s)}}catch(N){c.e(N)}finally{c.f()}e.values.length>1&&(o.options[o.options.length]=new Option("*VARIRA*","*VARIRA*"))}switch(a.innerText=e.Label||e.Name,o.value=e.values.length>1?"*VARIRA*":e.values[0],o.id=e.Name,o.disabled=r.readOnly,t.appendChild(a),t.appendChild(o),n.appendChild(t),e.DataType){case"":console.log('dataType: undefined ||null||0||"" for:'+o.id);break;case 1:o.setAttribute("type","checkbox"),o.className="w3-check w3-border input",item.values.length>1?o.indeterminate=!0:o.checked=item.values[0];break;case 3:o.placeholder="YYYY-MM-DD HH:mm:ss",o.addEventListener("focus",function(e){o.oldValue=e.target.value}),o.addEventListener("change",function(e){var t=e.target.value;if(""!=t){var n=moment(t,"YYYY-MM-DD HH:mm:ss");e.target.value=n.isValid()?n.format("YYYY-MM-DD HH:mm:ss"):o.oldValue}});break;case 6:case 7:case 8:o.placeholder="cijeli broj",o.addEventListener("focus",function(e){o.oldValue=e.target.value}),o.addEventListener("change",function(e){e.target.value=isNaN(parseInt(e.target.value,10))?o.oldValue:parseInt(e.target.value,10)});break;case 4:case 5:case 15:o.placeholder="decimalni broj",o.addEventListener("focus",function(e){o.oldValue=e.target.value}),o.addEventListener("change",function(e){e.target.value=isNaN(parseFloat(e.target.value,10))?o.oldValue:parseFloat(e.target.value,10)})}"INPUT"===o.tagName&&o.addEventListener("change",function(e){return r.onChange.call(r,e)}),"SELECT"===o.tagName&&o.addEventListener("change",function(e){return r.onChange.call(r,e)})};for(b.s();!(g=b.n()).done;)E()}catch(N){b.e(N)}finally{b.f()}}}},{key:"setActive",value:function(e){this.getActive()!=e&&(e?(this.content.element.classList.add("active"),this.element.classList.add("active"),this.getParent()&&this.getParent().deactivateControls(this)):(this.content.element.classList.remove("active"),this.element.classList.remove("active")),this.dispatchEvent({type:"change:active",key:"active",oldValue:!e,active:e}))}},{key:"getActive",value:function(){return this.element.classList.contains("active")}},{key:"getParent",value:function(){if(this.get("parent"))return this.get("parent")}}]),a}();exports.default=E;
},{"ol/control/Control":"xxE2"}],"Focm":[function(require,module,exports) {
"use strict";require("ol/ol.css"),require("@fortawesome/fontawesome-pro/css/fontawesome.css"),require("@fortawesome/fontawesome-pro/css/regular.min.css"),require("./src/main.css");var e=g(require("ol/Map")),a=g(require("ol/View")),r=g(require("ol/control/ScaleLine")),t=g(require("ol/control/Rotate")),o=g(require("ol/control/Zoom")),l=g(require("./src/EPSG3765")),s=g(require("./def.json")),i=g(require("./src/container")),n=g(require("./src/defLayers")),c=g(require("./src/defEditor")),d=g(require("./src/geoloc")),m=g(require("./src/select")),u=g(require("./src/legend")),f=g(require("./src/theme")),p=g(require("./src/properties"));function g(e){return e&&e.__esModule?e:{default:e}}null===localStorage.getItem("def")&&localStorage.setItem("def",JSON.stringify(s.default));var w=JSON.parse(localStorage.getItem("def")),q=document.createElement("main");q.className="map",document.body.appendChild(q),window.map=new e.default({target:q,view:new a.default({center:w.center,zoom:w.zoom,projection:new l.default}),controls:[new o.default,new t.default({tipLabel:"Sjever gore"}),new r.default]});var v=new n.default({def:w,map:map});v.addTileLayers(),v.addVectorLayers(),v.addTHLayers();var L=new d.default({map:map,className:"geolocator ol-control",html:'<i class="far fa-map-marker-alt"></i>',tipLabel:"Pokaži moju lokaciju"});map.addControl(L);var N=new m.default({active:!1,className:"select-info"});map.addInteraction(N),N.addInfo(map,{className:"select-info"}),N.addUI(map,{className:"ol-control select",point:{className:"select-point",html:'<i class="far fa-mouse-pointer"></i>',title:"Odaberi objekte"}});var y=new i.default({className:"nav-left ol-control"});map.addControl(y);var h=new u.default({className:"legend-toggle",html:'<i class="far fa-layer-group"></i>',tipLabel:"Legenda & upravljanje kartom",dialogClassName:"legend"});y.addControl(h);var j=h.activeLayerInfo(),C=new f.default({className:"theme-toggle",html:'<i class="far fa-images"></i>',tipLabel:"Tematizacija karte",dialogClassName:"theme",layer:map.getLayers().getArray().find(function(e){return e.get("active")})});y.addControl(C),map.getLayers().on("propertychange",function(e){return C.setLayer(e.target.get("active"))});var S=new p.default({className:"properties-toggle",dialogClassName:"properties",html:'<i class="far fa-info-circle"></i>',tipLabel:"Svojstva",select:N});y.addControl(S);
},{"ol/ol.css":"JiFC","@fortawesome/fontawesome-pro/css/fontawesome.css":"JiFC","@fortawesome/fontawesome-pro/css/regular.min.css":"u7iP","./src/main.css":"JiFC","ol/Map":"kYy5","ol/View":"hNqE","ol/control/ScaleLine":"DK5d","ol/control/Rotate":"sCgw","ol/control/Zoom":"L3CO","./src/EPSG3765":"zOcJ","./def.json":"ErCb","./src/container":"qR3i","./src/defLayers":"TwgZ","./src/defEditor":"zxSe","./src/geoloc":"JDeV","./src/select":"JS4L","./src/legend":"Ins9","./src/theme":"uYXC","./src/properties":"FEmi"}]},{},["Focm"], null)
//# sourceMappingURL=IMAGIS.1121b6bb.js.map